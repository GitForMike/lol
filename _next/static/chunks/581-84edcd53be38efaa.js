(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{43343:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});var r=n(10280);function i(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&r.D5U.assert("complex64"!==e.dtype,()=>`${t} does not support complex64 tensors in the CPU backend.`)})}},50652:function(e,t,n){"use strict";n.d(t,{bk:function(){return a},fC:function(){return o}});var r=n(10280),i=n(43343);function a(e){let t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}let o={kernelName:r.SYM,backendName:"cpu",kernelFunc:e=>{let{x:t}=e.inputs,n=e.backend;(0,i.H)(t,"abs");let o=new Float32Array(r.D5U.sizeFromShape(t.shape));return o=a(n.data.get(t.dataId).values),n.makeOutput(o,t.shape,t.dtype)}}},7152:function(e,t,n){"use strict";n.d(t,{EH:function(){return o},IH:function(){return l},j4:function(){return u}});var r=n(10280),i=n(80438),a=n(98150);let o=(0,i.b)((e,t)=>e+t),s=(0,a.H)((e,t,n,r)=>({real:e+n,imag:t+r})),l=(0,a.j)(r.mm_,o,s),u={kernelName:r.mm_,backendName:"cpu",kernelFunc:l}},91299:function(e,t,n){"use strict";n.d(t,{W:function(){return i},i:function(){return a}});var r=n(10280);function i(e,t,n,i,a){let o=r.D5U.sizeFromShape(i),s=r.D5U.makeZerosTypedArray(a,n);for(let n=0;n<e.length;n++){let r=e[n];if(r<0)throw Error("Input x must be non-negative!");r>=a||(o>0?s[r]+=t[n]:s[r]+=1)}return s}function a(e,t,n,i=!1){let a=e.shape[0],o=e.shape[1],s=(0,r.f3b)([a,n],t.dtype);for(let r=0;r<a;r++)for(let a=0;a<o;a++){let o=e.get(r,a);if(o<0)throw Error("Input x must be non-negative!");o>=n||(i?s.set(1,r,o):t.size>0?s.set(s.get(r,o)+t.get(r,a),r,o):s.set(s.get(r,o)+1,r,o))}return s}},44876:function(e,t,n){"use strict";n.d(t,{T0:function(){return l},nv:function(){return o}});var r=n(10280),i=n(80438),a=n(98150);let o=(0,i.b)((e,t)=>e&t),s=(0,a.j)(r.hCO,o),l={kernelName:r.hCO,backendName:"cpu",kernelFunc:s}},92432:function(e,t,n){"use strict";n.d(t,{Mq:function(){return d},pj:function(){return c},sJ:function(){return u}});var r=n(10280),i=n(80438),a=n(82571),o=n(30926),s=n(36583),l=n(1974);function u(e,t,n,a){if("int32"===a)return[t,"int32",Int32Array.from(e)];if("bool"===a){let a=r.D5U.toTypedArray([0],n),[o,s]=(0,i.b)((e,t)=>e!==t?1:0)(t,[],e,a,"bool");return[s,"bool",o]}throw Error(`Error in Cast: failed to cast ${n} to ${a}`)}function c(e){let{inputs:t,backend:n,attrs:i}=e,{x:d}=t,{dtype:h}=i;if("complex64"===h){if("complex64"===d.dtype)return(0,s.y)({inputs:{x:d},backend:n});let e=(0,a.l)(n,d.shape,d.dtype),t=c({inputs:{x:d},backend:n,attrs:{dtype:"float32"}}),r=(0,o.P)({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===d.dtype){let e=(0,l.k)({inputs:{input:d},backend:n}),t=c({inputs:{x:e},backend:n,attrs:{dtype:h}});return n.disposeIntermediateTensorInfo(e),t}if(!r.D5U.hasEncodingLoss(d.dtype,h)){let e=(0,s.y)({inputs:{x:d},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:h}}let[f,p,g]=u(n.data.get(d.dataId).values,d.shape,d.dtype,h);return n.makeTensorInfo(f,p,g)}let d={kernelName:r.RFZ,backendName:"cpu",kernelFunc:c}},97369:function(e,t,n){"use strict";n.d(t,{__:function(){return o},y2:function(){return l}});var r=n(10280),i=n(63808),a=n(18659);let o=(0,i.a)(e=>Math.ceil(e)),s=(0,a.O)(r.gJX,o),l={kernelName:r.gJX,backendName:"cpu",kernelFunc:s}},30926:function(e,t,n){"use strict";function r(e){let{inputs:t,backend:n}=e,{real:r,imag:i}=t,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(i.shape,"float32",o)},s}n.d(t,{P:function(){return r},z:function(){return i}});let i={kernelName:n(10280).Zz9,backendName:"cpu",kernelFunc:r}},7851:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});var r=n(10280);function i(e,t,n,i){let a=r.D5U.getArrayFromDType(n,r.D5U.sizeFromShape(t));if(i&&"string"!==n){let t=0;e.forEach(e=>{let n=r.D5U.sizeFromShape(e.shape);a.set(e.vals,t),t+=n})}else{let i=0;e.forEach(e=>{let o="string"===n?r.backend_util.fromUint8ToStringArray(e.vals):e.vals,s=0;for(let n=0;n<e.shape[0];++n){let r=n*t[1]+i;for(let t=0;t<e.shape[1];++t)a[r+t]=o[s++]}i+=e.shape[1]})}return a}},10545:function(e,t,n){"use strict";n.d(t,{Dg:function(){return s},Kx:function(){return l},tW:function(){return o}});var r=n(10280),i=n(80438),a=n(98150);let o=(0,i.b)((e,t)=>e===t?1:0),s=(0,a.j)(r.hdR,o,null,"bool"),l={kernelName:r.hdR,backendName:"cpu",kernelFunc:s}},58275:function(e,t,n){"use strict";n.d(t,{Qq:function(){return s},Ro:function(){return o},SX:function(){return l}});var r=n(10280),i=n(63808),a=n(18659);let o=(0,i.a)(e=>Math.exp(e)),s=(0,a.O)(r.NEP,o,"float32"),l={kernelName:r.NEP,backendName:"cpu",kernelFunc:s}},85591:function(e,t,n){"use strict";n.d(t,{OF:function(){return o},Vu:function(){return l}});var r=n(10280),i=n(63808),a=n(18659);let o=(0,i.a)(e=>Math.expm1(e)),s=(0,a.O)(r.Y0y,o),l={kernelName:r.Y0y,backendName:"cpu",kernelFunc:s}},23813:function(e,t,n){"use strict";n.d(t,{Ao:function(){return l},r6:function(){return o}});var r=n(10280),i=n(63808),a=n(18659);let o=(0,i.a)(e=>Math.floor(e)),s=(0,a.O)(r.OR,o),l={kernelName:r.OR,backendName:"cpu",kernelFunc:s}},69169:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var r=n(10280);function i(e,t,n,i,a,o,s,l,u){let c=(0,r.f3b)([i,o],n);for(let n=0;n<i;n++){let r=[],i=0;for(let t=0;t<a;t++){let o=e[n*a+t];i+=o*s[t],r.push(o)}if(i<0||i>=u/o)throw Error(`Invalid indices: ${r} does not index into ${l}`);for(let e=0;e<o;e++)c.values[n*o+e]=t.get(...t.indexToLoc(i*o+e))}return c}},53964:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r=n(10280);function i(e,t,n){let i=(0,r.f3b)(n,e.dtype);for(let n=0;n<i.size;++n){let r=i.indexToLoc(n).slice(),a=r[0],o=r[2],s=t.locToIndex([a,o]);r[2]=t.values[s];let l=e.locToIndex(r);0<=l&&l<e.values.length&&(i.values[n]=e.values[l])}return i}},90054:function(e,t,n){"use strict";n.d(t,{Ce:function(){return l},o:function(){return o}});var r=n(10280),i=n(80438),a=n(98150);let o=(0,i.b)((e,t)=>e>t?1:0),s=(0,a.j)(r.iZT,o,null,"bool"),l={kernelName:r.iZT,backendName:"cpu",kernelFunc:s}},66450:function(e,t,n){"use strict";n.d(t,{HL:function(){return o},V:function(){return l}});var r=n(10280),i=n(80438),a=n(98150);let o=(0,i.b)((e,t)=>e>=t?1:0),s=(0,a.j)(r.Acj,o,null,"bool"),l={kernelName:r.Acj,backendName:"cpu",kernelFunc:s}},36583:function(e,t,n){"use strict";function r(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}n.d(t,{I:function(){return i},y:function(){return r}});let i={kernelName:n(10280).iJz,backendName:"cpu",kernelFunc:r}},94626:function(e,t,n){"use strict";n.d(t,{rO:function(){return o},zh:function(){return l}});var r=n(10280),i=n(80438),a=n(98150);let o=(0,i.b)((e,t)=>e<t?1:0),s=(0,a.j)(r.vtC,o,null,"bool"),l={kernelName:r.vtC,backendName:"cpu",kernelFunc:s}},79776:function(e,t,n){"use strict";n.d(t,{lx:function(){return o},m3:function(){return l}});var r=n(10280),i=n(80438),a=n(98150);let o=(0,i.b)((e,t)=>e<=t?1:0),s=(0,a.j)(r.CAk,o,null,"bool"),l={kernelName:r.CAk,backendName:"cpu",kernelFunc:s}},12950:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(10280);function i(e,t,n){let i=(t-e)/(n-1),a=r.D5U.makeZerosTypedArray(n,"float32");a[0]=e;for(let e=1;e<a.length;e++)a[e]=a[e-1]+i;return a}},90290:function(e,t,n){"use strict";n.d(t,{vX:function(){return o},xM:function(){return l}});var r=n(10280),i=n(63808),a=n(18659);let o=(0,i.a)(e=>Math.log(e)),s=(0,a.O)(r.ZbH,o),l={kernelName:r.ZbH,backendName:"cpu",kernelFunc:s}},42529:function(e,t,n){"use strict";n.d(t,{B:function(){return i}});var r=n(10280);function i(e,t,n,i){let a=r.D5U.getTypedArrayFromDType(i,r.D5U.sizeFromShape(n));for(let n=0;n<a.length;++n){let r=n*t,i=e[r];for(let n=0;n<t;++n){let t=e[r+n];(Number.isNaN(t)||t>i)&&(i=t)}a[n]=i}return a}},34536:function(e,t,n){"use strict";n.d(t,{eJ:function(){return l},wS:function(){return o}});var r=n(10280),i=n(80438),a=n(98150);let o=(0,i.b)((e,t)=>Math.max(e,t)),s=(0,a.j)(r.BMI,o),l={kernelName:r.BMI,backendName:"cpu",kernelFunc:s}},60168:function(e,t,n){"use strict";n.d(t,{u0:function(){return l},vP:function(){return o}});var r=n(10280),i=n(80438),a=n(98150);let o=(0,i.b)((e,t)=>Math.min(e,t)),s=(0,a.j)(r.q8u,o),l={kernelName:r.q8u,backendName:"cpu",kernelFunc:s}},11247:function(e,t,n){"use strict";n.d(t,{$3:function(){return o},Jp:function(){return l},f$:function(){return u}});var r=n(10280),i=n(80438),a=n(98150);let o=(0,i.b)((e,t)=>e*t),s=(0,a.H)((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),l=(0,a.j)(r.wYn,o,s),u={kernelName:r.wYn,backendName:"cpu",kernelFunc:l}},40358:function(e,t,n){"use strict";n.d(t,{AF:function(){return s},uC:function(){return o}});var r=n(10280),i=n(43343),a=n(11247);function o(e,t,n){let i=r.D5U.createScalarValue(-1,n);return(0,a.$3)([],t,i,e,n)}let s={kernelName:r.kuV,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t;(0,i.H)(r,"neg");let[a,s]=o(n.data.get(r.dataId).values,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,a)}}},40298:function(e,t,n){"use strict";n.d(t,{Gj:function(){return o},nP:function(){return l}});var r=n(10280),i=n(80438),a=n(98150);let o=(0,i.b)((e,t)=>e!==t?1:0),s=(0,a.j)(r.yQU,o,null,"bool"),l={kernelName:r.yQU,backendName:"cpu",kernelFunc:s}},18787:function(e,t,n){"use strict";n.d(t,{Iz:function(){return s},Qg:function(){return o}});var r=n(10280),i=n(43343),a=n(76086);function o(e,t,n,i){let[a,o]=r.backend_util.computeOutAndReduceShapes(e,i),s=(0,r.x8V)(t,"int32"),l=r.D5U.makeZerosTypedArray(r.D5U.sizeFromShape(a),s),u=r.D5U.sizeFromShape(o);for(let e=0;e<l.length;++e){let t=e*u,r=1;for(let e=0;e<u;++e)r*=n[t+e];l[e]=r}return{outVals:l,outShape:a,outDtype:s}}let s={kernelName:r.DlI,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:s}=e,{x:l}=t,{axis:u,keepDims:c}=s;(0,i.H)(l,"prod");let d=l.shape.length,h=r.D5U.parseAxisParam(u,l.shape),f=r.backend_util.getAxesPermutation(h,d),p=h,g=l,m=[];null!=f&&(m.push(g=(0,a.p)({inputs:{x:l},backend:n,attrs:{perm:f}})),p=r.backend_util.getInnerMostAxes(p.length,d));let b=n.data.get(g.dataId).values,{outVals:y,outShape:v,outDtype:x}=o(g.shape,g.dtype,b,p),w=v;return c&&(w=r.backend_util.expandShapeToKeepDim(v,h)),m.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(w,x,y)}}},48153:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var r=n(10280);function i(e,t){let n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function a(e,t,n,a,o,s,l,u){if(0===e.length)throw Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw Error("Split tensors must not be scalars");if(!function(e,t,n){e.forEach((e,i)=>{if(e<0||e>=n){let a=r.D5U.indexToLoc(i,t.length,r.D5U.computeStrides(t)).join(",");throw Error(`indices[${a}] = ${e} is not in [0, ${n})`)}})}(s,l,t[0][0]-1),0===a.length)throw Error("params.rank must be nonzero");let{outSplits:c,valueSlices:d,numValues:h}=function(e,t,n,r){let i=[],a=0,o=Array(t.length-1+n.length).fill(null).map(()=>[0]);!function(e,t){for(let n=0;n<e.length;++n){let r=e[n],i=n===e.length-1?t:e[n+1].length;if(0===r.length)throw Error("Ragged splits may not be empty");if(r[0]<0)throw Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw Error("Ragged splits must be sorted in ascending order")}}(n,r);let s=1;for(let e=0;e<t.length-1;++e){s*=t[e];let n=t[e+1];for(let t=1;t<s+1;++t)o[e].push(t*n)}for(let r=0;r<e.length;++r){let s=e[r],l=e[r]+1;for(let e=0;e<n.length;++e){let r=n[e],i=e+t.length-1;if(i>=0){let e=o[i],t=e[e.length-1]-r[s];for(let e=s;e<l;++e)o[i].push(r[e+1]+t)}s=r[s],l=r[l]}l!==s&&(i.push([s,l]),a+=l-s)}return{outSplits:o,valueSlices:i,numValues:a}}(s,l,e,a[0]),f=function(e){let t=[];for(let n=0;n<e.length;++n){let i=e[n].length,a=r.D5U.getArrayFromDType("int32",i);t.push(a),e[n].forEach((e,t)=>a[t]=e)}return t}(c),p=function(e,t,n,a,o){let s=t.slice();s[0]=o;let l=r.D5U.getArrayFromDType(n,r.D5U.sizeFromShape(s)),u=e.length,c=0===u?0:u/t[0];return!function(e,t,n,r,a,o){let s=i(t,2)[1],l=i(o,2)[1],u=0;for(let t of n)for(let n=t[0];n<t[1];++n){for(let t=0;t<r;++t)a[u*l+t]=e[n*s+t];++u}}(e,t,a,c,l,s),[l,s]}(n,a,o,d,h);return[f,p[0],p[1]]}},83230:function(e,t,n){"use strict";n.d(t,{S:function(){return i}});var r=n(10280);function i(e,t,n,i,a,o,s){if(t.length>1)throw Error("starts must be a scalar or vector");if(a.length>1)throw Error("limits must be a scalar or vector");if(s.length>1)throw Error("deltas must be a scalar or vector");let l=0===t.length,u=0===a.length,c=0===s.length,d=[];l||d.push(t[0]),u||d.push(a[0]),c||d.push(s[0]);for(let e=1;e<d.length;++e)if(d[e]!==d[e-1])throw Error("starts, limits, and deltas must have the same shape");let h=0===d.length?1:d[0],f=r.D5U.getArrayFromDType("int32",h+1);f[0]=0;for(let t=0;t<h;++t){let n;let r=l?e[0]:e[t],a=u?i[0]:i[t],s=c?o[0]:o[t];if(0===s)throw Error("Requires delta != 0");if(s>0&&a<r||s<0&&a>r)n=0;else if((n=Math.ceil(Math.abs((a-r)/s)))>2147483647)throw Error("Requires ((limit - start) / delta) <= 2147483647");f[t+1]=f[t]+n}let p=f[h],g=r.D5U.getArrayFromDType(n,p),m=0;for(let t=0;t<h;++t){let n=f[t+1]-f[t],r=l?e[0]:e[t],i=c?o[0]:o[t];for(let e=0;e<n;++e)g[m++]=r,r+=i}return[f,g]}},30792:function(e,t,n){"use strict";n.d(t,{p:function(){return l}});var r=n(10280),i=r.backend_util.RowPartitionType;class a{constructor(e,t,n,i,a,o,s,l,u,c){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=i,this.valuesDType=a,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=r.backend_util.getRowPartitionTypesHelper(c),this.raggedRank=r.backend_util.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===i.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===i.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){let t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case i.VALUE_ROWIDS:return a.getMaxWidthValueRowID(t);case i.ROW_SPLITS:return a.getMaxWidthRowSplit(t);default:throw Error(`Cannot handle partition type ${i[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){let t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){let t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){let t=e.length;if(0===t)return 0;let n=0,r=e[0],i=0;for(let a=1;a<t;++a){let t=e[a];t!==r&&(r=t,i=Math.max(a-n,i),n=a)}return Math.max(t-n,i)}tensorShapeFromTensor(e,t,n=!0){if(0===t.length){if(-1===e[0])return[];throw Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return s(e,n)}calculateOutputSize(e){let t=this.valuesShape,n=this.defaultValueShape;r.backend_util.validateDefaultValueShape(n,t);let i=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=r.backend_util.combineRaggedTensorToTensorShapes(this.raggedRank,i,t);a[0]<0&&(a[0]=e);for(let e=1;e<=this.raggedRank;++e)a[e]<0&&(a[e]=this.getMaxWidth(e));return a}calculateFirstParentOutputIndex(e,t,n){let i=Math.min(e,n),a=[],o=0;for(let e=0;e<i;++e,o+=t)a.push(o);for(let t=i;t<e;++t)a.push(-1);return r.D5U.assert(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,t,n,r){let i=e.length,a=[];for(let o=0;o<i-1;++o){let i=e[o+1]-e[o],s=Math.min(r,i),l=t[o];-1===l&&(s=0);for(let e=0;e<s;++e)a.push(l),l+=n;for(let e=0;e<i-s;++e)a.push(-1)}if(i>0&&a.length!==e[i-1])throw Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,t,n,r){let i=e.length,a=[];if(0===i)return[];let o=0,s=e[0];if(s>=t.length)throw Error(`Got currentValueRowId=${s}, which is not less than ${t.length}`);let l=t[s];a.push(l);for(let u=1;u<i;++u){let i=e[u];if(i===s)l>=0&&(++o<r?l+=n:l=-1);else{if(o=0,s=i,i>=t.length)throw Error(`Got nextValueRowId=${i} which is not less than ${t.length}`);l=t[i]}a.push(l)}if(a.length!==e.length)throw Error("Invalid row ids.");return a}calculateOutputIndex(e,t,n,r){let a=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case i.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case i.ROW_SPLITS:if(a.length-1>t.length)throw Error(`Row partition size is greater than output size: ${a.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw Error(`Unsupported partition type: ${i[o]}`)}}getFirstDimensionSize(){let e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw Error("No row_partition_types given.");let t=this.rowPartitionTypes[0];switch(t){case i.FIRST_DIM_SIZE:return e[0];case i.VALUE_ROWIDS:throw Error("Cannot handle VALUE_ROWIDS in first dimension.");case i.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw Error(`Cannot handle type ${i[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw Error("Invalid first partition input. Tensor requires at least one element.");let e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=Array(this.raggedRank+1);n[n.length-1]=1;for(let e=n.length-2;e>=0;--e)n[e]=n[e+1]*t[e+1];let i=s(t,!1),a=r.D5U.getArrayFromDType(this.valuesDType,r.D5U.sizeFromShape(i));if(n[0]*t[0]>0){let r=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e)r=this.calculateOutputIndex(e-1,r,n[e],t[e]);this.setOutput(this.raggedRank,r,a,i)}return[i,a]}setOutput(e,t,n,i){if(0===n.length)return;let a=this.values,s=i.slice();s=s.slice(e+1);let l=r.D5U.sizeFromShape(s),u=t.length,c=this.defaultValue;if(c.length!==l&&1!==c.length){let e=this.defaultValueShape;(0,r.lub)(()=>{let t=(0,r.XLQ)(c,e);c=(0,r.UFq)(t,s).dataSync()})}let d=0,h=0,f=0;for(let e=0;e<=u;++e){let r=e<u?t[e]:-1;if(r===f){++f;continue}if(h<f){let e=a.subarray(d*l);o(n.subarray(h*l),e,(f-h)*l)}if(e>=u&&(r=Math.floor(n.length/l)),r>f){if(1===this.defaultValue.length)n.subarray(f*l,r*l).fill(this.defaultValue[0]),f=r;else for(;r>f;)o(n.slice(f*l),c,l),++f}r<0?(d=e+1,h=f):(d=e,f=(h=f)+1)}}}function o(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function s(e,t){let n=[];for(let r of e){if(r<0){if(!t)throw Error(`Dimension ${r} must be >= 0`);if(r<-1)throw Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function l(e,t,n,r,i,o,s,l,u,c){return new a(e,t,n,r,i,o,s,l,u,c).compute()}},24971:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(10280);function i(e,t,n,i){let a=e<t&&n<0,o=t<e&&n>1;if(e===t||a||o)return r.D5U.makeZerosTypedArray(0,i);let s=Math.abs(Math.ceil((t-e)/n)),l=r.D5U.makeZerosTypedArray(s,i);t<e&&1===n&&(n=-1),l[0]=e;for(let e=1;e<l.length;e++)l[e]=l[e-1]+n;return l}},1974:function(e,t,n){"use strict";function r(e){let{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}n.d(t,{O:function(){return i},k:function(){return r}});let i={kernelName:n(10280).xJR,backendName:"cpu",kernelFunc:r}},23894:function(e,t,n){"use strict";n.d(t,{FY:function(){return l},zd:function(){return o}});var r=n(10280),i=n(63808),a=n(18659);let o=(0,i.a)(e=>1/Math.sqrt(e)),s=(0,a.O)(r.bV0,o),l={kernelName:r.bV0,backendName:"cpu",kernelFunc:s}},54589:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var r=n(10280);function i(e,t,n,i,a,o,s,l,u,c){let d=e.values,h=t.values;if(0===i)return(0,r.f3b)(n,t.dtype);let f=u instanceof r.YDk?u:(0,r.f3b)([i/a,a],t.dtype);"string"==typeof u?f.values.fill(u):"number"==typeof u?f.values.fill(u):"boolean"==typeof u&&f.values.fill(+u);for(let e=0;e<o;e++){let r=[],o=0;for(let t=0;t<s;t++){let n=d[e*s+t];r.push(n),o+=n*l[t]}if(o<0||o>=i/a)throw Error(`Invalid indices: ${r} does not index into ${n}`);for(let n=0;n<a;n++)c?f.values[o*a+n]+=h[e*a+n]:f.values[o*a+n]=0===t.rank?h[0]:h[e*a+n]}return f}},94559:function(e,t,n){"use strict";n.d(t,{BP:function(){return l},VY:function(){return o},XD:function(){return s}});var r=n(10280),i=n(63808),a=n(18659);let o=(0,i.a)(e=>1/(1+Math.exp(-e))),s=(0,a.A)(r.a5O,e=>1/(1+Math.exp(-e))),l={kernelName:r.a5O,backendName:"cpu",kernelFunc:s}},12092:function(e,t,n){"use strict";n.d(t,{C6:function(){return s},rT:function(){return a},tP:function(){return o}});var r=n(10280),i=n(43343);function a(e,t,n,i,a){let o=r.kuN.isSliceContinous(i,t,n),s=r.D5U.sizeFromShape(n),l=r.D5U.computeStrides(i);if(o){let n=r.kuN.computeFlatOffset(t,l);return"string"===a?e.slice(n,n+s):e.subarray(n,n+s)}let u="string"===a?r.backend_util.fromUint8ToStringArray(e):e,c=(0,r.f3b)(i,a,u),d=(0,r.f3b)(n,a);for(let e=0;e<d.size;++e){let n=d.indexToLoc(e),r=n.map((e,n)=>e+t[n]);d.set(c.get(...r),...n)}return"string"===a?r.backend_util.fromStringArrayToUint8(d.values):d.values}function o(e){let{inputs:t,backend:n,attrs:o}=e,{x:s}=t,{begin:l,size:u}=o;(0,i.H)(s,"slice");let[c,d]=r.kuN.parseSliceParams(s,l,u);r.kuN.assertParamsValid(s,c,d);let h=a(n.data.get(s.dataId).values,c,d,s.shape,s.dtype);return n.makeTensorInfo(d,s.dtype,h)}let s={kernelName:r.p2w,backendName:"cpu",kernelFunc:o}},48560:function(e,t,n){"use strict";n.d(t,{c:function(){return i}});var r=n(10280);function i(e,t,n,i,a,o,s){let l=t[0],u=o[0],c=Array(u),d=Array(l),h=t[1];if(0===u){if(0!==l)throw Error(r.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(l));return[r.D5U.getArrayFromDType(n,0),[0,h],r.D5U.getArrayFromDType(a,0),c,d]}let f=!0,p=0,g=Array(u).fill(0);for(let t=0;t<l;++t){let n=e[t*h];if(n<0)throw Error(r.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(t,n));if(n>=u)throw Error(r.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(t,n,u));++g[n],f=f&&n>=p,p=n}let m=!0;for(let e=0;e<u;++e){let t=0===g[e];c[e]=t,m=m&&!t,g[e]=Math.max(g[e],1),e>0&&(g[e]+=g[e-1])}if(m&&f){for(let e=0;e<l;++e)d[e]=e;return[e,[l,h],i,c,d]}{let t=g[u-1],o=r.D5U.getArrayFromDType(n,t*h),f=r.D5U.getArrayFromDType(a,t),p=Array(u).fill(0);for(let t=0;t<l;++t){let n=e[t*h],r=p[n],a=(0===n?0:g[n-1])+r;p[n]++;for(let n=0;n<h;++n)o[a*h+n]=e[t*h+n];f[a]=i[t],d[t]=a}for(let e=0;e<u;++e)if(0===p[e]){let t=0===e?0:g[e-1];o[t*h+0]=e;for(let e=1;e<h;++e)o[t*h+e]=0;f[t]=s}return[o,[t,h],f,c,d]}}},38668:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(10280);function i(e,t,n,i,a){let o=r.D5U.sizeFromShape(i),s=t[0],l=a.length,u=[],c=1,d=-1;for(let e=0;e<l;++e){let t=a[e];if(-1===t){if(-1!==d)throw Error(r.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(d,e));d=e,u.push(1)}else{if(t<0)throw Error(r.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(e,t));c*=t,u.push(t)}}if(-1!==d){if(c<=0)throw Error(r.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let e=Math.trunc(o/c);if(c*e!==o)throw Error(r.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(i,u));u[d]=e}if(r.D5U.sizeFromShape(u)!==o)throw Error(r.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(i,u));let h=i.length,f=[];if(h>0){f[h-1]=1;for(let e=h-2;e>=0;--e)f[e]=f[e+1]*i[e+1]}let p=[];if(l>0){p[l-1]=1;for(let e=l-2;e>=0;--e)p[e]=p[e+1]*u[e+1]}let g=r.D5U.getArrayFromDType(n,s*l);for(let t=0;t<s;++t){let n=0;for(let r=0;r<h;++r)n+=e[t*h+r]*f[r];for(let e=0;e<l;++e)g[t*l+e]=Math.trunc(n/p[e]),n%=p[e]}return[g,[s,l],u]}},11017:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var r=n(10280);function i(e,t,n,i,a,o=!1,s=0){let l=i.length,u=[t[0],e.length/t[0]],c=u[1],d=l>0?a[l-1]+1:0;if(d<0)throw Error(r.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let h=t.slice();h[0]=d;let f=h.reduce((e,t)=>e*t,1),p=r.D5U.getArrayFromDType(n,f);if(0===l)return d>0&&p.fill(s),[p,h];if(d<=0)throw Error(r.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let g=0,m=1,b=0,y=a[0];for(;;){let t=0;if(m<l){if(y===(t=a[m])){++m;continue}if(y>=t)throw Error(r.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(y<0||y>=d)throw Error(r.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y,d));y>b&&p.fill(s,b*c,y*c);for(let t=g;t<m;++t){let n=i[t];if(n<0||n>=u[0])throw Error(r.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(t,i[t],u[0]));for(let t=0;t<c;t++)p[y*c+t]+=e[n*c+t]}if(o)for(let e=0;e<c;e++)p[y*c+e]/=m-g;if(g=m,++m,b=y+1,y=t,m>l)break}return b<d&&p.fill(s,b*c,d*c),[p,h]}},68747:function(e,t,n){"use strict";n.d(t,{cz:function(){return l},zT:function(){return o}});var r=n(10280),i=n(63808),a=n(18659);let o=(0,i.a)(e=>Math.sqrt(e)),s=(0,a.A)(r.FKq,e=>Math.sqrt(e)),l={kernelName:r.FKq,backendName:"cpu",kernelFunc:s}},66830:function(e,t,n){"use strict";n.d(t,{P:function(){return o},j:function(){return l}});var r=n(10280),i=n(63808),a=n(18659);let o=(0,i.a)((e,t)=>{let{pattern:n,replaceGlobal:r,rewrite:i}=t;return e.replace(new RegExp(n,r?"g":""),i)}),s=(0,a.O)(r.e0R,o),l={kernelName:r.e0R,backendName:"cpu",kernelFunc:s}},67275:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});var r=n(10280);function i(e,t,n,i){let a=(0,r.f3b)(e,t.dtype);for(let e=0;e<a.size;e++){let r=a.indexToLoc(e),o=Array(r.length);for(let e=0;e<o.length;e++)o[e]=r[e]*n[e]+i[e];a.set(t.get(...o),...r)}return a}},37913:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var r=n(10280);class i{constructor(e,t,n,i,a,o){this.separator=r.D5U.encodeString(e),this.nGramWidths=t,this.leftPad=r.D5U.encodeString(n),this.rightPad=r.D5U.encodeString(i),this.padWidth=a,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){return Math.max(0,e+2*this.getPadWidth(t)-t+1)}createNGrams(e,t,n,r,i,a){for(let o=0;o<i;++o){let s;let l=this.getPadWidth(a),u=Math.max(0,l-o),c=Math.max(0,l-(i-(o+1))),d=a-(u+c),h=t+(u>0?0:o-l);s=0+u*this.leftPad.length;for(let t=0;t<d;++t)s+=e[h+t].length;s+=c*this.rightPad.length+(u+c+d-1)*this.separator.length,n[r+o]=new Uint8Array(s);let f=n[r+o],p=0,g=e=>e.forEach(e=>f[p++]=e);for(let e=0;e<u;++e)g(this.leftPad),g(this.separator);for(let t=0;t<d-1;++t)g(e[h+t]),g(this.separator);if(d>0){g(e[h+d-1]);for(let e=0;e<c;++e)g(this.separator),g(this.rightPad)}else{for(let e=0;e<c-1;++e)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,t){let n=e.length,i=t.length;if(i>0){let e=t[0];if(0!==e)throw Error(`First split value must be 0, got ${e}`);for(let r=1;r<i;++r){let i=t[r]>=e;if(!(i=i&&t[r]<=n))throw Error(`Invalid split value ${t[r]}, must be in [${e}, ${n}]`);e=t[r]}if(e!==n)throw Error(`Last split value must be data size. Expected ${n}, got ${e}`)}let a=i-1,o=r.D5U.getArrayFromDType("int32",i);if(0===n||0===i){let e=Array(n);for(let e=0;e<=a;++e)o[e]=0;return[e,o]}o[0]=0;for(let e=1;e<=a;++e){let n=t[e]-t[e-1],r=0;this.nGramWidths.forEach(e=>{r+=this.getNumNGrams(n,e)}),this.preserveShort&&n>0&&0===r&&(r=1),o[e]=o[e-1]+r}let s=Array(o[a]);for(let n=0;n<a;++n){let r=t[n],i=o[n];if(this.nGramWidths.forEach(a=>{let o=t[n+1]-t[n],l=this.getNumNGrams(o,a);this.createNGrams(e,r,s,i,l,a),i+=l}),this.preserveShort&&i===o[n]){let a=t[n+1]-t[n];if(0===a)continue;let o=a+2*this.padWidth;this.createNGrams(e,r,s,i,1,o)}}return[s,o]}}function a(e,t,n,r,a,o,s,l){return new i(n,r,a,o,s,l).compute(e,t)}},64116:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var r=n(10280);function i(e,t,n){let i=e.length,a=[],o=0,s=0,l=Array(i);for(let r=0;r<i;++r){let i=a.length;!function(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){let i=t[0],a=e.indexOf(i);for(;-1!==a;){let t=e.subarray(0,a);n&&0===t.length||r.push(t),a=(e=e.subarray(a+1)).indexOf(i)}n&&0===e.length||r.push(e);return}let i=0;for(let a=0;a<e.length+1;a++)if(a===e.length||-1!==t.indexOf(e[a])){let t=e.subarray(i,a);n&&0===t.length||r.push(t),i=a+1}}(e[r],t,n,a);let u=a.length-i;l[r]=u,o+=u,s=Math.max(s,u)}let u=r.D5U.getArrayFromDType("int32",2*o),c=Array(o),d=[i,s],h=0;for(let e=0;e<i;++e)for(let t=0;t<l[e];++t)u[2*h]=e,u[2*h+1]=t,c[h]=a[h],++h;return[u,c,d]}},76989:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(10280);function i(e,t){let n=r.D5U.getArrayFromDType("int32",e.length);for(let i=0;i<e.length;++i)n[i]=r.D5U.fingerPrint64(e[i]).modulo(t).getLowBitsUnsigned();return n}},52199:function(e,t,n){"use strict";n.d(t,{GR:function(){return u},VY:function(){return o},lu:function(){return l}});var r=n(10280),i=n(80438),a=n(98150);let o=(0,i.b)((e,t)=>e-t),s=(0,a.H)((e,t,n,r)=>({real:e-n,imag:t-r})),l=(0,a.j)(r.Tr8,o,s),u={kernelName:r.Tr8,backendName:"cpu",kernelFunc:l}},20868:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});var r=n(10280);function i(e,t){let n=Array(e.rank);for(let r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];let i=(0,r.f3b)(n,e.dtype);for(let t=0;t<i.values.length;++t){let n=i.indexToLoc(t),r=Array(e.rank);for(let t=0;t<r.length;t++)r[t]=n[t]%e.shape[t];let a=e.locToIndex(r);i.values[t]=e.values[a]}return i}},40005:function(e,t,n){"use strict";n.d(t,{W:function(){return a}});var r=n(10280);let i=(e,t)=>{let n=t.value-e.value;return 0===n?e.index-t.index:n};function a(e,t,n,a,o){let s=t[t.length-1],[l,u]=[e.length/s,s],c=r.D5U.getTypedArrayFromDType(n,l*a),d=r.D5U.getTypedArrayFromDType("int32",l*a);for(let t=0;t<l;t++){let n=t*u,s=e.subarray(n,n+u),l=Array(s.length);s.forEach((e,t)=>l[t]={value:e,index:t}),a<l.length&&(function e(t,n,a=0,o=t.length-1){for(;o>a;){if(o-a>600){let r=o-a+1,i=n-a+1,s=Math.log(r),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(r-l)/r)*Math.sign(i-r/2),c=Math.max(a,Math.floor(n-i*l/r+u)),d=Math.min(o,Math.floor(n+(r-i)*l/r+u));e(t,n,c,d)}let s=t[n],l=a,u=o;for(r.D5U.swap(t,a,n),i(t[o],s)>0&&r.D5U.swap(t,a,o);l<u;){for(r.D5U.swap(t,l,u),l++,u--;0>i(t[l],s);)l+=1;for(;i(t[u],s)>0;)u-=1}0===i(t[a],s)?r.D5U.swap(t,a,u):(u+=1,r.D5U.swap(t,u,o)),u<=n&&(a=u+1),n<=u&&(o=u-1)}}(l,a),l=l.slice(0,a)),o&&l.sort(i);let h=t*a,f=c.subarray(h,h+a),p=d.subarray(h,h+a);for(let e=0;e<a;e++)f[e]=l[e].value,p[e]=l[e].index}let h=t.slice();return h[h.length-1]=a,[(0,r.f3b)(h,n,c),(0,r.f3b)(h,"int32",d)]}},76086:function(e,t,n){"use strict";n.d(t,{b:function(){return s},p:function(){return o}});var r=n(10280),i=n(43343),a=n(26339);function o(e){let{inputs:t,attrs:n,backend:r}=e,{x:o}=t,{perm:s}=n;(0,i.H)(o,"transpose");let l=Array(o.shape.length);for(let e=0;e<l.length;e++)l[e]=o.shape[s[e]];let u=r.data.get(o.dataId).values,c=(0,a.H)(u,o.shape,o.dtype,s,l);return{dataId:r.write(c,l,o.dtype),shape:l,dtype:o.dtype}}let s={kernelName:r.G3Y,backendName:"cpu",kernelFunc:o}},26339:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});var r=n(10280);function i(e,t,n,i,a){let o=t.length,s=r.D5U.sizeFromShape(t),l=r.D5U.computeStrides(t),u=r.D5U.computeStrides(a),c=r.D5U.getTypedArrayFromDType(n,r.D5U.sizeFromShape(a));for(let t=0;t<s;++t){let n=r.D5U.indexToLoc(t,o,l),a=Array(n.length);for(let e=0;e<a.length;e++)a[e]=n[i[e]];c[r.D5U.locToIndex(a,o,u)]=e[t]}return c}},54430:function(e,t,n){"use strict";n.d(t,{S:function(){return i}});var r=n(10280);function i(e,t,n,i){let a=r.D5U.parseAxisParam(t,n)[0],o=[1,n[0],1];for(let e=0;e<a;e++)o[0]*=n[e];o[1]=n[a];for(let e=a+1;e<n.length;e++)o[2]*=n[e];let s=new Map,l=new Int32Array(n[a]),u=new r.YDk(o,i,e),c=[],d=1===o[0]&&1===o[2];for(let t=0;t<n[a];t++){let n;if(d)n=e[t].toString();else{let e=[];for(let n=0;n<o[0];n++)for(let r=0;r<o[2];r++)e.push(u.get(n,t,r));n=e.join(",")}let r=s.get(n);if(null!=r)l[t]=r;else{let e=s.size;s.set(n,e),l[t]=e,c.push(t)}}let h=o.slice();h[1]=s.size;let f=new r.YDk(h,i);c.forEach((e,t)=>{for(let n=0;n<o[0];n++)for(let r=0;r<o[2];r++)f.set(u.get(n,e,r),n,t,r)});let p=n.slice();return p[a]=h[1],{outputValues:f.values,outputShape:p,indices:l}}},80438:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(10280);function i(e){return(t,n,i,a,o)=>{let s=r.backend_util.assertAndGetBroadcastShape(t,n),l=s.length,u=r.D5U.computeStrides(s),c=r.D5U.sizeFromShape(s),d=r.D5U.getTypedArrayFromDType(o,c),h=t.length,f=n.length,p=r.D5U.computeStrides(t),g=r.D5U.computeStrides(n),m=r.backend_util.getBroadcastDims(t,s),b=r.backend_util.getBroadcastDims(n,s);if(m.length+b.length===0)for(let t=0;t<d.length;++t)d[t]=e(i[t%i.length],a[t%a.length]);else for(let t=0;t<d.length;++t){let n=r.D5U.indexToLoc(t,l,u),o=n.slice(-h);m.forEach(e=>o[e]=0);let s=r.D5U.locToIndex(o,h,p),c=n.slice(-f);b.forEach(e=>c[e]=0);let y=r.D5U.locToIndex(c,f,g);d[t]=e(i[s],a[y])}return[d,s]}}},98150:function(e,t,n){"use strict";n.d(t,{H:function(){return l},j:function(){return s}});var r=n(10280),i=n(43343),a=n(92432),o=n(30926);function s(e,t,n,s){return null==n?({inputs:n,backend:a})=>{let{a:o,b:l}=n;(0,i.H)([o,l],e);let u=a.data.get(o.dataId).values,c=a.data.get(l.dataId).values,d="string"===o.dtype?r.backend_util.fromUint8ToStringArray(u):u,h="string"===o.dtype?r.backend_util.fromUint8ToStringArray(c):c,f=s||o.dtype,[p,g]=t(o.shape,l.shape,d,h,f);return a.makeTensorInfo(g,f,p)}:({inputs:e,backend:r})=>{let{a:i,b:l}=e;if("complex64"===i.dtype||"complex64"===l.dtype){let e=(0,a.pj)({inputs:{x:i},backend:r,attrs:{dtype:"complex64"}}),t=r.data.get(e.dataId),s=t.complexTensorInfos.real,u=t.complexTensorInfos.imag,c=r.data.get(s.dataId).values,d=r.data.get(u.dataId).values,h=(0,a.pj)({inputs:{x:l},backend:r,attrs:{dtype:"complex64"}}),f=r.data.get(h.dataId),p=f.complexTensorInfos.real,g=f.complexTensorInfos.imag,m=r.data.get(p.dataId).values,b=r.data.get(g.dataId).values,[y,v,x]=n(i.shape,l.shape,c,d,m,b),w=r.makeTensorInfo(x,"float32",y),k=r.makeTensorInfo(x,"float32",v),E=(0,o.P)({inputs:{real:w,imag:k},backend:r});return r.disposeIntermediateTensorInfo(e),r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(w),r.disposeIntermediateTensorInfo(k),E}{let e=r.data.get(i.dataId).values,n=r.data.get(l.dataId).values,a=s||i.dtype,[o,u]=t(i.shape,l.shape,e,n,a);return r.makeTensorInfo(u,a,o)}}}function l(e){return(t,n,i,a,o,s)=>{let l=r.backend_util.assertAndGetBroadcastShape(t,n),u=r.D5U.sizeFromShape(l),c=l.length,d=r.D5U.computeStrides(l),h=r.D5U.getTypedArrayFromDType("float32",u),f=r.D5U.getTypedArrayFromDType("float32",u),p=r.backend_util.getBroadcastDims(t,l),g=r.backend_util.getBroadcastDims(n,l),m=r.backend_util.mergeRealAndImagArrays(i,a),b=r.backend_util.mergeRealAndImagArrays(o,s),y=t.length,v=r.D5U.computeStrides(t),x=n.length,w=r.D5U.computeStrides(n);if(p.length+g.length===0)for(let t=0;t<h.length;t++){let n=t%m.length,r=t%b.length,i=e(m[2*n],m[2*n+1],b[2*r],b[2*r+1]);h[t]=i.real,f[t]=i.imag}else for(let t=0;t<h.length;t++){let n=r.D5U.indexToLoc(t,c,d),i=n.slice(-y);p.forEach(e=>i[e]=0);let a=r.D5U.locToIndex(i,y,v),o=n.slice(-x);g.forEach(e=>o[e]=0);let s=r.D5U.locToIndex(o,x,w),l=e(m[2*a],m[2*a+1],b[2*s],b[2*s+1]);h[t]=l.real,f[t]=l.imag}return[h,f,l]}}},63808:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});var r=n(10280);function i(e){return(t,n,i)=>{let a=r.D5U.getArrayFromDType(n,t.length);for(let n=0;n<t.length;++n)a[n]=e(t[n],i);return a}}},18659:function(e,t,n){"use strict";n.d(t,{A:function(){return o},O:function(){return s}});var r=n(10280),i=n(43343),a=n(63808);function o(e,t,n){return s(e,(0,a.a)(t),n)}function s(e,t,n){return({inputs:a,attrs:o,backend:s})=>{let l;let{x:u}=a;(0,i.H)(u,e);let c=s.data.get(u.dataId).values;if("string"===u.dtype){if(!Array.isArray(c))throw Error("String tensor's value was not an instance of Array");l=r.backend_util.fromUint8ToStringArray(c)}else l=c;let d=n||u.dtype,h=t(l,d,o);return s.makeTensorInfo(u.shape,d,h)}}},82571:function(e,t,n){"use strict";n.d(t,{l:function(){return function e(t,n,a="float32"){if("complex64"===a){let r=e(t,n,"float32"),a=e(t,n,"float32");return(0,i.P)({inputs:{real:r,imag:a},backend:t})}let o=r.D5U.makeZerosTypedArray(r.D5U.sizeFromShape(n),a);return t.makeTensorInfo(n,a,o)}}});var r=n(10280),i=n(30926)},90756:function(e,t,n){"use strict";n.d(t,{jl:function(){return function e(t,n){if(!(t in i)||null!=n){let e=function(e,t){if(1!==e&&2!==e)throw Error("Cannot get WebGL rendering context, WebGL is disabled.");let n=null==t?function(e){if(!(0,r.OBj)().getBool("IS_SAFARI")&&"undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw Error("Cannot create a canvas in this context")}(e):t;return(n.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete i[e]},!1),(0,r.OBj)().getBool("SOFTWARE_WEBGL_ENABLED")&&(a.failIfMajorPerformanceCaveat=!1),1===e)?n.getContext("webgl",a)||n.getContext("experimental-webgl",a):n.getContext("webgl2",a)}(t,n);if(null===e)return console.log("Could not get context for WebGL version",t),null;i[t]=e}let o=i[t];return null==o||o.isContextLost()?(delete i[t],e(t)):(o.disable(o.DEPTH_TEST),o.disable(o.STENCIL_TEST),o.disable(o.BLEND),o.disable(o.DITHER),o.disable(o.POLYGON_OFFSET_FILL),o.disable(o.SAMPLE_COVERAGE),o.enable(o.SCISSOR_TEST),o.enable(o.CULL_FACE),o.cullFace(o.BACK),i[t])}},nd:function(){return o}});var r=n(10280);let i={},a={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function o(e,t){i[e]=t}},77615:function(e,t,n){"use strict";n.d(t,{_:function(){return s}});var r=n(73821),i=n(70943),a=n(70445),o=n(77275);class s{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=o.m1.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=(0,r.A)();this.outputShape=e,this.enableShapeUniforms=(0,i.C9)(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?a.Kn(["r","c","d"],e):a.RW(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${t.output} = result;
      }
    `}}},17325:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});var r=n(73821),i=n(70943),a=n(70445),o=n(77275);class s{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=o.m1.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=(0,r.A)();this.outputShape=e,this.enableShapeUniforms=(0,i.C9)(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?a.Kn(["r","c","d"],e):a.RW(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${t.output} = result;
      }
    `}}},1206:function(e,t,n){"use strict";n.d(t,{q:function(){return o}});var r=n(73821),i=n(70445),a=n(77275);class o{constructor(e){this.variableNames=["A"],this.outTexUsage=a.v2.DOWNLOAD;let t=(0,r.A)();this.outputShape=e,this.userCode=`
      ${i.ye}

      void main() {
        float x = getAAtOutCoords();
        ${t.output} = encode_float(x);
      }
    `}}},48840:function(e,t,n){"use strict";n.d(t,{d:function(){return o}});var r=n(73821),i=n(70445),a=n(77275);class o{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=a.v2.DOWNLOAD;let t=(0,r.A)();this.outputShape=e,this.userCode=`
      ${i.ye}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${t.output} = encode_float(x);
      }
    `}}},98155:function(e,t,n){"use strict";n.d(t,{F:function(){return s}});var r=n(73821),i=n(70943),a=n(70445);let o={R:0,G:1,B:2,A:3};class s{constructor(e,t=!1,n="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let s=(0,r.A)();this.outputShape=e,this.enableShapeUniforms=(0,i.C9)(this.outputShape.length);let l="result";t&&(l="floor(result * 255. + 0.5)");let u="";for(let e=0;e<n.length;e++){let t=n[e];u+=`
          if(offset == ${e}) {
            result = values[${o[t]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?a.nc():a.ku(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${n.length});

        flatIndex = idiv(flatIndex, ${n.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${u}
        }
        ${s.output} = vec4(${l}, 0., 0., 0.);
      }
    `}}},16545:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(73821),i=n(70943),a=n(70445);class o{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=(0,r.A)();this.outputShape=e,this.enableShapeUniforms=(0,i.C9)(this.outputShape.length);let o="",s="result";t&&(s="floor(result * 255. + 0.5)");for(let t=0;t<=1;t++)for(let r=0;r<=1;r++){let i=2*t+r;o+=`
          localCoords = coords;
          if(localCoords[2] + ${r} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${r};
          if (localCoords[1] + ${t} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${t};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${n.texture2D}(A, uv);

            if (offset == 0) {
              result[${i}] = values[0];
            } else if (offset == 1) {
              result[${i}] = values[1];
            } else if (offset == 2) {
              result[${i}] = values[2];
            } else {
              result[${i}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?a.nc():a.ku(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${n.output} = ${s};
        }
    `}}},32156:function(e,t,n){"use strict";var r=n(10280),i=n(3326);let a=(0,r.OBj)();a.registerFlag("HAS_WEBGL",()=>a.getNumber("WEBGL_VERSION")>0),a.registerFlag("WEBGL_VERSION",()=>(0,i.uH)(2)?2:(0,i.uH)(1)?1:0),a.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),a.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===a.get("WEBGL_VERSION")),a.registerFlag("WEBGL_CPU_FORWARD",()=>!0),a.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),a.registerFlag("WEBGL_PACK",()=>a.getBool("HAS_WEBGL")),a.registerFlag("WEBGL_PACK_NORMALIZATION",()=>a.getBool("WEBGL_PACK")),a.registerFlag("WEBGL_PACK_CLIP",()=>a.getBool("WEBGL_PACK")),a.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>a.getBool("WEBGL_PACK")),a.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>a.getBool("WEBGL_PACK")),a.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>a.getBool("WEBGL_PACK")),a.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>a.getBool("WEBGL_PACK")),a.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>a.getBool("WEBGL_PACK")),a.registerFlag("WEBGL_PACK_REDUCE",()=>a.getBool("WEBGL_PACK")),a.registerFlag("WEBGL_LAZILY_UNPACK",()=>a.getBool("WEBGL_PACK")),a.registerFlag("WEBGL_CONV_IM2COL",()=>a.getBool("WEBGL_PACK")),a.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>a.getBool("WEBGL_PACK")),a.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>(0,i.lo)(a.getNumber("WEBGL_VERSION"))),a.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>(0,i.KP)(a.getNumber("WEBGL_VERSION"))),a.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let e=a.getNumber("WEBGL_VERSION");return 0===e?0:(0,i.nr)(e)}),a.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>a.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!r.C2$.isMobile()),a.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>(0,i.wb)(a.getNumber("WEBGL_VERSION"))),a.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!a.getBool("WEBGL_FORCE_F16_TEXTURES")&&a.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),a.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>(0,i.BH)(a.getNumber("WEBGL_VERSION"))),a.registerFlag("WEBGL_FENCE_API_ENABLED",()=>(0,i.Qd)(a.getNumber("WEBGL_VERSION"))),a.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>a.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),a.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if("number"!=typeof e)throw Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)}),a.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>r.C2$.isMobile()?1:-1,e=>{if("number"!=typeof e)throw Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)}),a.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),a.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),a.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),a.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),a.registerFlag("WEBGL_EXP_CONV",()=>!1),a.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>a.getBool("IS_TEST")),a.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),a.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),a.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1),a.registerFlag("ENGINE_COMPILE_ONLY",()=>!1)},73821:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(10280);function i(){let e,t,n,i,a,o,s,l,u,c;return 2===(0,r.OBj)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",i="in",a="texture",o="outputColor",s="out vec4 outputColor;",l=(0,r.OBj)().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",i="varying",a="texture2D",o="gl_FragColor",s="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:i,texture2D:a,output:o,defineOutput:s,defineSpecialNaN:l,defineSpecialInf:u,defineRound:c}}},37394:function(e,t,n){"use strict";n.d(t,{A:function(){return l}});var r=n(10280),i=n(90756),a=n(28657),o=n(77275),s=n(3326);class l{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let t=(0,r.OBj)().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,(0,i.nd)(t,e)):this.gl=(0,i.jl)(t),e=this.gl,2===(0,r.OBj)().getNumber("WEBGL_VERSION")){let t=e;this.createVertexArray=()=>s.O7(t,()=>t.createVertexArray()),this.bindVertexArray=e=>s.O7(t,()=>t.bindVertexArray(e)),this.deleteVertexArray=e=>s.O7(t,()=>t.deleteVertexArray(e)),this.getVertexArray=()=>s.O7(t,()=>t.getParameter(t.VERTEX_ARRAY_BINDING))}else if(null!=e){let t=e.getExtension("OES_vertex_array_object");if(null==t)throw Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>s.O7(e,()=>t.createVertexArrayOES()),this.bindVertexArray=n=>s.O7(e,()=>t.bindVertexArrayOES(n)),this.deleteVertexArray=n=>s.O7(e,()=>t.deleteVertexArrayOES(n)),this.getVertexArray=()=>s.O7(e,()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES))}let n="WEBGL_color_buffer_float",l="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===(0,r.OBj)().getNumber("WEBGL_VERSION")){let e="OES_texture_half_float";if(this.textureFloatExtension=s.HH(this.gl,"OES_texture_float"),s.y_(this.gl,e))this.textureHalfFloatExtension=s.HH(this.gl,e);else if((0,r.OBj)().get("WEBGL_FORCE_F16_TEXTURES"))throw Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),s.y_(this.gl,l))this.colorBufferHalfFloatExtension=s.HH(this.gl,l);else if((0,r.OBj)().get("WEBGL_FORCE_F16_TEXTURES"))throw Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",s.y_(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else if(s.y_(this.gl,l))this.colorBufferHalfFloatExtension=this.gl.getExtension(l);else throw Error("GL context does not support color renderable floats");this.vertexBuffer=a.Y3(this.gl),this.indexBuffer=a.Hb(this.gl),this.framebuffer=s.d8(this.gl),this.textureConfig=o.Sq(this.gl,this.textureHalfFloatExtension)}get debug(){return(0,r.OBj)().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let e=this.gl;s.O7(e,()=>e.finish()),s.O7(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),s.O7(e,()=>e.deleteFramebuffer(this.framebuffer)),s.O7(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),s.O7(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),s.O7(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),a.T2(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),a.iN(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),a.BQ(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),a.Qr(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),a.Uk(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),a.Cs(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),a.cU(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(s.ax(this.gl,this.framebuffer),this.outputTexture=null),s.O7(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>a.HC(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,i,o){return a.AD(this.gl,e,t,n,r,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return a.ez(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);let r=a.A8(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if((0,r.OBj)().getBool("WEBGL_FENCE_API_ENABLED")){let r=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{let t=e.clientWaitSync(r,0,0);return t===e.ALREADY_SIGNALED||t===e.CONDITION_SATISFIED},t=r}else(0,r.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,(0,r.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>a.P1(this.gl,t,n))}createProgram(e){this.throwIfDisposed();let t=this.gl;null==this.vertexShader&&(this.vertexShader=a.Jj(t));let n=s.HO(t);s.O7(t,()=>t.attachShader(n,this.vertexShader)),s.O7(t,()=>t.attachShader(n,e)),s.aj(t,n);let r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&s.vu(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);let t=this.gl;s.O7(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),a.Hc(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(s.O7(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&s.vu(this.gl,this.program),s.O7(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,n=!0){return(this.throwIfDisposed(),n)?s.XE(this.gl,e,t):s.Hg(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),s.O7(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),s.B(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();let[r,i]=o.qe(t,n);this.setOutputMatrixTextureDriver(e,r,i)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&s.vu(this.gl,this.program),s.cu(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let e=this.gl;this.debug&&(console.assert(this.getVertexArray()===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()),s.O7(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),s.O7(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=s.HH(this.gl,2===(0,r.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===(0,r.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){let e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}let e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===(0,r.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){let e=this.gl,t=this.getQueryTimerExtensionWebGL2();e.endQuery(t.TIME_ELAPSED_EXT);return}let e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await r.D5U.repeatedTry(()=>this.disposed||this.isQueryAvailable(e,(0,r.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,(0,r.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){let t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{let t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){let t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{let t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){let e=function(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){let{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){let n;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||("setTimeoutCustom"in(0,r.OBj)().platform&&(n=(0,r.OBj)().platform.setTimeoutCustom.bind((0,r.OBj)().platform)),r.D5U.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length),()=>0,null,n))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),s.JG(this.gl,e,this.framebuffer),this.debug&&s.cu(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(s.JG(this.gl,this.outputTexture,this.framebuffer),this.debug&&s.cu(this.gl)):s.ax(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);let n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();let r=this.gl;s.JG(r,e,this.framebuffer),this.debug&&s.cu(r),this.outputTexture=e,s.O7(r,()=>r.viewport(0,0,t,n)),s.O7(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),s.O7(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw Error("No GPU program is currently set.")}}},70943:function(e,t,n){"use strict";n.d(t,{C9:function(){return d},IJ:function(){return o},Yv:function(){return s},_s:function(){return u},mi:function(){return c}});var r=n(10280),i=n(89201),a=n(3326);function o(e,t,n,o){let l=n.map((e,n)=>{let r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),u=l.map(e=>e.shapeInfo),c={logicalShape:o.shape,texShape:o.texData.texShape,isUniform:!1,isPacked:o.texData.isPacked,flatOffset:null},d=i.Vm(l,c,t),h=(0,a.xc)(e.gl,d),f=e.createProgram(h);return(0,r.OBj)().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:h,source:d,webGLProgram:f,inShapeInfos:u,outShapeInfo:c,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(f),Object.assign({program:t,fragmentShader:h,source:d,webGLProgram:f,inShapeInfos:u,outShapeInfo:c},s(e,t,f)))}function s(e,t,n){let i,a,o;let s=[],l=[],u=null,c=null;for(let i of(c=e.getUniformLocation(n,"NAN",!1),1===(0,r.OBj)().getNumber("WEBGL_VERSION")&&(u=e.getUniformLocation(n,"INFINITY",!1)),t.variableNames)){let r={name:i,uniform:e.getUniformLocation(n,i,!1),offset:e.getUniformLocation(n,`offset${i}`,!1)};t.enableShapeUniforms&&(r.shape=e.getUniformLocation(n,`${i}Shape`,!1),r.texShape=e.getUniformLocation(n,`${i}TexShape`,!1)),s.push(r)}if(t.enableShapeUniforms&&(i=e.getUniformLocation(n,"outShape",!1),o=e.getUniformLocation(n,"outShapeStrides",!1),a=e.getUniformLocation(n,"outTexShape",!1)),t.customUniforms)for(let r of t.customUniforms)l.push(e.getUniformLocation(n,r.name,!1));return{variablesLocations:s,customUniformLocations:l,infLoc:u,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:a}}function l(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((e,n)=>{let i=e.logicalShape,a=t[n],o=a.shape;if(!r.D5U.arraysEqual(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(e.isUniform&&a.isUniform)return;let s=e.texShape,l=a.isUniform?null:a.texData.texShape;if(!r.D5U.arraysEqual(s,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${s} and ${l} must match`)})}function u(e,t,n,a,o){t.program.enableShapeUniforms||(l(t.inShapeInfos,n),l([t.outShapeInfo],[a]));let s=a.texData.texture,u=a.texData.texShape;a.texData.isPacked?e.setOutputPackedMatrixTexture(s.texture,u[0],u[1]):e.setOutputMatrixTexture(s.texture,u[0],u[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===(0,r.OBj)().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let a=0;a<n.length;++a){let o=n[a],{uniform:s,offset:l,shape:u,texShape:c}=t.variablesLocations[a];if(u){let{uniformShape:n}=i.Tt(t.program.packedInputs,o.shape,o.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(u,new Int32Array(n));break;case 2:e.gl.uniform2iv(u,new Int32Array(n));break;case 3:e.gl.uniform3iv(u,new Int32Array(n));break;case 4:e.gl.uniform4iv(u,new Int32Array(n))}}if(c&&e.gl.uniform2i(c,o.texData.texShape[0],o.texData.texShape[1]),null!=s){if(o.isUniform){if(2>r.D5U.sizeFromShape(o.shape))e.gl.uniform1f(s,o.uniformValues[0]);else{let t=o.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(s,t)}continue}null!=o.texData.slice&&null!=l&&e.gl.uniform1i(l,o.texData.slice.flatOffset),e.setInputMatrixTexture(o.texData.texture.texture,s,a)}}let c=t.outShapeLocation;if(c)switch(a.shape.length){case 1:e.gl.uniform1iv(c,new Int32Array(a.shape));break;case 2:e.gl.uniform2iv(c,new Int32Array(a.shape));break;case 3:e.gl.uniform3iv(c,new Int32Array(a.shape));break;case 4:e.gl.uniform4iv(c,new Int32Array(a.shape))}if(t.outShapeStridesLocation){let n=r.D5U.computeStrides(a.shape);switch(a.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,a.texData.texShape[0],a.texData.texShape[1]),t.program.customUniforms&&o)for(let n=0;n<t.program.customUniforms.length;++n){let r=t.program.customUniforms[n],i=t.customUniformLocations[n],a=o[n];if("float"===r.type)e.gl.uniform1fv(i,a);else if("vec2"===r.type)e.gl.uniform2fv(i,a);else if("vec3"===r.type)e.gl.uniform3fv(i,a);else if("vec4"===r.type)e.gl.uniform4fv(i,a);else if("int"===r.type)e.gl.uniform1iv(i,a);else if("ivec2"===r.type)e.gl.uniform2iv(i,a);else if("ivec3"===r.type)e.gl.uniform3iv(i,a);else if("ivec4"===r.type)e.gl.uniform4iv(i,a);else throw Error(`uniform type ${r.type} is not supported yet.`)}e.executeProgram()}function c(e,t,n){let a="";t.concat(n).forEach(t=>{let o=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){let s=t.texData.texShape,{useSqueezeShape:l,uniformShape:u,keptDims:c}=i.Tt(e.packedInputs,t.shape,s),d="",h="",f="";if(1===u.length&&e.packedInputs){let e=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];d=`${e[0]>1}_${e[1]>1}`}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){let e=r.D5U.computeStrides(u);f=`${e[0]===s[1]}_${e[e.length-1]===s[1]}`}}else h=`${u[0]>1}_${u[1]>1}`;let p=t.shape.length,g=2===u.length&&r.D5U.arraysEqual(t.shape,s),m=1===r.D5U.sizeFromShape(t.shape),b=r.backend_util.getBroadcastDims(t.shape,n.shape),y=!e.packedInputs&&p===n.shape.length&&r.D5U.arraysEqual(s,n.texData.texShape),v=e.packedInputs||u.length>2?"":`${s[0]>1}_${s[1]>1}`;a+=`${p}_${y}_${l?c:""}_${u.length}_${m}_${b}_${g}_${d}_${h}_${f}_${v}_${o}`}else{let e=t.isUniform?"uniform":t.texData.texShape;a+=`${t.shape}_${e}_${o}`}});let o=e.userCode;return e.constructor.name+("_"+a+"_"+o)+`${(0,r.OBj)().getNumber("WEBGL_VERSION")}`}function d(e){return(0,r.OBj)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}},28657:function(e,t,n){"use strict";n.d(t,{A8:function(){return I},AD:function(){return C},BQ:function(){return m},Cs:function(){return x},HC:function(){return T},Hb:function(){return u},Hc:function(){return w},Jj:function(){return s},NQ:function(){return g},P1:function(){return N},Qr:function(){return E},T2:function(){return h},Uk:function(){return k},Y3:function(){return l},cU:function(){return y},ez:function(){return S},gl:function(){return b},hf:function(){return v},iN:function(){return p},m8:function(){return f},q3:function(){return d}});var r=n(10280),i=n(73821),a=n(77275),o=n(3326);function s(e){let t=(0,i.A)(),n=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return o.Jj(e,n)}function l(e){let t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return o.ED(e,t)}function u(e){let t=new Uint16Array([0,1,2,2,1,3]);return o.mZ(e,t)}function c(e,t,n,i,a,s){o.b6(t,n);let l=o.cU(e),u=e.TEXTURE_2D;return o.O7(e,()=>e.bindTexture(u,l)),o.O7(e,()=>e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),o.O7(e,()=>e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),o.O7(e,()=>e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)),o.O7(e,()=>e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)),1===(0,r.OBj)().getNumber("WEBGL_VERSION")?o.O7(e,()=>e.texImage2D(u,0,i,t,n,0,a,s,null)):o.O7(e,()=>e.texStorage2D(u,1,i,t,n)),o.O7(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:l,texShape:[n,t]}}function d(e){return e.internalFormatFloat}function h(e,t,n,r){let[i,o]=a.kk(t,n);return c(e,i,o,d(r),r.textureFormatFloat,e.FLOAT)}function f(e){return e.internalFormatHalfFloat}function p(e,t,n,r){let[i,o]=a.kk(t,n);return c(e,i,o,f(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function g(e){return e.downloadTextureFormat}function m(e,t,n,r){let[i,o]=a.kk(t,n);return c(e,i,o,g(r),e.RGBA,e.UNSIGNED_BYTE)}function b(e){return e.internalFormatPackedFloat}function y(e,t,n,r){let[i,o]=a.qe(t,n);return c(e,i,o,b(r),e.RGBA,e.FLOAT)}function v(e){return e.internalFormatPackedHalfFloat}function x(e,t,n,r){let[i,o]=a.qe(t,n);return c(e,i,o,v(r),e.RGBA,r.textureTypeHalfFloat)}function w(e,t,n){return o.O7(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),o.sb(e,t,"clipSpacePos",n,3,20,0)&&o.sb(e,t,"uv",n,2,20,12)}function k(e,t,n,i,a,s){let l,u,c;o.O7(e,()=>e.bindTexture(e.TEXTURE_2D,t)),a instanceof Uint8Array?(l=new Uint8Array(n*i*4),u=e.UNSIGNED_BYTE,c=e.RGBA):(l=new Float32Array(n*i*4),u=e.FLOAT,c=s.internalFormatPackedFloat),l.set(a),2===(0,r.OBj)().getNumber("WEBGL_VERSION")?o.O7(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,i,e.RGBA,u,l)):o.O7(e,()=>e.texImage2D(e.TEXTURE_2D,0,c,n,i,0,e.RGBA,u,l)),o.O7(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function E(e,t,n){o.O7(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?2===(0,r.OBj)().getNumber("WEBGL_VERSION")?o.O7(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):o.O7(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):2===(0,r.OBj)().getNumber("WEBGL_VERSION")?o.O7(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):o.O7(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),o.O7(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function I(e,t,n,r){let i=e.createBuffer();o.O7(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,i));let a=16*t*n;return o.O7(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)),o.O7(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),o.O7(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),i}function S(e,t,n){let r=new Float32Array(n);return e.bindBuffer(e.PIXEL_PACK_BUFFER,t),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,r),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),r}function T(e,t,n,r){let[i,s]=a.kk(t,n),l=new Uint8Array(a.yb(t*n,4));return o.O7(e,()=>e.readPixels(0,0,i,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,l)),new Float32Array(l.buffer)}function C(e,t,n,r,i,o,s,l){let u=new Float32Array(a.Se(o,s));return e.bindBuffer(e.PIXEL_PACK_BUFFER,t),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,u),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),u}function N(e,t,n){let r=new Float32Array(t*n*4);return o.O7(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}},49539:function(e,t,n){"use strict";n.d(t,{cK:function(){return J},qO:function(){return Z},cx:function(){return ee},XM:function(){return et},cm:function(){return en},pk:function(){return er},n7:function(){return ei},gv:function(){return ea},aX:function(){return eo},tx:function(){return es},MZ:function(){return el},TD:function(){return eu},m$:function(){return ec},ji:function(){return eh},B_:function(){return ed},Rn:function(){return ep},kY:function(){return ef},PQ:function(){return eg},Sd:function(){return em},$O:function(){return eb},nL:function(){return ey},r:function(){return ev},Th:function(){return ex},Bo:function(){return ew},cZ:function(){return ek},Tg:function(){return eE},Qs:function(){return eI},M8:function(){return eS},fy:function(){return eT},hO:function(){return eC},St:function(){return eN},Y1:function(){return eA},UN:function(){return eR},CJ:function(){return eD},nT:function(){return e$},X8:function(){return e_},LS:function(){return eF},AR:function(){return eO},Bk:function(){return eP},F1:function(){return eM},$u:function(){return eL},$j:function(){return eB},A0:function(){return eU},_9:function(){return ez},kI:function(){return eV},KX:function(){return eW},oC:function(){return ej},Fv:function(){return eH},CV:function(){return eK}});var r={};n.r(r),n.d(r,{addImpl:function(){return a.EH},bincountImpl:function(){return o.W},bincountReduceImpl:function(){return o.i},bitwiseAndImpl:function(){return s.nv},castImpl:function(){return l.sJ},ceilImpl:function(){return u.__},concatImpl:function(){return c.j},equalImpl:function(){return d.tW},expImpl:function(){return h.Ro},expm1Impl:function(){return f.OF},floorImpl:function(){return p.r6},gatherNdImpl:function(){return g.m},gatherV2Impl:function(){return m.i},greaterEqualImpl:function(){return y.HL},greaterImpl:function(){return b.o},lessEqualImpl:function(){return x.lx},lessImpl:function(){return v.rO},linSpaceImpl:function(){return w.b},logImpl:function(){return k.vX},maxImpl:function(){return E.B},maximumImpl:function(){return I.wS},minimumImpl:function(){return S.vP},multiplyImpl:function(){return T.$3},negImpl:function(){return C.uC},notEqualImpl:function(){return N.Gj},prodImpl:function(){return A.Qg},raggedGatherImpl:function(){return R.c},raggedRangeImpl:function(){return D.S},raggedTensorToTensorImpl:function(){return $.p},rangeImpl:function(){return _.b},rsqrtImpl:function(){return F.zd},scatterImpl:function(){return O.N},sigmoidImpl:function(){return P.VY},simpleAbsImpl:function(){return i.bk},sliceImpl:function(){return M.rT},sparseFillEmptyRowsImpl:function(){return L.c},sparseReshapeImpl:function(){return B.U},sparseSegmentReductionImpl:function(){return U.V},sqrtImpl:function(){return z.zT},staticRegexReplaceImpl:function(){return V.P},stridedSliceImpl:function(){return W.t},stringNGramsImpl:function(){return j.A},stringSplitImpl:function(){return H.Q},stringToHashBucketFastImpl:function(){return K.h},subImpl:function(){return G.VY},tileImpl:function(){return X.R},topKImpl:function(){return q.W},transposeImpl:function(){return Y.H},uniqueImpl:function(){return Q.S}});var i=n(50652),a=n(7152),o=n(91299),s=n(44876),l=n(92432),u=n(97369),c=n(7851),d=n(10545),h=n(58275),f=n(85591),p=n(23813),g=n(69169),m=n(53964),b=n(90054),y=n(66450),v=n(94626),x=n(79776),w=n(12950),k=n(90290),E=n(42529),I=n(34536),S=n(60168),T=n(11247),C=n(40358),N=n(40298),A=n(18787),R=n(48153),D=n(83230),$=n(30792),_=n(24971),F=n(23894),O=n(54589),P=n(94559),M=n(12092),L=n(48560),B=n(38668),U=n(11017),z=n(68747),V=n(66830),W=n(67275),j=n(37913),H=n(64116),K=n(76989),G=n(52199),X=n(20868),q=n(40005),Y=n(26339),Q=n(54430);let{addImpl:J,bincountImpl:Z,bincountReduceImpl:ee,bitwiseAndImpl:et,castImpl:en,ceilImpl:er,concatImpl:ei,equalImpl:ea,expImpl:eo,expm1Impl:es,floorImpl:el,gatherNdImpl:eu,gatherV2Impl:ec,greaterImpl:ed,greaterEqualImpl:eh,lessImpl:ef,lessEqualImpl:ep,linSpaceImpl:eg,logImpl:em,maxImpl:eb,maximumImpl:ey,minimumImpl:ev,multiplyImpl:ex,negImpl:ew,notEqualImpl:ek,prodImpl:eE,raggedGatherImpl:eI,raggedRangeImpl:eS,raggedTensorToTensorImpl:eT,rangeImpl:eC,rsqrtImpl:eN,scatterImpl:eA,sigmoidImpl:eR,simpleAbsImpl:eD,sliceImpl:e$,sparseFillEmptyRowsImpl:e_,sparseReshapeImpl:eF,sparseSegmentReductionImpl:eO,sqrtImpl:eP,staticRegexReplaceImpl:eM,stridedSliceImpl:eL,stringNGramsImpl:eB,stringSplitImpl:eU,stringToHashBucketFastImpl:ez,subImpl:eV,tileImpl:eW,topKImpl:ej,transposeImpl:eH,uniqueImpl:eK}=r},33525:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(70943),i=n(30688),a=n(89201);class o{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=(0,r.C9)(this.outputShape.length),0===this.rank)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let e=(0,i.Ky)("rc",this.rank),t=(0,a.kW)(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),o=this.getOutput(e);this.userCode=`
        void main() {
          ${t} rc = getOutputCoords();

          if(${n}) {
            setOutput(vec4(0));
          } else {
            ${r}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){let t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let i=`${0===n?"r":"rp1"}, ${0===r?"c":"cp1"}`;for(let t=2;t<this.rank;t++)i=`${e[e.length-1-t]},`+i;t.push(i)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let n=this.rank-2;n<this.rank;n++)t+=`${e[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";let t=e.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${t[0]};
      int c = ${t[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${n};
      bool rEdge = rp1 >= ${r};
    `}getOutput(e){let t=this.getSourceCoordsArr(e);if(1===this.rank){let e=this.enableShapeUniforms?"outShape":this.outputShape[0];return`getA(rc), (rc + 1 >= ${e} ? 0. : getA(rc + 1)), 0, 0`}return`getA(${t[0]}),
            cEdge ? 0. : getA(${t[1]}),
            rEdge ? 0. : getA(${t[2]}),
            rEdge || cEdge ? 0. : getA(${t[3]})`}}},30688:function(e,t,n){"use strict";function r(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>`${e}.${t}`)}function i(e,t){return 1===t?[e]:r(e,t)}function a(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}n.d(t,{Ky:function(){return i},Qc:function(){return a},k6:function(){return r}})},1811:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var r=n(70943),i=n(70445);class a{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=(0,r.C9)(this.outputShape.length);let n="";for(let e=0;e<4;e++){let t="thisRC = rc;";e%2==1&&(t+="thisRC.z += 1;"),e>1&&(t+="thisRC.y += 1;"),n+=`
        ${t}
        ${e>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${e}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${e>0?"}":""}
      `}this.userCode=`
      ${function(e,t){let n=t?i.al(["r","c","d"],"inputShape"):i.RW(["r","c","d"],e);return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${n}
      return ivec3(r, c, d);
    }
  `}(t,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?i.nc():i.ku(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${n}

        setOutput(result);
      }
    `}}},70445:function(e,t,n){"use strict";n.d(t,{Kn:function(){return a},RW:function(){return i},al:function(){return o},ku:function(){return s},nc:function(){return l},ye:function(){return u}});var r=n(10280);function i(e,t,n="index"){let i=r.D5U.computeStrides(t);return i.map((t,r)=>{let a=`int ${e[r]} = ${n} / ${t}`,o=r===i.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * ${t}`:`index -= ${e[r]} * ${t}`;return`${a}; ${o};`}).join("")}function a(e,t,n="index"){let i=r.D5U.computeStrides(t);return i.map((t,r)=>{let a=`int ${e[r]} = ${n} / outShapeStrides[${r}]`,o=r===i.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * outShapeStrides[${r}]`:`index -= ${e[r]} * outShapeStrides[${r}]`;return`${a}; ${o};`}).join("")}function o(e,t,n="index"){let r=function(e,t){let n=e.length,r=e.map(e=>`${t}[${e}]`),i=Array(n-1);i[n-2]=r[n-1];for(let e=n-3;e>=0;--e)i[e]=`(${i[e+1]} * ${r[e+1]})`;return i}(e.map((e,t)=>t),t);return r.map((t,i)=>{let a=`int ${e[i]} = ${n} / ${r[i]}`,o=i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * ${r[i]}`:`index -= ${e[i]} * ${r[i]}`;return`${a}; ${o};`}).join("")}function s(e){let t=r.D5U.computeStrides(e).map(e=>e.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function l(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}let u=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`},77275:function(e,t,n){"use strict";n.d(t,{Se:function(){return p},Sq:function(){return g},V9:function(){return l},Yz:function(){return h},kk:function(){return c},m1:function(){return o},qe:function(){return f},v2:function(){return s},yb:function(){return d}});var r,i,a,o,s,l,u=n(10280);function c(e,t){return[t,e]}function d(e,t){return e*t}function h(e){let t=u.D5U.sizeFromShape(e);return u.D5U.sizeToSquarishShape(Math.ceil(t/4))}function f(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function p(e,t){let[n,r]=f(e,t);return n*r*4}function g(e,t){let n,r,i,a,o,s,l,c,d,h;return 2===(0,u.OBj)().getNumber("WEBGL_VERSION")?(n=e.R32F,r=e.R16F,i=e.RGBA16F,a=e.RGBA32F,o=e.RED,l=4,c=1,d=e.HALF_FLOAT,h=e.FLOAT,s=e.RGBA8):(n=e.RGBA,r=e.RGBA,i=e.RGBA,a=e.RGBA,o=e.RGBA,l=4,c=4,d=null!=t?t.HALF_FLOAT_OES:null,h=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:h}}(r=o||(o={}))[r.DENSE=0]="DENSE",r[r.SHARED_BATCH=1]="SHARED_BATCH",(i=s||(s={}))[i.RENDER=0]="RENDER",i[i.UPLOAD=1]="UPLOAD",i[i.PIXELS=2]="PIXELS",i[i.DOWNLOAD=3]="DOWNLOAD",(a=l||(l={}))[a.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",a[a.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",a[a.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",a[a.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",a[a.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"},92541:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(10280),i=n(28657),a=n(77275);class o{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){let r;let i=l(t,n),o=u(e,i,n);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);let c=s(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=c,this.log();let e=this.freeTextures[o].pop();return this.usedTextures[o].push(e),e}return i===a.V9.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===a.V9.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===a.V9.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===a.V9.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===a.V9.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(r),this.numUsedTextures++,this._numBytesAllocated+=c,this.log(),r}releaseTexture(e,t,n,i){if(null==this.freeTextures)return;let a=l(n,i),o=u(t,a,i);o in this.freeTextures||(this.freeTextures[o]=[]);let c=s(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,i),d=(0,r.OBj)().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==d&&this._numBytesAllocated>d?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=c):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=c),this.numUsedTextures--;let h=this.usedTextures[o],f=h&&h.indexOf(e);if(null==f||f<0)throw Error("Cannot release a texture that was never provided by this texture manager");h[f]=h[h.length-1],h.pop(),this.log()}log(){if(!this.logEnabled)return;let e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);let t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(let e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(let e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function s(e,t,n,r,o){let s;let l=function(e,t){switch(e){case a.V9.PACKED_2X2_FLOAT32:return(0,i.gl)(t);case a.V9.PACKED_2X2_FLOAT16:return(0,i.hf)(t);case a.V9.UNPACKED_FLOAT32:return(0,i.q3)(t);case a.V9.UNPACKED_FLOAT16:return(0,i.m8)(t);case a.V9.PACKED_4X1_UNSIGNED_BYTE:return(0,i.NQ)(t);default:throw Error(`Unknown physical texture type ${e}`)}}(t,r);if(o){let[t,n]=(0,a.qe)(e[0],e[1]);s=t*n}else{let[t,n]=(0,a.kk)(e[0],e[1]);s=t*n}return s*function(e,t){if(t===e.R32F)return 4;if(t===e.R16F)return 2;if(t===e.RGBA32F||t===e.RGBA)return 16;if(t===e.RGBA16F)return 8;if(t===e.RGBA8)return 4;throw Error(`Unknown internal format ${t}`)}(n,l)}function l(e,t){if(e===a.v2.UPLOAD)return a.V9.PACKED_2X2_FLOAT32;if(e===a.v2.RENDER||null==e)return(0,r.OBj)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?a.V9.PACKED_2X2_FLOAT32:a.V9.UNPACKED_FLOAT32:t?a.V9.PACKED_2X2_FLOAT16:a.V9.UNPACKED_FLOAT16;if(e===a.v2.DOWNLOAD||e===a.v2.PIXELS)return a.V9.PACKED_4X1_UNSIGNED_BYTE;throw Error(`Unknown logical texture type ${e}`)}function u(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}},35626:function(e,t,n){"use strict";n.d(t,{Cv:function(){return l},D1:function(){return a},Et:function(){return s},RX:function(){return u},Tq:function(){return h},bl:function(){return d},eW:function(){return c},l:function(){return i},t$:function(){return o}});var r=n(70943);class i{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=(0,r.C9)(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${t}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}let a="if (isnan(x)) return x;",o="return x;",s="return abs(x);",l="return (x >= 0.0) ? x : (exp(x) - 1.0);",u=a+`
  return (x < 0.0) ? 0.0 : x;
`,c=a+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,d="return x;",h="return 1.0 / (1.0 + exp(-1.0 * x));"},85243:function(e,t,n){"use strict";n.d(t,{Cv:function(){return a},RX:function(){return o},Tq:function(){return l},cc:function(){return u},eW:function(){return s},t$:function(){return i}});var r=n(70943);let i="return x;",a=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,o=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,s=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,l="return 1.0 / (1.0 + exp(-1.0 * x));";class u{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=(0,r.C9)(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${t}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}},33375:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var r=n(70943),i=n(30688),a=n(89201);class o{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=(0,r.C9)(this.outputShape.length);let t=e.length,n=(0,i.Ky)("rc",t),o=(0,a.kW)(t),s=(0,i.Qc)(t,n),l=n.slice(-2),u=t<=1?"rc":`vec2(${l.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${u}));
      }
    `}}},3326:function(e,t,n){"use strict";let r,i;n.d(t,{B:function(){return T},BH:function(){return V},Cp:function(){return D},ED:function(){return y},HH:function(){return c},HO:function(){return g},HS:function(){return H},Hg:function(){return S},JG:function(){return C},Jj:function(){return d},KP:function(){return M},O7:function(){return l},Qd:function(){return j},W8:function(){return $},XE:function(){return I},Yf:function(){return F},aj:function(){return m},ax:function(){return N},b6:function(){return w},cU:function(){return x},cu:function(){return A},d8:function(){return k},ih:function(){return _},lo:function(){return P},mZ:function(){return v},nr:function(){return L},oT:function(){return O},qF:function(){return u},sb:function(){return E},uH:function(){return U},vu:function(){return b},w4:function(){return p},wb:function(){return z},xc:function(){return h},y_:function(){return B}});var a=n(10280),o=n(90756),s=n(77275);function l(e,t){let n=t();return(0,a.OBj)().getBool("DEBUG")&&function(e){let t=e.getError();if(t!==e.NO_ERROR)throw Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}(e,t))}(e),n}function u(e){return!!((0,a.OBj)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||596e-10<Math.abs(e)&&65504>Math.abs(e))}function c(e,t){return R(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function d(e,t){let n=R(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(l(e,()=>e.shaderSource(n,t)),l(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),Error("Failed to compile vertex shader.");return n}function h(e,t){let n=R(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(l(e,()=>e.shaderSource(n,t)),l(e,()=>e.compileShader(n)),(0,a.OBj)().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw p(t,e.getShaderInfoLog(n)),Error("Failed to compile fragment shader.");return n}let f=/ERROR: [0-9]+:([0-9]+):/g;function p(e,t){let n=f.exec(t);if(null==n){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}let r=+n[1],i=e.split("\n"),o=i.length.toString().length+2,s=i.map((e,t)=>a.D5U.rightPad((t+1).toString(),o)+e),l=0;for(let e=0;e<s.length;e++)l=Math.max(s[e].length,l);let u=s.slice(0,r-1),c=s.slice(r-1,r),d=s.slice(r);console.log(u.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${a.D5U.rightPad(c[0],l)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}function g(e){return R(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function m(e,t){if(l(e,()=>e.linkProgram(t)),!(0,a.OBj)().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),Error("Failed to link vertex and fragment shaders.")}function b(e,t){if(l(e,()=>e.validateProgram(t)),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),Error("Shader program validation failed.")}function y(e,t){let n=R(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return l(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),l(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function v(e,t){let n=R(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return l(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),l(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function x(e){return R(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function w(e,t){let n=(0,a.OBj)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw Error(`Requested texture size [${e}x${t}] is invalid.`);if(e>n||t>n)throw Error(`Requested texture size [${e}x${t}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}function k(e){return R(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function E(e,t,n,r,i,a,o){let s=e.getAttribLocation(t,n);return -1!==s&&(l(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),l(e,()=>e.vertexAttribPointer(s,i,e.FLOAT,!1,a,o)),l(e,()=>e.enableVertexAttribArray(s)),!0)}function I(e,t,n){return R(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function S(e,t,n){return e.getUniformLocation(t,n)}function T(e,t,n,r){l(e,()=>{(function(e,t){let n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){let e=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw Error(`textureUnit must be in ${e}.`)}})(e,r),l(e,()=>e.activeTexture(e.TEXTURE0+r)),l(e,()=>e.bindTexture(e.TEXTURE_2D,t))}),l(e,()=>e.uniform1i(n,r))}function C(e,t,n){l(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),l(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function N(e,t){l(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),l(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function A(e){let t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}(e,t))}function R(e,t,n){let r=l(e,()=>t());if(null==r)throw Error(n);return r}function D(e,t=2){return a.D5U.sizeFromShape(e.slice(0,e.length-t))}function $(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function _(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[D(e),...$(e)]),t}function F(e,t=!1){let n=(0,a.OBj)().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=(0,a.OBj)().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&(0,a.OBj)().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map((t,n)=>n>=e.length-2?a.D5U.nearestLargerEven(e[n]):e[n])).length&&(e=[2,e[0]])),2!==e.length&&(e=a.D5U.squeezeShape(e).newShape);let i=a.D5U.sizeFromShape(e),o=null;e.length<=1&&i<=n?o=[1,i]:2===e.length&&e[0]<=n&&e[1]<=n?o=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);let s=null!=o&&Math.max(...o)>r&&Math.min(...o)<=(t?2:1)&&Math.min(...o)>0;if(null==o||s){if(t){let t=D(e),n=2,r=2;e.length&&([n,r]=$(e)),i=n/2*t*(r/2),o=a.D5U.sizeToSquarishShape(i).map(e=>2*e)}else o=a.D5U.sizeToSquarishShape(i)}return o}function O(e,t){if(e=e.slice(-2),t=t.slice(-2),a.D5U.arraysEqual(e,t)||!e.length||!t.length||0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){let n=e[e.length-1],r=t[t.length-1];if(n===r||n%2==0&&r%2==0&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&e[0]%2==0&&t[0]%2==0}function P(e){if(null==r){let t=(0,o.jl)(e);r=t.getParameter(t.MAX_TEXTURE_SIZE)}return r}function M(e){if(null==i){let t=(0,o.jl)(e);i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,i)}function L(e){if(0===e)return 0;let t=(0,o.jl)(e);return B(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:B(t,"EXT_disjoint_timer_query")?1:0}function B(e,t){return null!=e.getExtension(t)}function U(e){try{let t=(0,o.jl)(e);if(null!=t)return!0}catch(e){console.log("Error when getting WebGL context: ",e)}return!1}function z(e){if(0===e)return!1;let t=(0,o.jl)(e);if(1===e){if(!B(t,"OES_texture_float"))return!1}else if(!B(t,"EXT_color_buffer_float"))return!1;return W(t)}function V(e){if(0===e)return!1;let t=(0,o.jl)(e);if(1===e){if(!B(t,"OES_texture_float")||!B(t,"WEBGL_color_buffer_float"))return!1}else{if(B(t,"EXT_color_buffer_float"))return W(t);let e="EXT_color_buffer_half_float";if(B(t,e)){let n=t.getExtension(e);return function(e,t){let n=(0,s.Sq)(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);let i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);let a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),a}(t,n)}return!1}return W(t)}function W(e){let t=(0,s.Sq)(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);let r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);let i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function j(e){return 2===e&&null!=(0,o.jl)(e).fenceSync}function H(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&a.D5U.assert("complex64"!==e.dtype,()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}},62975:function(e,t,n){"use strict";n.d(t,{JL:function(){return r},Zu:function(){return i}});class r{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class i{refCount(e){return a("refCount")}incRef(e){return a("incRef")}timerAvailable(){return!0}time(e){return a("time")}read(e){return a("read")}readSync(e){return a("readSync")}readToGPU(e,t){return a("readToGPU")}numDataIds(){return a("numDataIds")}disposeData(e,t){return a("disposeData")}write(e,t,n){return a("write")}move(e,t,n,r,i){return a("move")}createTensorFromGPUData(e,t,n){return a("createTensorFromGPUData")}memory(){return a("memory")}floatPrecision(){return a("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return a("dispose")}}function a(e){throw Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}},49681:function(e,t,n){"use strict";n.d(t,{BV:function(){return v},wv:function(){return y}});var r=n(62975),i=n(6472),a=n(95490),o=n(35047),s=n(29922),l=n(67177),u=n(32904),c=n(2771);class d{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new h)}profileKernel(e,t,n){let r,a;let o=()=>{r=n()},s=u.now();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{for(let e of(o(),r))e.dataSync();a=Promise.resolve({kernelMs:u.now()-s})}if((0,i.OB)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let t=0;t<r.length;t++){let n=r[t];n.data().then(t=>{!function(e,t,n){if("float32"===t)for(let t=0;t<e.length;t++){let r=e[t];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${n}'`),!0}}(t,n.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:a.then(e=>e.kernelMs),extraInfo:a.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:t,outputs:n,timeMs:r,inputs:i,extraInfo:a}=e;n.forEach(e=>{Promise.all([e.data(),r,a]).then(n=>{this.logger.logKernelProfile(t,e,n[0],n[1],i,n[2])})})}}class h{logKernelProfile(e,t,n,r,i,a){let o="number"==typeof r?c.oj(`${r}ms`,9):r.error,s=c.oj(e,25),l=t.rank,u=t.size,d=c.oj(t.shape.toString(),14),h="";for(let e in i){let n=i[e];if(null!=n){let r=n.shape||t.shape,i=r.length;h+=`${e}: ${i}D ${i>0?r:""} `}}console.log(`%c${s}	%c${o}	%c${l}D ${d}	%c${u}	%c${h}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}var f=n(86150),p=n(45420);function g(e){return null!=e.kernelName}class m{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}}class b{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new m}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t];if(await this.initializeBackend(n).success){await this.setBackend(n);return}}throw Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){let{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{let{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(l.Z(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;let{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new d(this.backendInstance),!0}setupRegisteredKernels(){(0,s.tr)(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){(0,s.tr)(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(e){let t=this.registryFactory[e];if(null==t)throw Error(`Cannot initialize backend ${e}, no registration found.`);try{let n=t.factory();if(!n||n instanceof r.Zu||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{let t=++this.pendingBackendInitId,r=n.then(n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0)).catch(n=>!(t<this.pendingBackendInitId)&&(this.pendingBackendInit=null,l.Z(`Initialization of backend ${e} failed`),l.Z(n.stack||n.message),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(t){return l.Z(`Initialization of backend ${e} failed`),l.Z(t.stack||t.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){let n=this.state.tensorInfo.get(t),r=n.backend,i=this.readSync(t),a=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,i,n.shape,n.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!=typeof e)throw Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>((n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(e,t,n){e();try{let e=n();return t(),e}catch(e){throw t(),e}}nextTensorId(){return b.nextTensorId++}nextVariableId(){return b.nextVariableId++}clone(e){let t=v.runKernel(o.iJz,{x:e});return this.addTapeNode(this.state.activeScope.name,{x:e},[t],e=>({x:()=>v.runKernel(o.RFZ,{x:e},{dtype:"float32"})}),[],{}),t}runKernel(e,t,n){if(null==this.backendName&&this.backend,!(null!=(0,s.pI)(e,this.backendName)))throw Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){let r=this.backend.numDataIds(),i=0;n.forEach(e=>{i+="complex64"===e.dtype?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-i-a;if(o>0)throw Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let t,n,r,i;let a=[],o=this.isTapeOn(),l=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;let d=g(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(g(e)){let{kernelName:t,inputs:i,attrs:l}=e;null==this.backendName&&this.backend;let u=(0,s.pI)(t,this.backendName);c.hu(null!=u,()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`),n=()=>{let e=this.backend.numDataIds(),n=Array.isArray(r=u.kernelFunc({inputs:i,attrs:l,backend:this.backend}))?r:[r];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,n);let s=n.map(e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e));if(o){let e=this.getTensorsForGradient(t,i,s);a=this.saveTensorsForBackwardMode(e)}return s}}else{let{forwardFunc:t}=e,i=e=>{o&&(a=e.map(e=>this.keep(this.clone(e))))};n=()=>{let e=this.backend.numDataIds(),n=Array.isArray(r=this.tidy(()=>t(this.backend,i)))?r:[r];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(d,e,n),n}}let{inputs:h,attrs:f}=e,p=g(e)?null:e.backwardsFunc;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(i=this.profiler.profileKernel(d,h,()=>n()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(i),t=i.outputs):t=n()}),o&&this.addTapeNode(d,h,t,p,a,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:d,bytesAdded:this.state.numBytes-l,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(h).map(e=>null!=h[e]?h[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:i.timeMs,extraInfo:i.extraInfo}),Array.isArray(r)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,n){let r=(0,s.uk)(e);if(null!=r){let e;let i=r.inputsToSave||[],a=r.outputsToSave||[];r.saveAllInputs?(c.hu(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),e=Object.keys(t).map(e=>t[e])):e=i.map(e=>t[e]);let o=n.filter((e,t)=>a[t]);return e.concat(o)}return[]}makeTensor(e,t,n,r){if(null==e)throw Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let i=e;"string"===n&&c.HD(e[0])&&(i=e.map(e=>u.encodeString(e)));let a=r.write(i,t,n),o=new f.es(t,n,a,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){let e=this.state.tensorInfo.get(a),t=(0,c.Ub)(i);this.state.numBytes+=t-e.bytes,e.bytes=t}return o}makeTensorFromDataId(e,t,n,r){let i={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(i,r)}makeTensorFromTensorInfo(e,t){let{dataId:n,shape:r,dtype:i}=e,a=new f.es(r,i,n,this.nextTensorId());return this.trackTensor(a,t),a}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));let i=new f._w(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*c.bT(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof f._w||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){let t=e.size*c.bT(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;let t=this.state.numBytes,n=this.state.numTensors;for(let r of(this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,this.state.activeProfile.kernels))r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,i,a){let o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:i},l=(0,s.uk)(e);null!=l&&(r=l.gradFunc),null!=r&&(o.gradient=e=>(e=e.map((e,t)=>{if(null==e){let e=n[t],r=c.wT(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e}),r(e.length>1?e:e[0],i,a))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){let t=(0,p.getTensorsInContainer)(e),n=new Set(t.map(e=>e.id));for(let e=0;e<this.state.activeScope.track.length;e++){let t=this.state.activeScope.track[e];t.kept||n.has(t.id)||t.dispose()}let r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==r.id||this.track(e)})}gradients(e,t,n,r=!1){if(c.hu(t.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);let i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));c.hu(i instanceof f.es,()=>"The result y returned by f() must be a tensor.");let a=function(e,t,n){let r={},i={};for(let e=0;e<t.length;e++)r[t[e].id]=!0;for(let n=0;n<e.length;n++){let a=e[n],o=a.inputs;for(let e in o){let n=o[e],s=!1;for(let e=0;e<t.length;e++)if(r[n.id]){a.outputs.forEach(e=>r[e.id]=!0),s=!0,i[a.id]=!0;break}if(s)break}}let a={};a[n.id]=!0;let o={};for(let t=e.length-1;t>=0;t--){let n=e[t],r=n.inputs;for(let e=0;e<n.outputs.length;e++)if(a[n.outputs[e].id]){for(let e in r)a[r[e].id]=!0,o[n.id]=!0;break}}let s=[];for(let t=0;t<e.length;t++){let n=e[t];if(i[n.id]&&o[n.id]){let e={};for(let t in n.inputs){let i=n.inputs[t];r[i.id]&&(e[t]=i)}let t=Object.assign({},n);t.inputs=e,t.outputs=n.outputs,s.push(t)}}return s}(this.state.activeTape,t,i);if(!r&&0===a.length&&t.length>0)throw Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let e={};e[i.id]=null==n?function(e){let t=(0,c.p8)((0,c.NA)(e),"float32");return v.makeTensor(t,e,"float32")}(i.shape):n,function(e,t,n,r){for(let i=t.length-1;i>=0;i--){let a=t[i],o=[];if(a.outputs.forEach(t=>{let n=e[t.id];null!=n?o.push(n):o.push(null)}),null==a.gradient)throw Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);let s=a.gradient(o);for(let t in a.inputs){if(!(t in s))throw Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(s)}.`);let i=n(()=>s[t]());if("float32"!==i.dtype)throw Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${i.dtype}'`);let o=a.inputs[t];if(!c.cO(i.shape,o.shape))throw Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${t}' has shape '${i.shape}', which does not match the shape of the input '${o.shape}'`);if(null==e[o.id])e[o.id]=i;else{let t=e[o.id];e[o.id]=r(t,i),t.dispose()}}}}(e,a,e=>this.tidy(e),x);let r=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(let t of e.saved)t.dispose()}),this.state.activeTape=null),{value:i,grads:r}})}customGrad(e){return c.hu(c.mf(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{let n;c.hu(t.every(e=>e instanceof f.es),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r={};return t.forEach((e,t)=>{r[t]=e}),this.runKernelFunc({forwardFunc:(r,i)=>(n=e(...t,i),c.hu(n.value instanceof f.es,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),c.hu(c.mf(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),backwardsFunc:(e,r)=>{let i=n.gradFunc(e,r),a=Array.isArray(i)?i:[i];c.hu(a.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),c.hu(a.every(e=>e instanceof f.es),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let o={};return a.forEach((e,t)=>{o[t]=()=>e}),o},inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){let t=(0,u.now)(),n=await this.backend.time(e);return n.wallMs=(0,u.now)()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){for(let e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new m,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function y(){let e=(0,a.D)();if(null==e._tfengine){let t=new i.qA(e);e._tfengine=new b(t)}return(0,i.iG)(e._tfengine.ENV),(0,f.Vi)(()=>e._tfengine),e._tfengine}b.nextTensorId=0,b.nextVariableId=0;let v=y();function x(e,t){return v.runKernel(o.mm_,{a:e,b:t})}},6472:function(e,t,n){"use strict";n.d(t,{OB:function(){return s},iG:function(){return u},qA:function(){return a}});var r=n(2771);let i="tfjsflags";class a{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=o,this.populateURLFlags()}setPlatform(e,t){null==this.platform||l.getBool("IS_TEST")||l.getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){let t=this.urlFlags[e];l.getBool("IS_TEST")||l.getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];let t=this.evaluateFlag(e);if((0,r.tI)(t))throw Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;let e=this.getQueryParams(this.global.location.search);i in e&&e[i].split(",").forEach(e=>{let[t,n]=e.split(":");this.urlFlags[t]=function(e,t){let n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:`${+n}`===n?+n:t}(0,n)})}}function o(e){let t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...n)=>{var r,i;return r=n[0],i=n[1],t[decodeURIComponent(r)]=decodeURIComponent(i||""),n.join("=")}),t}function s(){return l}let l=null;function u(e){l=e}},95490:function(e,t,n){"use strict";let r;n.d(t,{D:function(){return a},R:function(){return o}});var i=n(40257);function a(){if(null==r){let e;if("undefined"!=typeof window)e=window;else if(void 0!==n.g)e=n.g;else if(void 0!==i)e=i;else if("undefined"!=typeof self)e=self;else throw Error("Could not find a global object");r=e}return r}function o(e,t){let n=function(){let e=a();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{let r=t();return n.set(e,r),n.get(e)}}},35823:function(e,t,n){"use strict";n.d(t,{B9:function(){return c},Cn:function(){return d},N_:function(){return h},SR:function(){return s},jq:function(){return f},lu:function(){return u},sq:function(){return l},y3:function(){return p}});var r=n(49681),i=n(6472),a=n(86150),o=n(45420);function s(){return r.BV}function l(){return r.BV.memory()}function u(e,t){return r.BV.tidy(e,t)}function c(e){(0,o.getTensorsInContainer)(e).forEach(e=>e.dispose())}function d(e){return r.BV.keep(e)}function h(){return r.BV.backendName}function f(e,t,n=1){return r.BV.registerBackend(e,t,n)}function p(){return r.BV.backend}(0,a.FZ)(function(e){(0,i.OB)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")})},64310:function(e,t,n){"use strict";n.d(t,{cb:function(){return s},pn:function(){return o}});var r=n(49681),i=n(86150),a=n(2771);function o(e,t){a.hu(a.mf(e),()=>"The f passed in variableGrads(f) must be a function"),a.hu(null==t||Array.isArray(t)&&t.every(e=>e instanceof i._w),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=null!=t;if(!n)for(let e in t=[],r.BV.registeredVariables)t.push(r.BV.registeredVariables[e]);let o=n?t.filter(e=>!e.trainable):null,s=t.length;t=t.filter(e=>e.trainable),a.hu(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);let{value:l,grads:u}=r.BV.gradients(e,t,null,!0);a.hu(u.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),a.hu(0===l.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${l.rank} tensor`);let c={};return t.forEach((e,t)=>{null!=u[t]&&(c[e.name]=u[t])}),null!=o&&o.forEach(e=>c[e.name]=null),{value:l,grads:c}}function s(e){return r.BV.customGrad(e)}},10280:function(e,t,n){"use strict";let r,i,a;n.d(t,{SYM:function(){return e7.SYM},VGw:function(){return e7.VGw},SpW:function(){return e7.SpW},mm_:function(){return e7.mm_},Xze:function(){return e7.Xze},oT6:function(){return e7.oT6},IKK:function(){return e7.IKK},sJF:function(){return e7.sJF},aJk:function(){return e7.aJk},M2y:function(){return e7.M2y},qw7:function(){return e7.qw7},jMg:function(){return e7.jMg},QCc:function(){return e7.QCc},Oyi:function(){return e7.Oyi},JhU:function(){return e7.JhU},_k9:function(){return e7._k9},IMb:function(){return e7.IMb},ROF:function(){return e7.ROF},XLW:function(){return e7.XLW},zws:function(){return e7.zws},zvY:function(){return e7.zvY},hCO:function(){return e7.hCO},eEB:function(){return e7.eEB},RFZ:function(){return e7.RFZ},gJX:function(){return e7.gJX},xnO:function(){return e7.xnO},Zz9:function(){return e7.Zz9},yj2:function(){return e7.yj2},Eh3:function(){return e7.Eh3},mhS:function(){return e7.mhS},wUP:function(){return e7.wUP},wm:function(){return e7.wm},x12:function(){return e7.x12},o2y:function(){return e7.o2y},ik2:function(){return e7.ik2},mc4:function(){return e7.mc4},TR1:function(){return e7.TR1},VcC:function(){return e7.VcC},Byc:function(){return e7.Byc},iHb:function(){return e7.iHb},JLz:function(){return iD.JL},QRR:function(){return e7.QRR},T0n:function(){return e7.T0n},cie:function(){return e7.cie},sL$:function(){return e7.sL$},y7R:function(){return e7.y7R},$w:function(){return e7.$w},p4S:function(){return e7.p4S},Vn9:function(){return e7.Vn9},ekb:function(){return e7.ekb},hGc:function(){return e7.hGc},$g6:function(){return e7.$g6},SX0:function(){return e7.SX0},HEU:function(){return e7.HEU},hdR:function(){return e7.hdR},Omj:function(){return e7.Omj},NEP:function(){return e7.NEP},YFo:function(){return e7.YFo},Y0y:function(){return e7.Y0y},vwp:function(){return e7.vwp},deh:function(){return e7.deh},Uyb:function(){return e7.Uyb},OR:function(){return e7.OR},jeX:function(){return e7.jeX},eBW:function(){return e7.eBW},sHE:function(){return e7.sHE},_V0:function(){return e7._V0},luS:function(){return e7.luS},q1x:function(){return e7.q1x},qi_:function(){return e7.qi_},iZT:function(){return e7.iZT},Acj:function(){return e7.Acj},Qg5:function(){return e7.Qg5},iJz:function(){return e7.iJz},J_u:function(){return e7.J_u},avt:function(){return e7.avt},iWB:function(){return e7.iWB},r7n:function(){return e7.r7n},Zuw:function(){return iD.Zu},eZ0:function(){return e7.eZ0},Hhh:function(){return e7.Hhh},J$2:function(){return e7.J$2},vtC:function(){return e7.vtC},CAk:function(){return e7.CAk},e7N:function(){return e7.e7N},ZbH:function(){return e7.ZbH},kU:function(){return e7.kU},PYm:function(){return e7.PYm},VfG:function(){return e7.VfG},MZg:function(){return e7.MZg},YoZ:function(){return e7.YoZ},mTV:function(){return e7.mTV},OAf:function(){return e7.OAf},OU7:function(){return e7.OU7},OV7:function(){return e7.OV7},vFR:function(){return e7.vFR},BMI:function(){return e7.BMI},q2K:function(){return e7.q2K},c17:function(){return e7.c17},q8u:function(){return e7.q8u},jQs:function(){return e7.jQs},Vbg:function(){return e7.Vbg},NZg:function(){return e7.NZg},wYn:function(){return e7.wYn},kuV:function(){return e7.kuV},uv1:function(){return e7.uv1},cye:function(){return e7.cye},W0H:function(){return e7.W0H},yQU:function(){return e7.yQU},we_:function(){return e7.we_},qWM:function(){return e7.qWM},gaJ:function(){return eT},QiL:function(){return e7.QiL},lyA:function(){return e7.lyA},pe_:function(){return e7.pe_},o0g:function(){return e7.o0g},DlI:function(){return e7.DlI},dDz:function(){return e7.dDz},CQl:function(){return e7.CQl},BiW:function(){return e7.BiW},e6w:function(){return e7.e6w},xJR:function(){return e7.xJR},oHH:function(){return e7.oHH},$HU:function(){return e7.$HU},qkr:function(){return e7.qkr},SbG:function(){return e7.SbG},HZH:function(){return e7.HZH},_Yw:function(){return e7._Yw},zbQ:function(){return e7.zbQ},dpD:function(){return e7.dpD},Hmb:function(){return e7.Hmb},mKl:function(){return e7.mKl},b9H:function(){return e7.b9H},e07:function(){return e7.e07},bV0:function(){return e7.bV0},xQA:function(){return e7.xQA},nr8:function(){return e7.nr8},PhF:function(){return e7.PhF},oFR:function(){return e7.oFR},a5O:function(){return e7.a5O},i5y:function(){return e7.i5y},RQH:function(){return e7.RQH},wYB:function(){return e7.wYB},p2w:function(){return e7.p2w},Gcp:function(){return e7.Gcp},MRv:function(){return e7.MRv},TQc:function(){return e7.TQc},O3z:function(){return e7.O3z},nhH:function(){return e7.nhH},w3H:function(){return e7.w3H},ZjV:function(){return e7.ZjV},D2d:function(){return e7.D2d},L8s:function(){return e7.L8s},FKq:function(){return e7.FKq},bK0:function(){return e7.bK0},_tC:function(){return e7._tC},e0R:function(){return e7.e0R},h8e:function(){return e7.h8e},jQk:function(){return e7.jQk},_JP:function(){return e7._JP},s1s:function(){return e7.s1s},XkS:function(){return e7.XkS},Tr8:function(){return e7.Tr8},GBy:function(){return e7.GBy},sEM:function(){return e7.sEM},MIZ:function(){return e7.MIZ},esB:function(){return eo.es},YDk:function(){return eo.YD},SIB:function(){return e7.SIB},n9L:function(){return e7.n9L},cWu:function(){return e7.cWu},wx7:function(){return e7.wx7},G3Y:function(){return e7.G3Y},kpP:function(){return e7.kpP},ToN:function(){return e7.ToN},Qvg:function(){return e7.Qvg},RuY:function(){return e7.RuY},usg:function(){return e7.usg},WnP:function(){return e_.W},IHx:function(){return eh.I},$6P:function(){return tg.$},YjB:function(){return tm.Y},NqF:function(){return tb.N},wS1:function(){return ty.w},uR5:function(){return tw},y3$:function(){return ed.y3},backend_util:function(){return m},Dxk:function(){return tE},JY5:function(){return tI},p3b:function(){return tS},UFq:function(){return tT.U},Jyw:function(){return e6},Xhn:function(){return f},f3b:function(){return es},pju:function(){return el.p},iUl:function(){return tC.i},d9v:function(){return eu.d},zoF:function(){return tN.z},gME:function(){return tA},Izb:function(){return tR},MNy:function(){return tD},ZaL:function(){return t$},PAt:function(){return t_.P},Tek:function(){return tF.T},bc:function(){return tO.b},pdZ:function(){return tP},$QV:function(){return tL},ppE:function(){return tB},B10:function(){return tU.B},C2$:function(){return c},B90:function(){return ed.B9},hiC:function(){return ef.h},rvX:function(){return nV},pyx:function(){return tz.p},SRH:function(){return ed.SR},OBj:function(){return k.OB},DgJ:function(){return tV.D},qNN:function(){return tW.q},Qqt:function(){return tj.Q},dt4:function(){return tH.d},iyy:function(){return tG},hlL:function(){return eN.h},GWj:function(){return tX.G},imm:function(){return p},Iqj:function(){return tq.I},pjt:function(){return tY.p},brS:function(){return tQ.b},image:function(){return rN},io:function(){return h},CnY:function(){return ed.Cn},GDt:function(){return b},hi7:function(){return tJ.h},$r2:function(){return rA},cM7:function(){return tZ.c},Krr:function(){return t0.K},CmS:function(){return t1.C},l_t:function(){return t2.l},HvI:function(){return t3.H},OI3:function(){return t4.O},Fp7:function(){return t5.F},_sB:function(){return t8._},YQQ:function(){return t6},gWQ:function(){return eF.g},J69:function(){return t7.J},sq6:function(){return ed.sq},VV$:function(){return t9.V},LTh:function(){return ne.L},Gi7:function(){return nn},dC7:function(){return ep.d},W76:function(){return nr.W},glt:function(){return r_},Quu:function(){return ni.Q},lfX:function(){return na.l},iUs:function(){return no.i},JpU:function(){return ns.J},vku:function(){return nl.v},sQ3:function(){return eR.s},AL3:function(){return nu.A},nGf:function(){return nf},LGj:function(){return np},w6H:function(){return ng},jqO:function(){return ed.jq},wCN:function(){return e9.wC},UYe:function(){return nm.U},XLQ:function(){return tx.X},GYS:function(){return nb.G},iD$:function(){return ev.i},U8D:function(){return ny.U},U_I:function(){return nv.U},m7h:function(){return d},XD2:function(){return nx.X},tPi:function(){return nw.t},jZU:function(){return nk},SmN:function(){return nE},CnO:function(){return nI},p0P:function(){return nS},kuN:function(){return tc},XAC:function(){return nT.X},Wvh:function(){return nC.W},Vl2:function(){return nN.V},_b3:function(){return eg._},L9e:function(){return nA.L},knu:function(){return nR.k},luU:function(){return eD.l},Smz:function(){return nD.S},z4k:function(){return tp.z4},AEp:function(){return n$.A},XeE:function(){return n_.X},RRF:function(){return nF},odF:function(){return nO},piX:function(){return td},lub:function(){return ed.lu},Gg6:function(){return tK.G},p_j:function(){return rD},p4s:function(){return nz.p},Xu6:function(){return nP},HHK:function(){return nM.H},x8V:function(){return tp.x8},D5U:function(){return th},VD$:function(){return nL},jTM:function(){return tf},arb:function(){return nB.a},lls:function(){return nU.l},P84:function(){return eb.P}});var o,s,l,u,c={};n.r(c),n.d(c,{isBrowser:function(){return w},isMobile:function(){return x},mockIsMobile:function(){return v}});var d={};n.r(d),n.d(d,{Serializable:function(){return ek},SerializationMap:function(){return eE},getRegisteredName:function(){return eS},registerClass:function(){return eI}});var h={};n.r(h),n.d(h,{CompositeArrayBuffer:function(){return D.w},browserFiles:function(){return eW},browserHTTPRequest:function(){return eZ},concatenateArrayBuffers:function(){return S.JY},copyModel:function(){return Z},decodeWeights:function(){return S.dI},decodeWeightsStream:function(){return S.r},encodeWeights:function(){return S.yz},fromMemory:function(){return e3},fromMemorySync:function(){return e4},getLoadHandlers:function(){return R},getModelArtifactsForJSON:function(){return S.jN},getModelArtifactsForJSONSync:function(){return S.ji},getModelArtifactsInfoForJSON:function(){return S.Q},getSaveHandlers:function(){return A},getWeightSpecs:function(){return S.hu},http:function(){return eJ},isHTTPScheme:function(){return eY},listModels:function(){return Q},loadWeights:function(){return eG},moveModel:function(){return ee},registerLoadRouter:function(){return N},registerSaveRouter:function(){return C},removeModel:function(){return J},weightsLoaderFactory:function(){return eX},withSaveHandler:function(){return e5},withSaveHandlerSync:function(){return e8}});var f={};n.r(f),n.d(f,{draw:function(){return tl},fromPixels:function(){return tu},fromPixelsAsync:function(){return ta},toPixels:function(){return ts}});var p={};n.r(p),n.d(p,{conv2d:function(){return n1},depthwiseConv2d:function(){return n4},matMul:function(){return n5}});var g={};n.r(g),n.d(g,{collectGatherOpShapeInfo:function(){return iC},computeOutShape:function(){return iT},segOpComputeOptimalWindowSize:function(){return iS}});var m={};n.r(m),n.d(m,{ERF_A1:function(){return r0},ERF_A2:function(){return r1},ERF_A3:function(){return r2},ERF_A4:function(){return r3},ERF_A5:function(){return r4},ERF_P:function(){return rZ},PARALLELIZE_THRESHOLD:function(){return rU},RowPartitionType:function(){return u},SELU_SCALE:function(){return rJ.$},SELU_SCALEALPHA:function(){return rJ.y},applyActivation:function(){return nZ},assertAndGetBroadcastShape:function(){return e6.assertAndGetBroadcastShape},assertAxesAreInnerMostDims:function(){return nt.lB},assertParamsConsistent:function(){return rF},assignToTypedArray:function(){return it},axesAreInnerMostDims:function(){return nt.YB},calculateShapes:function(){return rQ},checkEinsumDimSizes:function(){return il},checkPadOnDimRoundingMode:function(){return tv.m},combineLocations:function(){return nt.Vh},combineRaggedTensorToTensorShapes:function(){return rP},complexWithEvenIndex:function(){return r7},complexWithOddIndex:function(){return r9},computeConv2DInfo:function(){return tv.Ix},computeConv3DInfo:function(){return tv.jw},computeDefaultPad:function(){return tv.aO},computeDilation2DInfo:function(){return tv.Rf},computeOptimalWindowSize:function(){return rz},computeOutAndReduceShapes:function(){return nt.kz},computeOutShape:function(){return rO},computePool2DInfo:function(){return tv.Xw},computePool3DInfo:function(){return tv.pl},convertConv2DDataFormat:function(){return tv.sl},decodeEinsumEquation:function(){return io},eitherStridesOrDilationsAreOne:function(){return tv.jT},expandShapeToKeepDim:function(){return nt.rv},exponent:function(){return ii},exponents:function(){return ir},fromStringArrayToUint8:function(){return iA},fromUint8ToStringArray:function(){return iN},getAxesPermutation:function(){return nt.Q3},getBroadcastDims:function(){return e6.getBroadcastDims},getComplexWithIndex:function(){return ie},getEinsumComputePath:function(){return iu},getEinsumPermutation:function(){return is},getFusedBiasGradient:function(){return nJ},getFusedDyActivation:function(){return nQ},getImageCenter:function(){return rV},getInnerMostAxes:function(){return nt.sY},getPermuted:function(){return rj},getRaggedRank:function(){return rL},getReductionAxes:function(){return e6.getReductionAxes},getReshaped:function(){return rW},getReshapedPermuted:function(){return rH},getRowPartitionTypesHelper:function(){return rM},getSliceBeginCoords:function(){return rK},getSliceSize:function(){return rG},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return ih},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return ip},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return ig},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return iy},getSparseReshapeInputOutputMismatchErrorMessage:function(){return ix},getSparseReshapeInputOutputMultipleErrorMessage:function(){return iv},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return im},getSparseReshapeNegativeOutputDimErrorMessage:function(){return ib},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return iI},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return iw},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return ik},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return iE},getUndoAxesPermutation:function(){return nt.LJ},isIdentityPermutation:function(){return ic},log:function(){return r5.c},mergeRealAndImagArrays:function(){return r8},prepareAndValidate:function(){return rX},prepareSplitSize:function(){return id},segment_util:function(){return g},shouldFuse:function(){return n0},slice_util:function(){return tc},splitRealAndImagArrays:function(){return r6},stridesOrDilationsArePositive:function(){return tv.U3},tupleValuesAreOne:function(){return tv.I0},upcastType:function(){return tp.x8},validateDefaultValueShape:function(){return rB},validateInput:function(){return rY},validateUpdateShape:function(){return rq},warn:function(){return r5.Z}});var b={};n.r(b),n.d(b,{GP:function(){return ra},qP:function(){return ro},pA:function(){return rs},ZA:function(){return iR}});var y=n(49681);function v(e){r=e}function x(e){if(void 0!==r)return r;if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;let t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){let t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function w(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var k=n(6472),E=n(40257);let I=(0,k.OB)();I.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),I.registerFlag("IS_BROWSER",()=>w()),I.registerFlag("IS_NODE",()=>void 0!==E&&void 0!==E.versions&&void 0!==E.versions.node),I.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),I.registerFlag("IS_SAFARI",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),I.registerFlag("PROD",()=>!1),I.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>I.getBool("DEBUG")),I.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),I.registerFlag("IS_TEST",()=>!1),I.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>I.getBool("DEBUG")),I.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),I.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),I.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);var S=n(3850);class T{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==T.instance&&(T.instance=new T),T.instance}static registerSaveRouter(e){T.getInstance().saveRouters.push(e)}static registerLoadRouter(e){T.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return T.getHandlers(e,"save")}static getLoadHandlers(e,t){return T.getHandlers(e,"load",t)}static getHandlers(e,t,n){let r=[];return("load"===t?T.getInstance().loadRouters:T.getInstance().saveRouters).forEach(t=>{let i=t(e,n);null!==i&&r.push(i)}),r}}let C=e=>T.registerSaveRouter(e),N=e=>T.registerLoadRouter(e),A=e=>T.getSaveHandlers(e),R=(e,t)=>T.getLoadHandlers(e,t);var D=n(90807);let $="tensorflowjs",_="models_store",F="model_info_store";function O(){if(!(0,k.OB)().getBool("IS_BROWSER"))throw Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw Error("The current browser does not appear to support IndexedDB.");return t}function P(e){let t=e.result;t.createObjectStore(_,{keyPath:"modelPath"}),t.createObjectStore(F,{keyPath:"modelPath"})}class M{constructor(e){if(this.indexedDB=O(),null==e||!e)throw Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((e,n)=>{let r=this.indexedDB.open($,1);r.onupgradeneeded=()=>P(r),r.onsuccess=()=>{let i=r.result;if(null==t){let t=i.transaction(_,"readonly"),r=t.objectStore(_).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return i.close(),n(Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(i.close(),n(r.error)),t.oncomplete=()=>i.close()}else{let r,a;t.weightData=D.w.join(t.weightData);let o=(0,S.Q)(t),s=i.transaction(F,"readwrite"),l=s.objectStore(F);try{r=l.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(e){return n(e)}r.onsuccess=()=>{let r;let u=(a=i.transaction(_,"readwrite")).objectStore(_);try{r=u.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:o})}catch(e){return n(e)}r.onsuccess=()=>e({modelArtifactsInfo:o}),r.onerror=e=>{let t=(l=s.objectStore(F)).delete(this.modelPath);t.onsuccess=()=>(i.close(),n(r.error)),t.onerror=e=>(i.close(),n(r.error))}},r.onerror=e=>(i.close(),n(r.error)),s.oncomplete=()=>{null==a?i.close():a.oncomplete=()=>i.close()}}},r.onerror=e=>n(r.error)})}}M.URL_SCHEME="indexeddb://";let L=e=>{var t;return(0,k.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(M.URL_SCHEME)?(t=e.slice(M.URL_SCHEME.length),new M(t)):null};T.registerSaveRouter(L),T.registerLoadRouter(L);class B{constructor(){this.indexedDB=O()}async listModels(){return new Promise((e,t)=>{let n=this.indexedDB.open($,1);n.onupgradeneeded=()=>P(n),n.onsuccess=()=>{let r=n.result,i=r.transaction(F,"readonly"),a=i.objectStore(F).getAll();a.onsuccess=()=>{let t={};for(let e of a.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},a.onerror=e=>(r.close(),t(a.error)),i.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)})}async removeModel(e){var t;return e=(t=e).startsWith(M.URL_SCHEME)?t.slice(M.URL_SCHEME.length):t,new Promise((t,n)=>{let r=this.indexedDB.open($,1);r.onupgradeneeded=()=>P(r),r.onsuccess=()=>{let i;let a=r.result,o=a.transaction(F,"readwrite"),s=o.objectStore(F),l=s.get(e);l.onsuccess=()=>{if(null==l.result)return a.close(),n(Error(`Cannot find model with path '${e}' in IndexedDB.`));{let r=s.delete(e),o=()=>{let r=(i=a.transaction(_,"readwrite")).objectStore(_).delete(e);r.onsuccess=()=>t(l.result.modelArtifactsInfo),r.onerror=e=>n(l.error)};r.onsuccess=o,r.onerror=e=>(o(),a.close(),n(l.error))}},l.onerror=e=>(a.close(),n(l.error)),o.oncomplete=()=>{null==i?a.close():i.oncomplete=()=>a.close()}},r.onerror=e=>n(r.error)})}}var U=n(2771);let z="tensorflowjs_models",V="info";function W(e){return{info:[z,e,V].join("/"),topology:[z,e,"model_topology"].join("/"),weightSpecs:[z,e,"weight_specs"].join("/"),weightData:[z,e,"weight_data"].join("/"),modelMetadata:[z,e,"model_metadata"].join("/")}}function j(e){for(let t of Object.values(e))window.localStorage.removeItem(t)}class H{constructor(e){if(!(0,k.OB)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=W(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=(0,S.Q)(e),i=D.w.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,(0,S._n)(i));let a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:r}}catch(e){throw j(this.keys),Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;let r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;let i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){let e=JSON.parse(i);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(null==a)throw Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=(0,S.n7)(a),t}}H.URL_SCHEME="localstorage://";let K=e=>{var t;return(0,k.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(H.URL_SCHEME)?(t=e.slice(H.URL_SCHEME.length),new H(t)):null};T.registerSaveRouter(K),T.registerLoadRouter(K);class G{constructor(){(0,U.hu)((0,k.OB)().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),(0,U.hu)("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let e={},t=z+"/",n="/"+V;for(let r=0;r<this.LS.length;++r){let i=this.LS.key(r);i.startsWith(t)&&i.endsWith(n)&&(e[function(e){let t=e.split("/");if(t.length<3)throw Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join("/")}(i)]=JSON.parse(this.LS.getItem(i)))}return e}async removeModel(e){var t;let n=W(e=(t=e).startsWith(H.URL_SCHEME)?t.slice(H.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw Error(`Cannot find model at path '${e}'`);let r=JSON.parse(this.LS.getItem(n.info));return j(n),r}}class X{constructor(){this.managers={}}static getInstance(){return null==X.instance&&(X.instance=new X),X.instance}static registerManager(e,t){(0,U.hu)(null!=e,()=>"scheme must not be undefined or null."),e.endsWith("://")&&(e=e.slice(0,e.indexOf("://"))),(0,U.hu)(e.length>0,()=>"scheme must not be an empty string.");let n=X.getInstance();(0,U.hu)(null==n.managers[e],()=>`A model store manager is already registered for scheme '${e}'.`),n.managers[e]=t}static getManager(e){let t=X.getInstance().managers[e];if(null==t)throw Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(X.getInstance().managers)}}function q(e){if(-1===e.indexOf("://"))throw Error(`The url string provided does not contain a scheme. Supported schemes are: ${X.getSchemes().join(",")}`);return{scheme:e.split("://")[0],path:e.split("://")[1]}}async function Y(e,t,n=!1){(0,U.hu)(e!==t,()=>`Old path and new path are the same: '${e}'`);let r=T.getLoadHandlers(e);(0,U.hu)(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),(0,U.hu)(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);let i=r[0],a=T.getSaveHandlers(t);(0,U.hu)(a.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),(0,U.hu)(a.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);let o=a[0],s=q(e).scheme,l=q(e).path,u=s===q(e).scheme,c=await i.load();n&&u&&await X.getManager(s).removeModel(l);let d=await o.save(c);return n&&!u&&await X.getManager(s).removeModel(l),d.modelArtifactsInfo}async function Q(){let e=X.getSchemes(),t={};for(let n of e){let e=await X.getManager(n).listModels();for(let r in e)t[n+"://"+r]=e[r]}return t}async function J(e){let t=q(e);return X.getManager(t.scheme).removeModel(t.path)}async function Z(e,t){return Y(e,t,!1)}async function ee(e,t){return Y(e,t,!0)}var et=n(48719);class en{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){if("undefined"==typeof window||!(0,k.OB)().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,t);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",e=>{e.source===window&&e.data.name===this.messageName&&(e.stopPropagation(),(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0))},!0))}isTypedArray(e){return(0,et.j)(e)}}if((0,k.OB)().get("IS_BROWSER")){(0,k.OB)().setPlatform("browser",new en);try{X.registerManager(H.URL_SCHEME,new G)}catch(e){}try{X.registerManager(M.URL_SCHEME,new B)}catch(e){}}var er=n(40257);let ei={importFetch:()=>n(75410)};class ea{constructor(){this.util=n(48628),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=(0,k.OB)().global.fetch?(0,k.OB)().global.fetch(e,t):(null==i&&(i=ei.importFetch()),i(e,t))}now(){let e=er.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}(0,k.OB)().get("IS_NODE")&&!(0,k.OB)().get("IS_BROWSER")&&(0,k.OB)().setPlatform("node",new ea);var eo=n(86150);function es(e,t="float32",n){return t=t||"float32",U.Mu(e),new eo.YD(e,t,n)}var el=n(58893),eu=n(90699);(0,y.wv)();let ec={buffer:es,cast:el.p,clone:eu.d,print:function(e,t=!1){console.log(e.toString(t))}};(0,eo.Vp)(ec);var ed=n(35823),eh=n(83266),ef=n(83511),ep=n(45314),eg=n(99467),em=n(77941),eb=n(72898),ey=n(64310),ev=n(16070);let ex=new Map,ew=new Map;class ek{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class eE{constructor(){this.classNameMap={}}static getMap(){return null==eE.instance&&(eE.instance=new eE),eE.instance}static register(e){eE.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function eI(e,t,n){(0,U.hu)(null!=e.className,()=>"Class being registered does not have the static className property defined."),(0,U.hu)("string"==typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),(0,U.hu)(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),void 0===t&&(t="Custom"),void 0===n&&(n=e.className);let r=t+">"+n;return eE.register(e),ex.set(r,e),ew.set(e,r),e}function eS(e){return ew.has(e)?ew.get(e):e.className}class eT extends ek{minimize(e,t=!1,n){let{value:r,grads:i}=this.computeGradients(e,n);if(null!=n){let e=n.map(e=>({name:e.name,tensor:i[e.name]}));this.applyGradients(e)}else this.applyGradients(i);return((0,ed.B9)(i),t)?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return(0,ey.pn)(e,t)}dispose(){null!=this.iterations_&&(0,ed.B9)(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:(0,ev.i)(this.iterations_,"int32")}}async getWeights(){throw Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(eT,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class eC extends eT{static get className(){return"Adadelta"}constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=y.BV.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=y.BV.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accum_grad`,variable:(0,ed.lu)(()=>(0,eb.P)(r).variable(!1))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${t}/accum_var`,variable:(0,ed.lu)(()=>(0,eb.P)(r).variable(!1))});let i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;let a=this.accumulatedGrads[n].variable,o=this.accumulatedUpdates[n].variable;(0,ed.lu)(()=>{let e=(0,eh.I)((0,ep.d)(a,this.rho),(0,ep.d)((0,em.h)(i),1-this.rho)),t=(0,ep.d)((0,ef.h)((0,eg._)((0,eh.I)(o,this.epsilon)),(0,eg._)((0,eh.I)(a,this.epsilon))),i),n=(0,eh.I)((0,ep.d)(o,this.rho),(0,ep.d)((0,em.h)(t),1-this.rho));a.assign(e),o.assign(n);let s=(0,eh.I)((0,ep.d)(t,-this.learningRate),r);r.assign(s)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&((0,ed.B9)(this.accumulatedGrads.map(e=>e.variable)),(0,ed.B9)(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){let t=(e=await this.extractIterations(e)).length/2;this.accumulatedGrads=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedUpdates=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}var eN=n(60180);class eA extends eT{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=y.BV.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accumulator`,variable:(0,ed.lu)(()=>(0,eN.h)(r.shape,this.initialAccumulatorValue).variable(!1))});let i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;let a=this.accumulatedGrads[n].variable;(0,ed.lu)(()=>{let e=(0,eh.I)(a,(0,em.h)(i));a.assign(e);let t=(0,eh.I)((0,ep.d)((0,ef.h)(i,(0,eg._)((0,eh.I)(e,y.BV.backend.epsilon()))),-this.learningRate),r);r.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&(0,ed.B9)(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulatedGrads=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}var eR=n(12611),eD=n(35799);class e$ extends eT{static get className(){return"Adam"}constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],(0,ed.lu)(()=>{this.accBeta1=(0,ev.i)(t).variable(),this.accBeta2=(0,ev.i)(n).variable()}),null==r&&(this.epsilon=y.BV.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);(0,ed.lu)(()=>{let n=(0,eD.l)(1,this.accBeta1),r=(0,eD.l)(1,this.accBeta2);t.forEach((t,i)=>{let a=y.BV.registeredVariables[t];null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${t}/m`,variable:(0,ed.lu)(()=>(0,eb.P)(a).variable(!1))}),null==this.accumulatedSecondMoment[i]&&(this.accumulatedSecondMoment[i]={originalName:`${t}/v`,variable:(0,ed.lu)(()=>(0,eb.P)(a).variable(!1))});let o=Array.isArray(e)?e[i].tensor:e[t];if(null==o)return;let s=this.accumulatedFirstMoment[i].variable,l=this.accumulatedSecondMoment[i].variable,u=(0,eh.I)((0,ep.d)(s,this.beta1),(0,ep.d)(o,1-this.beta1)),c=(0,eh.I)((0,ep.d)(l,this.beta2),(0,ep.d)((0,em.h)(o),1-this.beta2)),d=(0,ef.h)(u,n),h=(0,ef.h)(c,r);s.assign(u),l.assign(c);let f=(0,eh.I)((0,ep.d)((0,ef.h)(d,(0,eh.I)((0,eg._)(h),this.epsilon)),-this.learningRate),a);a.assign(f)}),this.accBeta1.assign((0,ep.d)(this.accBeta1,this.beta1)),this.accBeta2.assign((0,ep.d)(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,ed.B9)(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&(0,ed.B9)(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),(0,ed.lu)(()=>{this.accBeta1.assign((0,eR.s)(this.beta1,this.iterations_+1)),this.accBeta2.assign((0,eR.s)(this.beta2,this.iterations_+1))});let t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedSecondMoment=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}var e_=n(99044),eF=n(92673);class eO extends eT{static get className(){return"Adamax"}constructor(e,t,n,r=null,i=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],(0,ed.lu)(()=>{this.iteration=(0,ev.i)(0).variable(),this.accBeta1=(0,ev.i)(t).variable()}),null==r&&(this.epsilon=y.BV.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);(0,ed.lu)(()=>{let n=(0,eD.l)(1,this.accBeta1),r=(0,ef.h)(-this.learningRate,(0,eh.I)((0,ep.d)(this.iteration,this.decay),1));t.forEach((t,i)=>{let a=y.BV.registeredVariables[t];null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${t}/m`,variable:(0,eb.P)(a).variable(!1)}),null==this.accumulatedWeightedInfNorm[i]&&(this.accumulatedWeightedInfNorm[i]={originalName:`${t}/v`,variable:(0,eb.P)(a).variable(!1)});let o=Array.isArray(e)?e[i].tensor:e[t];if(null==o)return;let s=this.accumulatedFirstMoment[i].variable,l=this.accumulatedWeightedInfNorm[i].variable,u=(0,eh.I)((0,ep.d)(s,this.beta1),(0,ep.d)(o,1-this.beta1)),c=(0,ep.d)(l,this.beta2),d=(0,e_.W)(o),h=(0,eF.g)(c,d);s.assign(u),l.assign(h);let f=(0,eh.I)((0,ep.d)((0,ef.h)(r,n),(0,ef.h)(u,(0,eh.I)(h,this.epsilon))),a);a.assign(f)}),this.iteration.assign((0,eh.I)(this.iteration,1)),this.accBeta1.assign((0,ep.d)(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,ed.B9)(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&(0,ed.B9)(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class eP extends eT{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;let i=y.BV.registeredVariables[t];(0,ed.lu)(()=>{let e=(0,eh.I)((0,ep.d)(this.c,r),i);i.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=(0,ed.Cn)((0,ev.i)(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class eM extends eP{static get className(){return"Momentum"}constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=(0,ev.i)(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=y.BV.registeredVariables[t];null==this.accumulations[n]&&(this.accumulations[n]={originalName:`${t}/momentum`,variable:(0,ed.lu)(()=>(0,eb.P)(r).variable(!1))});let i=this.accumulations[n].variable,a=Array.isArray(e)?e[n].tensor:e[t];null!=a&&(0,ed.lu)(()=>{let e;let t=(0,eh.I)((0,ep.d)(this.m,i),a);e=this.useNesterov?(0,eh.I)((0,ep.d)(this.c,(0,eh.I)(a,(0,ep.d)(t,this.m))),r):(0,eh.I)((0,ep.d)(this.c,t),r),i.assign(t),r.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&(0,ed.B9)(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class eL extends eT{static get className(){return"RMSProp"}constructor(e,t=.9,n=0,r=null,i=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,null==r&&(this.epsilon=y.BV.backend.epsilon()),null==e)throw Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=y.BV.registeredVariables[t];null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${t}/rms`,variable:(0,ed.lu)(()=>(0,eb.P)(r).variable(!1))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${t}/momentum`,variable:(0,ed.lu)(()=>(0,eb.P)(r).variable(!1))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${t}/mg`,variable:(0,ed.lu)(()=>(0,eb.P)(r).variable(!1))});let i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;let a=this.accumulatedMeanSquares[n].variable,o=this.accumulatedMoments[n].variable;(0,ed.lu)(()=>{let e=(0,eh.I)((0,ep.d)(a,this.decay),(0,ep.d)((0,em.h)(i),1-this.decay));if(this.centered){let t=this.accumulatedMeanGrads[n].variable,s=(0,eh.I)((0,ep.d)(t,this.decay),(0,ep.d)(i,1-this.decay)),l=(0,ef.h)((0,ep.d)(i,this.learningRate),(0,eg._)((0,eD.l)(e,(0,eh.I)((0,em.h)(s),this.epsilon)))),u=(0,eh.I)((0,ep.d)(o,this.momentum),l);a.assign(e),t.assign(s),o.assign(u);let c=(0,eD.l)(r,u);r.assign(c)}else{let e=(0,eh.I)((0,ep.d)(a,this.decay),(0,ep.d)((0,em.h)(i),1-this.decay)),t=(0,eh.I)((0,ep.d)(o,this.momentum),(0,ef.h)((0,ep.d)(i,this.learningRate),(0,eg._)((0,eh.I)(e,this.epsilon))));a.assign(e),o.assign(t);let n=(0,eD.l)(r,t);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&(0,ed.B9)(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&(0,ed.B9)(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&(0,ed.B9)(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=this.centered?e.length/3:e.length/2;this.accumulatedMeanSquares=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedMoments=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}let eB=[eC,eA,e$,eO,eM,eL,eP];function eU(e){return new Promise(e=>setTimeout(e)).then(e)}class ez{constructor(e){if(!(0,k.OB)().getBool("IS_BROWSER"))throw Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(ez.URL_SCHEME)&&(e=e.slice(ez.URL_SCHEME.length)),(null==e||0===e.length)&&(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw Error("Browser downloads are not supported in this environment since `document` is not present");let t=D.w.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let t=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r=(0,S.Yd)(e,t),i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),a=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=i,await eU(()=>a.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){let e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await eU(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:(0,S.Q)(e)}}}}ez.URL_SCHEME="downloads://";class eV{constructor(e){if(null==e||e.length<1)throw Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{let n=new FileReader;n.onload=n=>{let r=JSON.parse(n.target.result),i=r.modelTopology;if(null==i){t(Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(null==r.weightsManifest){t(Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(0===this.weightsFiles.length){e({modelTopology:i});return}e((0,S.jN)(r,e=>this.loadWeights(e)))},n.onerror=e=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)})}loadWeights(e){let t=[],n=[];for(let r of e)t.push(...r.weights),n.push(...r.paths);let r=this.checkManifestAndWeightFiles(e);return Promise.all(n.map(e=>this.loadWeightsFile(e,r[e]))).then(e=>[t,e])}loadWeightsFile(e,t){return new Promise((n,r)=>{let i=new FileReader;i.onload=e=>{n(e.target.result)},i.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){let t=[],n=this.weightsFiles.map(e=>(0,S.EZ)(e.name)),r={};for(let i of e)i.paths.forEach(e=>{let i=(0,S.EZ)(e);if(-1!==t.indexOf(i))throw Error(`Duplicate file basename found in weights manifest: '${i}'`);if(t.push(i),-1===n.indexOf(i))throw Error(`Weight file with basename '${i}' is not provided.`);r[e]=this.weightsFiles[n.indexOf(i)]});if(t.length!==this.weightsFiles.length)throw Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}function eW(e){return new eV(e)}function ej(e,t,n,r){var i,a;(0,U.hu)(null!=e&&Array.isArray(e)&&e.length>0,()=>"promises must be a none empty array"),i=n=null==n?0:n,a=r=null==r?1:r,(0,U.hu)(i>=0&&i<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${i}`),(0,U.hu)(a>=0&&a<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${a}`),(0,U.hu)(a>=i,()=>`startFraction must be no more than endFraction, but got startFraction ${i} and endFraction ${a}`);let o=0;return Promise.all(e.map(i=>(i.then(i=>(t(n+ ++o/e.length*(r-n)),i)),i)))}T.registerSaveRouter(e=>(0,k.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ez.URL_SCHEME)?function(e="model"){return new ez(e)}(e.slice(ez.URL_SCHEME.length)):null);var eH=n(78123);async function eK(e,t){null==t&&(t={});let n=null==t.fetchFunc?(0,k.OB)().platform.fetch:t.fetchFunc,r=e.map(e=>n(e,t.requestInit,{isBinary:!0})),i=(null==t.onProgress?await Promise.all(r):await ej(r,t.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==t.onProgress?await Promise.all(i):await ej(i,t.onProgress,.5,1)}async function eG(e,t="",n,r){return eX(e=>eK(e,{requestInit:r}))(e,t,n)}function eX(e){return async(t,n="",r)=>{let i=t.map(()=>!1),a={},o=null!=r?r.map(()=>!1):[],s=[];if(t.forEach((e,t)=>{let n=0;e.weights.forEach(e=>{let l="quantization"in e?e.quantization.dtype:e.dtype,u=eH.J[l]*U.NA(e.shape),c=()=>{i[t]=!0,null==a[t]&&(a[t]=[]),a[t].push({manifestEntry:e,groupOffset:n,sizeBytes:u})};null!=r?r.forEach((t,n)=>{t===e.name&&(c(),o[n]=!0)}):c(),s.push(e.name),n+=u})}),!o.every(e=>e)){let e=r.filter((e,t)=>!o[t]);throw Error(`Could not find weights in manifest with names: ${e.join(", ")}. 
Manifest JSON has weights with names: ${s.join(", ")}.`)}let l=i.reduce((e,t,n)=>(t&&e.push(n),e),[]),u=[];l.forEach(e=>{t[e].paths.forEach(e=>{let t=n+(n.endsWith("/")?"":"/")+e;u.push(t)})});let c=await e(u),d={},h=0;return l.forEach(e=>{let n=t[e].paths.length,r=new D.w(c.slice(h,h+n));a[e].forEach(e=>{let t=r.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=(0,S.dI)(t,[e.manifestEntry]);for(let e in n)d[e]=n[e]}),h+=n}),d}}class eq{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?((0,U.hu)("function"==typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=(0,k.OB)().platform.fetch,(0,U.hu)(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&(0,U.hu)(2===e.length,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;let n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r=(0,S.Yd)(e,n);if(t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData){let n=D.w.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}let i=await this.fetch(this.path,t);if(i.ok)return{modelArtifactsInfo:(0,S.Q)(e),responses:[i]};throw Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){let e;let t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);try{e=await t.json()}catch(t){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",Error(e)}let n=e.modelTopology,r=e.weightsManifest;if(null==n&&null==r)throw Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return e}async load(){if(this.loadOptions.streamWeights)return this.loadStream();let e=await this.loadModelJSON();return(0,S.jN)(e,e=>this.loadWeights(e))}async loadStream(){let e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=(0,S.hu)(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>(function(e,t){var n;let r;let i=null==t.fetchFunc?(0,k.OB)().platform.fetch:t.fetchFunc,a=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var o;a<e.length;){r||(r=(await i(e[a],t.requestInit,{isBinary:!0})).body.getReader());let{done:s,value:l}=await r.read();if(s){a++,r=void 0,null===(o=t.onProgress)||void 0===o||o.call(t,a/e.length);continue}n.enqueue(l);return}n.close()}})})(t,this.loadOptions)})}async getWeightUrls(e){let[t,n]=function(e){let t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(Array.isArray(this.path)?this.path[1]:this.path),r=this.weightPathPrefix||t,i=[],a=[];for(let t of e)for(let e of t.paths)null!=this.weightUrlConverter?a.push(this.weightUrlConverter(e)):i.push(r+e+n);return this.weightUrlConverter&&i.push(...await Promise.all(a)),i}async loadWeights(e){let t=await this.getWeightUrls(e);return[(0,S.hu)(e),await eK(t,this.loadOptions)]}}function eY(e){return null!=e.match(eq.URL_SCHEME_REGEX)}eq.URL_SCHEME_REGEX=/^https?:\/\//;let eQ=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc));else if(Array.isArray(e)?e.every(e=>eY(e)):eY(e))return eJ(e,t);return null};function eJ(e,t){return new eq(e,t)}function eZ(e,t){return eJ(e,t)}T.registerSaveRouter(eQ),T.registerLoadRouter(eQ);class e0{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class e1{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class e2{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function e3(e,t,n,r){let i=arguments;return new e2(e4(...i))}function e4(e,t,n,r){return 1!=arguments.length?(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new e0({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})):null!=e.modelTopology||null!=e.weightSpecs?new e0(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new e0({modelTopology:e}))}function e5(e){return new e1(e)}function e8(e){return new e1(e)}var e6=n(95221),e7=n(35047),e9=n(29922),te=n(50971),tt=n(32888),tn=n(31185);let tr=!1;function ti(e,t=3){let n,r;if(t>4)throw Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw Error("pixels passed to tf.browser.fromPixels() can not be null");let i=!1,o=!1,s=!1,l=!1,u=!1,c=!1;if(e.data instanceof Uint8Array)i=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)o=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)s=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)l=!0;else if(null!=e.getContext)u=!0;else if("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap)c=!0;else throw Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);if(null!=(0,e9.pI)(e7.eBW,y.BV.backendName))return y.BV.runKernel(e7.eBW,{pixels:e},{numChannels:t});let[d,h]=s?[e.videoWidth,e.videoHeight]:[e.width,e.height];if(u)n=e.getContext("2d").getImageData(0,0,d,h).data;else if(o||i)n=e.data;else if(l||s||c){if(null==a){if("undefined"==typeof document){if("undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof OffscreenCanvasRenderingContext2D)a=new OffscreenCanvas(1,1).getContext("2d");else throw Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.")}else a=document.createElement("canvas").getContext("2d",{willReadFrequently:!0})}a.canvas.width=d,a.canvas.height=h,a.drawImage(e,0,0,d,h),n=a.getImageData(0,0,d,h).data}if(4===t)r=new Int32Array(n);else{let e=d*h;r=new Int32Array(e*t);for(let i=0;i<e;i++)for(let e=0;e<t;++e)r[i*t+e]=n[4*i+e]}return function(e,t,n){if((0,U.Cq)(e),null!=t&&3!==t.length)throw Error("tensor3d() requires shape to have three numbers");let r=(0,te.C)(e,n);if(3!==r.length&&1!==r.length)throw Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,tn.H)(e,t,r,n)}(r,[h,d,t],"int32")}async function ta(e,t=3){var n;let r=null;if((0,k.OB)().getBool("WRAP_TO_IMAGEBITMAP")&&"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&null!=(n=e)&&0!==n.width&&0!==n.height&&!(null!=e&&e.data instanceof Uint8Array)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(e){t=null}r=null!=t&&t.width===e.width&&t.height===e.height?t:e}else r=e;return ti(r,t)}function to(e){if(2!==e.rank&&3!==e.rank)throw Error(`toPixels only supports rank 2 or 3 tensors, got rank ${e.rank}.`);let t=2===e.rank?1:e.shape[2];if(t>4||2===t)throw Error(`toPixels only supports depth of size 1, 3 or 4 but got ${t}`);if("float32"!==e.dtype&&"int32"!==e.dtype)throw Error(`Unsupported type for toPixels: ${e.dtype}. Please use float32 or int32 tensors.`)}async function ts(e,t){let n=(0,te._1)(e,"img","toPixels");if(!(e instanceof eo.es)){let e=n;n=(0,el.p)(e,"int32"),e.dispose()}to(n);let[r,i]=n.shape.slice(0,2),a=2===n.rank?1:n.shape[2],o=await n.data(),s="float32"===n.dtype?255:1,l=new Uint8ClampedArray(i*r*4);for(let e=0;e<r*i;++e){let t=[0,0,0,255];for(let r=0;r<a;r++){let i=o[e*a+r];if("float32"===n.dtype){if(i<0||i>1)throw Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${i}.`)}else if("int32"===n.dtype&&(i<0||i>255))throw Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${i}.`);1===a?(t[0]=i*s,t[1]=i*s,t[2]=i*s):t[r]=i*s}let r=4*e;l[r+0]=Math.round(t[0]),l[r+1]=Math.round(t[1]),l[r+2]=Math.round(t[2]),l[r+3]=Math.round(t[3])}if(null!=t){tr||null==(0,e9.pI)(e7.hGc,y.BV.backendName)||(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),tr=!0),t.width=i,t.height=r;let e=t.getContext("2d"),n=new ImageData(l,i,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),l}function tl(e,t,n){let r=(0,te._1)(e,"img","draw");if(!(e instanceof eo.es)){let e=r;r=(0,el.p)(e,"int32"),e.dispose()}to(r),function(e){let t=(null==e?void 0:e.alpha)||1;if(t>1||t<0)throw Error(`Alpha value ${t} is suppoed to be in range [0 - 1].`)}(null==n?void 0:n.imageOptions);let i={image:r};y.BV.runKernel(e7.hGc,i,{canvas:t,options:n})}let tu=(0,tt.op)({fromPixels_:ti});var tc=n(96614),td=n(45420),th=n(32904);let tf="4.22.0";var tp=n(18638),tg=n(45195),tm=n(6591),tb=n(21231),ty=n(72126),tv=n(79011),tx=n(96439);let tw=(0,tt.op)({avgPool3d_:function(e,t,n,r,i,a="NDHWC"){let o=(0,te._1)(e,"x","avgPool3d","float32"),s=o,l=!1;4===o.rank&&(l=!0,s=(0,tx.X)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U.hu(5===s.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),U.hu("NDHWC"===a,()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),U.hu("number"==typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),(0,tv.m)("avgPool3d",r,i);let u={x:s},c=y.BV.runKernel(e7._k9,u,{filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:a});return(c=(0,el.p)(c,s.dtype),l)?(0,tx.X)(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}});var tk=n(60592);let tE=(0,tt.op)({batchNorm2d_:function(e,t,n,r,i,a){let o,s;let l=(0,te._1)(e,"x","batchNorm"),u=(0,te._1)(t,"mean","batchNorm"),c=(0,te._1)(n,"variance","batchNorm");return null!=i&&(o=(0,te._1)(i,"scale","batchNorm")),null!=r&&(s=(0,te._1)(r,"offset","batchNorm")),U.hu(2===l.rank,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${l.rank}.`),U.hu(2===u.rank||1===u.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${u.rank}.`),U.hu(2===c.rank||1===c.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${c.rank}.`),null!=o&&U.hu(2===o.rank||1===o.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${o.rank}.`),null!=s&&U.hu(2===s.rank||1===s.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${s.rank}.`),(0,tk.t)(l,u,c,s,o,a)}}),tI=(0,tt.op)({batchNorm3d_:function(e,t,n,r,i,a){let o,s;let l=(0,te._1)(e,"x","batchNorm"),u=(0,te._1)(t,"mean","batchNorm"),c=(0,te._1)(n,"variance","batchNorm");return null!=i&&(o=(0,te._1)(i,"scale","batchNorm")),null!=r&&(s=(0,te._1)(r,"offset","batchNorm")),U.hu(3===l.rank,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${l.rank}.`),U.hu(3===u.rank||1===u.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${u.rank}.`),U.hu(3===c.rank||1===c.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${c.rank}.`),null!=o&&U.hu(3===o.rank||1===o.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${o.rank}.`),null!=s&&U.hu(3===s.rank||1===s.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${s.rank}.`),(0,tk.t)(l,u,c,s,o,a)}}),tS=(0,tt.op)({batchNorm4d_:function(e,t,n,r,i,a){let o,s;let l=(0,te._1)(e,"x","batchNorm"),u=(0,te._1)(t,"mean","batchNorm"),c=(0,te._1)(n,"variance","batchNorm");return null!=i&&(o=(0,te._1)(i,"scale","batchNorm")),null!=r&&(s=(0,te._1)(r,"offset","batchNorm")),U.hu(4===l.rank,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${l.rank}.`),U.hu(4===u.rank||1===u.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${u.rank}.`),U.hu(4===c.rank||1===c.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${c.rank}.`),null!=o&&U.hu(4===o.rank||1===o.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${o.rank}.`),null!=s&&U.hu(4===s.rank||1===s.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${s.rank}.`),(0,tk.t)(l,u,c,s,o,a)}});var tT=n(25896),tC=n(57463),tN=n(8863);let tA=(0,tt.op)({concat1d_:function(e){return(0,tN.z)(e,0)}}),tR=(0,tt.op)({concat2d_:function(e,t){return(0,tN.z)(e,t)}}),tD=(0,tt.op)({concat3d_:function(e,t){return(0,tN.z)(e,t)}}),t$=(0,tt.op)({concat4d_:function(e,t){return(0,tN.z)(e,t)}});var t_=n(26412),tF=n(93468),tO=n(35883);let tP=(0,tt.op)({conv3d_:function(e,t,n,r,i="NDHWC",a=[1,1,1]){let o=(0,te._1)(e,"x","conv3d"),s=(0,te._1)(t,"filter","conv3d"),l=o,u=!1;4===o.rank&&(u=!0,l=(0,tx.X)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U.hu(5===l.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),U.hu(5===s.rank,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),U.hu(l.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`),U.hu((0,tv.jT)(n,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),U.hu("NDHWC"===i,()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),U.hu((0,tv.U3)(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),U.hu((0,tv.U3)(n),()=>"Error in conv3D: Strides should be larger than 0.");let c={x:l,filter:s},d=y.BV.runKernel(e7.x12,c,{strides:n,pad:r,dataFormat:i,dilations:a});return u?(0,tx.X)(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var tM=n(59457);let tL=(0,tt.op)({conv3dTranspose_:function(e,t,n,r,i){let a=(0,te._1)(e,"x","conv3dTranspose"),o=(0,te._1)(t,"filter","conv3dTranspose");return(0,tM._)(n,a,o,r,i)}}),tB=(0,tt.op)({denseBincount_:function(e,t,n,r=!1){let i=(0,te._1)(e,"x","denseBincount"),a=(0,te._1)(t,"weights","denseBincount");return U.hu("int32"===i.dtype,()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),U.hu(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),U.hu(n>=0,()=>`size must be non-negative, but got ${n}.`),U.hu(a.size===i.size||0===a.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${a.shape}.`),y.BV.runKernel(e7.QRR,{x:i,weights:a},{size:n,binaryOutput:r})}});var tU=n(52489),tz=n(74077),tV=n(5252),tW=n(42710),tj=n(17840),tH=n(4968),tK=n(47642);let tG=(0,tt.op)({eye_:function(e,t,n,r="float32"){null==t&&(t=e);let i=es([e,t],r),a=e<=t?e:t;for(let e=0;e<a;++e)i.set(1,e,e);let o=(0,tx.X)(i.toTensor(),[e,t]);if(null==n)return o;if(1===n.length)return(0,tK.G)((0,tH.d)(o,0),[n[0],1,1]);if(2===n.length)return(0,tK.G)((0,tH.d)((0,tH.d)(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return(0,tK.G)((0,tH.d)((0,tH.d)((0,tH.d)(o,0),0),0),[n[0],n[1],n[2],1,1]);throw Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});var tX=n(8703),tq=n(83655),tY=n(95334),tQ=n(39344),tJ=n(16437),tZ=n(78399),t0=n(59865),t1=n(28152),t2=n(51555),t3=n(85364),t4=n(45193),t5=n(23262),t8=n(7761);let t6=(0,tt.op)({maxPool3d_:function(e,t=[1,1,1],n,r,i,a="NDHWC"){let o=(0,te._1)(e,"x","maxPool3d"),s=o,l=!1;4===o.rank&&(l=!0,s=(0,tx.X)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U.hu(5===s.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),U.hu("NDHWC"===a,()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),(0,tv.m)("maxPool3d",r,i);let u={x:s},c=y.BV.runKernel(e7.OAf,u,{filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:a});return l?(0,tx.X)(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}});var t7=n(60697),t9=n(2376),ne=n(26004),nt=n(47050);let nn=(0,tt.op)({moments_:function(e,t=null,n=!1){e=(0,te._1)(e,"x","moments");let r=(0,U.EC)(t,e.shape),i=(0,t7.J)(e,r,n),a=i.shape;n||(a=(0,nt.rv)(i.shape,r));let o=(0,em.h)((0,eD.l)((0,el.p)(e,"float32"),(0,tx.X)(i,a)));return{mean:i,variance:(0,t7.J)(o,r,n)}}});var nr=n(22666),ni=n(21834),na=n(88713),no=n(36374),ns=n(18272),nl=n(93649),nu=n(39427),nc=n(59900);class nd{constructor(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);let a=i||Math.random();this.random=nc.alea(a.toString())}nextValue(){let e,t;if(!isNaN(this.nextVal)){let e=this.nextVal;return this.nextVal=NaN,e}let n=!1;for(;!n;){let r,i,a;do a=(r=2*this.random()-1)*r+(i=2*this.random()-1)*i;while(a>=1||0===a);let o=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*r*o,t=this.mean+this.stdDev*i*o,(!this.truncated||this.isValidTruncated(e))&&(n=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class nh{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=nc.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}let nf=(0,tt.op)({randomNormal_:function(e,t=0,n=1,r,i){if((0,U.Mu)(e),null!=r&&"bool"===r)throw Error(`Unsupported data type ${r}`);let a=new nd(t,n,r,!1,i),o=es(e,r);for(let e=0;e<o.values.length;e++)o.values[e]=a.nextValue();return o.toTensor()}}),np=(0,tt.op)({randomUniform_:function(e,t=0,n=1,r="float32",i){(0,U.Mu)(e);let a=es(e,r),o=new nh(t,n,null,i);for(let e=0;e<a.values.length;e++)a.values[e]=o.nextValue();return a.toTensor()}});function ng(e,t,n=1,r="float32"){if(0===n)throw Error("Cannot have a step of zero");return y.BV.runKernel(e7.e6w,{},{start:e,stop:t,step:n,dtype:r})}var nm=n(50114),nb=n(36439),ny=n(90615),nv=n(58661),nx=n(95986),nw=n(90308);let nk=(0,tt.op)({slice1d_:function(e,t,n){let r=(0,te._1)(e,"x","slice1d");return U.hu(1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),(0,nw.t)(r,[t],[n])}}),nE=(0,tt.op)({slice2d_:function(e,t,n){let r=(0,te._1)(e,"x","slice2d");return U.hu(2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),(0,nw.t)(r,t,n)}}),nI=(0,tt.op)({slice3d_:function(e,t,n){let r=(0,te._1)(e,"x","slice3d");return U.hu(3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),(0,nw.t)(r,t,n)}}),nS=(0,tt.op)({slice4d_:function(e,t,n){let r=(0,te._1)(e,"x","slice4d");return U.hu(4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),(0,nw.t)(r,t,n)}});var nT=n(63919),nC=n(34779),nN=n(59509),nA=n(48772),nR=n(95363),nD=n(71101),n$=n(13831),n_=n(1802);function nF(e,t){(0,U.Cq)(e);let n=(0,te.C)(e,t);if(1!==n.length)throw Error("tensor1d() requires values to be a flat/TypedArray");return(0,tn.H)(e,null,n,t)}function nO(e,t,n){if((0,U.Cq)(e),null!=t&&2!==t.length)throw Error("tensor2d() requires shape to have two numbers");let r=(0,te.C)(e,n);if(2!==r.length&&1!==r.length)throw Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,tn.H)(e,t,r,n)}let nP=(0,tt.op)({truncatedNormal_:function(e,t=0,n=1,r,i){if((0,U.Mu)(e),null!=r&&"bool"===r)throw Error("Unsupported data type $ { dtype }");let a=new nd(t,n,r,!0,i),o=es(e,r);for(let e=0;e<o.values.length;e++)o.values[e]=a.nextValue();return o.toTensor()}});var nM=n(51863);function nL(e,t=!0,n,r){return y.BV.makeVariable(e,t,n,r)}var nB=n(81275),nU=n(40290),nz=n(26439);let nV=(0,tt.op)({dropout_:function(e,t,n,r){let i=(0,te._1)(e,"x","dropout");if(U.hu("float32"===i.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),U.hu(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),0===t)return e instanceof eo.es?i.clone():i;let a=function(e,t){if(null==t)return e.shape.slice();if(U.cO(e.shape,t))return t;if(e.shape.length===t.length){let n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(i,n),o=1-t,s=(0,ef.h)((0,tX.G)((0,eh.I)(np(a,0,1,"float32",r),o)),o);return(0,ep.d)(i,s)}});var nW=n(47797),nj=n(36368),nH=n(93267),nK=n(33170),nG=n(16453),nX=n(28725),nq=n(96762),nY=n(9794);function nQ(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return(0,ep.d)(e,(0,nY.N)(t));throw Error(`Cannot compute gradient for fused activation ${n}.`)}function nJ(e,t){let n=t,r=e6.getReductionAxes(e.shape,t.shape);return r.length>0&&(n=(0,nD.S)(n,r)),(0,tx.X)(n,e.shape)}function nZ(e,t,n,r){if("linear"===t)return e;if("relu"===t)return(0,nm.U)(e);if("elu"===t)return(0,tz.p)(e);if("relu6"===t)return(0,nq.b)(e);if("prelu"===t)return(0,nu.A)(e,n);if("leakyrelu"===t)return(0,tJ.h)(e,r);if("sigmoid"===t)return(0,nx.X)(e);throw Error(`Unknown fused activation ${t}.`)}let n0=(e,t)=>!(e>0)||"linear"===t,n1=(0,tt.op)({fusedConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){let d,h;if(l=l||"linear",!1===n0(y.BV.state.gradientDepth,l)){U.hu("NHWC"===i,()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let d=(0,tF.T)(e,t,n,r,i,a,o);return null!=s&&(d=(0,eh.I)(d,s)),nZ(d,l,u,c)}let f=(0,te._1)(e,"x","conv2d","float32"),p=(0,te._1)(t,"filter","conv2d","float32"),g=f,m=!1;3===f.rank&&(m=!0,g=(0,tx.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),U.hu(4===g.rank,()=>`Error in fused conv2d: input must be rank 4, but got rank ${g.rank}.`),U.hu(4===p.rank,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),tv.m("fused conv2d",r,o);let b="NHWC"===i?g.shape[3]:g.shape[1];U.hu(p.shape[2]===b,()=>`Error in conv2d: depth of input (${b}) must match input depth for filter ${p.shape[2]}.`),U.hu(tv.jT(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let v=tv.Ix(g.shape,p.shape,n,a,r,o);if(null!=s&&(d=(0,te._1)(s,"bias","fused conv2d"),[d]=(0,td.makeTypesMatch)(d,f),"NHWC"===i?e6.assertAndGetBroadcastShape(v.outShape,d.shape):(U.hu(d.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${d.shape.length}.`),U.hu(0===d.shape.length||d.shape[0]===v.outChannels||1===d.shape[0],()=>`Error in fused conv2d: bias shape (${d.shape}) is not compatible with the number of output channels (${v.outChannels})`))),null!=u){let e=u.shape;if(U.hu(e.length<=1||3===e.length,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${e.length}.`),1===e.length)U.hu(1===e[0]||e[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the number of output channels (${v.outChannels}).`);else if(3===e.length)try{e6.assertAndGetBroadcastShape(e,v.outShape)}catch(t){throw Error(`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the output shape of the conv2d (${v.outShape}).`)}h=(0,te._1)(u,"prelu weights","fused conv2d")}let x=(e,t)=>{U.hu("NHWC"===i,()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);let[o,s,u,c]=t,d=nQ(e,u,l);U.hu(tv.I0(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);let h=[(0,nX._)(s.shape,d,o,n,r),(0,nG.p)(s,d,o.shape,n,r)];if(null!=c){let e=nJ(c,d);h.push(e)}return h},w={x:g,filter:p,bias:d,preluActivationWeights:h},k={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return null==s?(0,ey.cb)((e,t,n)=>{let r=y.BV.runKernel(e7._V0,w,k);return n([t,e,r]),m&&(r=(0,tx.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:x}})(g,p):(0,ey.cb)((e,t,n,r)=>{let i=y.BV.runKernel(e7._V0,w,k);return r([t,e,i,n]),m&&(i=(0,tx.X)(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:x}})(g,p,d)}});var n2=n(77982),n3=n(83171);let n4=(0,tt.op)({fusedDepthwiseConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){let d,h;if(!1===n0(y.BV.state.gradientDepth,l)){let d=(0,tU.B)(e,t,n,r,i,a,o);return null!=s&&(d=(0,eh.I)(d,s)),nZ(d,l,u,c)}let f=(0,te._1)(e,"x","depthwiseConv2d","float32"),p=(0,te._1)(t,"filter","depthwiseConv2d","float32"),g=f,m=!1;3===f.rank&&(m=!0,g=(0,tx.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),U.hu(4===g.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${g.rank}.`),U.hu(4===p.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),U.hu(g.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${g.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),null==a&&(a=[1,1]),U.hu(tv.jT(n,a),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),tv.m("fused depthwiseConv2d",r,o);let b=tv.Ix(g.shape,p.shape,n,a,r,o,!0);null!=s&&(d=(0,te._1)(s,"bias","fused conv2d"),[d]=(0,td.makeTypesMatch)(d,f),e6.assertAndGetBroadcastShape(b.outShape,d.shape)),null!=u&&(h=(0,te._1)(u,"prelu weights","fused depthwiseConv2d"));let v=(e,t)=>{U.hu(tv.I0(a),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);let[i,s,u,c]=t,h=nQ(e,u,l),f=(0,n3.v)(s.shape,h,i,n,r,a,o),p=(0,n2.z)(s,h,i.shape,n,r,a,o);return null!=c?[f,p,nJ(d,h)]:[f,p]},x={x:g,filter:p,bias:d,preluActivationWeights:h},w={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return null==s?(0,ey.cb)((e,t,n)=>{let r=y.BV.runKernel(e7.luS,x,w);return n([t,e,r]),m&&(r=(0,tx.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:v}})(g,p):(0,ey.cb)((e,t,n,r)=>{let i=y.BV.runKernel(e7.luS,x,w);return r([t,e,i,n]),m&&(i=(0,tx.X)(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:v}})(g,p,d)}}),n5=(0,tt.op)({fusedMatMul_:function({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:i,activation:a="linear",preluActivationWeights:o,leakyreluAlpha:s=.2}){let l,u;if(!1===n0(y.BV.state.gradientDepth,a)){let l=(0,t4.O)(e,t,n,r);return null!=i&&(l=(0,eh.I)(l,i)),nZ(l,a,o,s)}let c=(0,te._1)(e,"a","fused matMul"),d=(0,te._1)(t,"b","fused matMul");[c,d]=(0,td.makeTypesMatch)(c,d);let h=n?c.shape[c.rank-2]:c.shape[c.rank-1],f=r?d.shape[d.rank-1]:d.shape[d.rank-2],p=n?c.shape[c.rank-1]:c.shape[c.rank-2],g=r?d.shape[d.rank-2]:d.shape[d.rank-1],m=c.shape.slice(0,-2),b=d.shape.slice(0,-2),v=U.NA(m),x=U.NA(b);U.hu(h===f,()=>`Error in fused matMul: inner shapes (${h}) and (${f}) of Tensors with shapes ${c.shape} and ${d.shape} and transposeA=${n} and transposeB=${r} must match.`);let w=e6.assertAndGetBroadcastShape(c.shape.slice(0,-2),d.shape.slice(0,-2)).concat([p,g]),k=n?(0,tx.X)(c,[v,h,p]):(0,tx.X)(c,[v,p,h]),E=r?(0,tx.X)(d,[x,g,f]):(0,tx.X)(d,[x,f,g]);null!=i&&(l=(0,te._1)(i,"bias","fused matMul"),[l]=(0,td.makeTypesMatch)(l,c),e6.assertAndGetBroadcastShape(w,l.shape)),null!=o&&(u=(0,te._1)(o,"prelu weights","fused matMul"));let I=(e,t)=>{let o,s;let[l,u,c,d]=t,h=nQ((0,tx.X)(e,c.shape),c,a);return(n||r?!n&&r?(o=(0,t4.O)(h,u,!1,!1),s=(0,t4.O)(h,l,!0,!1)):n&&!r?(o=(0,t4.O)(u,h,!1,!0),s=(0,t4.O)(l,h,!1,!1)):(o=(0,t4.O)(u,h,!0,!0),s=(0,t4.O)(h,l,!0,!0)):(o=(0,t4.O)(h,u,!1,!0),s=(0,t4.O)(l,h,!0,!1)),null!=i)?[o,s,nJ(d,h)]:[o,s]},S={a:k,b:E,bias:l,preluActivationWeights:u},T={transposeA:n,transposeB:r,activation:a,leakyreluAlpha:s};return null==i?(0,ey.cb)((e,t,n)=>{let r=y.BV.runKernel(e7.usg,S,T);return n([e,t,r]),{value:(0,tx.X)(r,w),gradFunc:I}})(k,E):(0,ey.cb)((e,t,n,r)=>{let i=y.BV.runKernel(e7.usg,S,T);return r([e,t,i,n]),{value:(0,tx.X)(i,w),gradFunc:I}})(k,E,l)}}),n8=(0,tt.op)({cropAndResize_:function(e,t,n,r,i="bilinear",a=0){let o=(0,te._1)(e,"image","cropAndResize"),s=(0,te._1)(t,"boxes","cropAndResize","float32"),l=(0,te._1)(n,"boxInd","cropAndResize","int32"),u=s.shape[0];return U.hu(4===o.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),U.hu(2===s.rank&&4===s.shape[1],()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`),U.hu(1===l.rank&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`),U.hu(2===r.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),U.hu(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),U.hu("bilinear"===i||"nearest"===i,()=>`method must be bilinear or nearest, but was ${i}`),y.BV.runKernel(e7.VcC,{image:o,boxes:s,boxInd:l},{method:i,extrapolationValue:a,cropSize:r})}}),n6=(0,tt.op)({flipLeftRight_:function(e){let t=(0,te._1)(e,"image","flipLeftRight","float32");return U.hu(4===t.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`),y.BV.runKernel(e7.Uyb,{image:t},{})}}),n7=(0,tt.op)({grayscaleToRGB_:function(e){let t=(0,te._1)(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];U.hu(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),U.hu(1===r,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let i=Array(t.rank);return i.fill(1,0,n),i[n]=3,(0,tK.G)(t,i)}}),n9=(0,tt.op)({einsum_:function(e,...t){let n=t.map((e,t)=>(0,te._1)(e,`tensors${t}`,"einsum"));return y.BV.runKernel(e7.$g6,n,{equation:e})}}),re=(0,tt.op)({rgbToGrayscale_:function(e){let t;let n=(0,te._1)(e,"image","RGBToGrayscale"),r=n.rank-1,i=n.shape[r];U.hu(n.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${n.rank}.`),U.hu(3===i,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${i}.`);let a=n.dtype,o=(0,el.p)(n,"float32"),s=nF([.2989,.587,.114]);switch(n.rank){case 2:t=n9("ij,j->i",o,s);break;case 3:t=n9("ijk,k->ij",o,s);break;case 4:t=n9("ijkl,l->ijk",o,s);break;case 5:t=n9("ijklm,m->ijkl",o,s);break;case 6:t=n9("ijklmn,n->ijklm",o,s);break;default:throw Error("Not a valid tensor rank.")}return t=(0,tH.d)(t,-1),(0,el.p)(t,a)}}),rt=(0,tt.op)({rotateWithOffset_:function(e,t,n=0,r=.5){let i=(0,te._1)(e,"image","rotateWithOffset","float32");return U.hu(4===i.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`),y.BV.runKernel(e7.b9H,{image:i},{radians:t,fillValue:n,center:r})}});function rn(e,t,n,r,i,a){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==a&&(a=0);let o=e.shape[0];return n=Math.min(n,o),U.hu(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),U.hu(2===e.rank,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),U.hu(4===e.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),U.hu(1===t.rank,()=>"scores must be a 1D tensor"),U.hu(t.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${t.shape[0]}`),U.hu(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}let rr=(0,tt.op)({nonMaxSuppression_:function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){let a=(0,te._1)(e,"boxes","nonMaxSuppression","float32"),o=(0,te._1)(t,"scores","nonMaxSuppression","float32"),s=rn(a,o,n,r,i),l={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:i=s.scoreThreshold};return y.BV.runKernel(e7.uv1,{boxes:a,scores:o},l)}});function ri(e,t){return e>t?1:e<t?-1:0}function ra(e,t,n,r,i){return rl(e,t,n,r,i,0)}function ro(e,t,n,r,i,a){return rl(e,t,n,r,i,0,!1,a,!0)}function rs(e,t,n,r,i,a){return rl(e,t,n,r,i,a,!0)}function rl(e,t,n,r,i,a,o=!1,s=!1,l=!1){let u=[];for(let e=0;e<t.length;e++)t[e]>i&&u.push({score:t[e],boxIndex:e,suppressBeginIndex:0});u.sort(ru);let c=a>0?-.5/a:0,d=[],h=[];for(;d.length<n&&u.length>0;){let t=u.pop(),{score:n,boxIndex:a,suppressBeginIndex:o}=t;if(n<i)break;let s=!1;for(let n=d.length-1;n>=o;--n){let o=function(e,t,n){let r=e.subarray(4*t,4*t+4),i=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),f=(s-a)*(l-o),p=(d-u)*(h-c);if(f<=0||p<=0)return 0;let g=Math.max(Math.min(s,d)-Math.max(a,u),0)*Math.max(Math.min(l,h)-Math.max(o,c),0);return g/(f+p-g)}(e,a,d[n]);if(o>=r){s=!0;break}if(t.score=t.score*function(e,t,n){let r=Math.exp(t*n*n);return n<=e?r:0}(r,c,o),t.score<=i)break}t.suppressBeginIndex=d.length,!s&&(t.score===n?(d.push(a),h.push(t.score)):t.score>i&&function(e,t,n){let r=function(e,t,n){let r=0,i=e.length,a=0,o=!1;for(;r<i;){let s=n(t,e[a=r+(i-r>>>1)]);s>0?r=a+1:(i=a,o=!s)}return o?r:-r-1}(e,t,n||ri);e.splice(r<0?-(r+1):r,0,t)}(u,t,ru))}let f=d.length,p=n-f;s&&p>0&&(d.push(...Array(p).fill(0)),h.push(...Array(p).fill(0)));let g={selectedIndices:d};return o&&(g.selectedScores=h),l&&(g.validOutputs=f),g}function ru(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}async function rc(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){let a=(0,te._1)(e,"boxes","nonMaxSuppressionAsync"),o=(0,te._1)(t,"scores","nonMaxSuppressionAsync"),s=rn(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;let l=await Promise.all([a.data(),o.data()]),{selectedIndices:u}=ra(l[0],l[1],n,r,i);return a!==e&&a.dispose(),o!==t&&o.dispose(),nF(u,"int32")}let rd=(0,tt.op)({nonMaxSuppressionWithScore_:function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){let o=(0,te._1)(e,"boxes","nonMaxSuppression"),s=(0,te._1)(t,"scores","nonMaxSuppression"),l=rn(o,s,n,r,i,a);n=l.maxOutputSize,r=l.iouThreshold;let u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i=l.scoreThreshold,softNmsSigma:a=l.softNmsSigma},c=y.BV.runKernel(e7.W0H,{boxes:o,scores:s},u);return{selectedIndices:c[0],selectedScores:c[1]}}});async function rh(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){let o=(0,te._1)(e,"boxes","nonMaxSuppressionAsync"),s=(0,te._1)(t,"scores","nonMaxSuppressionAsync"),l=rn(o,s,n,r,i,a);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,a=l.softNmsSigma;let u=await Promise.all([o.data(),s.data()]),{selectedIndices:c,selectedScores:d}=rs(u[0],u[1],n,r,i,a);return o!==e&&o.dispose(),s!==t&&s.dispose(),{selectedIndices:nF(c,"int32"),selectedScores:nF(d)}}let rf=(0,tt.op)({nonMaxSuppressionPadded_:function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){let o=(0,te._1)(e,"boxes","nonMaxSuppression"),s=(0,te._1)(t,"scores","nonMaxSuppression"),l=rn(o,s,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,h=y.BV.runKernel(e7.cye,{boxes:o,scores:s},{maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:a});return{selectedIndices:h[0],validOutputs:h[1]}}});async function rp(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){let o=(0,te._1)(e,"boxes","nonMaxSuppressionAsync"),s=(0,te._1)(t,"scores","nonMaxSuppressionAsync"),l=rn(o,s,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[h,f]=await Promise.all([o.data(),s.data()]),{selectedIndices:p,validOutputs:g}=ro(h,f,u,c,d,a);return o!==e&&o.dispose(),s!==t&&s.dispose(),{selectedIndices:nF(p,"int32"),validOutputs:(0,ev.i)(g,"int32")}}var rg=n(91517),rm=n(21214);let rb=(0,tt.op)({bincount_:function(e,t,n){let r=(0,te._1)(e,"x","bincount"),i=(0,te._1)(t,"weights","bincount");return U.hu("int32"===r.dtype,()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),U.hu(n>=0,()=>`size must be non-negative, but got ${n}.`),U.hu(i.size===r.size||0===i.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`),y.BV.runKernel(e7.zvY,{x:r,weights:i},{size:n})}});var ry=n(7444),rv=n(51100);let rx=(0,tt.op)({threshold_:function(e,t="binary",n=!1,r=.5){let i,a,o,s;let l=(0,te._1)(e,"image","threshold"),u=l.shape[0]*l.shape[1],c=(0,ep.d)(nF([r]),255);if(U.hu(3===l.rank,()=>`Error in threshold: image must be rank 3,but got rank ${l.rank}.`),U.hu(3===l.shape[2]||1===l.shape[2],()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${l.shape[2]}.`),U.hu("int32"===l.dtype||"float32"===l.dtype,()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${l.dtype}.`),U.hu("otsu"===t||"binary"===t,()=>`Method must be binary or otsu, but was ${t}`),3===l.shape[2]){[i,a,o]=(0,nN.V)(l,[1,1,1],-1);let e=(0,ep.d)(i,.2989),t=(0,ep.d)(a,.587),n=(0,ep.d)(o,.114);s=(0,eh.I)((0,eh.I)(e,t),n)}else s=e;"otsu"===t&&(c=function(e,t){let n,r,i,a,o,s,l=nF([-1]),u=nF([0]),c=nF([0]);for(let d=0;d<e.size-1;d++){n=(0,nw.t)(e,0,d+1),r=(0,nw.t)(e,d+1),o=(0,ef.h)((0,nD.S)(n),t),s=(0,ef.h)((0,nD.S)(r),t);let h=(0,nD.S)((0,ep.d)(n,ng(0,n.size)));i=(0,ef.h)(h,(0,nD.S)(n));let f=(0,eN.h)(r.shape,n.size),p=(0,eh.I)(ng(0,r.size),f),g=(0,ep.d)(r,p);a=(0,ef.h)((0,nD.S)(g),(0,nD.S)(r));let m=(0,eD.l)(i,a),b=(0,eD.l)(i,a),y=(0,ep.d)(o,s);c=(0,ep.d)((0,ep.d)(y,m),b);let v=(0,tY.p)(c,u);u=(0,nB.a)(v,c,u),l=(0,nB.a)(v,nF([d]),l)}return l}(rb((0,el.p)((0,rv.N)(s),"int32"),(0,n_.X)([]),256),u));let d=n?(0,ry.z)(s,c):(0,tY.p)(s,c);return(0,el.p)((0,ep.d)(d,255),"int32")}}),rw=(0,tt.op)({transform_:function(e,t,n="nearest",r="constant",i=0,a){let o=(0,te._1)(e,"image","transform","float32"),s=(0,te._1)(t,"transforms","transform","float32");return U.hu(4===o.rank,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),U.hu(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),U.hu(null==a||2===a.length,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`),y.BV.runKernel(e7.wx7,{image:o,transforms:s},{interpolation:n,fillMode:r,fillValue:i,outputShape:a})}});var rk=n(78461);let rE=(0,tt.op)({bandPart_:function(e,t,n){let r,i;let a=(0,te._1)(e,"a","bandPart");(0,U.hu)(a.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${a.rank}.`);let o=a.shape,[s,l]=a.shape.slice(-2);"number"==typeof t?((0,U.hu)(t%1==0,()=>`bandPart(): numLower must be an integer, got ${t}.`),(0,U.hu)(t<=s,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${s}).`),r=(0,te._1)(t<0?s:t,"numLower","bandPart")):((0,U.hu)("int32"===t.dtype,()=>"bandPart(): numLower's dtype must be an int32."),r=(0,nB.a)((0,rk.d)(t,0),s,(0,ne.L)(t,s))),"number"==typeof n?((0,U.hu)(n%1==0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),(0,U.hu)(n<=l,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${l}).`),i=(0,te._1)(n<0?l:n,"numUpper","bandPart")):((0,U.hu)("int32"===n.dtype,()=>"bandPart(): numUpper's dtype must be an int32."),i=(0,nB.a)((0,rk.d)(n,0),l,(0,ne.L)(n,l)));let u=(0,tx.X)(ng(0,s,1,"int32"),[-1,1]),c=ng(0,l,1,"int32"),d=(0,eD.l)(u,c),h=(0,t3.H)((0,ry.z)(d,r),(0,tQ.b)(d,(0,nr.W)(i))),f=(0,nU.l)([s,l],a.dtype);return(0,tx.X)((0,nR.k)((0,nM.H)((0,tx.X)(a,[-1,s,l])).map(e=>(0,nB.a)(h,e,f))),o)}});var rI=n(95872);let rS=(0,tt.op)({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,(0,U.hu)(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let n=e[0].shape[0];for(let t=1;t<e.length;++t)(0,U.hu)(e[t].shape[0]===n,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`)}else t=!0,e=(0,nN.V)(e,e.shape[0],0).map(e=>(0,nA.L)(e,[0]));(0,U.hu)(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);let n=[],r=e;for(let t=0;t<e.length;++t)n.push(y.BV.tidy(()=>{let e=r[t];if(t>0)for(let r=0;r<t;++r){let t=(0,ep.d)((0,nD.S)((0,ep.d)(n[r],e)),n[r]);e=(0,eD.l)(e,t)}return(0,ef.h)(e,(0,rI.K)(e,"euclidean"))}));return t?(0,nR.k)(n,0):n}});function rT(e,t=!1){return y.BV.tidy(()=>{(0,U.hu)(2===e.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);let n=e.shape[0],r=e.shape[1],i=tG(n),a=(0,eu.d)(e),o=nO([[1]],[1,1]),s=(0,eu.d)(o),l=n>=r?r:n;for(let e=0;e<l;++e){let t=a,l=s,u=i;[s,a,i]=y.BV.tidy(()=>{let t=(0,nw.t)(a,[e,e],[n-e,1]),l=(0,rI.K)(t),u=(0,nw.t)(a,[e,e],[1,1]),c=(0,nB.a)((0,tY.p)(u,0),nO([[-1]]),nO([[1]])),d=(0,eD.l)(u,(0,ep.d)(c,l)),h=(0,ef.h)(t,d);s=1===h.shape[0]?(0,eu.d)(o):(0,tN.z)([o,(0,nw.t)(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);let f=(0,nr.W)((0,ef.h)((0,t4.O)(c,d),l)),p=(0,nw.t)(a,[e,0],[n-e,r]),g=(0,ep.d)(f,s),m=(0,nz.p)(s);if(0===e)a=(0,eD.l)(p,(0,t4.O)(g,(0,t4.O)(m,p)));else{let t=(0,eD.l)(p,(0,t4.O)(g,(0,t4.O)(m,p)));a=(0,tN.z)([(0,nw.t)(a,[0,0],[e,r]),t],0)}let b=(0,nz.p)(g),y=(0,nw.t)(i,[0,e],[n,i.shape[1]-e]);if(0===e)i=(0,eD.l)(y,(0,t4.O)((0,t4.O)(y,s),b));else{let t=(0,eD.l)(y,(0,t4.O)((0,t4.O)(y,s),b));i=(0,tN.z)([(0,nw.t)(i,[0,0],[n,e]),t],1)}return[s,a,i]}),(0,ed.B9)([t,l,u])}return!t&&n>r&&(i=(0,nw.t)(i,[0,0],[n,r]),a=(0,nw.t)(a,[0,0],[r,r])),[i,a]})}let rC=(0,tt.op)({qr_:function(e,t=!1){if((0,U.hu)(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),2===e.rank)return rT(e,t);{let n=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t),r=(0,nM.H)((0,tx.X)(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],a=[];return r.forEach(e=>{let[n,r]=rT(e,t);i.push(n),a.push(r)}),[(0,tx.X)((0,nR.k)(i,0),e.shape),(0,tx.X)((0,nR.k)(a,0),e.shape)]}}});(o=l||(l={}))[o.NONE=0]="NONE",o[o.MEAN=1]="MEAN",o[o.SUM=2]="SUM",o[o.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",n(67436),nj.k,nH.S,nW.Q,nK.w;let rN={flipLeftRight:n6,grayscaleToRGB:n7,resizeNearestNeighbor:rm.j,resizeBilinear:rg.I,rgbToGrayscale:re,rotateWithOffset:rt,cropAndResize:n8,nonMaxSuppression:rr,nonMaxSuppressionAsync:rc,nonMaxSuppressionWithScore:rd,nonMaxSuppressionWithScoreAsync:rh,nonMaxSuppressionPadded:rf,nonMaxSuppressionPaddedAsync:rp,threshold:rx,transform:rw},rA={bandPart:rE,gramSchmidt:rS,qr:rC};class rR{static sgd(e){return new eP(e)}static momentum(e,t,n=!1){return new eM(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,i=!1){return new eL(e,t,n,r,i)}static adam(e=.001,t=.9,n=.999,r=null){return new e$(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new eC(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,i=0){return new eO(e,t,n,r,i)}static adagrad(e,t=.1){return new eA(e,t)}}let rD=rR,r$="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e();function r_(){return new Promise(e=>r$(()=>e()))}function rF(e,t){let n=e[0].length;e.forEach((e,t)=>{U.hu(e.length===n,()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`)}),U.hu(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let r=e[0];e.forEach((e,i)=>{for(let a=0;a<n;a++)U.hu(a===t||e[a]===r[a],()=>`Error in concat${n}D: Shape of tensors[${i}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function rO(e,t){let n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}function rP(e,t,n){let r=[];if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){let a=n[i],o=r[r.length-n.length+i],s=r[o];if(a>=0){if(s>=0){if(s!==a)throw Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${i+e}] = ${a} but shape[${i+e}] = ${s}`)}else r[o]=a}}return r}function rM(e){let t={FIRST_DIM_SIZE:u.FIRST_DIM_SIZE,VALUE_ROWIDS:u.VALUE_ROWIDS,ROW_LENGTHS:u.ROW_LENGTHS,ROW_SPLITS:u.ROW_SPLITS,ROW_LIMITS:u.ROW_LIMITS,ROW_STARTS:u.ROW_STARTS},n=[];for(let r of e)if(r in t)n.push(t[r]);else break;return n}function rL(e){return 0===e.length?0:e[0]===u.FIRST_DIM_SIZE?e.length-1:e.length}function rB(e,t){if(null==e||null==t)return;let n=e.length,r=t.length;if(n>=r)throw Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){let n=e[i],r=t[i+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${i-e.length}] = ${n} but ragged tensor input.flatValues.shape[${i-e.length}] = ${r}`)}}(s=u||(u={}))[s.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",s[s.VALUE_ROWIDS=1]="VALUE_ROWIDS",s[s.ROW_LENGTHS=2]="ROW_LENGTHS",s[s.ROW_SPLITS=3]="ROW_SPLITS",s[s.ROW_LIMITS=4]="ROW_LIMITS",s[s.ROW_STARTS=5]="ROW_STARTS";let rU=30;function rz(e){return e<=rU?e:(0,U.jP)(e,Math.floor(Math.sqrt(e)))}function rV(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function rW(e,t,n,r=!0){let i=[];if(r)(i=i.concat(t.slice(0))).push(e[0]/n),i=i.concat(e.slice(1));else{i=i.concat(e[0]);let n=t.length;for(let r=0;r<n;++r)i=i.concat([e[r+1]/t[r],t[r]]);i=i.concat(e.slice(n+1))}return i}function rj(e,t,n=!0){let r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{let n=[],i=[];for(let r=1;r<e;++r)r>=2*t+1||r%2==1?i.push(r):n.push(r);r.push(...n),r.push(0),r.push(...i)}return r}function rH(e,t,n,r=!0){let i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(let n=1;n<e.length;++n)n<=t.length?r?i.push(t[n-1]*e[n]):i.push(e[n]/t[n-1]):i.push(e[n]);return i}function rK(e,t){let n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function rG(e,t,n){let r=e.slice(0,1);for(let i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}function rX(e,t){let n=e.shape.length,r=t.shape.length;if(n<1)throw Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===(0,U.NA)(e.shape))throw Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);let i=t.shape,a=i[i.length-1],o=1;for(let e=0;e<i.length-1;++e)o*=i[e];let s=e.shape,l=i.slice();l.pop();let u=1;for(let e=a;e<n;++e)u*=s[e],l.push(s[e]);let c=[...(0,U.e3)(e.shape).map(e=>e/u),1].slice(0,a);return[l,o,u,c]}function rq(e,t,n){let r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw Error(a+` update.rank < ${i}. `);if(e.length<r+(n.rank-i))throw Error(a+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+e.length-r)throw Error(a+` update.rank != ${i+e.length-r}`);for(let e=0;e<i;++e)if(n.shape[e]!==t.shape[e])throw Error(a+` updates.shape[${e}] (${n.shape[e]}) != indices.shape[${e}] (${t.shape[e]}).`);for(let t=0;t<n.rank-i;++t)if(n.shape[t+i]!==e[t+r])throw Error(a+` updates.shape[${t+i}] (${n.shape[t+i]}) != shape[${t+i}] (${e[t+i]})`)}function rY(e,t,n){if(t.rank<1)throw Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw Error(`Updates specified for empty output. updates shape: ${e.shape}`)}rq(n,t,e)}function rQ(e,t,n){let r=t.shape.length,i=r>1?t.shape[r-1]:1,a=n.length,o=1;for(let e=i;e<a;++e)o*=n[e];let s=i<1?1:i,l=(0,U.NA)(t.shape)/s,u=[...(0,U.e3)(n.slice(0,i)),1];return{sliceRank:i,numUpdates:l,sliceSize:o,strides:u,outputSize:(0,U.NA)(n)}}var rJ=n(97184);let rZ=.3275911,r0=.254829592,r1=-.284496736,r2=1.421413741,r3=-1.453152027,r4=1.061405429;var r5=n(67177);function r8(e,t){if(e.length!==t.length)throw Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);let n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function r6(e){let t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function r7(e){let t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=0;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function r9(e){let t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=2;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function ie(e,t){return{real:e[2*t],imag:e[2*t+1]}}function it(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function ir(e,t){let n=new Float32Array(e/2),r=new Float32Array(e/2);for(let i=0;i<Math.ceil(e/2);i++){let a=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:n,imag:r}}function ii(e,t,n){let r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}let ia=/->/g;function io(e,t){let n=((e=e.replace(/\s/g,"")).length-e.replace(ia,"").length)/2;if(n<1)throw Error("Equations without an arrow are not supported.");if(n>1)throw Error('Equation must contain exactly one arrow ("->").');let[r,i]=e.split("->");(0,U.hu)(-1===r.indexOf("..."),()=>'The ellipsis notation ("...") is not supported yet.');let a=r.split(","),o=a.length;if(t!==o)throw Error(`Expected ${o} input tensors, received ${t}`);if(o>2)throw Error("Support for more than 2 input tensors is not implemented yet.");let s=[];for(let e=0;e<i.length;++e){let t=i[e];if(!a.some(e=>-1!==e.indexOf(t)))throw Error(`Output subscripts contain the label ${t} not present in the input subscripts.`);-1===s.indexOf(t)&&s.push(t)}for(let e=0;e<r.length;++e){let t=r[e];-1===s.indexOf(t)&&","!==t&&s.push(t)}let l=Array(a.length);for(let e=0;e<o;++e){if(new Set(a[e].split("")).size!==a[e].length)throw Error(`Found duplicate axes in input component ${a[e]}. Support for duplicate axes in input is not implemented yet.`);l[e]=[];for(let t=0;t<a[e].length;++t)l[e].push(s.indexOf(a[e][t]))}let u=s.length,c=i.length,d=[];for(let e=c;e<u;++e)d.push(e);return{allDims:s,summedDims:d,idDims:l}}function is(e,t){let n=Array(e);n.fill(-1);for(let e=0;e<t.length;++e)n[t[e]]=e;let r=[];for(let t=0;t<e;++t)-1===n[t]&&r.push(t);return{permutationIndices:n=n.filter(e=>-1!==e),expandDims:r}}function il(e,t,n){let r=Array(e);for(let e=0;e<n.length;++e){let i=n[e].shape;for(let n=0;n<t[e].length;++n)void 0===r[t[e][n]]?r[t[e][n]]=i[n]:(0,U.hu)(r[t[e][n]]===i[n],()=>`Expected dimension ${r[t[e][n]]} at axis ${n} of input shaped ${JSON.stringify(i)}, but got dimension ${i[n]}`)}}function iu(e,t){let n=[],r=0;0===e.length&&e.push(-1),r=e.length+1;for(let e=0;e<r;++e)n.push([]);let i=[];for(let r=0;r<e.length;++r)for(let a of function(e,t){let n=[];for(let r=0;r<e.length;++r)(0===e[r].length||-1!==e[r].indexOf(t)||-1===t)&&n.push(r);return n}(t,e[r]))-1===i.indexOf(a)&&(n[r].push(a),i.push(a));return{path:e,steps:n}}function ic(e){return e.every((e,t)=>e===t)}function id(e,t,n=0){let r=[];if("number"==typeof t)(0,U.hu)(e.shape[n]%t==0,()=>"Number of splits must evenly divide the axis."),r=Array(t).fill(e.shape[n]/t);else{let i=t.reduce((e,t)=>(-1===t&&(e+=1),e),0);(0,U.hu)(i<=1,()=>"There should be only one negative value in split array.");let a=t.indexOf(-1);if(-1!==a){let r=t.reduce((e,t)=>t>0?e+t:e);t[a]=e.shape[n]-r}(0,U.hu)(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}function ih(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function ip(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function ig(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function im(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function ib(e,t){return`size ${e} must be non-negative, not ${t}`}function iy(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function iv(e,t){let n=(0,U.NA)(e),r=(0,U.NA)(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${e} outputShape= ${t}`}function ix(e,t){let n=(0,U.NA)(e),r=(0,U.NA)(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${e} outputShape=${t}`}function iw(){return"segment ids must be >= 0"}function ik(){return"segment ids are not increasing"}function iE(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function iI(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}function iS(e,t){let n,r=!1;for(e<=rU?(n=e,r=!0):n=(0,U.jP)(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=(0,U.jP)(e,n+1);return n}function iT(e,t,n){let r=[],i=e.length;for(let a=0;a<i;a++)a!==t?r.push(e[a]):r.push(n);return r}function iC(e,t,n,r){let i=t.shape.length,a=e.shape.length;if(0!==r&&(r<-i||r>i))throw Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>a)throw Error(`batchDims (${r}) must be less than rank(x) (
    ${a}).`);if(n<r)throw Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let n=0;n<r;++n)if(e.shape[n]!==t.shape[n])throw Error(`x.shape[${n}]: ${e.shape[n]} should be equal to indices.shape[${n}]: ${t.shape[n]}.`);let o=e.shape[n],s=[],l=1,u=1,c=1;for(let t=0;t<r;++t)s.push(e.shape[t]),l*=e.shape[t];for(let t=r;t<n;t++)s.push(e.shape[t]),u*=e.shape[t];for(let e=r;e<i;e++)s.push(t.shape[e]);for(let t=n+1;t<a;t++)s.push(e.shape[t]),c*=e.shape[t];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:s}}function iN(e){try{return e.map(e=>(0,th.decodeString)(e))}catch(e){throw Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function iA(e){return e.map(e=>(0,th.encodeString)(e))}function iR(e,t){let n=[];for(let e=0;e<t.length;e++)t[e]&&n.push(e);let r=es(e,"int32"),i=es([n.length,e.length],"int32");for(let t=0;t<n.length;t++){let a=r.indexToLoc(n[t]),o=t*e.length;i.values.set(a,o)}return i.toTensor()}var iD=n(62975);!function(){for(let e of eB)eI(e)}()},90807:function(e,t,n){"use strict";n.d(t,{w:function(){return i}});var r=n(32904);class i{static join(e){return new i(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e||(e instanceof Array||(e=[e]),0===(e=e.map(e=>r.isTypedArray(e)?e.buffer:e)).length))return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){let r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let i=t+r.byteLength;this.shards.push({buffer:r,start:t,end:i}),t=i}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(0===this.shards.length||(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),(t=Math.min(this.byteLength,t))<=e))return new ArrayBuffer(0);let n=this.findShardForByte(e);if(-1===n)throw Error(`Could not find start shard for byte ${e}`);let r=new ArrayBuffer(t-e),i=new Uint8Array(r),a=0;for(let r=n;r<this.shards.length;r++){let n=this.shards[r],o=e+a-n.start,s=a,l=Math.min(t,n.end)-n.start,u=new Uint8Array(n.buffer,o,l-o);if(i.set(u,s),a+=u.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return -1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;let n=function(e,t){let n=0,r=e.length;for(;n<=r;){let i=Math.floor((r-n)/2)+n,a=t(e[i]);if(0===a)return i;a<0?r=i:n=i+1}return -1}(this.shards,t);return -1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}},3850:function(e,t,n){"use strict";n.d(t,{EZ:function(){return k},JY:function(){return w},Q:function(){return T},Yd:function(){return E},_n:function(){return v},dI:function(){return h},hu:function(){return C},jN:function(){return S},ji:function(){return I},n7:function(){return x},r:function(){return m},yz:function(){return d}});var r=n(97977),i=n(1802),a=n(2771),o=n(78123),s=n(90807),l=n(35823),u=n(6472),c=n(96434).Buffer;async function d(e,t){let n=[],r=[],i=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let a=0;a<i.length;++a){let o=i[a],s=Array.isArray(e)?e[a].tensor:e[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw Error(`Unsupported dtype in weight '${o}': ${s.dtype}`);let l={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){let e=new Promise(async e=>{let t=await s.bytes(),n=new Uint8Array(t.reduce((e,t)=>e+t.length,0)+4*t.length),r=0;for(let e=0;e<t.length;e++){let i=t[e],a=new Uint8Array(new Uint32Array([i.length]).buffer);n.set(a,r),r+=4,n.set(i,r),r+=i.length}e(n)});r.push(e)}else r.push(s.data());null!=t&&(l.group=t),n.push(l)}return{data:function(e){if(null===e)throw Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0,n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)});let r=new Uint8Array(t),i=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),i),i+=e.byteLength}),r.buffer}(await Promise.all(r)),specs:n}}function h(e,t){let n=new s.w(e),r={},i=0;for(let e of t){let t=function(e,t){let n;let r=(0,a.NA)(e.shape);if("quantization"in e){let t=e.quantization;n=o.J[t.dtype]}else if("string"===e.dtype){let e=0;for(let n=0;n<r;n++)e+=4+new Uint32Array(t(e,e+4))[0];return e}else n=o.J[e.dtype];return r*n}(e,(e,t)=>n.slice(i+e,i+t));r[e.name]=p(e,n.slice(i,i+t)),i+=t}return r}async function f(e,t){let n;let r=(0,a.NA)(e.shape);if("quantization"in e){let t=e.quantization;n=o.J[t.dtype]}else if("string"===e.dtype){let e=0;for(let n=0;n<r;n++)e+=4+new Uint32Array(await t(e,e+4))[0];return e}else n=o.J[e.dtype];return r*n}function p(e,t){let n;let s=e.name,l=e.dtype,u=e.shape,c=(0,a.NA)(u),d=0;if("quantization"in e){let r=e.quantization;if("uint8"===r.dtype||"uint16"===r.dtype){if(!("min"in r&&"scale"in r))throw Error(`Weight ${e.name} with quantization ${r.dtype} doesn't have corresponding metadata min and scale.`)}else if("float16"===r.dtype){if("float32"!==l)throw Error(`Weight ${e.name} is quantized with ${r.dtype} which only supports weights of type float32 not ${l}.`)}else throw Error(`Weight ${e.name} has unknown quantization dtype ${r.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let i=o.J[r.dtype],a="uint8"===r.dtype?new Uint8Array(t):new Uint16Array(t);if("float32"===l){if("uint8"===r.dtype||"uint16"===r.dtype){n=new Float32Array(a.length);for(let e=0;e<a.length;e++){let t=a[e];n[e]=t*r.scale+r.min}}else if("float16"===r.dtype)n=(function(){let e=function(){let e=e=>{let t=e<<13,n=0;for(;(8388608&t)==0;)n-=8388608,t<<=1;return(t&=-8388609)|(n+=947912704)},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}(),t=function(){let e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){let e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{let i=new ArrayBuffer(4*r.length),a=new Uint32Array(i);for(let i=0;i<r.length;i++){let o=r[i],s=e[n[o>>10]+(1023&o)]+t[o>>10];a[i]=s}return new Float32Array(i)}})()(a);else throw Error(`Unsupported quantization type ${r.dtype} for weight type float32.`)}else if("int32"===l){if("uint8"!==r.dtype&&"uint16"!==r.dtype)throw Error(`Unsupported quantization type ${r.dtype} for weight type int32.`);n=new Int32Array(a.length);for(let e=0;e<a.length;e++){let t=a[e];n[e]=Math.round(t*r.scale+r.min)}}else throw Error(`Unsupported dtype in weight '${s}': ${l}`);d+=c*i}else if("string"===l){let r=(0,a.NA)(e.shape);n=[];for(let e=0;e<r;e++){let e=new Uint32Array(t.slice(d,d+4))[0];d+=4;let r=new Uint8Array(t.slice(d,d+e));n.push(r),d+=e}}else{let e=o.J[l];if("float32"===l)n=new Float32Array(t);else if("int32"===l)n=new Int32Array(t);else if("bool"===l)n=new Uint8Array(t);else if("complex64"===l){n=new Float32Array(t);let e=new Float32Array(n.length/2),a=new Float32Array(n.length/2);for(let t=0;t<e.length;t++)e[t]=n[2*t],a[t]=n[2*t+1];let o=(0,i.X)(e,u,"float32"),s=(0,i.X)(a,u,"float32"),l=(0,r.P)(o,s);return o.dispose(),s.dispose(),l}else throw Error(`Unsupported dtype in weight '${s}': ${l}`);d+=c*e}return(0,i.X)(n,u,l)}async function g(e,t,n){let r=new Uint8Array(t);for(;r.byteLength<n;){let{done:t,value:i}=await e.read();if(t&&null==i){let e=n-r.byteLength;throw Error(`Reader is done but ${e} bytes are still expected`)}let a=new Uint8Array(r.length+i.byteLength);a.set(r,0),a.set(new Uint8Array(i),r.length),r=a}return r.buffer}async function m(e,t){let n={},r=e.getReader(),i=new ArrayBuffer(0);for(let e of t){let t=await f(e,async(e,t)=>(i=await g(r,i,t)).slice(e,t)),o=(i=await g(r,i,t)).slice(0,t);i=i.slice(t);let s=p(e,o);if(n[e.name]=s,"webgpu"===(0,l.N_)()){let e=(0,l.y3)();"uploadToGPU"in e&&(0,a.NA)(s.shape)>=(0,u.OB)().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&e.uploadToGPU(s.dataId)}}return n}let b=void 0!==c&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function y(e){return b?c.byteLength(e,"utf8"):new Blob([e]).size}function v(e){if(b)return c.from(e).toString("base64");let t=new Uint8Array(e),n="";for(let e=0,r=t.length;e<r;e++)n+=String.fromCharCode(t[e]);return btoa(n)}function x(e){if(b){let t=c.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n.set([t.charCodeAt(e)],e);return n.buffer}function w(e){return s.w.join(e)}function k(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);let t=e.split("/");return t[t.length-1]}function E(e,t){let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function I(e,t,n){let r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}async function S(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),I(e,n,r)}function T(e){if(e.modelTopology instanceof ArrayBuffer)throw Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:y(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:y(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new s.w(e.weightData).byteLength}}function C(e){let t=[];for(let n of e)t.push(...n.weights);return t}},78123:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});let r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},35047:function(e,t,n){"use strict";n.d(t,{$HU:function(){return ti},$g6:function(){return et},$w:function(){return q},Acj:function(){return ey},BMI:function(){return eL},BiW:function(){return tt},Byc:function(){return z},CAk:function(){return eC},CQl:function(){return te},D2d:function(){return tO},DlI:function(){return e7},Eh3:function(){return $},FKq:function(){return tT},G3Y:function(){return tq},GBy:function(){return tC},Gcp:function(){return tR},HEU:function(){return er},HZH:function(){return to},Hhh:function(){return eP},Hmb:function(){return tl},IKK:function(){return u},IMb:function(){return x},J$2:function(){return eS},J_u:function(){return ew},JhU:function(){return b},L8s:function(){return tA},Ly9:function(){return S},M2y:function(){return h},MIZ:function(){return tH},MRv:function(){return tS},MZg:function(){return e_},NEP:function(){return eo},NZg:function(){return eq},O3z:function(){return tD},OAf:function(){return ez},OR:function(){return eh},OU7:function(){return eV},OV7:function(){return eU},Omj:function(){return ei},Oyi:function(){return g},PYm:function(){return eD},PhF:function(){return ty},QCc:function(){return m},QRR:function(){return j},Qg5:function(){return ex},QiL:function(){return e4},Qvg:function(){return tJ},RFZ:function(){return C},ROF:function(){return y},RQH:function(){return tw},RuY:function(){return tZ},SIB:function(){return tm},SX0:function(){return en},SYM:function(){return r},SbG:function(){return td},SpW:function(){return a},T0n:function(){return H},TQc:function(){return tN},TR1:function(){return U},ToN:function(){return tQ},Tr8:function(){return tW},Uyb:function(){return ed},VGw:function(){return i},Vbg:function(){return eX},VcC:function(){return W},VfG:function(){return e$},Vn9:function(){return J},W0H:function(){return e1},XLW:function(){return w},XkS:function(){return tV},Xze:function(){return s},Y0y:function(){return el},YFo:function(){return es},YoZ:function(){return eM},ZbH:function(){return eA},ZjV:function(){return tF},Zz9:function(){return R},_JP:function(){return tU},_V0:function(){return t4},_Yw:function(){return tu},_k9:function(){return v},_tC:function(){return tP},a5O:function(){return tI},aJk:function(){return d},avt:function(){return ek},b9H:function(){return t2},bK0:function(){return tM},bV0:function(){return tp},c17:function(){return eH},cWu:function(){return tG},cie:function(){return K},cye:function(){return e0},dDz:function(){return e9},deh:function(){return ec},dpD:function(){return ts},e07:function(){return tf},e0R:function(){return tL},e6w:function(){return tn},e7N:function(){return eN},eBW:function(){return t1},eEB:function(){return T},eZ0:function(){return eO},ekb:function(){return Q},gJX:function(){return N},h8e:function(){return t0},hCO:function(){return I},hGc:function(){return Z},hdR:function(){return ea},i5y:function(){return tE},iHb:function(){return V},iJz:function(){return ev},iWB:function(){return eE},iZT:function(){return eb},ik2:function(){return L},jMg:function(){return p},jQk:function(){return tB},jQs:function(){return eG},jeX:function(){return ef},kU:function(){return eR},kpP:function(){return tY},kuV:function(){return eQ},luS:function(){return t5},lyA:function(){return e5},mKl:function(){return th},mTV:function(){return eB},mc4:function(){return B},mhS:function(){return _},mm_:function(){return o},n9L:function(){return tK},nhH:function(){return t$},nr8:function(){return tb},o0g:function(){return e6},o2y:function(){return M},oFR:function(){return tv},oHH:function(){return ee},oT6:function(){return l},p2w:function(){return tx},p4S:function(){return Y},pe_:function(){return e8},q1x:function(){return em},q2K:function(){return ej},q8u:function(){return eK},qCd:function(){return eF},qWM:function(){return e2},qi_:function(){return eg},qkr:function(){return ta},qw7:function(){return f},r7n:function(){return eI},s1s:function(){return tz},sEM:function(){return tj},sHE:function(){return ep},sJF:function(){return c},sL$:function(){return G},usg:function(){return t3},uv1:function(){return eZ},vFR:function(){return eW},vtC:function(){return eT},vwp:function(){return eu},w3H:function(){return t_},wUP:function(){return F},wYB:function(){return tk},wYn:function(){return eY},we_:function(){return e3},wm:function(){return O},wx7:function(){return tX},x12:function(){return P},xJR:function(){return tr},xQA:function(){return tg},xnO:function(){return A},y7R:function(){return X},yQU:function(){return eJ},yj2:function(){return D},zbQ:function(){return tc},zvY:function(){return E},zws:function(){return k}});let r="Abs",i="Acos",a="Acosh",o="Add",s="AddN",l="All",u="Any",c="ArgMax",d="ArgMin",h="Asin",f="Asinh",p="Atan",g="Atanh",m="Atan2",b="AvgPool",y="AvgPoolGrad",v="AvgPool3D",x="AvgPool3DGrad",w="BatchMatMul",k="BatchToSpaceND",E="Bincount",I="BitwiseAnd",S="BroadcastTo",T="BroadcastArgs",C="Cast",N="Ceil",A="ClipByValue",R="Complex",D="ComplexAbs",$="Concat",_="Conv2D",F="Conv2DBackpropFilter",O="Conv2DBackpropInput",P="Conv3D",M="Conv3DBackpropFilterV2",L="Conv3DBackpropInputV2",B="Cos",U="Cosh",z="Cumprod",V="Cumsum",W="CropAndResize",j="DenseBincount",H="DepthToSpace",K="DepthwiseConv2dNative",G="DepthwiseConv2dNativeBackpropFilter",X="DepthwiseConv2dNativeBackpropInput",q="Diag",Y="Dilation2D",Q="Dilation2DBackpropInput",J="Dilation2DBackpropFilter",Z="Draw",ee="RealDiv",et="Einsum",en="Elu",er="EluGrad",ei="Erf",ea="Equal",eo="Exp",es="ExpandDims",el="Expm1",eu="FFT",ec="Fill",ed="FlipLeftRight",eh="Floor",ef="FloorDiv",ep="FusedBatchNorm",eg="GatherV2",em="GatherNd",eb="Greater",ey="GreaterEqual",ev="Identity",ex="IFFT",ew="Imag",ek="IsFinite",eE="IsInf",eI="IsNan",eS="LeakyRelu",eT="Less",eC="LessEqual",eN="LinSpace",eA="Log",eR="Log1p",eD="LogicalAnd",e$="LogicalNot",e_="LogicalOr",eF="LogSoftmax",eO="LRN",eP="LRNGrad",eM="Max",eL="Maximum",eB="MaxPool",eU="MaxPoolGrad",ez="MaxPool3D",eV="MaxPool3DGrad",eW="MaxPoolWithArgmax",ej="Mean",eH="Min",eK="Minimum",eG="MirrorPad",eX="Mod",eq="Multinomial",eY="Multiply",eQ="Neg",eJ="NotEqual",eZ="NonMaxSuppressionV3",e0="NonMaxSuppressionV4",e1="NonMaxSuppressionV5",e2="OnesLike",e3="OneHot",e4="Pack",e5="PadV2",e8="Pow",e6="Prelu",e7="Prod",e9="RaggedGather",te="RaggedRange",tt="RaggedTensorToTensor",tn="Range",tr="Real",ti="Reciprocal",ta="Relu",to="Reshape",ts="ResizeNearestNeighbor",tl="ResizeNearestNeighborGrad",tu="ResizeBilinear",tc="ResizeBilinearGrad",td="Relu6",th="Reverse",tf="Round",tp="Rsqrt",tg="ScatterNd",tm="TensorScatterUpdate",tb="SearchSorted",ty="Select",tv="Selu",tx="Slice",tw="Sin",tk="Sinh",tE="Sign",tI="Sigmoid",tS="Softplus",tT="Sqrt",tC="Sum",tN="SpaceToBatchND",tA="SplitV",tR="Softmax",tD="SparseFillEmptyRows",t$="SparseReshape",t_="SparseSegmentMean",tF="SparseSegmentSum",tO="SparseToDense",tP="SquaredDifference",tM="Square",tL="StaticRegexReplace",tB="StridedSlice",tU="StringNGrams",tz="StringSplit",tV="StringToHashBucketFast",tW="Sub",tj="Tan",tH="Tanh",tK="Tile",tG="TopK",tX="Transform",tq="Transpose",tY="Unique",tQ="Unpack",tJ="UnsortedSegmentSum",tZ="ZerosLike",t0="Step",t1="FromPixels",t2="RotateWithOffset",t3="_FusedMatMul",t4="FusedConv2D",t5="FusedDepthwiseConv2D"},29922:function(e,t,n){"use strict";n.d(t,{Li:function(){return h},pI:function(){return l},tr:function(){return c},uk:function(){return u},wC:function(){return d}});var r=n(6472),i=n(95490),a=n(67177);let o=(0,i.R)("kernelRegistry",()=>new Map),s=(0,i.R)("gradRegistry",()=>new Map);function l(e,t){let n=`${t}_${e}`;return o.get(n)}function u(e){return s.get(e)}function c(e){let t=o.entries(),n=[];for(;;){let{done:r,value:i}=t.next();if(r)break;let[a,o]=i,[s]=a.split("_");s===e&&n.push(o)}return n}function d(e){let{kernelName:t,backendName:n}=e,r=`${n}_${t}`;o.has(r)&&a.Z(`The kernel '${t}' for backend '${n}' is already registered`),o.set(r,e)}function h(e){let{kernelName:t}=e;s.has(t)&&(0,r.OB)().getBool("DEBUG")&&a.Z(`Overriding the gradient for '${t}'`),s.set(t,e)}},67177:function(e,t,n){"use strict";n.d(t,{Z:function(){return i},c:function(){return a}});var r=n(6472);function i(...e){(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||console.warn(...e)}function a(...e){(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||console.log(...e)}},99044:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({abs_:function(e){let t=(0,a._1)(e,"x","abs");return"complex64"===t.dtype?r.BV.runKernel(i.yj2,{x:t}):r.BV.runKernel(i.SYM,{x:t})}})},83266:function(e,t,n){"use strict";n.d(t,{I:function(){return s}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971);let s=(0,n(32888).op)({add_:function(e,t){let n=(0,o._1)(e,"a","add"),s=(0,o._1)(t,"b","add");[n,s]=(0,a.makeTypesMatch)(n,s);let l={a:n,b:s};return r.BV.runKernel(i.mm_,l)}})},45195:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({all_:function(e,t=null,n=!1){let o=(0,a._1)(e,"x","all","bool");return r.BV.runKernel(i.oT6,{x:o},{axis:t,keepDims:n})}})},6591:function(e,t,n){"use strict";n.d(t,{Y:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({any_:function(e,t=null,n=!1){let o=(0,a._1)(e,"x","any","bool");return r.BV.runKernel(i.IKK,{x:o},{axis:t,keepDims:n})}})},21231:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({argMax_:function(e,t=0){let n=(0,a._1)(e,"x","argMax");return r.BV.runKernel(i.sJF,{x:n},{axis:t})}})},72126:function(e,t,n){"use strict";n.d(t,{w:function(){return d}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771),s=n(58893),l=n(79011),u=n(32888),c=n(96439);let d=(0,u.op)({avgPool_:function(e,t,n,u,d){let h=(0,a._1)(e,"x","avgPool","float32");o.hu(l.jT(n,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`);let f=h,p=!1;3===h.rank&&(p=!0,f=(0,c.X)(h,[1,h.shape[0],h.shape[1],h.shape[2]])),o.hu(4===f.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${f.rank}.`),l.m("avgPool",u,d);let g={x:f},m=r.BV.runKernel(i.JhU,g,{filterSize:t,strides:n,pad:u,dimRoundingMode:d});return(m=(0,s.p)(m,h.dtype),p)?(0,c.X)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},47050:function(e,t,n){"use strict";n.d(t,{LJ:function(){return c},Q3:function(){return u},Vh:function(){return a},YB:function(){return i},kz:function(){return o},lB:function(){return l},rv:function(){return s},sY:function(){return d}});var r=n(2771);function i(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function a(e,t,n){let r=e.length+t.length,i=[],a=0,o=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?i.push(e[a++]):i.push(t[o++]);return i}function o(e,t){let n=[],r=e.length;for(let i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i]);return[n,t.map(t=>e[t])]}function s(e,t){return a(e,t.map(e=>1),t)}function l(e,t,n){r.hu(i(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function u(e,t){if(i(e,t))return null;let n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(e=>n.push(e)),n}function c(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function d(e,t){let n=[];for(let r=t-e;r<t;++r)n.push(r);return n}},60592:function(e,t,n){"use strict";n.d(t,{t:function(){return l}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771),s=n(96439);let l=(0,n(32888).op)({batchNorm_:function(e,t,n,l,u,c){let d,h;null==c&&(c=.001);let f=(0,a._1)(e,"x","batchNorm"),p=(0,a._1)(t,"mean","batchNorm"),g=(0,a._1)(n,"variance","batchNorm");null!=u&&(d=(0,a._1)(u,"scale","batchNorm")),null!=l&&(h=(0,a._1)(l,"offset","batchNorm")),o.hu(p.rank===g.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),o.hu(null==h||p.rank===h.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),o.hu(null==d||p.rank===d.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let m={x:0===f.rank||1===f.rank?(0,s.X)(f,[1,1,1,f.size]):2===f.rank?(0,s.X)(f,[1,1,f.shape[0],f.shape[1]]):3===f.rank?(0,s.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]]):f,scale:d,offset:h,mean:p,variance:g},b={varianceEpsilon:c},y=r.BV.runKernel(i.sHE,m,b);return(0,s.X)(y,f.shape)}})},25896:function(e,t,n){"use strict";n.d(t,{U:function(){return c}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771),s=n(90699),l=n(32888),u=n(96439);let c=(0,l.op)({broadcastTo_:function(e,t){let n=(0,a._1)(e,"broadcastTo","x"),l=n.shape;if((0,o.Mu)(t),t.length<n.rank)throw Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){let e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=(0,u.X)(n,e)}let c=n.shape,d=Array.from(t);for(let e=t.length-1;e>=0;e--)if(c[e]===t[e])d[e]=1;else if(1!==n.shape[e])throw Error(`broadcastTo(): [${l}] cannot be broadcast to [${t}].`);if(0===d.map((e,t)=>e>1?t:-1).filter(e=>e>=0).length)return(0,s.d)(n);let h={x:n};return r.BV.runKernel(i.n9L,h,{reps:d})}})},95221:function(e,t,n){"use strict";function r(e,t){let n=e.length,r=[];for(let i=0;i<n;i++){let a=n-1-i,o=e[a]||1;(t[t.length-1-i]||1)>1&&1===o&&r.unshift(a)}return r}function i(e,t){let n=[];for(let r=0;r<t.length;r++){let i=e[e.length-r-1],a=t.length-r-1,o=t[a];(null==i||1===i&&o>1)&&n.unshift(a)}return n}function a(e,t){let n=Math.max(e.length,t.length),r=Array(n);for(let i=0;i<n;i++){let a=e[e.length-i-1];null==a&&(a=1);let o=t[t.length-i-1];if(null==o&&(o=1),1===a)r[n-i-1]=o;else if(1===o)r[n-i-1]=a;else if(a!==o)throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`);else r[n-i-1]=a}return r}n.r(t),n.d(t,{assertAndGetBroadcastShape:function(){return a},getBroadcastDims:function(){return r},getReductionAxes:function(){return i}})},58893:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771);let s=(0,n(32888).op)({cast_:function(e,t){let n=(0,a._1)(e,"x","cast");if(!o.LP(t))throw Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw Error("Only strings can be casted to strings");return r.BV.runKernel(i.RFZ,{x:n},{dtype:t})}})},57463:function(e,t,n){"use strict";n.d(t,{i:function(){return l}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771),s=n(60180);let l=(0,n(32888).op)({clipByValue_:function(e,t,n){let l=(0,a._1)(e,"x","clipByValue");return(o.hu(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),t===n)?(0,s.h)(l.shape,t,l.dtype):r.BV.runKernel(i.xnO,{x:l},{clipValueMin:t,clipValueMax:n})}})},90699:function(e,t,n){"use strict";n.d(t,{d:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({clone_:function(e){let t=(0,a._1)(e,"x","clone","string_or_numeric");return r.BV.runKernel(i.iJz,{x:t})}})},97977:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771);let s=(0,n(32888).op)({complex_:function(e,t){let n=(0,a._1)(e,"real","complex"),s=(0,a._1)(t,"imag","complex");return o.k5(n.shape,s.shape,`real and imag shapes, ${n.shape} and ${s.shape}, must match in call to tf.complex().`),r.BV.runKernel(i.Zz9,{real:n,imag:s})}})},8863:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771),s=n(90699);let l=(0,n(32888).op)({concat_:function(e,t=0){(0,o.hu)(e.length>=1,()=>"Pass at least one tensor to concat");let n=(0,a.sI)(e,"tensors","concat","string_or_numeric");return("complex64"===n[0].dtype&&n.forEach(e=>{if("complex64"!==e.dtype)throw Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${e.dtype}. `)}),1===n.length)?(0,s.d)(n[0]):r.BV.runKernel(i.Eh3,n,{axis:t})}})},26412:function(e,t,n){"use strict";n.d(t,{P:function(){return u}});var r=n(50971),i=n(2771),a=n(93468),o=n(79011),s=n(32888),l=n(96439);let u=(0,s.op)({conv1d_:function(e,t,n,s,u="NWC",c=1,d){let h=(0,r._1)(e,"x","conv1d"),f=(0,r._1)(t,"filter","conv1d"),p=h,g=!1;2===h.rank&&(g=!0,p=(0,l.X)(h,[1,h.shape[0],h.shape[1]])),i.hu(3===p.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${p.rank}.`),i.hu(3===f.rank,()=>`Error in conv1d: filter must be rank 3, but got rank ${f.rank}.`),o.m("conv1d",s,d),i.hu(p.shape[2]===f.shape[1],()=>`Error in conv1d: depth of input (${p.shape[2]}) must match input depth for filter ${f.shape[1]}.`),i.hu(o.jT(n,c),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${c}'`),i.hu(o.U3(c),()=>"Error in conv1D: Dilated rates should be larger than 0."),i.hu(o.U3(n),()=>"Error in conv1D: Stride should be larger than 0."),i.hu("NWC"===u,()=>`Error in conv1d: got dataFormat of ${u} but only NWC is currently supported.`);let m=(0,l.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]]),b=(0,l.X)(p,[p.shape[0],1,p.shape[1],p.shape[2]]),y=(0,a.T)(b,m,[1,n],s,"NHWC",[1,c],d);return g?(0,l.X)(y,[y.shape[2],y.shape[3]]):(0,l.X)(y,[y.shape[0],y.shape[2],y.shape[3]])}})},93468:function(e,t,n){"use strict";n.d(t,{T:function(){return c}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771),s=n(79011),l=n(32888),u=n(96439);let c=(0,l.op)({conv2d_:function(e,t,n,l,c="NHWC",d=[1,1],h){let f=(0,a._1)(e,"x","conv2d","float32"),p=(0,a._1)(t,"filter","conv2d","float32"),g=f,m=!1;3===f.rank&&(m=!0,g=(0,u.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),o.hu(4===g.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${g.rank}.`),o.hu(4===p.rank,()=>`Error in conv2d: filter must be rank 4, but got rank ${p.rank}.`),s.m("conv2d",l,h);let b="NHWC"===c?g.shape[3]:g.shape[1];o.hu(b===p.shape[2],()=>`Error in conv2d: depth of input (${b}) must match input depth for filter ${p.shape[2]}.`),o.hu(s.jT(n,d),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${d}'`),o.hu(s.U3(d),()=>"Error in conv2D: Dilated rates should be larger than 0."),o.hu(s.U3(n),()=>"Error in conv2D: Strides should be larger than 0.");let y={x:g,filter:p},v=r.BV.runKernel(i.mhS,y,{strides:n,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h});return m?(0,u.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},16453:function(e,t,n){"use strict";n.d(t,{p:function(){return u}});var r=n(49681),i=n(35047),a=n(2771),o=n(79011),s=n(32888),l=n(96439);let u=(0,s.op)({conv2DBackpropFilter_:function(e,t,n,s,u,c="NHWC",d){let h=e;3===e.rank&&(h=(0,l.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let f=t;3===f.rank&&(f=(0,l.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),a.hu(4===h.rank,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${h.shape}.`),a.hu(4===f.rank,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${f.shape}.`),a.hu(4===n.length,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let p="NHWC"===c?h.shape[3]:h.shape[1],g="NHWC"===c?f.shape[3]:f.shape[1];a.hu(p===n[2],()=>`Error in conv2dDerFilter: depth of input ${p}) must match input depth in filter (${n[2]}.`),a.hu(g===n[3],()=>`Error in conv2dDerFilter: depth of dy (${g}) must match output depth for filter (${n[3]}).`),o.m("conv2dDerFilter",u,d);let m={x:h,dy:f};return r.BV.runKernel(i.wUP,m,{strides:s,pad:u,dataFormat:c,dimRoundingMode:d,filterShape:n})}})},28725:function(e,t,n){"use strict";n.d(t,{_:function(){return u}});var r=n(49681),i=n(35047),a=n(2771),o=n(79011),s=n(32888),l=n(96439);let u=(0,s.op)({conv2DBackpropInput_:function(e,t,n,s,u,c="NHWC",d){a.hu(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let h=e,f=t,p=!1;3===t.rank&&(p=!0,f=(0,l.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),h=[1,e[0],e[1],e[2]]),a.hu(4===h.length,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${h.length}.`),a.hu(4===f.rank,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${f.rank}`),a.hu(4===n.rank,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let g="NHWC"===c?h[3]:h[1],m="NHWC"===c?f.shape[3]:f.shape[1];a.hu(g===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${g}) must match input depth for filter ${n.shape[2]}.`),a.hu(m===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${m}) must match output depth for filter ${n.shape[3]}.`),o.m("conv2dDerInput",u,d);let b={dy:f,filter:n},y={strides:s,pad:u,dataFormat:c,dimRoundingMode:d,inputShape:h},v=r.BV.runKernel(i.wm,b,y);return p?(0,l.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},35883:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var r=n(50971),i=n(28725);let a=(0,n(32888).op)({conv2dTranspose_:function(e,t,n,a,o,s){let l=(0,r._1)(e,"x","conv2dTranspose"),u=(0,r._1)(t,"filter","conv2dTranspose");return(0,i._)(n,l,u,a,o,"NHWC",s)}})},59457:function(e,t,n){"use strict";n.d(t,{_:function(){return l}});var r=n(49681),i=n(35047),a=n(2771),o=n(32888),s=n(96439);let l=(0,o.op)({conv3DBackpropInput_:function(e,t,n,o,l){a.hu(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let u=e,c=t,d=!1;4===t.rank&&(d=!0,c=(0,s.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),u=[1,e[0],e[1],e[2],e[3]]);let h=u[4],f=c.shape[4];a.hu(5===u.length,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${u.length}.`),a.hu(5===c.rank,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${c.rank}`),a.hu(5===n.rank,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),a.hu(h===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${h}) must match input depth for filter ${n.shape[3]}.`),a.hu(f===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[4]}.`);let p={dy:c,filter:n},g={pad:l,strides:o,inputShape:u},m=r.BV.runKernel(i.ik2,p,g);return d?(0,s.X)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}})},79011:function(e,t,n){"use strict";n.d(t,{I0:function(){return p},Ix:function(){return s},Rf:function(){return i},U3:function(){return m},Xw:function(){return a},aO:function(){return u},jT:function(){return g},jw:function(){return l},m:function(){return y},pl:function(){return o},sl:function(){return b}});var r=n(2771);function i(e,t,n,r,i="NHWC",a){let o=[...t,e[3]];return s(e,o,n,a,r,null,null,b(i))}function a(e,t,n,r,i,a,o="channelsLast"){let l;let[u,d]=c(t);if("channelsLast"===o)l=[u,d,e[3],e[3]];else if("channelsFirst"===o)l=[u,d,e[1],e[1]];else throw Error(`Unknown dataFormat ${o}`);return s(e,l,n,r,i,a,!1,o)}function o(e,t,n,r,i,a,o="NDHWC"){let s,u;let[c,h,f]=d(t);if("NDHWC"===o)u="channelsLast",s=[c,h,f,e[4],e[4]];else if("NCDHW"===o)u="channelsFirst",s=[c,h,f,e[1],e[1]];else throw Error(`Unknown dataFormat ${o}`);return l(e,s,n,r,i,!1,u,a)}function s(e,t,n,r,i,a,o=!1,s="channelsLast"){let l,[d,p,g,m]=[-1,-1,-1,-1];if("channelsLast"===s)[d,p,g,m]=e;else if("channelsFirst"===s)[d,m,p,g]=e;else throw Error(`Unknown dataFormat ${s}`);let[b,y,,v]=t,[x,w]=c(n),[k,E]=c(r),I=h(b,k),S=h(y,E),{padInfo:T,outHeight:C,outWidth:N}=function(e,t,n,r,i,a,o,s,l){let c,d,h;if("number"==typeof e){let i=0===e?"VALID":"NUMBER";c={top:e,bottom:e,left:e,right:e,type:i};let o=function(e,t,n,r,i){null==r&&(r=u(e,t,n));let a=e[0],o=e[1];return[f((a-t+2*r)/n+1,i),f((o-t+2*r)/n+1,i)]}([t,n],a,r,e,s);d=o[0],h=o[1]}else if("same"===e){let e=Math.max(0,((d=Math.ceil(t/r))-1)*r+a-t),s=Math.max(0,((h=Math.ceil(n/i))-1)*i+o-n),l=Math.floor(e/2),u=Math.floor(s/2);c={top:l,bottom:e-l,left:u,right:s-u,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},d=Math.ceil((t-a+1)/r),h=Math.ceil((n-o+1)/i);else if("object"==typeof e){let u="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],g="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];c={top:u,bottom:p,left:g,right:m,type:0===u&&0===p&&0===g&&0===m?"VALID":"EXPLICIT"},d=f((t-a+u+p)/r+1,s),h=f((n-o+g+m)/i+1,s)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:c,outHeight:d,outWidth:h}}(i,p,g,x,w,I,S,a,s),A=o?v*m:v;return"channelsFirst"===s?l=[d,A,C,N]:"channelsLast"===s&&(l=[d,C,N,A]),{batchSize:d,dataFormat:s,inHeight:p,inWidth:g,inChannels:m,outHeight:C,outWidth:N,outChannels:A,padInfo:T,strideHeight:x,strideWidth:w,filterHeight:b,filterWidth:y,effectiveFilterHeight:I,effectiveFilterWidth:S,dilationHeight:k,dilationWidth:E,inShape:e,outShape:l,filterShape:t}}function l(e,t,n,r,i,a=!1,o="channelsLast",s){let l,[c,p,g,m,b]=[-1,-1,-1,-1,-1];if("channelsLast"===o)[c,p,g,m,b]=e;else if("channelsFirst"===o)[c,b,p,g,m]=e;else throw Error(`Unknown dataFormat ${o}`);let[y,v,x,,w]=t,[k,E,I]=d(n),[S,T,C]=d(r),N=h(y,S),A=h(v,T),R=h(x,C),{padInfo:D,outDepth:$,outHeight:_,outWidth:F}=function(e,t,n,r,i,a,o,s,l,c,d){let h,p,g,m;if("valid"===e&&(e=0),"number"==typeof e){let b=0===e?"VALID":"NUMBER";h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:b};let y=function(e,t,n,r,i,a){null==i&&(i=u(e,t[0],r[0]));let o=[0,0,0,1];for(let n=0;n<3;n++)e[n]+2*i>=t[n]&&(o[n]=f((e[n]-t[n]+2*i)/r[n]+1,a));return o}([t,n,r,1],[s,l,c],0,[i,a,o],e,d);p=y[0],g=y[1],m=y[2]}else if("same"===e){let e=((p=Math.ceil(t/i))-1)*i+s-t,u=((g=Math.ceil(n/a))-1)*a+l-n,d=((m=Math.ceil(r/o))-1)*o+c-r,f=Math.floor(e/2),b=Math.floor(u/2),y=Math.floor(d/2);h={top:b,bottom:u-b,left:y,right:d-y,front:f,back:e-f,type:"SAME"}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:h,outDepth:p,outHeight:g,outWidth:m}}(i,p,g,m,k,E,I,N,A,R,s),O=a?w*b:w;return"channelsFirst"===o?l=[c,O,$,_,F]:"channelsLast"===o&&(l=[c,$,_,F,O]),{batchSize:c,dataFormat:o,inDepth:p,inHeight:g,inWidth:m,inChannels:b,outDepth:$,outHeight:_,outWidth:F,outChannels:O,padInfo:D,strideDepth:k,strideHeight:E,strideWidth:I,filterDepth:y,filterHeight:v,filterWidth:x,effectiveFilterDepth:N,effectiveFilterHeight:A,effectiveFilterWidth:R,dilationDepth:S,dilationHeight:T,dilationWidth:C,inShape:e,outShape:l,filterShape:t}}function u(e,t,n,r=1){let i=h(t,r);return Math.floor((e[0]*(n-1)-n+i)/2)}function c(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function d(e){return"number"==typeof e?[e,e,e]:e}function h(e,t){return t<=1?e:e+(e-1)*(t-1)}function f(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw Error(`Unknown roundingMode ${t}`)}}function p(e){let[t,n,r]=c(e);return 1===t&&1===n&&1===r}function g(e,t){return p(e)||p(t)}function m(e){return c(e).every(e=>e>0)}function b(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw Error(`Unknown dataFormat ${e}`)}function y(e,t,n){if(null!=n){if("string"==typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if("number"==typeof t)r.hu(r.GN(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if("object"==typeof t)t.forEach(t=>{t.forEach(t=>{r.hu(r.GN(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}},52489:function(e,t,n){"use strict";n.d(t,{B:function(){return c}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771),s=n(79011),l=n(32888),u=n(96439);let c=(0,l.op)({depthwiseConv2d_:function(e,t,n,l,c="NHWC",d=[1,1],h){let f=(0,a._1)(e,"x","depthwiseConv2d","float32"),p=(0,a._1)(t,"filter","depthwiseConv2d","float32"),g=f,m=!1;3===f.rank&&(m=!0,g=(0,u.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),o.hu(4===g.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${g.rank}.`),o.hu(4===p.rank,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`);let b="NHWC"===c?g.shape[3]:g.shape[1];o.hu(b===p.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${b}) must match the inChannels dimension in filter ${p.shape[2]}.`),s.m("depthwiseConv2d",l,h);let y={x:g,filter:p},v=r.BV.runKernel(i.cie,y,{strides:n,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h});return m?(0,u.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},77982:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var r=n(49681),i=n(35047),a=n(32888),o=n(96439);let s=(0,a.op)({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,a,s,l=[1,1],u){let c=e;3===e.rank&&(c=(0,o.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let d=t;3===d.rank&&(d=(0,o.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let h={x:c,dy:d};return r.BV.runKernel(i.sL$,h,{strides:a,pad:s,dimRoundingMode:u,dilations:l,filterShape:n})}})},83171:function(e,t,n){"use strict";n.d(t,{v:function(){return s}});var r=n(49681),i=n(35047),a=n(32888),o=n(96439);let s=(0,a.op)({depthwiseConv2dNativeBackpropInput_:function(e,t,n,a,s,l=[1,1],u){let c=t,d=!1;3===t.rank&&(d=!0,c=(0,o.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let h={dy:c,filter:n},f=r.BV.runKernel(i.y7R,h,{strides:a,pad:s,dimRoundingMode:u,dilations:l,inputShape:e});return d?(0,o.X)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}})},83511:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971),s=n(77576);let l=(0,n(32888).op)({div_:function(e,t){let n=(0,o._1)(e,"a","div"),l=(0,o._1)(t,"b","div");if([n,l]=(0,a.makeTypesMatch)(n,l),"int32"===n.dtype&&"int32"===l.dtype)return(0,s.q)(n,l);let u={a:n,b:l};return r.BV.runKernel(i.oHH,u,{})}})},74077:function(e,t,n){"use strict";n.d(t,{p:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({elu_:function(e){let t=(0,a._1)(e,"x","elu","float32");return r.BV.runKernel(i.SX0,{x:t})}})},5252:function(e,t,n){"use strict";n.d(t,{D:function(){return l}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971),s=n(95221);let l=(0,n(32888).op)({equal_:function(e,t){let n=(0,o._1)(e,"a","equal","string_or_numeric"),l=(0,o._1)(t,"b","equal","string_or_numeric");[n,l]=(0,a.makeTypesMatch)(n,l),(0,s.assertAndGetBroadcastShape)(n.shape,l.shape);let u={a:n,b:l};return r.BV.runKernel(i.hdR,u)}})},42710:function(e,t,n){"use strict";n.d(t,{q:function(){return l}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771),s=n(58893);let l=(0,n(32888).op)({erf_:function(e){let t=(0,a._1)(e,"x","erf");o.hu("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=(0,s.p)(t,"float32"));let n={x:t};return r.BV.runKernel(i.Omj,n)}})},17840:function(e,t,n){"use strict";n.d(t,{Q:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({exp_:function(e){let t=(0,a._1)(e,"x","exp");return r.BV.runKernel(i.NEP,{x:t})}})},4968:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771);let s=(0,n(32888).op)({expandDims_:function(e,t=0){let n=(0,a._1)(e,"x","expandDims","string_or_numeric");return o.hu(t<=n.rank,()=>"Axis must be <= rank of the tensor"),r.BV.runKernel(i.YFo,{input:n},{dim:t})}})},60180:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(49681),i=n(35047),a=n(2771);function o(e,t,n){(0,a.Mu)(e),n=n||(0,a.D2)(t);let o={shape:e,value:t,dtype:n};return r.BV.runKernel(i.deh,{},o)}},8703:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({floor_:function(e){let t=(0,a._1)(e,"x","floor","float32");return r.BV.runKernel(i.OR,{x:t})}})},77576:function(e,t,n){"use strict";n.d(t,{q:function(){return s}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971);let s=(0,n(32888).op)({floorDiv_:function(e,t){let n=(0,o._1)(e,"a","floorDiv"),s=(0,o._1)(t,"b","floorDiv");[n,s]=(0,a.makeTypesMatch)(n,s);let l={a:n,b:s};return r.BV.runKernel(i.jeX,l)}})},83655:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({gather_:function(e,t,n=0,o=0){let s=(0,a._1)(e,"x","gather"),l=(0,a._1)(t,"indices","gather","int32");return r.BV.runKernel(i.qi_,{x:s,indices:l},{axis:n,batchDims:o})}})},95334:function(e,t,n){"use strict";n.d(t,{p:function(){return l}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971),s=n(95221);let l=(0,n(32888).op)({greater_:function(e,t){let n=(0,o._1)(e,"a","greater","string_or_numeric"),l=(0,o._1)(t,"b","greater","string_or_numeric");[n,l]=(0,a.makeTypesMatch)(n,l),(0,s.assertAndGetBroadcastShape)(n.shape,l.shape);let u={a:n,b:l};return r.BV.runKernel(i.iZT,u)}})},39344:function(e,t,n){"use strict";n.d(t,{b:function(){return l}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971),s=n(95221);let l=(0,n(32888).op)({greaterEqual_:function(e,t){let n=(0,o._1)(e,"a","greaterEqual","string_or_numeric"),l=(0,o._1)(t,"b","greaterEqual","string_or_numeric");[n,l]=(0,a.makeTypesMatch)(n,l),(0,s.assertAndGetBroadcastShape)(n.shape,l.shape);let u={a:n,b:l};return r.BV.runKernel(i.Acj,u)}})},98587:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({imag_:function(e){let t=(0,a._1)(e,"input","imag");return r.BV.runKernel(i.J_u,{input:t})}})},91517:function(e,t,n){"use strict";n.d(t,{I:function(){return u}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771),s=n(32888),l=n(96439);let u=(0,s.op)({resizeBilinear_:function(e,t,n=!1,s=!1){let u=(0,a._1)(e,"images","resizeBilinear");o.hu(3===u.rank||4===u.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${u.rank}.`),o.hu(2===t.length,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),o.hu(!1===s||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let c=u,d=!1;3===u.rank&&(d=!0,c=(0,l.X)(u,[1,u.shape[0],u.shape[1],u.shape[2]]));let[]=t,h={images:c},f=r.BV.runKernel(i._Yw,h,{alignCorners:n,halfPixelCenters:s,size:t});return d?(0,l.X)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}})},21214:function(e,t,n){"use strict";n.d(t,{j:function(){return u}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771),s=n(32888),l=n(96439);let u=(0,s.op)({resizeNearestNeighbor_:function(e,t,n=!1,s=!1){let u=(0,a._1)(e,"images","resizeNearestNeighbor");o.hu(3===u.rank||4===u.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${u.rank}.`),o.hu(2===t.length,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),o.hu("float32"===u.dtype||"int32"===u.dtype,()=>"`images` must have `int32` or `float32` as dtype"),o.hu(!1===s||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let c=u,d=!1;3===u.rank&&(d=!0,c=(0,l.X)(u,[1,u.shape[0],u.shape[1],u.shape[2]]));let[]=t,h={images:c},f=r.BV.runKernel(i.dpD,h,{alignCorners:n,halfPixelCenters:s,size:t});return d?(0,l.X)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}})},16437:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({leakyRelu_:function(e,t=.2){let n=(0,a._1)(e,"x","leakyRelu");return r.BV.runKernel(i.J$2,{x:n},{alpha:t})}})},78461:function(e,t,n){"use strict";n.d(t,{d:function(){return l}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971),s=n(95221);let l=(0,n(32888).op)({less_:function(e,t){let n=(0,o._1)(e,"a","less","string_or_numeric"),l=(0,o._1)(t,"b","less","string_or_numeric");[n,l]=(0,a.makeTypesMatch)(n,l),(0,s.assertAndGetBroadcastShape)(n.shape,l.shape);let u={a:n,b:l};return r.BV.runKernel(i.vtC,u)}})},7444:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971),s=n(95221);let l=(0,n(32888).op)({lessEqual_:function(e,t){let n=(0,o._1)(e,"a","lessEqual","string_or_numeric"),l=(0,o._1)(t,"b","lessEqual","string_or_numeric");[n,l]=(0,a.makeTypesMatch)(n,l),(0,s.assertAndGetBroadcastShape)(n.shape,l.shape);let u={a:n,b:l};return r.BV.runKernel(i.CAk,u)}})},78399:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({log_:function(e){let t=(0,a._1)(e,"x","log","float32");return r.BV.runKernel(i.ZbH,{x:t})}})},59865:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({log1p_:function(e){let t=(0,a._1)(e,"x","log1p");return r.BV.runKernel(i.kU,{x:t})}})},28152:function(e,t,n){"use strict";n.d(t,{C:function(){return f}});var r=n(64310),i=n(50971),a=n(58893),o=n(17840),s=n(78399),l=n(23262),u=n(45314),c=n(32888),d=n(35799),h=n(71101);let f=(0,c.op)({logSoftmax_:function(e,t=-1){let n=(0,i._1)(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return(0,r.cb)((e,n)=>{let r=(0,l.F)(e,t,!0),i=(0,d.l)(e,r),c=(0,d.l)((0,a.p)(i,"float32"),(0,s.c)((0,h.S)((0,o.Q)(i),t,!0)));return n([c]),{value:c,gradFunc:(e,n)=>{let[r]=n,i=(0,o.Q)(r);return(0,d.l)(e,(0,u.d)((0,h.S)(e,t,!0),i))}}})(n)}})},51555:function(e,t,n){"use strict";n.d(t,{l:function(){return p}});var r=n(50971),i=n(2771),a=n(83266),o=n(47050),s=n(17840),l=n(78399),u=n(23262),c=n(32888),d=n(96439),h=n(35799),f=n(71101);let p=(0,c.op)({logSumExp_:function(e,t=null,n=!1){let c=(0,r._1)(e,"x","logSumExp"),p=(0,i.EC)(t,c.shape),g=(0,u.F)(c,p,!0),m=(0,h.l)(c,g),b=(0,s.Q)(m),y=(0,f.S)(b,p),v=(0,l.c)(y),x=(0,a.I)((0,d.X)(g,v.shape),v);if(n){let e=(0,o.rv)(x.shape,p);return(0,d.X)(x,e)}return x}})},85364:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var r=n(49681),i=n(35047),a=n(50971),o=n(95221);let s=(0,n(32888).op)({logicalAnd_:function(e,t){let n=(0,a._1)(e,"a","logicalAnd","bool"),s=(0,a._1)(t,"b","logicalAnd","bool");return(0,o.assertAndGetBroadcastShape)(n.shape,s.shape),r.BV.runKernel(i.PYm,{a:n,b:s})}})},45193:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971);let s=(0,n(32888).op)({matMul_:function(e,t,n=!1,s=!1){let l=(0,o._1)(e,"a","matMul"),u=(0,o._1)(t,"b","matMul");[l,u]=(0,a.makeTypesMatch)(l,u);let c={a:l,b:u};return r.BV.runKernel(i.XLW,c,{transposeA:n,transposeB:s})}})},23262:function(e,t,n){"use strict";n.d(t,{F:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({max_:function(e,t=null,n=!1){let o=(0,a._1)(e,"x","max");return r.BV.runKernel(i.YoZ,{x:o},{reductionIndices:t,keepDims:n})}})},7761:function(e,t,n){"use strict";n.d(t,{_:function(){return c}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771),s=n(79011),l=n(32888),u=n(96439);let c=(0,l.op)({maxPool_:function(e,t,n,l,c){let d=(0,a._1)(e,"x","maxPool"),h=d,f=!1;3===d.rank&&(f=!0,h=(0,u.X)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.hu(4===h.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${h.rank}.`),o.hu(s.jT(n,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`),s.m("maxPool",l,c);let p={x:h},g=r.BV.runKernel(i.mTV,p,{filterSize:t,strides:n,pad:l,dimRoundingMode:c});return f?(0,u.X)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},92673:function(e,t,n){"use strict";n.d(t,{g:function(){return u}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971),s=n(95221),l=n(58893);let u=(0,n(32888).op)({maximum_:function(e,t){let n=(0,o._1)(e,"a","maximum"),u=(0,o._1)(t,"b","maximum");[n,u]=(0,a.makeTypesMatch)(n,u),"bool"===n.dtype&&(n=(0,l.p)(n,"int32"),u=(0,l.p)(u,"int32")),(0,s.assertAndGetBroadcastShape)(n.shape,u.shape);let c={a:n,b:u};return r.BV.runKernel(i.BMI,c)}})},60697:function(e,t,n){"use strict";n.d(t,{J:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({mean_:function(e,t=null,n=!1){let o=(0,a._1)(e,"x","mean");return r.BV.runKernel(i.q2K,{x:o},{axis:t,keepDims:n})}})},2376:function(e,t,n){"use strict";n.d(t,{V:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({min_:function(e,t=null,n=!1){let o=(0,a._1)(e,"x","min");return r.BV.runKernel(i.c17,{x:o},{axis:t,keepDims:n})}})},26004:function(e,t,n){"use strict";n.d(t,{L:function(){return u}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971),s=n(95221),l=n(58893);let u=(0,n(32888).op)({minimum_:function(e,t){let n=(0,o._1)(e,"a","minimum"),u=(0,o._1)(t,"b","minimum");[n,u]=(0,a.makeTypesMatch)(n,u),"bool"===n.dtype&&(n=(0,l.p)(n,"int32"),u=(0,l.p)(u,"int32")),(0,s.assertAndGetBroadcastShape)(n.shape,u.shape);let c={a:n,b:u};return r.BV.runKernel(i.q8u,c)}})},45314:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971);let s=(0,n(32888).op)({mul_:function(e,t){let n=(0,o._1)(e,"a","mul"),s=(0,o._1)(t,"b","mul");[n,s]=(0,a.makeTypesMatch)(n,s);let l={a:n,b:s};return r.BV.runKernel(i.wYn,l)}})},22666:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({neg_:function(e){let t=(0,a._1)(e,"x","neg");return r.BV.runKernel(i.kuV,{x:t})}})},95872:function(e,t,n){"use strict";n.d(t,{K:function(){return m}});var r=n(50971),i=n(2771),a=n(99044),o=n(47050),s=n(23262),l=n(2376),u=n(32888),c=n(12611),d=n(96439),h=n(16070),f=n(99467),p=n(77941),g=n(71101);let m=(0,u.op)({norm_:function(e,t="euclidean",n=null,u=!1){let m=function e(t,n,r=null){if(0===t.rank)return(0,a.W)(t);if(1!==t.rank&&null===r)return e((0,d.X)(t,[-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return(0,g.S)((0,a.W)(t),r);if(n===1/0)return(0,s.F)((0,a.W)(t),r);if(n===-1/0)return(0,l.V)((0,a.W)(t),r);if("euclidean"===n||2===n)return(0,f._)((0,g.S)((0,c.s)((0,a.W)(t),(0,h.i)(2,"int32")),r));throw Error(`Error in norm: invalid ord value: ${n}`)}if(Array.isArray(r)&&2===r.length){if(1===n)return(0,s.F)((0,g.S)((0,a.W)(t),r[0]),r[1]-1);if(n===1/0)return(0,s.F)((0,g.S)((0,a.W)(t),r[1]),r[0]);if(n===-1/0)return(0,l.V)((0,g.S)((0,a.W)(t),r[1]),r[0]);if("fro"===n||"euclidean"===n)return(0,f._)((0,g.S)((0,p.h)(t),r));throw Error(`Error in norm: invalid ord value: ${n}`)}throw Error(`Error in norm: invalid axis: ${r}`)}(e=(0,r._1)(e,"x","norm"),t,n),b=m.shape;if(u){let t=(0,i.EC)(n,e.shape);b=o.rv(m.shape,t)}return(0,d.X)(m,b)}})},21834:function(e,t,n){"use strict";n.d(t,{Q:function(){return l}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971),s=n(95221);let l=(0,n(32888).op)({notEqual_:function(e,t){let n=(0,o._1)(e,"a","notEqual","string_or_numeric"),l=(0,o._1)(t,"b","notEqual","string_or_numeric");[n,l]=(0,a.makeTypesMatch)(n,l),(0,s.assertAndGetBroadcastShape)(n.shape,l.shape);let u={a:n,b:l};return r.BV.runKernel(i.yQU,u)}})},88713:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({oneHot_:function(e,t,n=1,o=0,s="int32"){if(t<2)throw Error(`Error in oneHot: depth must be >=2, but it is ${t}`);let l=(0,a._1)(e,"indices","oneHot","int32");return r.BV.runKernel(i.we_,{indices:l},{dtype:s,depth:t,onValue:n,offValue:o})}})},36374:function(e,t,n){"use strict";n.d(t,{i:function(){return function e(t,n="float32"){if((0,i.Mu)(t),"complex64"===n){let n=e(t,"float32"),r=(0,o.l)(t,"float32");return(0,a.P)(n,r)}let s=(0,i.p8)((0,i.NA)(t),n);return r.BV.makeTensor(s,t,n)}}});var r=n(49681),i=n(2771),a=n(97977),o=n(40290)},18272:function(e,t,n){"use strict";n.d(t,{J:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({onesLike_:function(e){let t=(0,a._1)(e,"x","onesLike");return r.BV.runKernel(i.qWM,{x:t})}})},32888:function(e,t,n){"use strict";n.d(t,{op:function(){return a}});var r=n(49681),i=n(2771);function a(e){let t=Object.keys(e);if(1!==t.length)throw Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0],a=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));let o=(...e)=>{r.BV.startScope(n);try{let t=a(...e);return(0,i.tI)(t)&&console.error("Cannot return a Promise inside of tidy."),r.BV.endScope(t),t}catch(e){throw r.BV.endScope(null),e}};return Object.defineProperty(o,"name",{value:n+="__op",configurable:!0}),o}},93649:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({pad_:function(e,t,n=0){let o=(0,a._1)(e,"x","pad");if(0===o.rank)throw Error("pad(scalar) is not defined. Pass non-scalar to pad");return r.BV.runKernel(i.lyA,{x:o},{paddings:t,constantValue:n})}})},12611:function(e,t,n){"use strict";n.d(t,{s:function(){return s}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971);let s=(0,n(32888).op)({pow_:function(e,t){let n=(0,o._1)(e,"base","pow"),s=(0,o._1)(t,"exp","pow");[n,s]=(0,a.makeTypesMatch)(n,s);let l={a:n,b:s};return r.BV.runKernel(i.pe_,l)}})},39427:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({prelu_:function(e,t){let n=(0,a._1)(e,"x","prelu"),o=(0,a._1)(t,"alpha","prelu");return r.BV.runKernel(i.o0g,{x:n,alpha:o})}})},61773:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({real_:function(e){let t=(0,a._1)(e,"input","real");return r.BV.runKernel(i.xJR,{input:t})}})},50114:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({relu_:function(e){let t=(0,a._1)(e,"x","relu");return r.BV.runKernel(i.qkr,{x:t})}})},96762:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({relu6_:function(e){let t=(0,a._1)(e,"x","relu6");return r.BV.runKernel(i.SbG,{x:t})}})},96439:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({reshape_:function(e,t){let n=(0,a._1)(e,"x","reshape","string_or_numeric");return r.BV.runKernel(i.HZH,{x:n},{shape:t})}})},36439:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({reverse_:function(e,t){let n=(0,a._1)(e,"x","reverse");return r.BV.runKernel(i.mKl,{x:n},{dims:t})}})},51100:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({round_:function(e){let t=(0,a._1)(e,"x","round");return r.BV.runKernel(i.e07,{x:t})}})},16070:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var r=n(32904),i=n(31185);function a(e,t){if(((0,r.isTypedArray)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&(0,r.isTypedArray)(e)&&!(e instanceof Uint8Array))throw Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,i.H)(e,[],[],t)}},90615:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({selu_:function(e){let t=(0,a._1)(e,"x","selu");return r.BV.runKernel(i.oFR,{x:t})}})},97184:function(e,t,n){"use strict";n.d(t,{$:function(){return i},y:function(){return r}});let r=1.7580993408473768,i=1.0507009873554805},58661:function(e,t,n){"use strict";n.d(t,{U:function(){return u}});var r=n(50971),i=n(2771),a=n(93468),o=n(52489),s=n(32888),l=n(96439);let u=(0,s.op)({separableConv2d_:function(e,t,n,s,u,c=[1,1],d="NHWC"){let h=(0,r._1)(e,"x","separableConv2d"),f=(0,r._1)(t,"depthwiseFilter","separableConv2d"),p=(0,r._1)(n,"pointwiseFilter","separableConv2d"),g=h,m=!1;if(3===h.rank&&(m=!0,g=(0,l.X)(h,[1,h.shape[0],h.shape[1],h.shape[2]])),"NCHW"===d)throw Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");i.hu(4===g.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${g.rank}.`),i.hu(4===f.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${f.rank}.`),i.hu(4===p.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${f.rank}.`),i.hu(1===p.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${p.shape[0]}.`),i.hu(1===p.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${p.shape[1]}.`);let b=f.shape[2],y=f.shape[3];i.hu(p.shape[2]===b*y,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${b*y}, but got ${p.shape[2]}.`);let v=(0,o.B)(g,f,s,u,d,c),x=(0,a.T)(v,p,1,"valid",d);return m?(0,l.X)(x,[x.shape[1],x.shape[2],x.shape[3]]):x}})},95986:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({sigmoid_:function(e){let t=(0,a._1)(e,"x","sigmoid","float32");return r.BV.runKernel(i.a5O,{x:t})}})},90308:function(e,t,n){"use strict";n.d(t,{t:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({slice_:function(e,t,n){let o=(0,a._1)(e,"x","slice","string_or_numeric");if(0===o.rank)throw Error("Slicing scalar is not possible");return r.BV.runKernel(i.p2w,{x:o},{begin:t,size:n})}})},96614:function(e,t,n){"use strict";n.r(t),n.d(t,{assertParamsValid:function(){return i},computeFlatOffset:function(){return m},computeOutShape:function(){return o},getNormalizedAxes:function(){return u},isSliceContinous:function(){return g},maskToAxes:function(){return a},parseSliceParams:function(){return b},sliceInfo:function(){return y},startForAxis:function(){return f},startIndicesWithElidedDims:function(){return c},stopForAxis:function(){return p},stopIndicesWithElidedDims:function(){return d},stridesForAxis:function(){return h},stridesWithElidedDims:function(){return s}});var r=n(2771);function i(e,t,n){let i=e.shape.length;r.hu(i===t.length,()=>`Error in slice${i}D: Length of begin ${t} must match the rank of the array (${i}).`),r.hu(i===n.length,()=>`Error in slice${i}D: Length of size ${n} must match the rank of the array (${i}).`);for(let a=0;a<i;++a)r.hu(t[a]+n[a]<=e.shape[a],()=>`Error in slice${i}D: begin[${a}] + size[${a}] (${t[a]+n[a]}) would overflow input.shape[${a}] (${e.shape[a]})`)}function a(e){let t=[],n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function o(e,t,n){let r=[];for(let i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function s(e,t,n,r){let i=[...e];for(let e=i.length;e<r.length;e++)i.push(1);for(let e=0;e<n;e++)0===e?i[t]=1:(i.splice(t,0,1),i.pop());return i}function l(e,t){let n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function u(e,t,n,r,i,a,o,l,u){let g=e.length,m=Array(g),b=Array(g),y=Array(g);if(t.length&&n>0){let u=t[0],h=n+1;m=c(o,u,h,r,e),b=d(l,u,h,i,e),y=s(a,u,h,e)}else for(let t=0;t<g;t++)m[t]=f(o,r,a,e,t,u),b[t]=p(l,i,a,e,t,u),y[t]=h(a,t,u);return{begin:m,end:b,strides:y}}function c(e,t,n,r,i){let a=[...i],o=l(n,t);for(let i=0;i<a.length;i++)if(o.indexOf(i)>-1)a[i]=0;else{var s;let o=(s=i)<=t?s:s-(n-1),l=r[o];e&1<<o&&(l=0),a[i]=l}return a}function d(e,t,n,i,a){let o=[...a],s=l(n,t);for(let r=0;r<o.length;r++)if(s.indexOf(r)>-1)o[r]=Number.MAX_SAFE_INTEGER;else{var u;let a=(u=r)<=t?u:u-(n-1),s=i[a];e&1<<a&&(s=Number.MAX_SAFE_INTEGER),o[r]=s}for(let e=0;e<o.length;e++){let t=a[e];o[e]<0&&(o[e]+=t),o[e]=r.uZ(0,o[e],a[e])}return o}function h(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function f(e,t,n,i,a,o){let s=t[a],l=n[a]||1;(e&1<<a||o&1<<a||null==s)&&(s=l>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);let u=i[a];return s<0&&(s+=u),s=r.uZ(0,s,u-1)}function p(e,t,n,i,a,o){let s=t[a],l=n[a]||1;(e&1<<a||o&1<<a||null==s)&&(s=l>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);let u=i[a];return s<0&&(s+=u),s=l>0?r.uZ(0,s,u):r.uZ(-1,s,u-1)}function g(e,t,n){let r=n.length;for(let e=0;e<n.length;e++)if(n[e]>1){r=e;break}for(let i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function m(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function b(e,t,n){let i,a;let o=e.shape.length;return(i="number"==typeof t?[t,...Array(o-1).fill(0)]:t.length<o?t.concat(Array(o-t.length).fill(0)):t.slice()).forEach(e=>{r.hu(-1!==e,()=>"slice() does not support negative begin indexing.")}),a=(a=null==n?Array(o).fill(-1):"number"==typeof n?[n,...Array(o-1).fill(-1)]:n.length<o?n.concat(Array(o-n.length).fill(-1)):n).map((t,n)=>t>=0?t:(r.hu(-1===t,()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`),e.shape[n]-i[n])),[i,a]}function y(e,t,n,r,i,a,o,s,l){let u;if(null==r?(u=Array(t.length)).fill(1):u=r,null!=o&&(o&o-1)!=0)throw Error("Multiple ellipses in slice is not allowed.");let c=!1,d={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:i,endMask:a,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};for(let e=0;e<d.dims;e++)c&&(1<<e&s)!=0&&d.numAddAxisAfterEllipsis++,1<<e&o&&(c=!0);!c&&(d.ellipsisMask|=1<<d.dims,d.dims++);let h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=Array(t.dims),t.end=Array(t.dims),t.strides=Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){let i=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<i;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,h);let f=!0,p=!0,g=!0,m=[],b=[];for(let t=0;t<e.length;++t){let n;if(0===h.strides[t])throw Error(`strides[${t}] must be non-zero`);let r=!!(h.shrinkAxisMask&1<<t),i=e[t];if(-1===i){m.push(r?1:-1);continue}let a=[h.beginMask&1<<t,h.endMask&1<<t],o=[h.strides[t]>0?0:-1,h.strides[t]>0?i:i-1];if(r&&h.strides[t]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&1===h.strides[t];let s=!!(h.beginMask&1<<t&&h.endMask&1<<t);if(h.beginValid&&h.endValid){if(r){let e=h.begin[t]<0?i+h.begin[t]:h.begin[t];if(h.begin[t]=e,h.end[t]=h.begin[t]+1,e<0||e>=i)throw Error(`slice index ${h.begin[t]} of dimension ${t} out of bounds.`)}else h.begin[t]=v(h.begin[t],0,h.strides[t],i,a,o),h.end[t]=v(h.end[t],1,h.strides[t],i,a,o);let e=1===h.strides[t]&&0===h.begin[t]&&h.end[t]===i;f=f&&e,p=p&&(0===t&&1===h.strides[t]||e)}else f=f&&1===h.strides[t]&&s,p=p&&(0===t&&1===h.strides[t]||s);let l=!1;if(h.beginValid&&h.endValid?(n=h.end[t]-h.begin[t],l=!0):r?(n=1,l=!0):s&&i>=0&&(n=h.strides[t]<0?-i:i,l=!0),l){let e;e=0===n||n<0!=h.strides[t]<0?0:Math.trunc(n/h.strides[t])+(n%h.strides[t]!=0?1:0),m.push(e)}else m.push(-1)}for(let e=0;e<h.finalShapeGatherIndices.length;++e){let t=h.finalShapeGatherIndices[e];t>=0?b.push(m[t]):-2===t&&b.push(1)}return{finalShapeSparse:b.filter((e,t)=>-2!==h.finalShapeGatherIndices[t]),finalShape:b,isIdentity:f,sliceDim0:p,isSimpleSlice:g,begin:h.begin,end:h.end,strides:h.strides}}function v(e,t,n,r,i,a){if(i[t])return n>0?a[t]:a[t+1&1];{let t=e<0?r+e:e;return t<a[0]?a[0]:t>a[1]?a[1]:t}}},63919:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({softmax_:function(e,t=-1){let n=(0,a._1)(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);let o={dim:t};return r.BV.runKernel(i.Gcp,{logits:n},o)}})},34779:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({softplus_:function(e){let t=(0,a._1)(e,"x","softplus");return r.BV.runKernel(i.MRv,{x:t})}})},36368:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(49681),i=n(35047),a=n(2771);let o=(0,n(32888).op)({fft_:function(e){return(0,a.hu)("complex64"===e.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`),r.BV.runKernel(i.vwp,{input:e})}})},93267:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var r=n(49681),i=n(35047),a=n(2771);let o=(0,n(32888).op)({ifft_:function(e){return(0,a.hu)("complex64"===e.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`),r.BV.runKernel(i.Qg5,{input:e})}})},33170:function(e,t,n){"use strict";n.d(t,{w:function(){return p}});var r=n(97977),i=n(8863),a=n(98587),o=n(45314),s=n(32888),l=n(61773),u=n(96439),c=n(36439),d=n(16070),h=n(90308),f=n(93267);let p=(0,s.op)({irfft_:function(e){let t;let n=e.shape[e.shape.length-1],s=e.size/n;if(n<=2){let r=(0,u.X)(e,[s,n]);t=(0,f.S)(r)}else{let p=[s,2*(n-1)],g=(0,u.X)((0,l.k)(e),[s,n]),m=(0,u.X)((0,a.a)(e),[s,n]),b=(0,c.G)((0,h.t)(g,[0,1],[s,n-2]),1),y=(0,o.d)((0,c.G)((0,h.t)(m,[0,1],[s,n-2]),1),(0,d.i)(-1)),v=(0,i.z)([g,b],1),x=(0,i.z)([m,y],1),w=(0,u.X)((0,r.P)(v,x),[p[0],p[1]]);t=(0,f.S)(w)}if(t=(0,l.k)(t),3===e.rank&&0!==e.shape[0]){let n=t,r=e.shape[0];t=(0,u.X)(t,[r,t.shape[0]/r,t.shape[1]]),n.dispose()}return t}})},47797:function(e,t,n){"use strict";n.d(t,{Q:function(){return g}});var r=n(2771),i=n(97977),a=n(8863),o=n(98587),s=n(32888),l=n(61773),u=n(96439),c=n(90308),d=n(59509),h=n(40290),f=n(72898),p=n(36368);let g=(0,s.op)({rfft_:function(e,t){let n;(0,r.hu)("float32"===e.dtype,()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let s=e.shape[e.shape.length-1],g=e.size/s;if(null!=t&&t<s){let r=e.shape.map(e=>0),i=e.shape.map(e=>e);i[e.shape.length-1]=t,n=(0,c.t)(e,r,i),s=t}else if(null!=t&&t>s){let r=e.shape.map(e=>e);r[e.shape.length-1]=t-s,n=(0,a.z)([e,(0,h.l)(r)],e.shape.length-1),s=t}else n=e;let m=(0,f.P)(n),b=(0,u.X)((0,i.P)(n,m),[g,s]),y=(0,p.k)(b),v=Math.floor(s/2)+1,x=(0,l.k)(y),w=(0,o.a)(y),k=(0,d.V)(x,[v,s-v],x.shape.length-1),E=(0,d.V)(w,[v,s-v],w.shape.length-1),I=n.shape.slice();return I[n.shape.length-1]=v,(0,u.X)((0,i.P)(k[0],E[0]),I)}})},59509:function(e,t,n){"use strict";n.d(t,{V:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({split_:function(e,t,n=0){let o=(0,a._1)(e,"x","split");return r.BV.runKernel(i.L8s,{x:o},{numOrSizeSplits:t,axis:n})}})},99467:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({sqrt_:function(e){let t=(0,a._1)(e,"x","sqrt","float32");return r.BV.runKernel(i.FKq,{x:t})}})},77941:function(e,t,n){"use strict";n.d(t,{h:function(){return a}});var r=n(49681),i=n(50971);let a=(0,n(32888).op)({square_:function(e){let t=(0,i._1)(e,"x","square");return r.BV.runKernel("Square",{x:t},{})}})},67436:function(e,t,n){"use strict";n.d(t,{$:function(){return l}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971),s=n(95221);let l=(0,n(32888).op)({squaredDifference_:function(e,t){let n=(0,o._1)(e,"a","squaredDifference"),l=(0,o._1)(t,"b","squaredDifference");[n,l]=(0,a.makeTypesMatch)(n,l),(0,s.assertAndGetBroadcastShape)(n.shape,l.shape);let u={a:n,b:l};return r.BV.runKernel(i._tC,u,{})}})},48772:function(e,t,n){"use strict";n.d(t,{L:function(){return s}});var r=n(50971),i=n(2771),a=n(32888),o=n(96439);let s=(0,a.op)({squeeze_:function(e,t){let n=(0,r._1)(e,"x","squeeze","string_or_numeric");return(0,o.X)(n,(0,i.bp)(n.shape,t).newShape)}})},95363:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771);let s=(0,n(32888).op)({stack_:function(e,t=0){let n=(0,a.sI)(e,"tensors","stack","string_or_numeric");return o.hu(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&o.hu(t<=n[0].rank,()=>"Axis must be <= rank of the tensor"),r.BV.runKernel(i.QiL,n,{axis:t})}})},9794:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({step_:function(e,t=0){let n=(0,a._1)(e,"x","step");return r.BV.runKernel(i.h8e,{x:n},{alpha:t})}})},35799:function(e,t,n){"use strict";n.d(t,{l:function(){return s}});var r=n(49681),i=n(35047),a=n(45420),o=n(50971);let s=(0,n(32888).op)({sub_:function(e,t){let n=(0,o._1)(e,"a","sub"),s=(0,o._1)(t,"b","sub");[n,s]=(0,a.makeTypesMatch)(n,s);let l={a:n,b:s};return r.BV.runKernel(i.Tr8,l)}})},71101:function(e,t,n){"use strict";n.d(t,{S:function(){return s}});var r=n(49681),i=n(35047),a=n(50971),o=n(58893);let s=(0,n(32888).op)({sum_:function(e,t=null,n=!1){let s=(0,a._1)(e,"x","sum");"bool"===s.dtype&&(s=(0,o.p)(s,"int32"));let l={x:s};return r.BV.runKernel(i.GBy,l,{axis:t,keepDims:n})}})},13831:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({tanh_:function(e){let t=(0,a._1)(e,"x","tanh","float32");return r.BV.runKernel(i.MIZ,{x:t})}})},1802:function(e,t,n){"use strict";n.d(t,{X:function(){return a}});var r=n(50971),i=n(31185);function a(e,t,n){let a=(0,r.C)(e,n);return(0,i.H)(e,t,a,n)}},31185:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var r=n(49681),i=n(18638),a=n(2771),o=n(32904);function s(e,t,n,s){if(null==s)s=(0,a.D2)(e);else if("complex64"===s)throw Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if((0,i.$F)(e)||(0,i.Oq)(e)){if("float32"!==s&&"int32"!==s)throw Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${s}.`);return r.BV.backend.createTensorFromGPUData(e,t||n,s)}if(!(0,o.isTypedArray)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){(0,a.Mu)(t);let e=(0,a.NA)(t),r=(0,a.NA)(n);(0,a.hu)(e===r,()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`);for(let e=0;e<n.length;++e){let r=n[e],i=e!==n.length-1||r!==(0,a.NA)(t.slice(e));(0,a.hu)(n[e]===t[e]||!i,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return(0,o.isTypedArray)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==s?(0,o.toTypedArray)(e,s):(0,o.flatten)(e,[],!0),r.BV.makeTensor(e,t,s)}},47642:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771);let s=(0,n(32888).op)({tile_:function(e,t){let n=(0,a._1)(e,"x","tile","string_or_numeric");return o.hu(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`),r.BV.runKernel(i.n9L,{x:n},{reps:t})}})},26439:function(e,t,n){"use strict";n.d(t,{p:function(){return f}});var r=n(49681),i=n(35823),a=n(35047),o=n(50971),s=n(2771),l=n(97977),u=n(98587),c=n(22666),d=n(32888),h=n(61773);let f=(0,d.op)({transpose_:function(e,t,n){let d=(0,o._1)(e,"x","transpose");if(null==t&&(t=d.shape.map((e,t)=>t).reverse()),s.hu(d.rank===t.length,()=>`Error in transpose: rank of input ${d.rank} must match length of perm ${t}.`),t.forEach(e=>{s.hu(e>=0&&e<d.rank,()=>`All entries in 'perm' must be between 0 and ${d.rank-1} but got ${t}`)}),d.rank<=1)return d.clone();let f={perm:t};return"complex64"===d.dtype?(0,i.lu)(()=>{let e=(0,h.k)(d),t=(0,u.a)(d);return e=r.BV.runKernel(a.G3Y,{x:e},f),t=r.BV.runKernel(a.G3Y,{x:t},f),n&&(t=(0,c.W)(t)),(0,l.P)(e,t)}):r.BV.runKernel(a.G3Y,{x:d},f)}})},51863:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var r=n(49681),i=n(35047),a=n(50971),o=n(2771);let s=(0,n(32888).op)({unstack_:function(e,t=0){let n=(0,a._1)(e,"x","unstack","string_or_numeric");return o.hu(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`),r.BV.runKernel(i.ToN,{value:n},{axis:t})}})},81275:function(e,t,n){"use strict";n.d(t,{a:function(){return l}});var r=n(49681),i=n(35047),a=n(50971),o=n(25896),s=n(95221);let l=(0,n(32888).op)({where_:function(e,t,n){let l=(0,a._1)(t,"a","where"),u=(0,a._1)(n,"b","where"),c=(0,a._1)(e,"condition","where","bool"),d=(0,s.assertAndGetBroadcastShape)((0,s.assertAndGetBroadcastShape)(c.shape,l.shape),u.shape),h=(0,o.U)(c,d),f=(0,o.U)(l,d),p=(0,o.U)(u,d);return r.BV.runKernel(i.PhF,{condition:h,t:f,e:p})}})},40290:function(e,t,n){"use strict";n.d(t,{l:function(){return function e(t,n="float32"){if((0,i.Mu)(t),"complex64"===n){let n=e(t,"float32"),r=e(t,"float32");return(0,a.P)(n,r)}let o=(0,i.wT)((0,i.NA)(t),n);return r.BV.makeTensor(o,t,n)}}});var r=n(49681),i=n(2771),a=n(97977)},72898:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var r=n(49681),i=n(35047),a=n(50971);let o=(0,n(32888).op)({zerosLike_:function(e){let t=(0,a._1)(e,"x","zerosLike");return r.BV.runKernel(i.RuY,{x:t})}})},48719:function(e,t,n){"use strict";function r(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}n.d(t,{j:function(){return r}})},86150:function(e,t,n){"use strict";n.d(t,{es:function(){return g},YD:function(){return u},_w:function(){return b},t3:function(){return m},FZ:function(){return p},Vp:function(){return f},Vi:function(){return h}});var r=n(95490),i=n(2771);function a(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:(0,i.HD)(e)?`'${e}'`:"bool"===n?o(e):parseFloat(e.toFixed(7)).toString(),(0,i.oj)(r,t)}function o(e){return 0===e?"false":"true"}function s(e){let t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var l=n(32904);class u{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=i.NA(e),null!=n){let e=n.length;i.hu(e===this.size,()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===t)throw Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||i.rQ(t,this.size),this.strides=(0,i.e3)(e)}set(e,...t){0===t.length&&(t=[0]),i.hu(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);let n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(let n of e){if(n<0||n>=this.shape[t])throw Error(`Requested out of range element at ${e}.   Buffer shape=${this.shape}`);t++}let n=e[e.length-1];for(let t=0;t<e.length-1;++t)n+=this.strides[t]*e[t];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];let t=Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return c().makeTensor(this.values,this.shape,this.dtype)}}let c=null,d=null;function h(e){c=e}function f(e){d=e}function p(e){}class g{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=i.NA(e),this.strides=(0,i.e3)(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return d.buffer(this.shape,this.dtype,e)}bufferSync(){return d.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return(0,i.GX)(this.shape,e,"complex64"===this.dtype)}arraySync(){return(0,i.GX)(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();let e=c().read(this.dataId);if("string"===this.dtype){let t=await e;try{return t.map(e=>l.decodeString(e))}catch(e){throw Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),c().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=c().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>l.decodeString(e))}catch(e){throw Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await c().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),c().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw Error("Tensor is disposed.")}print(e=!1){return d.print(this,e)}clone(){return this.throwIfDisposed(),d.clone(this)}toString(e=!1){return function(e,t,n,r){let l=(0,i.e3)(t),u=function(e,t,n,r){let o=(0,i.NA)(t),l=r[r.length-1],u=Array(l).fill(0),c=t.length,d="complex64"===n?s(e):e;if(c>1)for(let e=0;e<o/l;e++){let t=e*l;for(let e=0;e<l;e++)u[e]=Math.max(u[e],a(d[t+e],0,n).length)}return u}(e,t,n,l),c=t.length,d=function e(t,n,r,i,l,u=!0){let c="complex64"===r?2:1,d=n[0],h=n.length;if(0===h)return"complex64"===r?[a(s(t)[0],0,r)]:"bool"===r?[o(t[0])]:[t[0].toString()];if(1===h){if(d>20){let e=Array.from(t.slice(0,3*c)),n=Array.from(t.slice((d-3)*c,d*c));return"complex64"===r&&(e=s(e),n=s(n)),["["+e.map((e,t)=>a(e,l[t],r)).join(", ")+", ..., "+n.map((e,t)=>a(e,l[d-3+t],r)).join(", ")+"]"]}return["["+("complex64"===r?s(t):Array.from(t)).map((e,t)=>a(e,l[t],r)).join(", ")+"]"]}let f=n.slice(1),p=i.slice(1),g=i[0]*c,m=[];if(d>20){for(let n=0;n<3;n++){let i=n*g,a=i+g;m.push(...e(t.slice(i,a),f,r,p,l,!1))}m.push("...");for(let n=d-3;n<d;n++){let i=n*g,a=i+g;m.push(...e(t.slice(i,a),f,r,p,l,n===d-1))}}else for(let n=0;n<d;n++){let i=n*g,a=i+g;m.push(...e(t.slice(i,a),f,r,p,l,n===d-1))}let b=2===h?",":"";m[0]="["+(d>0?m[0]+b:"");for(let e=1;e<m.length-1;e++)m[e]=" "+m[e]+b;let y=",\n";for(let e=2;e<h;e++)y+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(u?"":y),m}(e,t,n,l,u),h=["Tensor"];return r&&(h.push(`  dtype: ${n}`),h.push(`  rank: ${c}`),h.push(`  shape: [${t}]`),h.push("  values:")),h.push(d.map(e=>"    "+e).join("\n")),h.join("\n")}(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),d.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),c().makeVariable(this,e,t,n)}}function m(){return(0,r.R)("Tensor",()=>g)}Object.defineProperty(g,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),m();class b extends g{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!i.cO(e.shape,this.shape))throw Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);c().disposeTensor(this),this.dataId=e.dataId,c().incRef(this,null)}dispose(){c().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(b,Symbol.hasInstance,{value:e=>e instanceof g&&null!=e.assign&&e.assign instanceof Function})},45420:function(e,t,n){"use strict";n.r(t),n.d(t,{assertTypesMatch:function(){return s},getTensorsInContainer:function(){return u},isTensorInList:function(){return l},makeTypesMatch:function(){return o}});var r=n(86150),i=n(18638),a=n(2771);function o(e,t){if(e.dtype===t.dtype)return[e,t];let n=(0,i.x8)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function s(e,t){(0,a.hu)(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function l(e,t){return t.some(t=>t.id===e.id)}function u(e){let t=[];return function e(t,n,i){if(null!=t){if(t instanceof r.es){n.push(t);return}if(Array.isArray(t)||"object"==typeof t)for(let r in t){let a=t[r];i.has(a)||(i.add(a),e(a,n,i))}}}(e,t,new Set),t}},50971:function(e,t,n){"use strict";n.d(t,{C:function(){return u},_1:function(){return d},sI:function(){return h}});var r=n(49681),i=n(6472),a=n(86150),o=n(18638),s=n(32904),l=n(2771);function u(e,t){let n=e;if((0,s.isTypedArray)(e))return"string"===t?[]:[e.length];if((0,o.Oq)(e)){let t=e.channels||"RGBA";return[e.height,e.width*t.length]}if((0,o.$F)(e))return[e.buffer.size/(null==t?4:(0,l.bT)(t))];if(!Array.isArray(e))return[];let r=[];for(;Array.isArray(n)||(0,s.isTypedArray)(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&(0,i.OB)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],!Array.isArray(t)&&!(0,s.isTypedArray)(t)){(0,l.hu)(0===n.length,()=>`Element arr[${r.join("][")}] is a primitive, but should be an array/TypedArray of ${n[0]} elements`);return}(0,l.hu)(n.length>0,()=>`Element arr[${r.join("][")}] should be a primitive, but is an array of ${t.length} elements`),(0,l.hu)(t.length===n[0],()=>`Element arr[${r.join("][")}] should have ${n[0]} elements, but has ${t.length} elements`);let i=n.slice(1);for(let n=0;n<t.length;++n)e(t[n],i,r.concat(n))}(e,r,[]),r}function c(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function d(e,t,n,i="numeric"){if(e instanceof(0,a.t3)())return c(i,e.dtype,t,n),e;let o=(0,l.D2)(e);if("string"!==o&&["bool","int32","float32"].indexOf(i)>=0&&(o=i),c(i,o,t,n),null==e||!(0,s.isTypedArray)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){let r=null==e?"null":e.constructor.name;throw Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}let d=u(e,o);(0,s.isTypedArray)(e)||Array.isArray(e)||(e=[e]);let h="string"!==o?(0,s.toTypedArray)(e,o):(0,s.flatten)(e,[],!0);return r.BV.makeTensor(h,d,o)}function h(e,t,n,r="numeric"){if(!Array.isArray(e))throw Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((e,i)=>d(e,`${t}[${i}]`,n,r))}},18638:function(e,t,n){"use strict";var r,i,a,o,s,l,u,c,d,h;n.d(t,{$F:function(){return b},Oq:function(){return m},x8:function(){return p},z4:function(){return g}}),(l=r||(r={})).R0="R0",l.R1="R1",l.R2="R2",l.R3="R3",l.R4="R4",l.R5="R5",l.R6="R6",(u=i||(i={})).float32="float32",u.int32="int32",u.bool="int32",u.complex64="complex64",(c=a||(a={})).float32="float32",c.int32="int32",c.bool="bool",c.complex64="complex64",(d=o||(o={})).float32="float32",d.int32="float32",d.bool="float32",d.complex64="complex64",(h=s||(s={})).float32="complex64",h.int32="complex64",h.bool="complex64",h.complex64="complex64";let f={float32:o,int32:i,bool:a,complex64:s};function p(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw Error(`Can not upcast ${e} with ${t}`)}return f[e][t]}function g(e){return p(e,"int32")}function m(e){return null!=e&&"object"==typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function b(e){return"undefined"!=typeof GPUBuffer&&null!=e&&"object"==typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}},32904:function(e,t,n){"use strict";n.r(t),n.d(t,{arraysEqual:function(){return a.cO},arraysEqualWithNull:function(){return a.DK},assert:function(){return a.hu},assertNonNegativeIntegerDimensions:function(){return a.Mu},assertNonNull:function(){return a.Cq},assertShapesMatch:function(){return a.k5},bytesFromStringArray:function(){return a.Ub},bytesPerElement:function(){return a.bT},checkConversionForErrors:function(){return a.D5},clamp:function(){return a.uZ},computeStrides:function(){return a.e3},convertBackendValuesAndArrayBuffer:function(){return a.KS},createScalarValue:function(){return v},createShuffledIndices:function(){return a.U$},decodeString:function(){return I},distSquared:function(){return a.E7},encodeString:function(){return E},fetch:function(){return k},fingerPrint64:function(){return y},flatten:function(){return T},getArrayFromDType:function(){return a.rQ},getTypedArrayFromDType:function(){return a.WP},hasEncodingLoss:function(){return a.QB},hexToLong:function(){return l},indexToLoc:function(){return a.NE},inferDtype:function(){return a.D2},inferFromImplicitShape:function(){return a.JZ},isBoolean:function(){return a.jn},isFunction:function(){return a.mf},isInt:function(){return a.GN},isNumber:function(){return a.hj},isPromise:function(){return a.tI},isScalarShape:function(){return a.xH},isString:function(){return a.HD},isTypedArray:function(){return S},isValidDtype:function(){return a.LP},locToIndex:function(){return a.qy},makeOnesTypedArray:function(){return a.p8},makeZerosNestedTypedArray:function(){return a.l6},makeZerosTypedArray:function(){return a.wT},nearestDivisor:function(){return a.jP},nearestLargerEven:function(){return a.nY},now:function(){return w},parseAxisParam:function(){return a.EC},randUniform:function(){return a.bj},repeatedTry:function(){return a.WD},rightPad:function(){return a.oj},shuffle:function(){return a.TV},shuffleCombo:function(){return a.d7},sizeFromShape:function(){return a.NA},sizeToSquarishShape:function(){return a.YP},squeezeShape:function(){return a.bp},sum:function(){return a.Sm},swap:function(){return a.LF},tanh:function(){return a.AE},toNestedArray:function(){return a.GX},toTypedArray:function(){return x}});var r=n(6472),i=n(48719),a=n(2771),o=n(398);let s=n.n(o)()||o;function l(e){return s.fromString(e,!0,16)}let u=l("c3a5c85c97cb3127"),c=l("b492b66fbe98f273"),d=l("9ae16a3b2f90404f");function h(e){return e.xor(e.shru(47))}function f(e,t,n){let r=e.slice(t,t+n);return s.fromBytes(Array.from(r),!0,!0)}function p(e,t){return f(e,t,8)}function g(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function m(e,t,n=l("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let i=t.xor(r).mul(n);return(i=i.xor(i.shru(47))).mul(n)}function b(e,t,n,r){return function(e,t,n,r,i,a){i=i.add(e),a=g(a.add(i).add(r),21);let o=i;return i=(i=i.add(t)).add(n),a=a.add(g(i,44)),[i.add(r),a.add(o)]}(p(e,t),p(e,t+8),p(e,t+16),p(e,t+24),n,r)}function y(e,t=e.length){let n=s.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){let n=d.add(2*t),r=p(e,0).add(d),i=p(e,t-8);return m(g(i,37).mul(n).add(r),g(r,25).add(i).mul(n),n)}if(t>=4){let n=d.add(2*t);return m(f(e,0,4).shl(3).add(t),f(e,t-4,4),n)}if(t>0){let n=e[0],r=e[t>>1],i=e[t-1];return h(d.mul(n+(r<<8)).xor(u.mul(t+(i<<2)))).mul(d)}return d}(e,t):function(e,t=e.length){let n=d.add(2*t),r=p(e,0).mul(c),i=p(e,8),a=p(e,t-8).mul(n),o=p(e,t-16).mul(d);return m(g(r.add(i),43).add(g(a,30)).add(o),r.add(g(i.add(d),18)).add(a),n)}(e,t);if(t<=64)return function(e,t=e.length){let n=d.add(2*t),r=p(e,0).mul(d),i=p(e,8),a=p(e,t-8).mul(n),o=p(e,t-16).mul(d),s=g(r.add(i),43).add(g(a,30)).add(o),l=m(s,r.add(g(i.add(d),18)).add(a),n),u=p(e,16).mul(n),c=p(e,24),h=s.add(p(e,t-32)).mul(n),f=l.add(p(e,t-24)).mul(n);return m(g(u.add(c),43).add(g(h,30)).add(f),u.add(g(c.add(r),18)).add(h),n)}(e,t);let r=n,i=n.mul(c).add(113),a=h(i.mul(d).add(113)).mul(d),o=[s.UZERO,s.UZERO],l=[s.UZERO,s.UZERO];r=r.mul(d).add(p(e,0));let y=0,v=(t-1>>6)*64;do r=g(r.add(i).add(o[0]).add(p(e,y+8)),37).mul(c),i=g(i.add(o[1]).add(p(e,y+48)),42).mul(c),r=r.xor(l[1]),i=i.add(o[0]).add(p(e,y+40)),a=g(a.add(l[0]),33).mul(c),o=b(e,y,o[1].mul(c),r.add(l[0])),l=b(e,y+32,a.add(l[1]),i.add(p(e,y+16))),[a,r]=[r,a],y+=64;while(y!==v);let x=c.add(a.and(255).shl(1));return y=v+(t-1&63)-63,l[0]=l[0].add(t-1&63),o[0]=o[0].add(l[0]),l[0]=l[0].add(o[0]),r=g(r.add(i).add(o[0]).add(p(e,y+8)),37).mul(x),i=g(i.add(o[1]).add(p(e,y+48)),42).mul(x),r=r.xor(l[1].mul(9)),i=i.add(o[0].mul(9).add(p(e,y+40))),a=g(a.add(l[0]),33).mul(x),o=b(e,y,o[1].mul(x),r.add(l[0])),l=b(e,y+32,a.add(l[1]),i.add(p(e,y+16))),[a,r]=[r,a],m(m(o[0],l[0],x).add(h(i).mul(u)).add(a),m(o[1],l[1],x).add(r),x)}function v(e,t){return"string"===t?E(e):x([e],t)}function x(e,t){var n;if("string"===t)throw Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=T(e)),(0,r.OB)().getBool("DEBUG")&&a.D5(e,t),(n=e)instanceof Float32Array&&"float32"===t||n instanceof Int32Array&&"int32"===t||n instanceof Uint8Array&&"bool"===t)return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){let t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw Error(`Unknown data type ${t}`)}function w(){return(0,r.OB)().platform.now()}function k(e,t){return(0,r.OB)().platform.fetch(e,t)}function E(e,t="utf-8"){return t=t||"utf-8",(0,r.OB)().platform.encode(e,t)}function I(e,t="utf-8"){return t=t||"utf-8",(0,r.OB)().platform.decode(e,t)}function S(e){return null!=(0,r.OB)().platform.isTypedArray?(0,r.OB)().platform.isTypedArray(e):(0,i.j)(e)}function T(e,t=[],n=!1){if(null==t&&(t=[]),"boolean"==typeof e||"number"==typeof e||"string"==typeof e||a.tI(e)||null==e||S(e)&&n)t.push(e);else if(Array.isArray(e)||S(e))for(let r=0;r<e.length;++r)T(e[r],t,n);else{let r=-1;for(let t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let i=0;i<=r;i++)T(e[i],t,n)}return t}},2771:function(e,t,n){"use strict";function r(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,s(e,--t,n)}function i(e,t){if(e.length!==t.length)throw Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,s(e,--n,r),s(t,n,r)}function a(e,t,n){return Math.max(e,Math.min(t,n))}function o(e){return e%2==0?e:e+1}function s(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function l(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function u(e,t){let n=Math.random();return t*n+(1-n)*e}function c(e,t){let n=0;for(let r=0;r<e.length;r++){let i=Number(e[r])-Number(t[r]);n+=i*i}return n}function d(e,t){if(!e)throw Error("string"==typeof t?t:t())}function h(e,t,n=""){d(b(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function f(e){d(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function p(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function g(e){return 0===e.length}function m(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(null!==e[n]&&null!==t[n]&&e[n]!==t[n])return!1;return!0}function b(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function y(e){return e%1==0}function v(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return -1;{let t=Math.exp(2*e);return(t-1)/(t+1)}}function x(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function w(e){let t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return r(t),t}function k(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function E(e,t=e=>0,n,r){return new Promise((i,a)=>{let o=0,s=()=>{if(e()){i();return}let l=t(++o);if(null!=n&&o>=n){a();return}null!=r?r(s,l):setTimeout(s,l)};s()})}function I(e,t){let n=1,r=-1;for(let t=0;t<e.length;++t)if(e[t]>=0)n*=e[t];else if(-1===e[t]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${t}`);r=t}else if(e[t]<0)throw Error(`Shapes can not be < 0. Found ${e[t]} at dim ${t}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);let i=e.slice();return i[r]=t/n,i}function S(e,t){let n=t.length;return d((e=null==e?t.map((e,t)=>t):[].concat(e)).every(e=>e>=-n&&e<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),d(e.every(e=>y(e)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(e=>e<0?n+e:e)}function T(e,t){let n=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,a=null==t||i?null:S(t,e).sort(),o=0;for(let t=0;t<e.length;++t){if(null!=a){if(a[o]===t&&1!==e[t])throw Error(`Can't squeeze axis ${t} since its dim '${e[t]}' is not 1`);(null==a[o]||a[o]>t)&&1===e[t]&&(n.push(e[t]),r.push(t)),a[o]<=t&&o++}1!==e[t]&&(n.push(e[t]),r.push(t))}return{newShape:n,keptDims:r}}function C(e,t){return N(e,t)}function N(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else if("string"===e)n=Array(t);else throw Error(`Unknown data type ${e}`);return n}function A(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function R(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function D(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function $(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw Error(`Unknown dtype ${e}`)}function _(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}function F(e){return"string"==typeof e||e instanceof String}function O(e){return"boolean"==typeof e}function P(e){return"number"==typeof e}function M(e){return!!(e&&e.constructor&&e.call&&e.apply)}function L(e,t){for(let n=t;n<e;++n)if(e%n==0)return n;return e}function B(e){let t=e.length;if(t<2)return[];let n=Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function U(e,t,n=!1){if(0===e.length)return t[0];let r=e.reduce((e,t)=>e*t)*(n?2:1);if(0===r)return[];if(r!==t.length)throw Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return function e(t,n,r,i=!1){let a=[];if(1===n.length){let e=n[0]*(i?2:1);for(let n=0;n<e;n++)a[n]=r[t+n]}else{let o=n[0],s=n.slice(1),l=s.reduce((e,t)=>e*t)*(i?2:1);for(let n=0;n<o;n++)a[n]=e(t+n*l,s,r,i)}return a}(0,e,t,n)}function z(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw Error(`Unknown dtype ${t}`)}function V(e,t){let n=W(e,t);for(let e=0;e<n.length;e++)n[e]=1;return n}function W(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw Error(`Unknown data type ${t}`)}function j(e,t){let n=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return U(e,new Float32Array(n));if("int32"===t)return U(e,new Int32Array(n));if("bool"===t)return U(e,new Uint8Array(n));throw Error(`Unknown data type ${t}`)}function H(e){e.forEach(t=>{d(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function K(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let t=0;t<e.length-1;++t)r+=n[t]*e[t];return r}function G(e,t,n){if(0===t)return[];if(1===t)return[e];let r=Array(t);for(let t=0;t<r.length-1;++t)r[t]=Math.floor(e/n[t]),e-=r[t]*n[t];return r[r.length-1]=e,r}function X(e){return e&&e.then&&"function"==typeof e.then}n.d(t,{AE:function(){return v},Cq:function(){return f},D2:function(){return function e(t){if(Array.isArray(t))return e(t[0]);if(t instanceof Float32Array);else if(t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray)return"int32";else if(P(t));else if(F(t))return"string";else if(O(t))return"bool";return"float32"}},D5:function(){return A},DK:function(){return m},E7:function(){return c},EC:function(){return S},GN:function(){return y},GX:function(){return U},HD:function(){return F},JZ:function(){return I},KS:function(){return z},LF:function(){return s},LP:function(){return R},Mu:function(){return H},NA:function(){return p},NE:function(){return G},QB:function(){return D},Sm:function(){return l},TV:function(){return r},U$:function(){return w},Ub:function(){return _},WD:function(){return E},WP:function(){return C},YP:function(){return x},bT:function(){return $},bj:function(){return u},bp:function(){return T},cO:function(){return b},d7:function(){return i},e3:function(){return B},hj:function(){return P},hu:function(){return d},jP:function(){return L},jn:function(){return O},k5:function(){return h},l6:function(){return j},mf:function(){return M},nY:function(){return o},oj:function(){return k},p8:function(){return V},qy:function(){return K},rQ:function(){return N},tI:function(){return X},uZ:function(){return a},wT:function(){return W},xH:function(){return g}})},39992:function(e,t,n){"use strict";n.d(t,{GD:function(){return E},Gc:function(){return b},aI:function(){return S}});var r=n(10280),i=n(1552),a=n(94120);class o extends r.m7h.Serializable{getConfig(){return{}}}class s extends o{apply(e,t=1){return i.py(e,t)}}s.className="elu",r.m7h.registerClass(s);class l extends o{apply(e){return r.U8D(e)}}l.className="selu",r.m7h.registerClass(l);class u extends o{apply(e){return r.UYe(e)}}u.className="relu",r.m7h.registerClass(u);class c extends o{apply(e){return(0,r.lub)(()=>r.LTh(6,r.UYe(e)))}}c.className="relu6",r.m7h.registerClass(c);class d extends o{apply(e){return e}}d.className="linear",r.m7h.registerClass(d);class h extends o{apply(e){return r.XD2(e)}}h.className="sigmoid",r.m7h.registerClass(h);class f extends o{apply(e){return i.HX(e)}}f.className="hardSigmoid",r.m7h.registerClass(f);class p extends o{apply(e){return r.Wvh(e)}}p.className="softplus",r.m7h.registerClass(p);class g extends o{apply(e){return i.O(e)}}g.className="softsign",r.m7h.registerClass(g);class m extends o{apply(e){return r.AEp(e)}}m.className="tanh",r.m7h.registerClass(m);class b extends o{apply(e,t=-1){return r.XAC(e,t)}}b.className="softmax",r.m7h.registerClass(b);class y extends o{apply(e,t=-1){return r.CmS(e,t)}}y.className="logSoftmax",r.m7h.registerClass(y);class v extends o{apply(e){return(0,r.lub)(()=>r.lub(()=>{let t=r.dC7(.5,r.IHx(1,r.qNN(r.hiC(e,Math.sqrt(2)))));return r.dC7(e,t)}))}}v.className="gelu",r.m7h.registerClass(v);class x extends o{apply(e){return(0,r.lub)(()=>r.dC7(.5,r.dC7(e,r.IHx(1,r.AEp(r.dC7(r._b3(r.hiC(2,Math.PI)),r.IHx(e,r.dC7(.044715,r.sQ3(e,3)))))))))}}x.className="gelu_new",r.m7h.registerClass(x);class w extends o{apply(e){return(0,r.lub)(()=>r.dC7(e,r.AEp(r.Wvh(e))))}}w.className="mish",r.m7h.registerClass(w);class k extends o{apply(e,t=1){return(0,r.lub)(()=>r.dC7(r.XD2(r.dC7(e,t)),e))}}function E(e){return e.getClassName()}function I(e,t={}){return(0,a.tU)(e,r.m7h.SerializationMap.getMap().classNameMap,t,"activation")}function S(e){if(null==e){let e={};return e.className="linear",e.config={},I(e)}if("string"==typeof e){let t={};return t.className=e,t.config={},I(t)}return e instanceof o?e:I(e)}k.className="swish",r.m7h.registerClass(k)},10685:function(e,t,n){"use strict";let r;n.d(t,{Ho:function(){return a},rf:function(){return o}});var i=n(10280);function a(){return null==r&&(r=(0,i.y3$)().epsilon()),r}function o(){return"channelsLast"}},76334:function(e,t,n){"use strict";n.d(t,{L:function(){return i},s:function(){return o}});let r=0;function i(){return r++}let a={};function o(e=""){return e in a||(a[e]=0),a[e]+=1,e+a[e].toString()}},1552:function(e,t,n){"use strict";n.d(t,{AK:function(){return x},GZ:function(){return b},Gg:function(){return y},HX:function(){return N},Iq:function(){return w},KC:function(){return A},O:function(){return T},Uz:function(){return h},a2:function(){return I},c9:function(){return f},dt:function(){return u},h6:function(){return k},mV:function(){return m},nG:function(){return v},pj:function(){return l},py:function(){return S},rv:function(){return C},rx:function(){return c},uI:function(){return g},xH:function(){return d}});var r=n(10280),i=n(38440),a=n(64579),o=n(86314),s=n(10685);function l(e,t){return r.pju(e,t)}function u(e,t=-1){let n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),r.XLQ(e,n)}function c(e,t){return(0,r.lub)(()=>{if(2!==e.shape.length)throw new a.nu(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);return y(u(e,1),[1,t,1])})}function d(e){let t=[o.NS(e.shape)];return r.XLQ(e,t)}function h(e){if(e.rank<=1)throw new a.nu(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);let t=[e.shape[0],o.NS(e.shape,1)];return r.XLQ(e,t)}function f(e,t,n){return(0,r.lub)(()=>{switch(e.rank){case 1:return r.jZU(e,t,n);case 2:return r.SmN(e,[t,0],[n,e.shape[1]]);case 3:return r.CnO(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return r.p0P(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return r.tPi(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return r.tPi(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new a.nu(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}})}function p(e,t,n){return(0,r.lub)(()=>{switch(e.rank){case 1:return r.jZU(e,t,n);case 2:return r.SmN(e,[0,t],[e.shape[0],n]);case 3:return r.CnO(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return r.p0P(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new a.nu(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function g(e,t,n,i){return(0,r.lub)(()=>{switch(e.rank){case 1:return r.jZU(e,t,n);case 2:switch(i){case 1:return f(e,t,n);case 2:return p(e,t,n);default:throw new a.nu(`The axis is not within the rank of the tensor ${i}`)}case 3:switch(i){case 1:return f(e,t,n);case 2:return r.CnO(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return p(e,t,n);default:throw new a.nu(`The axis is not within the rank of the tensor ${i}`)}case 4:switch(i){case 1:return f(e,t,n);case 2:return r.p0P(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return r.p0P(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return p(e,t,n);default:throw new a.nu(`The axis is not within the rank of the tensor ${i}`)}default:throw new a.nu(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function m(e,t=-1){let n;return t<0&&(t=0!==(n=e[0].rank)?n:0),t===e[0].rank&&(t=-1),r.zoF(e,t)}function b(e,t){switch(e.rank){case 1:return r.gME([e,t]);case 2:return r.Izb([e,t],0);case 3:return r.MNy([e,t],0);case 4:return r.ZaL([e,t],0);default:throw new a.nu(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function y(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new a.nu(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return r.Gg6(e,t)}function v(e,t=0,n=1,i,a){return r.nGf(e,t,n,i,a)}function x(e,t,n,i){if(e.rank<2||t.rank<2)throw new a.nj(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new a.nj(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`);if(2===e.rank&&2===t.rank)return r.imm.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:i?E(e.rank,i,(0,s.rf)()):null,activation:n});{let a=e.shape.slice(),o=a.pop();e=r.XLQ(e,[-1,o]);let l=t.shape.slice(),u=l.pop(),c=l.pop(),d=[...l,u],h=Array.from({length:t.rank},(e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n);t=r.XLQ(r.p4s(t,h),[c,-1]);let f=[...a,...d];return r.XLQ(r.imm.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:i?E(e.rank,i,(0,s.rf)()):null,activation:n}),f)}}function w(e,t,n){return(0,r.lub)(()=>(t=Array.isArray(t)?(0,r.RRF)(t,"int32"):r.pju(t,"int32"),r.Iqj(e,t,n)))}function k(e){return r.dC7(e,e)}function E(e,t,n){let i=t.shape;if(1!==t.rank&&t.rank!==e)throw new a.nu(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return 1===i.length?r.XLQ(t,[1,i[0],1,1,1]):r.XLQ(t,[1,i[3],i[0],i[1],i[2]]);if("channelsLast"===n)return 1===i.length?r.XLQ(t,[1,1,1,1,i[0]]):r.XLQ(t,[1].concat(i))}else if(4===e){if("channelsFirst"===n)return 1===i.length?r.XLQ(t,[1,i[0],1,1]):r.XLQ(t,[1,i[2],i[0],i[1]]);if("channelsLast"===n)return 1===i.length?r.XLQ(t,[1,1,1,i[0]]):r.XLQ(t,[1].concat(i))}else if(3===e){if("channelsFirst"===n)return 1===i.length?r.XLQ(t,[1,i[0],1]):r.XLQ(t,[1,i[1],i[0]]);if("channelsLast"===n)return 1===i.length?r.XLQ(t,[1,1,i[0]]):r.XLQ(t,[1].concat(i))}else if(e<3)return t;throw new a.nu(`Unsupported input rank by biasAdd: ${t.rank}`)}function I(e,t,n){return(0,r.lub)(()=>(null==n&&(n=(0,s.rf)()),(0,i.cj)(n),r.IHx(e,E(e.rank,t,n))))}function S(e,t=1){if(1!==t)throw new a.nj(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return r.pyx(e)}function T(e){return(0,r.lub)(()=>r.hiC(e,r.IHx(r.WnP(e),1)))}function C(e,t,n,i){return(0,r.lub)(()=>r.rvX(e,t,n,i))}function N(e){return(0,r.lub)(()=>{let t=r.IHx(.5,r.dC7(.2,e));return r.iUl(t,0,1)})}function A(e,t,n=!1){return n?e():t()}},19914:function(e,t,n){"use strict";n.d(t,{CZ:function(){return p},ex:function(){return u},m$:function(){return m}});var r,i,a=n(10280),o=n(64579),s=n(10525),l=n(94120);(r=i||(i={}))[r.SILENT=0]="SILENT",r[r.VERBOSE=1]="VERBOSE";class u{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class c{constructor(e,t=10){null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(let t of this.callbacks)t.setParams(e)}setModel(e){for(let t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){for(let n of(null==t&&(t={}),this.callbacks))await n.onEpochBegin(e,t)}async onEpochEnd(e,t){for(let n of(null==t&&(t={}),this.callbacks))await n.onEpochEnd(e,t)}async onBatchBegin(e,t){for(let n of(null==t&&(t={}),this.callbacks))await n.onBatchBegin(e,t)}async onBatchEnd(e,t){for(let n of(null==t&&(t={}),this.callbacks))await n.onBatchEnd(e,t)}async onTrainBegin(e){for(let t of(null==e&&(e={}),this.callbacks))await t.onTrainBegin(e)}async onTrainEnd(e){for(let t of(null==e&&(e={}),this.callbacks))await t.onTrainEnd(e)}}class d extends u{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});let n=null==t.size?0:t.size;for(let e in this.seen+=n,t){let r=t[e];if("number"==typeof r)this.totals.hasOwnProperty(e)||(this.totals[e]=0),this.totals[e]=this.totals[e]+r*n;else{let t;e in this.totals?t=this.totals[e]:this.totals[e]=0;let i=(0,a.lub)(()=>(0,a.IHx)(this.totals[e],(0,a.dC7)(r,n)));this.totals[e]=i,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(let e of this.params.metrics)null!=this.totals[e]&&("number"==typeof this.totals[e]?t[e]=this.totals[e]/this.seen:(0,a.lub)(()=>{let n=(0,a.dC7)((0,a.hiC)(1,this.seen),this.totals[e]);t[e]=n,this.totals[e].dispose(),(0,a.CnY)(t[e])}))}}class h extends u{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){for(let n in null==t&&(t={}),this.epoch.push(e),t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){let e=[],t=[],n=[];for(let r in this.history){let i=this.history[r];for(let a=0;a<i.length;++a)if("number"!=typeof i[a]){let o=i[a];e.push(o.data()),t.push(r),n.push(a)}}let r=await Promise.all(e);for(let e=0;e<r.length;++e)this.history[t[e]][n[e]].dispose(),this.history[t[e]][n[e]]=r[e][0]}}class f extends u{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||a.glt,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");a.D5U.isNumber(this.yieldEvery)&&(this.maybeWait=l.Ds(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){let r=[];null!=this.yield&&(await (0,s.Z)(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await (0,s.Z)(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){let n=[];null!=this.epochEnd&&(await (0,s.Z)(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await (0,s.Z)(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){let n=[];null!=this.batchEnd&&(await (0,s.Z)(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):a.D5U.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await (0,s.Z)(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await (0,s.Z)(e),await this.trainEnd(e))}}function p(e,t){return(null==e&&(e={}),e instanceof u)?[e]:Array.isArray(e)&&e[0]instanceof u?e:l.zZ(e).map(e=>new f(e,t))}class g{constructor(){}static registerCallbackConstructor(e,t){a.D5U.assert(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),g.checkForDuplicate(t),null==g.constructors[e]&&(g.constructors[e]=[]),g.constructors[e].push(t)}static checkForDuplicate(e){for(let t in g.constructors)g.constructors[+t].forEach(t=>{if(t===e)throw new o.nu("Duplicate callback constructor.")})}static clear(){g.constructors={}}static createCallbacks(e){let t=[];for(let n in g.constructors){let r=+n;e>=r&&t.push(...g.constructors[r])}return t.map(e=>new e)}}function m(e,t,n,r,i,a,o,s,l){let u=new h,f=[new d,...g.createCallbacks(t)];null!=e&&f.push(...e),f.push(u);let p=new c(f);return p.setParams({epochs:n,initialEpoch:r,samples:i,steps:a,batchSize:o,verbose:t,doValidation:s,metrics:l}),{callbackList:p,history:u}}g.constructors={}},38440:function(e,t,n){"use strict";n.d(t,{Lp:function(){return u},MU:function(){return h},cj:function(){return o},f4:function(){return d},w8:function(){return f},wU:function(){return s},zb:function(){return l}});var r=n(43872),i=n(94120);let a=new Map;function o(e){(0,i.xn)(r.PS,"DataFormat",e)}function s(e){(0,i.xn)(r.Mz,"InterpolationFormat",e)}function l(e){(0,i.xn)(r.zx,"PaddingMode",e)}function u(e){(0,i.xn)(r.MK,"PoolMode",e)}let c=[];function d(e,t){c.push(e);try{let e=t();return c.pop(),e}catch(e){throw c.pop(),e}}function h(e){if(!g(e))throw Error("Not a valid tensor name: '"+e+"'");return(0===c.length?"":c.join("/")+"/")+e}function f(e){if(!g(e))throw Error("Not a valid tensor name: '"+e+"'");a.has(e)||a.set(e,0);let t=a.get(e);if(a.set(e,a.get(e)+1),!(t>0))return e;{let n=`${e}_${t}`;return a.set(n,1),n}}let p=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function g(e){return!!e.match(p)}},22380:function(e,t,n){"use strict";n.d(t,{Ad:function(){return g},xF:function(){return f}});var r=n(10280),i=n(10685),a=n(94120);function o(e,t){return(0,r.lub)(()=>r._b3(r.Smz(r.dC7(e,e),t,!0)))}class s extends r.m7h.Serializable{getConfig(){return{}}}class l extends s{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return(0,r.lub)(()=>{let t=o(e,this.axis),n=r.iUl(t,0,this.maxValue);return r.dC7(e,r.hiC(n,r.IHx((0,i.Ho)(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}l.className="MaxNorm",r.m7h.registerClass(l);class u extends s{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return(0,r.lub)(()=>r.hiC(e,r.IHx((0,i.Ho)(),o(e,this.axis))))}getConfig(){return{axis:this.axis}}}u.className="UnitNorm",r.m7h.registerClass(u);class c extends s{apply(e){return r.UYe(e)}}c.className="NonNeg",r.m7h.registerClass(c);class d extends s{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return(0,r.lub)(()=>{let t=o(e,this.axis),n=r.IHx(r.dC7(this.rate,r.iUl(t,this.minValue,this.maxValue)),r.dC7(1-this.rate,t));return r.dC7(e,r.hiC(n,r.IHx((0,i.Ho)(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}d.className="MinMaxNorm",r.m7h.registerClass(d);let h={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function f(e){return(0,a.Kj)(e)}function p(e,t={}){return(0,a.tU)(e,r.m7h.SerializationMap.getMap().classNameMap,t,"constraint")}function g(e){return null==e?null:"string"==typeof e?p({className:e in h?h[e]:e,config:{}}):e instanceof s?e:p(e)}},95241:function(e,t,n){"use strict";n.d(t,{l2:function(){return u},ht:function(){return f},kS:function(){return h}});var r=n(10280),i=n(64579);class a{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){let e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){let e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}var o=n(94120),s=n(84996),l=n(64580);class u{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof u)for(let t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(let t of e)this.add(t.key,t.value)}}add(e,t,n){if(null==this.id2Value[e.id])this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return(0,r.pju)(t,e.dtype)}catch(n){throw new i.nu(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n);else throw new i.nu(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof l.Iy){if(null!=this.id2Value[e.id])return this.id2Value[e.id];throw new i.nu(`Nonexistent key: ${e.name}`)}{let t=this.name2Id[e];if(null==t)throw new i.nu(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof l.Iy){if(null!=this.id2Value[e.id])return this.id2Mask[e.id];throw new i.nu(`Nonexistent key: ${e.name}`)}{let t=this.name2Id[e];if(null==t)throw new i.nu(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&(0,r.B90)(this.id2Mask)}}let c=new a,d=new a;function h(e){null!=c&&c.setMaxEntries(e),null!=d&&d.setMaxEntries(e)}function f(e,t,n,i){let a;let l=null!=n&&n.training,h=Array.isArray(e),f=h?e:[e],g=f.map(e=>e.name),m=[],b=t.names();for(let e of g)-1!==b.indexOf(e)?m.push(t.getValue(e)):m.push(null);null!=i&&(i.maxNumTensors=-1/0,i.minNumTensors=1/0);let y=g.join(",")+"|"+t.names().sort().join(","),v=c.get(y);if(null==v){let e=function(e,t){r.D5U.assert(null!=e&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],i={};if(1===e.length){let r=p(e[0],t);n=r.sorted,i=r.recipientMap}else{let r=new Set;for(let a of e){let{sorted:e,recipientMap:o}=p(a,t);for(let t of e)r.has(t.name)||(n.push(t),r.add(t.name));for(let e in o)null==i[e]&&(i[e]=new Set),o[e].forEach(t=>i[e].add(t))}}return{sorted:n,recipientCounts:function(e){let t={};for(let n in e)t[n]=e[n].size;return t}(i)}}(f,t);v=e.sorted,a=e.recipientCounts,c.put(y,v),d.put(y,a)}a={},l||Object.assign(a,d.get(y));let x=new u(t);for(let e=0;e<v.length;++e){if(null!=i){let e=(0,r.sq6)().numTensors;e>i.maxNumTensors&&(i.maxNumTensors=e),e<i.minNumTensors&&(i.minNumTensors=e)}let u=v[e],c=u.sourceLayer;if(c instanceof s.l)continue;let d=[],h=[],f=[],p=!1;for(let e of u.inputs){let n=x.getValue(e),r=x.getMask(e);d.push(n),h.push(r),null!=r&&(p=!0),l||(a[e.name]--,0!==a[e.name]||t.hasKey(e)||-1!==g.indexOf(e.name)||n.isDisposed||!0===e.sourceLayer.stateful||f.push(n))}p&&((n=n||{}).mask=h[0]);let b=(0,o.zZ)(c.apply(d,n)),y=null;c.supportsMasking&&(y=c.computeMask(d,h));let w=function(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(let r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}(u),k=Array.isArray(w)?w:[w];for(let e=0;e<k.length;++e){x.hasKey(k[e])||x.add(k[e],b[e],Array.isArray(y)?y[0]:y);let t=g.indexOf(k[e].name);-1!==t&&(m[t]=b[e])}l||(0,r.B90)(f)}return x.disposeMasks(),h?m:m[0]}function p(e,t){let n=new Set,r=[],i={};for(let e of t.names())n.add(e);let a=[],o=[];for(a.push(e);a.length>0;){let e=a[a.length-1];if(n.has(e.name)){a.pop();continue}let t=o[o.length-1]===a.length-1;if(0===e.inputs.length||t)a.pop(),r.push(e),n.add(e.name),t&&o.pop();else for(let t of(o.push(a.length-1),e.inputs))null==i[t.name]&&(i[t.name]=new Set),i[t.name].add(e.name),n.has(t.name)||a.push(t)}return{sorted:r,recipientMap:i}}},84996:function(e,t,n){"use strict";n.d(t,{I:function(){return l},l:function(){return s}});var r=n(10280),i=n(76334),a=n(64579),o=n(64580);class s extends o.mh{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:(0,i.s)("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new a.nu("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new a.nu("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new a.nu("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];let r=new o.Iy(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new o.NB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new a.nu(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function l(e){if(null==e.batchShape&&null==e.shape)throw Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new a.nu("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new s({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}s.className="InputLayer",r.m7h.registerClass(s)},64580:function(e,t,n){"use strict";n.d(t,{Iy:function(){return f},NB:function(){return g},Zg:function(){return h},hA:function(){return function e(t,n,r){if((null==n||null!=r&&r>0)&&(n=t.sourceLayer,r=t.nodeIndex),0===n.inboundNodes.length)return[t];{let t=n.inboundNodes[r];if(0===t.inboundLayers.length)return t.inputTensors;{let n=[];for(let r=0;r<t.inboundLayers.length;r++)for(let i of e(t.inputTensors[r],t.inboundLayers[r],t.nodeIndices[r]))-1===n.indexOf(i)&&n.push(i);return n}}}},mh:function(){return b}});var r=n(10280),i=n(76334),a=n(38440),o=n(64579),s=n(79878),l=n(94120),u=n(97982),c=n(34923),d=n(48234);class h{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class f{constructor(e,t,n,r,o,s,l){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=o,this.outputTensorIndex=l,this.id=(0,i.L)(),null!=s&&(this.originalName=(0,a.MU)(s),this.name=(0,a.w8)(this.originalName)),this.rank=t.length}}let p=0;class g{constructor(e,t){for(let n of(this.callArgs=t,this.id=p++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes,e.inboundLayers))null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){let e=[];for(let t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let m=0;class b extends r.m7h.Serializable{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=m++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){let e=this.getClassName();t=l.D1(e)+"_"+(0,i.s)(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new o.LH(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new o.nu(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return l.Bq(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return l.Bq(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new o.j1(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new o.j1(`Layer ${this.name} is not connected, no input to return.`);return l.Bq(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new o.j1(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new o.j1(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return l.Bq(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){let t=l.zZ(e);if(null==this.inputSpec||0===this.inputSpec.length)return;let n=l.zZ(this.inputSpec);if(t.length!==n.length)throw new o.nu(`Layer ${this.name} expects ${n.length} inputs, but it received ${t.length} input tensors. Input received: ${e}`);for(let e=0;e<t.length;e++){let r=t[e],i=n[e];if(null==i)continue;let a=r.rank;if(null!=i.ndim&&a!==i.ndim)throw new o.nu(`Input ${e} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${a}`);if(null!=i.maxNDim&&a>i.maxNDim)throw new o.nu(`Input ${e} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${a}`);if(null!=i.minNDim&&a<i.minNDim)throw new o.nu(`Input ${e} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${a}.`);if(null!=i.dtype&&r.dtype!==i.dtype)throw new o.nu(`Input ${e} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${r.dtype}.`);if(i.axes){let t=r.shape;for(let n in i.axes){let r=Number(n),a=i.axes[n],s=r>=0?t[r]:t[t.length+r];if(null!=a&&-1===[a,null].indexOf(s))throw new o.nu(`Input ${e} is incompatible with layer ${this.name}: expected axis ${r} of input shape to have value ${a} but got shape ${t}.`)}}if(null!=i.shape)for(let t=0;t<i.shape.length;++t){let n=i.shape[t],a=r.shape[t];if(null!=n&&null!=a&&n!==a)throw new o.nu(`Input ${e} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${r.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();let n=l.zZ(e),r=function(e){let t=!0;for(let n of l.zZ(e))if(!(n instanceof f)){t=!1;break}return t}(e),i=function(e){let t=!0;for(let n of l.zZ(e))if(n instanceof f){t=!1;break}return t}(e);if(r===i)throw new o.nu("Arguments to apply() must be all SymbolicTensors or all Tensors");return(0,a.f4)(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);let t=[];for(let n of l.zZ(e))t.push(n.shape);this.build(l.Bq(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);let i=l.zZ(r),a=[];for(let e of i)-1!==n.indexOf(e)&&(e=e.clone()),a.push(e);if(r=l.Bq(a),null!=this.activityRegularizer)throw new o.nj("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{let n;let r=function(e){e=l.zZ(e);let t=[];for(let n of e)t.push(n.shape);return l.Bq(t)}(e),i=this.computeOutputShape(r),a="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?r[0]:r),n=null!=i&&i.length>0&&Array.isArray(i[0])?i.map((n,r)=>new f(a,n,this,l.zZ(e),t,this.name,r)):new f(a,i,this,l.zZ(e),t,this.name),this.addInboundNode(e,n,null,null,r,i,t),this._refCount++,null!=this.activityRegularizer)throw new o.nj("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return n}})}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape){if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new o.j1(`The layer ${this.name} has never been called and thus has no defined output shape.`);let e=[];for(let t of this.inboundNodes){let n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){let e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new o.j1(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new o.LH(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return c.t(this.weights)}build(e){this.built=!0}getWeights(e=!1){return(0,d.FQ)(e?this.trainableWeights:this.weights)}setWeights(e){(0,r.lub)(()=>{let t=this.weights;if(t.length!==e.length)throw new o.nu(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(0===t.length)return;let n=[],i=(0,d.FQ)(t);for(let a=0;a<i.length;++a){let s=i[a],l=t[a],u=e[a];if(!r.D5U.arraysEqual(s.shape,u.shape))throw new o.nu(`Layer weight shape ${s.shape} not compatible with provided weight shape ${u.shape}`);n.push([l,u])}(0,d.zb)(n)})}addWeight(e,t,n,r,i,a,l,u){if(-1!==this._addedWeightNames.indexOf(e))throw new o.nu(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=u?u():(0,s.L5)("zeros"));let c=r.apply(t,n),h=new d.fU(c,n,e,a,l);return c.dispose(),null!=i&&this.addLoss(()=>i.apply(h.read())),null==a&&(a=!0),a?this._trainableWeights.push(h):this._nonTrainableWeights.push(h),h}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=l.zZ(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(Array.isArray(t))t.forEach(e=>{if(null!=e)throw TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;let r=this.computeMask(e,n),i=l.zZ(t),a=l.zZ(r);if(i.length!==a.length)throw Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let e=0;e<i.length;e++)i[e].kerasMask=a[e]}addInboundNode(e,t,n,r,i,a,o=null){let s=l.zZ(e);t=l.zZ(t),n=l.zZ(n),r=l.zZ(r),i=u.x6(i),a=u.x6(a);let c=[],d=[],h=[];for(let e of s)c.push(e.sourceLayer),d.push(e.nodeIndex),h.push(e.tensorIndex);new g({outboundLayer:this,inboundLayers:c,nodeIndices:d,tensorIndices:h,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:a},o);for(let e=0;e<t.length;e++)t[e].sourceLayer=this,t[e].nodeIndex=this.inboundNodes.length-1,t[e].tensorIndex=e}getConfig(){let e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}},37064:function(e,t,n){"use strict";n.d(t,{D:function(){return f},y:function(){return d}});var r=n(10280),i=n(19914),a=n(64579),o=n(10525),s=n(94120),l=n(25602);function u(e,t){let n,i;n=t.xs,i=t.ys,r.D5U.assert(null!=n&&null!=i,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);let a=c("input",e.inputNames,n),o=c("output",e.outputNames,i),s=a[0].shape[0];r.D5U.assert(a.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),r.D5U.assert(o.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let t=0;t<a.length;t++)r.D5U.assert(a[t].shape[0]===s,()=>`Batch size mismatch: input ${e.inputNames[t]} has ${a[t].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`);for(let t=0;t<o.length;t++)r.D5U.assert(o[t].shape[0]===s,()=>`Batch size mismatch: output ${e.outputNames[t]} has ${o[t].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`);return{xs:a,ys:o}}function c(e,t,n){if(n instanceof r.esB)return[n];if(Array.isArray(n))return r.D5U.assert(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),n;{let r=[];for(let i of t){if(null==n[i])throw new a.nu(`The feature data generated by the dataset lacks the required ${e} key '${i}'.`);r.push(n[i])}return r}}async function d(e,t,n){let c=null!=n.batchesPerEpoch;if(r.D5U.assert(null!=e.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),r.D5U.assert(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),r.D5U.assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),r.D5U.assert(!c||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),r.D5U.assert(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{let d,f,p,g;let m=null!=n.validationData;if(m){if(h(n.validationData))r.D5U.assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{let e=function(e){if(3===e.length)throw new a.nj("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);d=e.xs,f=e.ys}}let b=e.makeTrainFunction(),y=e.getDedupedMetricsNames();p=m?y.slice().concat(y.map(e=>"val_"+e)):y.slice();let v=(0,i.CZ)(n.callbacks,n.yieldEvery),x=null==n.verbose?1:n.verbose,{callbackList:w,history:k}=(0,i.m$)(v,x,n.epochs,null,null,(g=null,null!=n.batchesPerEpoch?g=n.batchesPerEpoch:Number.isFinite(t.size)&&(g=t.size),g),null,m,p);w.setModel(e),e.history=k,await w.onTrainBegin(),e.stopTraining_=!1;let E=null==n.initialEpoch?0:n.initialEpoch,I=await t.iterator();for(;E<n.epochs;){let i={};await w.onEpochBegin(E);let a=0,p=0;for(c||(I=await t.iterator());!c||a<n.batchesPerEpoch;){let t=await I.next();if(c&&t.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${a} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(null!=t.value){let{xs:i,ys:s}=u(e,t.value),c={};c.batch=p,c.size=i[0].shape[0],await w.onBatchBegin(p,c);let d=[];if(null!=n.classWeight){let t=(0,l.Vf)(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)d.push(await (0,l.tl)(s[e],null,t[e]))}let h=i.concat(s).concat(d),f=b(h);r.B90(h);for(let e=0;e<y.length;++e){let t=y[e],n=f[e];c[t]=n,r.CnY(n)}await w.onBatchEnd(p,c),(0,o.i)(c),p++,a++}if(c?a>=n.batchesPerEpoch:t.done){if(m){let t;t=h(n.validationData)?(0,s.zZ)(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):(0,s.zZ)(e.evaluate(d,f,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)i[`val_${e.metricsNames[n]}`]=t[n]}break}if(e.stopTraining_)break}if(await w.onEpochEnd(E,i),E++,e.stopTraining_)break}return await w.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function h(e){return"function"==typeof e.iterator}async function f(e,t,n){let i=null!=(n=n||{}).batches,o=e.testFunction,l=[];if(n.verbose>0)throw new a.nj("Verbose mode is not implemented yet.");r.D5U.assert(!i||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);let c="function"==typeof t.next?t:await t.iterator(),d=0,h=0;for(;!i||h<n.batches;){let t=await c.next();if(l=r.lub(()=>{if(t.value){let{xs:n,ys:i}=u(e,t.value),a=n.concat(i),s=r.lub(()=>o(a));if(r.B90(a),0===h)for(let e=0;e<s.length;++e)l.push((0,r.iD$)(0));let c=a[0].shape[0];for(let e=0;e<s.length;++e){let t=s[e],n=l[e];l[e]=r.lub(()=>r.IHx(l[e],r.dC7(c,t))),h>0&&r.B90(n)}r.B90(s),d+=c,++h}return l}),t.done){i&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let e=0;e<l.length;++e){let t=l[e];l[e]=r.hiC(l[e],d),r.B90(t)}return(0,s.Bq)(l)}},85583:function(e,t,n){"use strict";n.d(t,{R_:function(){return s},YV:function(){return l},YX:function(){return function e(t,n){return r.lub(()=>null==t?null:Array.isArray(t)?t.map(t=>e(t,n)):(0,i.Iq)(t,"int32"===n.dtype?n:r.pju(n,"int32")))}},fQ:function(){return a},kS:function(){return u},sf:function(){return o}});var r=n(10280),i=n(1552);function a(e){r.D5U.assert(e>0&&Number.isInteger(e),()=>`batchSize is required to be a positive integer, but got ${e}`)}function o(e,t,n){return null==e?[null]:Array.isArray(e)?e.map(e=>(0,i.c9)(e,t,n-t)):(0,i.c9)(e,t,n-t)}function s(e,t){let n=[],r=0,i=null;for(;r<e;)(i=r+t)>=e&&(i=e),n.push([r,i]),r=i;return n}function l(e){let t=[];e instanceof r.esB&&(e=[e]);for(let n=0;n<e.length;++n){let r=e[n];if(1===r.rank)t.push((0,i.dt)(r,1));else if(0===r.rank)throw Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");else t.push(r)}return t}function u(e,t){if(null==e)return;let n=[];if(t instanceof r.esB)n.push(t.id);else if(Array.isArray(t))t.forEach(e=>n.push(e.id));else if(null!=t)for(let e in t){let r=t[e];n.push(r.id)}let i=[];if(e instanceof r.esB)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach(e=>{-1===n.indexOf(e.id)&&i.push(e)});else if(null!=e)for(let t in e){let r=e[t];-1===n.indexOf(r.id)&&i.push(r)}i.forEach(e=>{e.isDisposed||e.dispose()})}},25602:function(e,t,n){"use strict";n.d(t,{Vf:function(){return i},mo:function(){return o},tl:function(){return a}});var r=n(10280);function i(e,t){return function(e,t,n){let r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){let n=[];return t.forEach(t=>{t in e?n.push(e[t]):n.push(null)}),n}throw Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}(e,t,"classWeight")}async function a(e,t,n,i){if(null!=t||null!=i)throw Error("Support sampleWeight is not implemented yet");if(null==n)return null;{let t=(0,r.lub)(()=>{if(1===e.shape.length)return(0,r.d9v)(e);if(2===e.shape.length){if(e.shape[1]>1)return(0,r.NqF)(e,1);if(1===e.shape[1])return(0,r.XLQ)(e,[e.shape[0]]);throw Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await t.data());(0,r.B90)(t);let a=[];return i.forEach(e=>{if(null==n[e])throw Error(`classWeight must contain all classes in the training data. The class ${e} exists in the data but not in classWeight`);a.push(n[e])}),(0,r.RRF)(a,"float32")}}function o(e,t){return(0,r.dC7)(e,t)}},64579:function(e,t,n){"use strict";n.d(t,{LH:function(){return i},j1:function(){return r},nj:function(){return o},nu:function(){return a},ps:function(){return s}});class r extends Error{constructor(e){super(e),Object.setPrototypeOf(this,r.prototype)}}class i extends Error{constructor(e){super(e),Object.setPrototypeOf(this,i.prototype)}}class a extends Error{constructor(e){super(e),Object.setPrototypeOf(this,a.prototype)}}class o extends Error{constructor(e){super(e),Object.setPrototypeOf(this,o.prototype)}}class s extends Error{constructor(e){super(e),Object.setPrototypeOf(this,s.prototype)}}},70738:function(e,t,n){"use strict";n.d(t,{FB:function(){return r.FB}}),n(19914),n(84996),n(6897);var r=n(72978)},79878:function(e,t,n){"use strict";n.d(t,{m7:function(){return d},M6:function(){return f},L5:function(){return R},Cx:function(){return A}});var r=n(10280),i=n(1552),a=n(38440),o=n(64579);let s=["fanIn","fanOut","fanAvg"],l=["normal","uniform","truncatedNormal"];var u=n(94120),c=n(86314);class d extends r.m7h.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class h extends d{apply(e,t){return(0,r.lls)(e,t)}}h.className="Zeros",r.m7h.registerClass(h);class f extends d{apply(e,t){return(0,r.iUs)(e,t)}}f.className="Ones",r.m7h.registerClass(f);class p extends d{constructor(e){if(super(),"object"!=typeof e)throw new o.nu(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new o.nu(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return(0,r.lub)(()=>(0,r.dC7)((0,r.iD$)(this.value),(0,r.iUs)(e,t)))}getConfig(){return{value:this.value}}}p.className="Constant",r.m7h.registerClass(p);class g extends d{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return(0,r.LGj)(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}g.className="RandomUniform",r.m7h.registerClass(g);class m extends d{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new o.nj(`randomNormal does not support dType ${t}.`);return i.nG(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}m.className="RandomNormal",r.m7h.registerClass(m);class b extends d{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new o.nj(`truncatedNormal does not support dType ${t}.`);return(0,r.Xu6)(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}b.className="TruncatedNormal",r.m7h.registerClass(b);class y extends d{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return(0,r.lub)(()=>{if(2===e.length&&e[0]===e[1])return(0,r.dC7)(this.gain,(0,r.iyy)(e[0]));throw new o.nu("Identity matrix initializer can only be used for 2D square matrices.")})}getConfig(){return{gain:this.gain}}}y.className="Identity",r.m7h.registerClass(y);class v extends d{constructor(e){var t,n;if(super(),e.scale<0)throw new o.nu(`scale must be a positive float. Got: ${e.scale}`);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,t=this.mode,(0,u.xn)(s,"FanMode",t),this.distribution=null==e.distribution?"normal":e.distribution,n=this.distribution,(0,u.xn)(l,"Distribution",n),this.seed=e.seed}apply(e,t){let n=function(e,t="channelsLast"){let n,r;if((0,a.cj)(t),2===e.length)n=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){let t=(0,c.NS)(e,2);n=e[1]*t,r=e[0]*t}else if("channelsLast"===t){let t=(0,c.NS)(e,0,e.length-2);n=e[e.length-2]*t,r=e[e.length-1]*t}}else{let t=(0,c.NS)(e);n=Math.sqrt(t),r=Math.sqrt(t)}return[n,r]}(e),i=n[0],s=n[1],l=this.scale;if("fanIn"===this.mode?l/=Math.max(1,i):"fanOut"===this.mode?l/=Math.max(1,s):l/=Math.max(1,(i+s)/2),"normal"===this.distribution){let n=Math.sqrt(l);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new o.nj(`${this.getClassName()} does not support dType ${t}.`);return(0,r.Xu6)(e,0,n,t,this.seed)}{let n=Math.sqrt(3*l);return(0,r.LGj)(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}v.className="VarianceScaling",r.m7h.registerClass(v);class x extends v{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return v.className}}x.className="GlorotUniform",r.m7h.registerClass(x);class w extends v{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return v.className}}w.className="GlorotNormal",r.m7h.registerClass(w);class k extends v{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return v.className}}k.className="HeNormal",r.m7h.registerClass(k);class E extends v{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return v.className}}E.className="HeUniform",r.m7h.registerClass(E);class I extends v{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return v.className}}I.className="LeCunNormal",r.m7h.registerClass(I);class S extends v{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return v.className}}S.className="LeCunUniform",r.m7h.registerClass(S);class T extends d{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return(0,r.lub)(()=>{if(e.length<2)throw new o.nj("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw TypeError(`Unsupported data type ${t}.`);let n=r.D5U.sizeFromShape(e.slice(0,-1)),a=e[e.length-1],s=n*a;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);let l=i.nG([Math.max(a,n),Math.min(a,n)],0,1,t,this.seed),u=r.$r2.qr(l,!1),c=u[0],d=u[1].flatten().stridedSlice([0],[Math.min(a,n)*Math.min(a,n)],[Math.min(a,n)+1]);return c=(0,r.dC7)(c,d.sign()),n<a&&(c=c.transpose()),(0,r.dC7)((0,r.iD$)(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}T.className="Orthogonal",r.m7h.registerClass(T);let C={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function N(e,t={}){return(0,u.tU)(e,r.m7h.SerializationMap.getMap().classNameMap,t,"initializer")}function A(e){return(0,u.Kj)(e)}function R(e){if("string"==typeof e){let t=e in C?C[e]:e;if("GlorotNormal"===t)return new w;if("GlorotUniform"===t)return new x;{if("HeNormal"===t)return new k;if("HeUniform"===t)return new E;if("LeCunNormal"===t)return new I;if("LeCunUniform"===t)return new S;let e={};return e.className=t,e.config={},N(e)}}return e instanceof d?e:N(e)}},43872:function(e,t,n){"use strict";n.d(t,{MK:function(){return o},Mz:function(){return i},PS:function(){return r},eY:function(){return s},zx:function(){return a}});let r=["channelsFirst","channelsLast"],i=["nearest","bilinear"],a=["valid","same","causal"],o=["max","avg"],s=["sum","mul","concat","ave"]},95807:function(e,t,n){"use strict";var r=n(10280),i=n(39992),a=n(22380),o=n(64580),s=n(64579),l=n(79878),u=n(18030),c=n(97982);class d extends o.mh{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=(0,c.nQ)(e);let n=(0,r.UYe)(e);return null!=this.maxValue&&(n=(0,r.iUl)(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue};return Object.assign(e,super.getConfig()),e}}d.className="ReLU",r.m7h.registerClass(d);class h extends o.mh{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=(0,c.nQ)(e);return(0,r.hi7)(n,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha};return Object.assign(e,super.getConfig()),e}}h.className="LeakyReLU",r.m7h.registerClass(h);class f extends o.mh{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=(0,l.L5)(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=(0,u.EC)(e.alphaRegularizer),this.alphaConstraint=(0,a.Ad)(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if("number"==typeof e.sharedAxes)this.sharedAxes=[e.sharedAxes];else throw new s.nu(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){let t=(e=(0,c.Wf)(e)).slice(1);if(null!=this.sharedAxes)for(let e of this.sharedAxes)t[e-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let n={};if(null!=this.sharedAxes)for(let t=1;t<e.length;++t)n[t]=e[t];this.inputSpec=[new o.Zg({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=(0,c.nQ)(e),(0,r.AL3)(e,this.alpha.read())}getConfig(){let e={alphaInitializer:(0,l.Cx)(this.alphaInitializer),alphaRegularizer:(0,u.SG)(this.alphaRegularizer),alphaConstraint:(0,a.xF)(this.alphaConstraint),sharedAxes:this.sharedAxes};return Object.assign(e,super.getConfig()),e}}f.className="PReLU",r.m7h.registerClass(f);class p extends o.mh{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new s.nj(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=(0,c.nQ)(e);return(0,r.pyx)(n)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha};return Object.assign(e,super.getConfig()),e}}p.className="ELU",r.m7h.registerClass(p);class g extends o.mh{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){let n=(0,c.nQ)(e);return(0,r.dC7)(n,(0,r.pju)((0,r.pjt)(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta};return Object.assign(e,super.getConfig()),e}}g.className="ThresholdedReLU",r.m7h.registerClass(g);class m extends o.mh{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=new i.Gc().apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return(0,r.lub)(()=>{let n=(0,c.nQ)(e),i=t.mask;if(null!=i){let e=(0,r.dC7)((0,r.luU)((0,r.iUs)(n.shape),(0,r.pju)(i,n.dtype)),(0,r.iD$)(-1e9));n=(0,r.IHx)(n,e)}return this.axis instanceof Array?this.axis.length>1?(0,r.Qqt)((0,r.luU)(n,(0,r.l_t)(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)})}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis};return Object.assign(e,super.getConfig()),e}}m.className="Softmax",r.m7h.registerClass(m)},45748:function(e,t,n){"use strict";var r=n(10280),i=n(10685),a=n(1552),o=n(38440),s=n(22380),l=n(64579),u=n(79878),c=n(18030),d=n(59997),h=n(97982),f=n(19458);class p extends f.nx{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=(0,u.L5)(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=(0,s.Ad)(e.depthwiseConstraint),this.depthwiseRegularizer=(0,c.EC)(e.depthwiseRegularizer)}build(e){if((e=(0,h.Wf)(e)).length<4)throw new l.nu(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new l.nu(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);let n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return(0,r.lub)(()=>{let t=function(e,t,n=[1,1],a="valid",s,u){return(0,r.lub)(()=>{null==s&&(s=(0,i.rf)()),(0,o.cj)(s);let u=(0,f.aP)(e,s);if(4!==e.rank)throw new l.nu(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==t.rank)throw new l.nu(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return u=r.B10(u,t,n,"same"===a?"same":"valid","NHWC",null),"channelsFirst"===s&&(u=r.p4s(u,[0,3,1,2])),u})}(e=(0,h.nQ)(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,0);return this.useBias&&(t=a.a2(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t})}computeOutputShape(e){e=(0,h.Wf)(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=(0,d.kt)(t,this.kernelSize[0],this.padding,this.strides[0]),a=(0,d.kt)(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,i,a]:[e[0],i,a,r]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=(0,u.Cx)(this.depthwiseInitializer),e.depthwiseRegularizer=(0,c.SG)(this.depthwiseRegularizer),e.depthwiseConstraint=(0,s.xF)(this.depthwiseRegularizer),e}}p.className="DepthwiseConv2D",r.m7h.registerClass(p)},83078:function(e,t,n){"use strict";var r=n(10280),i=n(1552),a=n(38440),o=n(64580),s=n(64579),l=n(79878),u=n(59997),c=n(94120),d=n(97982),h=n(85903),f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class p extends h.$p{constructor(e){if(e.unroll)throw new s.nj("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new s.nj("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new o.Zg({ndim:5})]}call(e,t){return r.lub(()=>{if(null!=this.cell.dropoutMask&&(r.B90(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(r.B90(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new s.nu("ConvRNN2D cell does not support constants");let n=null==t?null:t.mask,i=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:i,initialState:a})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...[,,].fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return r.lub(()=>{let{stateSize:t}=this.cell,n=e.shape,i=this.computeSingleOutputShape(n),a=[i[0],...i.slice(2)],o=r.lls(a);return Array.isArray(t)?Array(t.length).fill(o):[o]})}resetStates(e,t=!1){r.lub(()=>{if(!this.stateful)throw new s.j1("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape,i=this.computeSingleOutputShape(n),a=[i[0],...i.slice(2)];if(null==n[0])throw new s.nu("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>r.lls(a)):this.states_=[r.lls(a)];else if(null==e)r.B90(this.states_),null!=this.keptStates&&(r.B90(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>r.lls(a)):this.states_[0]=r.lls(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new s.nu(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):r.B90(this.states_);for(let t=0;t<this.states_.length;++t){let n=e[t];if(!r.D5U.arraysEqual(n.shape,a))throw new s.nu(`State ${t} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map(e=>r.CnY(e.clone()))})}computeSingleOutputShape(e){let{dataFormat:t,filters:n,kernelSize:r,padding:i,strides:a,dilationRate:o}=this.cell,s="channelsFirst"===t,l=e[s?3:2],c=e[s?4:3],d=(0,u.kt)(l,r[0],i,a[0],o[0]),h=(0,u.kt)(c,r[1],i,a[1],o[1]);return[...e.slice(0,2),...s?[n,d,h]:[d,h,n]]}}p.className="ConvRNN2D";class g extends h.U7{constructor(e){let{filters:t,kernelSize:n,strides:r,padding:i,dataFormat:o,dilationRate:s}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,(0,c.iQ)(this.filters,"filters"),this.kernelSize=(0,u.AF)(n,2,"kernelSize"),this.kernelSize.forEach(e=>(0,c.iQ)(e,"kernelSize")),this.strides=(0,u.AF)(r||1,2,"strides"),this.strides.forEach(e=>(0,c.iQ)(e,"strides")),this.padding=i||"valid",(0,a.zb)(this.padding),this.dataFormat=o||"channelsLast",(0,a.cj)(this.dataFormat),this.dilationRate=(0,u.AF)(s||1,2,"dilationRate"),this.dilationRate.forEach(e=>(0,c.iQ)(e,"dilationRate"))}build(e){var t;e=(0,d.Wf)(e);let n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new s.nu(`The channel dimension of the input should be defined. Found ${e[n]}`);let a=e[n],o=this.kernelSize.concat([a,4*this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let u=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",u,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){let n=this.biasInitializer,a=this.filters;e=new((t=class extends l.m7{apply(e,t){let o=n.apply([a]),s=r.iUs([a]),l=n.apply([2*a]);return i.mV([o,s,l])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return r.lub(()=>{if(3!==e.length)throw new s.nu(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let n=t.training||!1,i=e[0],a=e[1],o=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=(0,h._0)({ones:()=>r.JpU(i),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let l=this.dropoutMask,u=(e,t,n)=>t&&t[n]?r.dC7(t[n],e):e,c=u(i,l,0),d=u(i,l,1),f=u(i,l,2),p=u(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=(0,h._0)({ones:()=>r.JpU(a),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let g=this.recurrentDropoutMask,m=u(a,g,0),b=u(a,g,1),y=u(a,g,2),v=u(a,g,3),[x,w,k,E]=r.Vl2(this.kernel.read(),4,3),[I,S,T,C]=this.useBias?r.Vl2(this.bias.read(),4):[null,null,null,null];c=this.inputConv(c,x,I,this.padding),d=this.inputConv(d,w,S,this.padding),f=this.inputConv(f,k,T,this.padding),p=this.inputConv(p,E,C,this.padding);let[N,A,R,D]=r.Vl2(this.recurrentKernel.read(),4,3);m=this.recurrentConv(m,N),b=this.recurrentConv(b,A),y=this.recurrentConv(y,R),v=this.recurrentConv(v,D);let $=this.recurrentActivation.apply(r.IHx(c,m)),_=this.recurrentActivation.apply(r.IHx(d,b)),F=r.IHx(r.dC7(_,o),r.dC7($,this.activation.apply(r.IHx(f,y)))),O=r.dC7(this.recurrentActivation.apply(r.IHx(p,v)),this.activation.apply(F));return[O,O,F]})}getConfig(){let e=super.getConfig(),{units:t}=e,n=f(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,a){let o=r.Tek(e,t,this.strides,a||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?i.a2(o,n,this.dataFormat):o}recurrentConv(e,t){return r.Tek(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}g.className="ConvLSTM2DCell",r.m7h.registerClass(g);class m extends p{constructor(e){super(Object.assign(Object.assign({},e),{cell:new g(e)}))}static fromConfig(e,t){return new e(t)}}m.className="ConvLSTM2D",r.m7h.registerClass(m)},16735:function(e,t,n){"use strict";var r=n(10280),i=n(39992),a=n(1552),o=n(22380),s=n(64580),l=n(64579),u=n(79878),c=n(18030),d=n(94120),h=n(86314),f=n(97982);class p extends s.mh{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;let t=e.shape,n=[];for(let e=0;e<this.noiseShape.length;++e)n.push(null==this.noiseShape[e]?t[e]:this.noiseShape[e]);return n}call(e,t){return(0,r.lub)(()=>{this.invokeCallHook(e,t);let n=(0,f.nQ)(e);if(0<this.rate&&this.rate<1){let e=null!=t.training&&t.training,r=this.getNoiseShape(n);return a.KC(()=>a.rv(n,this.rate,r,this.seed),()=>n,e)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed};return Object.assign(e,super.getConfig()),e}dispose(){return super.dispose()}}p.className="Dropout",r.m7h.registerClass(p);class g extends p{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let t=e.shape;return[t[0],1,t[2]]}}g.className="SpatialDropout1D",r.m7h.registerClass(g);class m extends s.mh{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,(0,d.iQ)(this.units,"units"),this.activation=(0,i.aI)(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=(0,u.L5)(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=(0,u.L5)(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=(0,o.Ad)(e.kernelConstraint),this.biasConstraint=(0,o.Ad)(e.biasConstraint),this.kernelRegularizer=(0,c.EC)(e.kernelRegularizer),this.biasRegularizer=(0,c.EC)(e.biasRegularizer),this.activityRegularizer=(0,c.EC)(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){let t=(e=(0,f.Wf)(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){let t=(e=(0,f.Wf)(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return(0,r.lub)(()=>{let n;this.invokeCallHook(e,t);let r=(0,f.nQ)(e),i=(0,d.WT)(this.activation.getClassName());return null!=i?n=a.AK(r,this.kernel.read(),i,this.bias?this.bias.read():null):(n=a.AK(r,this.kernel.read()),null!=this.bias&&(n=a.a2(n,this.bias.read())),null!=this.activation&&(n=this.activation.apply(n))),n})}getConfig(){let e={units:this.units,activation:(0,i.GD)(this.activation),useBias:this.useBias,kernelInitializer:(0,u.Cx)(this.kernelInitializer),biasInitializer:(0,u.Cx)(this.biasInitializer),kernelRegularizer:(0,c.SG)(this.kernelRegularizer),biasRegularizer:(0,c.SG)(this.biasRegularizer),activityRegularizer:(0,c.SG)(this.activityRegularizer),kernelConstraint:(0,o.xF)(this.kernelConstraint),biasConstraint:(0,o.xF)(this.biasConstraint)};return Object.assign(e,super.getConfig()),e}}m.className="Dense",r.m7h.registerClass(m);class b extends s.mh{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){for(let t of(e=(0,f.Wf)(e)).slice(1))if(null==t)throw new l.nu(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],(0,h.NS)(e,1)]}call(e,t){return(0,r.lub)(()=>{this.invokeCallHook(e,t);let n=(0,f.nQ)(e);if("channelsFirst"===this.dataFormat&&n.rank>1){let e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=(0,r.p4s)(n,e)}return a.Uz(n)})}getConfig(){let e={};return null!=this.dataFormat&&(e.dataFormat=this.dataFormat),Object.assign(e,super.getConfig()),e}}b.className="Flatten",r.m7h.registerClass(b);class y extends s.mh{constructor(e){super(e),this.supportsMasking=!0,this.activation=(0,i.aI)(e.activation)}call(e,t){return(0,r.lub)(()=>{this.invokeCallHook(e,t);let n=(0,f.nQ)(e);return this.activation.apply(n)})}getConfig(){let e={activation:(0,i.GD)(this.activation)};return Object.assign(e,super.getConfig()),e}}y.className="Activation",r.m7h.registerClass(y);class v extends s.mh{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return(0,r.lub)(()=>(e=(0,f.nQ)(e),a.rx(e,this.n)))}getConfig(){let e={n:this.n};return Object.assign(e,super.getConfig()),e}}v.className="RepeatVector",r.m7h.registerClass(v);class x extends s.mh{constructor(e){super(e),this.targetShape=e.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){let n="Total size of new array must be unchanged.",r=t.slice(),i=1,a=null;for(let e=0;e<r.length;++e){let t=r[e];if(this.isUnknown(t)){if(null===a)a=e;else throw new l.nu("Can only specifiy one unknown dimension.")}else i*=t}let o=(0,h.NS)(e);if(null!==a){if(0===i||o%i!=0)throw new l.nu(n);r[a]=o/i}else if(o!==i)throw new l.nu(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return(0,r.lub)(()=>{this.invokeCallHook(e,t);let n=(0,f.nQ)(e),i=n.shape,a=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return(0,r.XLQ)(n,a)})}getConfig(){let e={targetShape:this.targetShape};return Object.assign(e,super.getConfig()),e}}x.className="Reshape",r.m7h.registerClass(x);class w extends s.mh{constructor(e){if(super(e),null==e.dims)throw Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let t=(0,h.w6)(1,e.dims.length+1);if(!r.D5U.arraysEqual(e.dims.slice().sort(),t))throw Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new s.Zg({ndim:this.dims.length+1})]}computeOutputShape(e){let t=(e=(0,f.Wf)(e)).slice();return this.dims.forEach((n,r)=>{t[r+1]=e[n]}),t}call(e,t){return(0,r.p4s)((0,f.nQ)(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims};return Object.assign(e,super.getConfig()),e}}w.className="Permute",r.m7h.registerClass(w);class k extends s.mh{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e?this.maskValue=null==e.maskValue?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){let n=(0,f.nQ)(e);return(0,r.YjB)((0,r.Quu)(n,this.maskValue),-1)}call(e,t){return(0,r.lub)(()=>{this.invokeCallHook(e,t);let n=(0,f.nQ)(e),i=(0,r.YjB)((0,r.Quu)(n,this.maskValue),-1,!0);return(0,r.dC7)(n,(0,r.pju)(i,n.dtype))})}}k.className="Masking",r.m7h.registerClass(k)},35372:function(e,t,n){"use strict";var r=n(10280),i=n(1552),a=n(22380),o=n(64580),s=n(64579),l=n(79878),u=n(18030),c=n(94120),d=n(97982);class h extends o.mh{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(c.zZ(e.inputLength))}this.inputDim=e.inputDim,c.iQ(this.inputDim,"inputDim"),this.outputDim=e.outputDim,c.iQ(this.outputDim,"outputDim"),this.embeddingsInitializer=(0,l.L5)(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=(0,u.EC)(e.embeddingsRegularizer),this.activityRegularizer=(0,u.EC)(e.activityRegularizer),this.embeddingsConstraint=(0,a.Ad)(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return(0,r.lub)(()=>this.maskZero?(e=(0,d.nQ)(e),(0,r.Quu)(e,(0,r.P84)(e))):null)}computeOutputShape(e){if(e=(0,d.Wf)(e),null==this.inputLength)return[...e,this.outputDim];let t=c.zZ(this.inputLength);if(t.length!==e.length-1)throw new s.nu(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){let i=t[r],a=e[r+1];if(null!=i&&null!=a&&i!==a)throw new s.nu(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==i&&(t[n]=a),n++}}return[e[0],...t,this.outputDim]}call(e,t){return(0,r.lub)(()=>{this.invokeCallHook(e,t);let n=(0,d.nQ)(e);"int32"!==n.dtype&&(n=i.pj(n,"int32"));let a=i.Iq(this.embeddings.read(),(0,r.XLQ)(n,[n.size]));return(0,r.XLQ)(a,(0,d.Wf)(this.computeOutputShape(n.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:(0,l.Cx)(this.embeddingsInitializer),embeddingsRegularizer:(0,u.SG)(this.embeddingsRegularizer),activityRegularizer:(0,u.SG)(this.activityRegularizer),embeddingsConstraint:(0,a.xF)(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength};return Object.assign(e,super.getConfig()),e}}h.className="Embedding",r.m7h.registerClass(h)},57779:function(e,t,n){"use strict";var r=n(10280),i=n(1552),a=n(64580),o=n(64579),s=n(51957),l=n(94120),u=n(86314),c=n(97982);class d extends a.mh{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new o.nj}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;let n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){let i=e[e.length-t.length+r],a=t[r];if(null==i||null==a||i<0||a<0)n.push(null);else if(1===i)n.push(a);else if(1===a)n.push(i);else{if(i!==a)throw new o.nu("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(i)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[(0,c.Wf)(e)]),e.length<2)throw new o.nu(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(let n of e)null!=n&&null!==n[0]&&t.push(n[0]);if((t=l.Tw(t)).length>1)throw new o.nu(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let t=1;t<e.length;++t){let r=null==e[t]?null:e[t].slice(1);n=this.computeElementwiseOpOutputShape(n,r)}let r=e.map(e=>e.length);-1===e.indexOf(null)&&1===l.Tw(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return(0,r.lub)(()=>{if(!this.reshapeRequired)return this.mergeFunction(e);{let t=[],n=e.map(e=>e.rank);if(-1===n.indexOf(null)){let r=u.Fp(n);for(let n of e){let e=n.rank;for(let t=0;t<r-e;++t)n=i.dt(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(let i of e){let e=i.rank;if(null==e){let e=i.shape,a=e[0],o=e.slice(1).concat([a]),s=r.XLQ(i,[a].concat(u.NS(e.slice(1))));s=r.p4s(s,[1,0]),s=r.XLQ(s,o),t.push(s),n=!0}else if(e>1){let a=u.w6(1,e).concat([0]);t.push(r.p4s(i,a)),n=!0}else t.push(i)}let i=this.mergeFunction(t),a=i.rank;if(n){if(null==a){let e=i.shape,t=e.length,n=e[t-1],a=[n].concat(e.slice(0,e.length-1));i=r.XLQ(r.p4s(r.XLQ(i,[-1,n]),[1,0]),a)}else if(a>1){let e=[a-1].concat(u.w6(0,a-1));i=r.p4s(i,e)}}return i}}})}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let n=1;n<e.length;++n){let r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}let n=[];for(let t of e)null!=t&&null!==t[0]&&n.push(t[0]);return 1===(n=l.Tw(n)).length?n.concat(t):[null].concat(t)}computeMask(e,t){return r.lub(()=>{if(null==t)return null;if(!Array.isArray(t))throw new o.nu("`mask` should be an Array");if(!Array.isArray(e))throw new o.nu("`inputs` should be an Array");if(t.length!==e.length)throw new o.nu(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(e=>null==e))return null;let n=(t=t.map(e=>null==e?e:r.dt4(e,0)))[0];for(let e=1;e<t.length-1;++e)n=r.HvI(n,t[e]);return n})}}class h extends d{constructor(e){super(e)}mergeFunction(e){return(0,r.lub)(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=r.IHx(t,e[n]);return t})}}h.className="Add",r.m7h.registerClass(h);class f extends d{constructor(e){super(e)}mergeFunction(e){return(0,r.lub)(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=r.dC7(t,e[n]);return t})}}f.className="Multiply",r.m7h.registerClass(f);class p extends d{constructor(e){super(e)}mergeFunction(e){return(0,r.lub)(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=r.IHx(t,e[n]);return r.dC7(1/e.length,t)})}}p.className="Average",r.m7h.registerClass(p);class g extends d{constructor(e){super(e)}mergeFunction(e){return(0,r.lub)(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=r.gWQ(t,e[n]);return t})}}g.className="Maximum",r.m7h.registerClass(g);class m extends d{constructor(e){super(e)}mergeFunction(e){return(0,r.lub)(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=r.LTh(t,e[n]);return t})}}m.className="Minimum",r.m7h.registerClass(m);class b extends d{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||1===e.length)throw new o.nu("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(let n of e)if(null!=n){t=!1;break}if(t)return;let n=[];for(let t=0;t<e.length;++t){let i=e[t].slice();i.splice(this.axis,1);let a=!1;for(let e of n)if(r.D5U.arraysEqual(e,i)){a=!0;break}a||n.push(i)}if(n.length>1)throw new o.nu("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return(0,r.lub)(()=>i.mV(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new o.nu("A `Concatenate` layer should be called on a list of inputs.");let t=e[0].slice(),n=this.axis<0?t.length+this.axis:this.axis;for(let r of e.slice(1)){if(null==t[n]||null==r[n]){t[n]=null;break}t[n]+=r[n]}return t}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new o.nu("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new o.nu("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new o.nu(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return r.lub(()=>{let n=!0;if(t.forEach(e=>{if(null!=e){n=!1;return}}),n)return null;let i=[];for(let n=0;n<e.length;++n)null==t[n]?i.push(r.pju(r.JpU(e[n]),"bool")):t[n].rank<e[n].rank?i.push(r.dt4(t[n],-1)):i.push(t[n]);let a=r.zoF(i,this.axis);return r.$6P(a,-1,!1)})}getConfig(){let e={axis:this.axis};return Object.assign(e,super.getConfig()),e}}function y(e,t){for(;e<0;)e+=t;return e}b.className="Concatenate",r.m7h.registerClass(b);class v extends d{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){r.D5U.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0],n=e[1];if(t.length>3||n.length>3)throw new o.nj("Dot layer does not support tensors of 4D or higher rank yet.");let i=this.interpretAxes(t,n);if(t[i[0]]!==n[i[1]])throw new o.nu(`Dimension incompatibility: ${t[i[0]]} !== ${n[i[1]]}`)}mergeFunction(e){let t;if(2!==e.length)throw new o.nu(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],i=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,n)=>y(t,e[n].shape.length)):[y(this.axes,n.shape.length),y(this.axes,i.shape.length)],this.normalize&&(n=(0,s.Eq)(n,t[0]),i=(0,s.Eq)(i,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new o.nj("batchDot is not implemented for tensors of 4D or higher rank yet");if(r.D5U.assert(e.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`),r.D5U.assert(e.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new o.nj("batchDot is not implemented for complex64-type Tensors yet.");let i=e.shape.length,a=t.shape.length;null==n&&(n=[i-1,a-2]);let s=n;return r.lub(()=>{let n,o;if(i>a){n=i-a;let e=[];for(let t=0;t<n;++t)e.push(1);t=r.XLQ(t,t.shape.concat(e))}else if(a>i){n=a-i;let t=[];for(let e=0;e<n;++e)t.push(1);e=r.XLQ(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=s[0]===s[1]?r.Smz(r.dC7(e,t),s[0]):r.Smz(r.dC7(r.p4s(e,[1,0]),t),s[1]);else{let n=s[0]!==e.shape.length-1,i=s[1]===t.shape.length-1;o=r.OI3(e,t,n,i)}if(n>0){let e;e=i>a?i+a-3:i-1;let t=[];for(let r=e;r<e+n;++r)t.push(r);o=r.L9e(o,t)}return 1===o.shape.length&&(o=r.dt4(o,1)),o})}(n,i,t)}interpretAxes(e,t){return Array.isArray(this.axes)?this.axes:[y(this.axes,e.length),y(this.axes,t.length)]}computeOutputShape(e){r.D5U.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new o.nj("Dot layer does not support tensors of 4D or higher rank yet.");let i=this.interpretAxes(t,n);t.splice(i[0],1),n.splice(i[1],1),n.splice(0,1);let a=t.concat(n);return 1===a.length&&a.push(1),a}computeMask(e,t){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize};return Object.assign(e,super.getConfig()),e}}v.className="Dot",r.m7h.registerClass(v)},59544:function(e,t,n){"use strict";var r=n(10280),i=n(1552),a=n(64580),o=n(97982);class s extends a.mh{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return(0,r.lub)(()=>{this.invokeCallHook(e,t);let n=(0,o.nQ)(e);return i.KC(()=>(0,r.IHx)(i.nG(n.shape,0,this.stddev),n),()=>n,t.training||!1)})}}s.className="GaussianNoise",r.m7h.registerClass(s);class l extends a.mh{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return(0,r.lub)(()=>{this.invokeCallHook(e,t);let n=(0,o.nQ)(e);return this.rate>0&&this.rate<1?i.KC(()=>{let e=Math.sqrt(this.rate/(1-this.rate));return(0,r.dC7)(n,i.nG(n.shape,1,e))},()=>n,t.training||!1):n})}}l.className="GaussianDropout",r.m7h.registerClass(l);class u extends a.mh{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||(0,o.nQ)(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return(0,r.lub)(()=>{if(this.rate<1&&this.rate>0){let n=this._getNoiseShape(e);return i.KC(()=>{let t=(0,o.nQ)(e),a=(0,r.brS)((0,r.LGj)(n),this.rate);a=i.pj(a,"float32");let s=((1-this.rate)*(1+3.09091329228798*this.rate))**-.5,l=-(-1.7580993408473766*s)*this.rate,u=(0,r.IHx)((0,r.dC7)(t,a),(0,r.dC7)((0,r.IHx)(a,-1),-1.7580993408473766));return(0,r.IHx)((0,r.dC7)(u,s),l)},()=>(0,o.nQ)(e),t.training||!1)}return e})}}u.className="AlphaDropout",r.m7h.registerClass(u)},3697:function(e,t,n){"use strict";var r=n(10280),i=n(22380),a=n(64580),o=n(64579),s=n(79878),l=n(18030),u=n(94120),c=n(86314),d=n(97982);function h(e,t,n,i,a,s=.001){let l;if(2===e.rank)l=r.Dxk(e,t,n,i,a,s);else if(3===e.rank)l=r.JY5(e,t,n,i,a,s);else if(4===e.rank)l=r.p3b(e,t,n,i,a,s);else throw new o.nj(`batchNormalization is not implemented for array of rank ${e.rank} yet`);return l}class f extends a.mh{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=(0,s.L5)(e.betaInitializer||"zeros"),this.gammaInitializer=(0,s.L5)(e.gammaInitializer||"ones"),this.movingMeanInitializer=(0,s.L5)(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=(0,s.L5)(e.movingVarianceInitializer||"ones"),this.betaConstraint=(0,i.Ad)(e.betaConstraint),this.gammaConstraint=(0,i.Ad)(e.gammaConstraint),this.betaRegularizer=(0,l.EC)(e.betaRegularizer),this.gammaRegularizer=(0,l.EC)(e.gammaRegularizer)}build(e){e=(0,d.Wf)(e);let t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new o.nu(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new a.Zg({ndim:e.length,axes:{[t]:n}})];let r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return(0,r.lub)(()=>{let n=null!=t.training&&t.training,i=(0,d.nQ)(e),a=i.shape,o=a.length,s=c.w6(0,o),l=this.axis>=0?this.axis:this.axis+o;s.splice(l,1);let f=u.JE(1,o);f[l]=a[l];let p=s.slice();p.sort();let g=!r.D5U.arraysEqual(p,c.w6(0,o).slice(0,o-1));if(!n)return(()=>{if(!g)return h(i,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon);{let e=(0,r.XLQ)(this.movingMean.read(),f);return h(i,e,(0,r.XLQ)(this.movingVariance.read(),f),this.center?(0,r.XLQ)(this.beta.read(),f):null,this.scale?(0,r.XLQ)(this.gamma.read(),f):null,this.epsilon)}})();let[m,b,y]=function(e,t,n,i,a=.001){return r.D5U.arraysEqual(i.slice().sort(),c.w6(0,e.rank-1))?function(e,t,n,i,a=.001){return(0,r.lub)(()=>{let o=r.Gi7(e,i),s=o.mean,l=o.variance;return[h(e,s,l,n,t,a),s,l]})}(e,t,n,i,a):function(e,t,n,i,a=.001){return(0,r.lub)(()=>{let o=r.Gi7(e,i),s=o.mean,l=o.variance,u=[];for(let t of c.w6(0,e.rank))-1!==i.indexOf(t)?u.push(1):u.push(e.shape[t]);let d=(0,r.XLQ)(s,u),f=(0,r.XLQ)(l,u),p=null==t?null:(0,r.XLQ)(t,u);return[h(e,d,f,null==n?null:(0,r.XLQ)(n,u),p,a),s,l]})}(e,t,n,i,a)}(i,this.gamma.read(),this.beta.read(),s,this.epsilon),v=(e,t,n)=>{r.lub(()=>{let i=e.read(),a=r.dC7(r.luU(i,t),1-n);e.write(r.luU(i,a))})};return(()=>{v(this.movingMean,b,this.momentum),v(this.movingVariance,y,this.momentum)})(),m})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:(0,s.Cx)(this.betaInitializer),gammaInitializer:(0,s.Cx)(this.gammaInitializer),movingMeanInitializer:(0,s.Cx)(this.movingMeanInitializer),movingVarianceInitializer:(0,s.Cx)(this.movingVarianceInitializer),betaRegularizer:(0,l.SG)(this.betaRegularizer),gammaRegularizer:(0,l.SG)(this.gammaRegularizer),betaConstraint:(0,i.xF)(this.betaConstraint),gammaConstraint:(0,i.xF)(this.gammaConstraint)};return Object.assign(e,super.getConfig()),e}}f.className="BatchNormalization",r.m7h.registerClass(f);class p extends a.mh{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let e of this.axis)if(!Number.isInteger(e))throw Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=(0,s.L5)(e.betaInitializer||"zeros"),this.gammaInitializer=(0,s.L5)(e.gammaInitializer||"ones"),this.betaRegularizer=(0,l.EC)(e.betaRegularizer),this.gammaRegularizer=(0,l.EC)(e.gammaRegularizer),this.supportsMasking=!0}build(e){let t=(e=(0,d.Wf)(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let e=0;e<this.axis.length;++e)this.axis[e]<0&&(this.axis[e]+=t);for(let e of this.axis)if(e<0||e>=t)throw Error(`Invalid axis: ${e}`);if(this.axis.length!==u.Tw(this.axis).length)throw Error(`Found duplicate axes in: ${this.axis}`);let n=this.axis.map(t=>e[t]);this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,!0):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,!0):this.beta=null,this.built=!0}call(e,t){let n=(0,d.nQ)(e),i=n.shape,a=i.length;return(0,r.lub)(()=>{let{mean:e,variance:t}=(0,r.Gi7)(n,this.axis,!0),o=u.JE(1,a);for(let e of this.axis)o[e]=i[e];let s=e=>null!=e&&e.shape.length!==a?r.XLQ(e,o):e,l=this.scale?s(this.gamma.read()):null,c=this.center?s(this.beta.read()):null,d=[],f=[];for(let e=0;e<a;++e)-1!==this.axis.indexOf(e)?(d.push(i[e]),f.push(1)):(d.push(1),f.push(i[e]));return e=r.Gg6(e,d),t=r.Gg6(t,d),null!=l&&(l=r.Gg6(l,f)),null!=c&&(c=r.Gg6(c,f)),h(n,e,t,c,l,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:(0,s.Cx)(this.betaInitializer),gammaInitializer:(0,s.Cx)(this.gammaInitializer),betaRegularizer:(0,l.SG)(this.betaRegularizer),gammaRegularizer:(0,l.SG)(this.gammaRegularizer)};return Object.assign(e,super.getConfig()),e}}p.className="LayerNormalization",r.m7h.registerClass(p)},87085:function(e,t,n){"use strict";var r=n(10280),i=n(10685),a=n(64580),o=n(64579),s=n(97982);class l extends a.mh{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?(0,i.rf)():e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{let t,n;if(e.padding=e.padding,2!==e.padding.length)throw new o.nu(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);if("number"==typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new o.nu(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new o.nu(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new a.Zg({ndim:4})]}computeOutputShape(e){let t,n;return(e=(0,s.Wf)(e),"channelsFirst"===this.dataFormat)?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return(0,r.lub)(()=>{var t,n,a;return t=(0,s.nQ)(e),n=this.padding,a=this.dataFormat,(0,r.lub)(()=>{let e;if(4!==t.rank)throw new o.nu(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new o.nu("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a=(0,i.rf)()),"channelsLast"!==a&&"channelsFirst"!==a)throw new o.nu(`Unknown data format: ${a}. Supported data formats are 'channelsLast' and 'channelsFirst.`);return e="channelsFirst"===a?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],r.vku(t,e)})})}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat};return Object.assign(e,super.getConfig()),e}}l.className="ZeroPadding2D",r.m7h.registerClass(l)},29426:function(e,t,n){"use strict";var r=n(10280),i=n(10685),a=n(1552),o=n(38440),s=n(64580),l=n(64579),u=n(59997),c=n(94120),d=n(97982),h=n(19458);function f(e,t,n,a,s,l){return(0,r.lub)(()=>{let u;(0,o.cj)(s),(0,o.Lp)(l),(0,o.zb)(a),null==n&&(n=[1,1]),null==a&&(a="valid"),null==s&&(s=(0,i.rf)()),null==l&&(l="max"),e=(0,h.aP)(e,s);let c="same"===a?"same":"valid";return u="max"===l?r._sB(e,t,n,c):r.wS1(e,t,n,c),"channelsFirst"===s&&(u=r.p4s(u,[0,3,1,2])),u})}function p(e,t,n,a,s,l){return(0,r.lub)(()=>{let u;(0,o.cj)(s),(0,o.Lp)(l),(0,o.zb)(a),null==n&&(n=[1,1,1]),null==a&&(a="valid"),null==s&&(s=(0,i.rf)()),null==l&&(l="max"),e=(0,h.fN)(e,s);let c="same"===a?"same":"valid";return u="max"===l?r.YQQ(e,t,n,c):r.uR5(e,t,n,c),"channelsFirst"===s&&(u=r.p4s(u,[0,4,1,2,3])),u})}class g extends s.mh{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&1===e.poolSize.length&&"number"==typeof e.poolSize[0])this.poolSize=e.poolSize;else throw new l.nu(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if((0,c.iQ)(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else if(Array.isArray(e.strides)&&1===e.strides.length&&"number"==typeof e.strides[0])this.strides=e.strides;else throw new l.nu(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);(0,c.iQ)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,(0,o.zb)(this.padding),this.inputSpec=[new s.Zg({ndim:3})]}computeOutputShape(e){e=(0,d.Wf)(e);let t=(0,u.kt)(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return(0,r.lub)(()=>{this.invokeCallHook(e,t),e=a.dt((0,d.nQ)(e),2);let n=this.poolingFunction((0,d.nQ)(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return r.L9e(n,[2])})}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides};return Object.assign(e,super.getConfig()),e}}class m extends g{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return(0,o.cj)(i),(0,o.zb)(r),f(e,t,n,r,i,"max")}}m.className="MaxPooling1D",r.m7h.registerClass(m);class b extends g{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return(0,o.cj)(i),(0,o.zb)(r),f(e,t,n,r,i,"avg")}}b.className="AveragePooling1D",r.m7h.registerClass(b);class y extends s.mh{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new l.nu(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];(0,c.iQ)(this.poolSize,"poolSize"),(0,c.iQ)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,o.cj)(this.dataFormat),(0,o.zb)(this.padding),this.inputSpec=[new s.Zg({ndim:4})]}computeOutputShape(e){e=(0,d.Wf)(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return(t=(0,u.kt)(t,this.poolSize[0],this.padding,this.strides[0]),n=(0,u.kt)(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat)?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return(0,r.lub)(()=>(this.invokeCallHook(e,t),this.poolingFunction((0,d.nQ)(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat};return Object.assign(e,super.getConfig()),e}}class v extends y{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return(0,o.cj)(i),(0,o.zb)(r),f(e,t,n,r,i,"max")}}v.className="MaxPooling2D",r.m7h.registerClass(v);class x extends y{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return(0,o.cj)(i),(0,o.zb)(r),f(e,t,n,r,i,"avg")}}x.className="AveragePooling2D",r.m7h.registerClass(x);class w extends s.mh{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new l.nu(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];(0,c.iQ)(this.poolSize,"poolSize"),(0,c.iQ)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,o.cj)(this.dataFormat),(0,o.zb)(this.padding),this.inputSpec=[new s.Zg({ndim:5})]}computeOutputShape(e){e=(0,d.Wf)(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return(t=(0,u.kt)(t,this.poolSize[0],this.padding,this.strides[0]),n=(0,u.kt)(n,this.poolSize[1],this.padding,this.strides[1]),r=(0,u.kt)(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat)?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return(0,r.lub)(()=>(this.invokeCallHook(e,t),this.poolingFunction((0,d.nQ)(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat};return Object.assign(e,super.getConfig()),e}}class k extends w{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return(0,o.cj)(i),(0,o.zb)(r),p(e,t,n,r,i,"max")}}k.className="MaxPooling3D",r.m7h.registerClass(k);class E extends w{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return(0,o.cj)(i),(0,o.zb)(r),p(e,t,n,r,i,"avg")}}E.className="AveragePooling3D",r.m7h.registerClass(E);class I extends s.mh{constructor(e){super(e),this.inputSpec=[new s.Zg({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new l.nj}}class S extends I{constructor(e){super(e||{})}call(e,t){return(0,r.lub)(()=>{let t=(0,d.nQ)(e);return r.J69(t,1)})}}S.className="GlobalAveragePooling1D",r.m7h.registerClass(S);class T extends I{constructor(e){super(e||{})}call(e,t){return(0,r.lub)(()=>{let t=(0,d.nQ)(e);return r.Fp7(t,1)})}}T.className="GlobalMaxPooling1D",r.m7h.registerClass(T);class C extends s.mh{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,o.cj)(this.dataFormat),this.inputSpec=[new s.Zg({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new l.nj}getConfig(){let e={dataFormat:this.dataFormat};return Object.assign(e,super.getConfig()),e}}class N extends C{call(e,t){return(0,r.lub)(()=>{let t=(0,d.nQ)(e);return"channelsLast"===this.dataFormat?r.J69(t,[1,2]):r.J69(t,[2,3])})}}N.className="GlobalAveragePooling2D",r.m7h.registerClass(N);class A extends C{call(e,t){return(0,r.lub)(()=>{let t=(0,d.nQ)(e);return"channelsLast"===this.dataFormat?r.Fp7(t,[1,2]):r.Fp7(t,[2,3])})}}A.className="GlobalMaxPooling2D",r.m7h.registerClass(A)},26118:function(e,t,n){"use strict";var r=n(64580),i=n(10280),a=n(97982),o=n(64579),s=n(1552);class l extends r.mh{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){let e={numTokens:this.numTokens,outputMode:this.outputMode};return Object.assign(e,super.getConfig()),e}computeOutputShape(e){return null==(e=(0,a.Wf)(e))?[this.numTokens]:("oneHot"===this.outputMode&&1!==e[e.length-1]?e.push(this.numTokens):e[e.length-1]=this.numTokens,e)}call(e,t){return(0,i.lub)(()=>{let n;if("int32"!==(e=(0,a.nQ)(e)).dtype&&(e=s.pj(e,"int32")),void 0!==t.countWeights){if("count"!==this.outputMode)throw new o.nu(`countWeights is not used when outputMode !== count.
              Received countWeights=${t.countWeights}`);n=(0,a.nQ)(t.countWeights)}let r=(0,i.Fp7)(e),l=(0,i.VV$)(e),u=(0,i.pjt)(this.numTokens,r).bufferSync().get(0),c=(0,i.brS)(l,0).bufferSync().get(0);if(!(u&&c))throw new o.nu(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return function(e,t,n,r){let l,u=(0,a.nQ)(e);if("int32"!==u.dtype&&(u=s.pj(u,"int32")),"int"===t)return u;let c=u.shape;if(0===u.rank&&(u=(0,i.dt4)(u,-1)),"oneHot"===t&&1!==u.shape[u.shape.length-1]&&(u=(0,i.dt4)(u,-1)),u.rank>2)throw new o.nu(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${c} which would result in output rank ${u.rank}.`);let d=["multiHot","oneHot"].includes(t),h=u;if(l=void 0!==r&&"count"===t?(0,i.ppE)(h,r,n,d):(0,i.ppE)(h,[],n,d),"tfIdf"!==t)return l;if(r)return(0,i.dC7)(l,r);throw new o.nu("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)})}}l.className="CategoryEncoding",i.m7h.registerClass(l)},3429:function(e,t,n){"use strict";var r=n(10280),i=n(97982),a=n(64580),o=n(1552);let{resizeBilinear:s,cropAndResize:l}=r.image;class u extends a.mh{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,a,s,u,c,d){return(0,r.lub)(()=>{let h;let f=!1,p=(a+t)/u,g=(s+n)/c,m=[t/u,n/c,p,g],b=[];3===e.rank?(f=!0,h=(0,r.knu)([e])):h=e;for(let e=0;e<h.shape[0];e++)b.push(m);let y=l(h,(0,r.XeE)(b,[b.length,4]),(0,r.w6H)(0,b.length,1,"int32"),[a,s],"nearest");return f?o.pj((0,i.nQ)((0,r.HHK)(y)),d):o.pj(y,d)})}upsize(e,t,n,i){return(0,r.lub)(()=>{let r=s(e,[t,n]);return o.pj(r,i)})}call(e,t){return(0,r.lub)(()=>{let t=(0,i.nQ)(e),n=t.dtype,r=t.shape,a=r[r.length-3],o=r[r.length-2],s=0;a!==this.height&&(s=Math.floor((a-this.height)/2));let l=0;return(o!==this.width&&0===(l=Math.floor((o-this.width)/2))&&(l=1),s>=0&&l>=0)?this.centerCrop(t,s,l,this.height,this.width,a,o,n):this.upsize(e,this.height,this.width,n)})}getConfig(){let e={height:this.height,width:this.width};return Object.assign(e,super.getConfig()),e}computeOutputShape(e){let t=(e=(0,i.Wf)(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}u.className="CenterCrop",r.m7h.registerClass(u)},17570:function(e,t,n){"use strict";var r=n(64580),i=n(10280),a=n(97982),o=n(1552);class s extends r.mh{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){let e={scale:this.scale,offset:this.offset};return Object.assign(e,super.getConfig()),e}call(e,t){return(0,i.lub)(()=>("float32"!==(e=(0,a.nQ)(e)).dtype&&(e=o.pj(e,"float32")),(0,i.IHx)((0,i.dC7)(e,this.scale),this.offset)))}}s.className="Rescaling",i.m7h.registerClass(s)},60427:function(e,t,n){"use strict";var r=n(10280),i=n(64580),a=n(64579),o=n(97982);let s=new Set(["bilinear","nearest"]);class l extends i.mh{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(s.has(e.interpolation))this.interpolation=e.interpolation;else throw new a.nu(`Invalid interpolation parameter: ${e.interpolation} is not implemented`)}else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){let t=(e=(0,o.Wf)(e))[2];return[this.height,this.width,t]}getConfig(){let e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio};return Object.assign(e,super.getConfig()),e}call(e,t){return(0,r.lub)(()=>{let t=[this.height,this.width];if("bilinear"===this.interpolation)return r.image.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return r.image.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw Error(`Interpolation is ${this.interpolation} but only ${[...s]} are supported`)})}}l.className="Resizing",r.m7h.registerClass(l)},96128:function(e,t,n){"use strict";var r=n(10280),i=n(97982),a=n(64579),o=n(64580);class s{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}s.className="RandomSeed";class l extends o.mh{constructor(e){super(e),this.randomGenerator=new s(e.seed)}getConfig(){let e={seed:this.randomGenerator.seed};return Object.assign(e,super.getConfig()),e}}l.className="BaseRandomLayer";let u=new Set(["bilinear","nearest"]);class c extends l{constructor(e){super(e);let{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new a.nu(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new a.nu(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new a.nu(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(n){if(u.has(n))this.interpolation=n;else throw new a.nu(`Invalid interpolation parameter: ${n} is not implemented`)}}getConfig(){let e={factor:this.factor,interpolation:this.interpolation};return Object.assign(e,super.getConfig()),e}computeOutputShape(e){let t=(e=(0,i.Wf)(e))[2];return[this.imgHeight,-1,t]}call(e,t){return(0,r.lub)(()=>{let t=(0,i.nQ)(e);this.imgHeight=t.shape[t.shape.length-3];let n=t.shape[t.shape.length-2];this.widthFactor=(0,r.LGj)([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*n;a=Math.round(a);let o=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return r.image.resizeBilinear(e,o);case"nearest":return r.image.resizeNearestNeighbor(e,o);default:throw Error(`Interpolation is ${this.interpolation}
          but only ${[...u]} are supported`)}})}}c.className="RandomWidth",r.m7h.registerClass(c)},25732:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var r=n(10280),i=n(94120);function a(e,t={},n=!1){return(0,i.tU)(e,r.m7h.SerializationMap.getMap().classNameMap,t,"layer",n)}},9959:function(e,t,n){"use strict";var r=n(10280),i=n(1552),a=n(38440),o=n(64580),s=n(64579),l=n(43872),u=n(94120),c=n(97982),d=n(85903),h=n(25732);class f extends o.mh{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){let e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}};return Object.assign(e,super.getConfig()),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){let r=t.layer,i=(0,h.v)(r,n);delete t.layer;let a={layer:i};return Object.assign(a,t),new e(a)}}class p extends f{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=(0,c.Wf)(e)).length<3)throw new s.nu(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];let t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){let t=[(e=(0,c.Wf)(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return(0,r.lub)(()=>(e=(0,c.nQ)(e),(0,d.nd)((e,n)=>[(0,c.nQ)(this.layer.call(e,t)),[]],e,[],!1,null,null,!1,!0)[1]))}}p.className="TimeDistributed",r.m7h.registerClass(p);class g extends f{constructor(e){var t;super(e);let n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=(0,h.v)(r),n.goBackwards=!0!==n.goBackwards;let i={};if(i.className=e.layer.getClassName(),i.config=n,this.backwardLayer=(0,h.v)(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,t=this.mergeMode,u.xn(l.eY,"BidirectionalMergeMode",t),e.weights)throw new s.nj("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let t=Math.floor(e.length/2);this.forwardLayer.setWeights(e.slice(0,t)),this.backwardLayer.setWeights(e.slice(t))}computeOutputShape(e){let t,n,r,i=this.forwardLayer.computeOutputShape(e);return(Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),this.returnState&&(r=i.slice(1)),t=i[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState)?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):u.Bq(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});let i=(0,d.lx)(e,n,r,this.numConstants);if(e=i.inputs,n=i.initialState,r=i.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);let a=[],l=[];if(null!=n){let e=n.length;if(e%2>0)throw new s.nu("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,a.push(...n);let r=n.map(e=>new o.Zg({shape:e.shape}));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),l.push(...r)}if(null!=r)throw new s.nj("Support for constants in Bidirectional layers is not implemented yet.");let u=a[0]instanceof o.Iy;for(let e of a)if(e instanceof o.Iy!==u)throw new s.nu("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(!u)return super.apply(e,t);{let n=[e].concat(a),r=this.inputSpec.concat(l),i=this.inputSpec;this.inputSpec=r;let o=super.apply(n,t);return this.inputSpec=i,o}}call(e,t){return(0,r.lub)(()=>{let n,a,o,s;let l=t.initialState;if(null==l)n=this.forwardLayer.call(e,t),a=this.backwardLayer.call(e,t);else{let r=l.slice(0,l.length/2),i=l.slice(l.length/2);n=this.forwardLayer.call(e,Object.assign(t,{initialState:r})),a=this.backwardLayer.call(e,Object.assign(t,{initialState:i}))}return(this.returnState&&(Array.isArray(n)&&(o=n.slice(1).concat(a.slice(1))),n=n[0],a=a[0]),this.returnSequences&&(a=r.GYS(a,1)),"concat"===this.mergeMode?s=i.mV([n,a]):"sum"===this.mergeMode?s=r.IHx(n,a):"ave"===this.mergeMode?s=r.dC7(.5,r.IHx(n,a)):"mul"===this.mergeMode?s=r.dC7(n,a):null==this.mergeMode&&(s=[n,a]),this.returnState)?null==this.mergeMode?s.concat(o):[s].concat(o):s})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){(0,a.f4)(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),(0,a.f4)(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,!this.returnState)return n;{let e=this.forwardLayer.states.map(e=>null);return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode};return Object.assign(e,super.getConfig()),e}static fromConfig(e,t){let n=(0,h.v)(t.layer);if(delete t.layer,null!=t.numConstants)throw new s.nj("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");return t.layer=n,new e(t)}}g.className="Bidirectional",r.m7h.registerClass(g)},10525:function(e,t,n){"use strict";n.d(t,{Z:function(){return i},i:function(){return a}});var r=n(10280);async function i(e){if(null==e)return;let t=[],n=[],i=[];for(let r in e){let a=e[r];"number"!=typeof a&&(t.push(a.data()),n.push(r),i.push(a))}if(t.length>0){let a=await Promise.all(t);for(let t=0;t<a.length;++t)e[n[t]]=a[t][0];(0,r.B90)(i)}}function a(e){if(null!=e)for(let t in e){let n=e[t];"number"!=typeof n&&n.dispose()}}},51957:function(e,t,n){"use strict";n.d(t,{Eq:function(){return s},FD:function(){return l},KM:function(){return h},Ls:function(){return p},U2:function(){return m},dr:function(){return g},fO:function(){return f},ke:function(){return u},t3:function(){return c},uq:function(){return d}});var r=n(10280),i=n(10685),a=n(1552),o=n(64579);function s(e,t){return(0,r.lub)(()=>{"float32"!==e.dtype&&(e=r.pju(e,"float32"));let n=r.Smz(a.h6(e),t,!0),o=r.hlL(n.shape,(0,i.Ho)()),s=r._b3(r.gWQ(n,o));return r.hiC(e,s)})}function l(e,t){return(0,r.lub)(()=>r.J69(a.h6(r.luU(t,e)),-1))}function u(e,t){return(0,r.lub)(()=>r.J69(r.WnP(r.luU(t,e)),-1))}function c(e,t){return(0,r.lub)(()=>{let n=r.luU(e,t),a=r.iUl(r.WnP(e),(0,i.Ho)(),Number.MAX_VALUE),o=r.WnP(r.hiC(n,a));return r.dC7(100,r.J69(o,-1))})}function d(e,t,n=!1){return(0,r.lub)(()=>{if(n)t=r.XAC(t);else{let e=r.Smz(t,t.shape.length-1,!0);t=r.hiC(t,e)}return t=r.iUl(t,(0,i.Ho)(),1-(0,i.Ho)()),r.W76(r.Smz(r.dC7(r.pju(e,"float32"),r.cM7(t)),t.shape.length-1))})}function h(e,t,n=!1){return(0,r.lub)(()=>{let o=r.pju(r.GWj(a.xH(e)),"int32"),s=(t=r.iUl(t,(0,i.Ho)(),1-(0,i.Ho)())).shape;return d(r.XLQ(r.lfX(o,s[s.length-1]),s),t,n)})}function f(e,t){return(0,r.lub)(()=>{let n;return n=r.iUl(t,(0,i.Ho)(),1-(0,i.Ho)()),n=r.cM7(r.hiC(n,r.luU(1,n))),r.J69(function(e,t){if(!r.D5U.arraysEqual(e.shape,t.shape))throw new o.nu(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return(0,r.lub)(()=>{let n=r.UYe(t),i=r.W76(r.WnP(t));return r.IHx(r.luU(n,r.dC7(t,e)),r.Krr(r.Qqt(i)))})}(e,n),-1)})}function p(e,t){return(0,r.lub)(()=>{let n=s(e,-1),i=s(t,-1),a=r.dC7(n,i);return r.W76(r.Smz(a,-1))})}let g={meanSquaredError:l,meanAbsoluteError:u,meanAbsolutePercentageError:c,meanSquaredLogarithmicError:function(e,t){return(0,r.lub)(()=>{let n=r.iUl(t,(0,i.Ho)(),Number.MAX_VALUE),o=r.cM7(r.IHx(1,n)),s=r.iUl(e,(0,i.Ho)(),Number.MAX_VALUE),l=r.cM7(r.IHx(1,s));return r.J69(a.h6(r.luU(o,l)),-1)})},squaredHinge:function(e,t){return(0,r.lub)(()=>{let n=r.gWQ(0,r.luU(1,r.dC7(e,t)));return r.J69(a.h6(n),-1)})},hinge:function(e,t){return(0,r.lub)(()=>{let n=r.gWQ(0,r.luU(1,r.dC7(e,t)));return r.J69(n,-1)})},categoricalHinge:function(e,t){return(0,r.lub)(()=>{let n=r.Smz(r.dC7(e,t),-1),i=r.Fp7(r.dC7(r.luU(1,e),t),-1);return r.gWQ(0,r.IHx(1,r.luU(i,n)))})},logcosh:function(e,t){return(0,r.lub)(()=>{let n=r.luU(t,e),i=r.luU(r.IHx(n,r.Wvh(r.dC7(-2,n))),Math.log(2));return r.J69(i,-1)})},categoricalCrossentropy:d,sparseCategoricalCrossentropy:h,binaryCrossentropy:f,kullbackLeiblerDivergence:function(e,t){return(0,r.lub)(()=>{let n=r.iUl(e,(0,i.Ho)(),1),a=r.iUl(t,(0,i.Ho)(),1);return r.Smz(r.dC7(e,r.cM7(r.hiC(n,a))),-1)})},poisson:function(e,t){return(0,r.lub)(()=>{let n=r.cM7(r.IHx((0,i.Ho)(),t));return r.J69(r.luU(t,r.dC7(e,n)),-1)})},cosineProximity:p};function m(e){if("string"!=typeof e)return e;{if(e in g)return g[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new o.nu(t)}}},30632:function(e,t,n){"use strict";n.d(t,{G5:function(){return u},KM:function(){return x},TY:function(){return d},U2:function(){return k},_F:function(){return l},aI:function(){return E},fO:function(){return c},uq:function(){return y}});var r=n(10280),i=n(1552),a=n(64579),o=n(51957),s=n(94120);function l(e,t){return(0,r.lub)(()=>{let n=r.dC7(.5,r.JpU(t)),a=i.pj(r.pjt(t,n),e.dtype);return r.J69(r.DgJ(e,a),-1)})}function u(e,t){return(0,r.lub)(()=>i.pj(r.DgJ(r.NqF(e,-1),r.NqF(t,-1)),"float32"))}function c(e,t){return(0,o.fO)(e,t)}function d(e,t){return e.rank===t.rank&&(e=r.L9e(e,[e.rank-1])),(t=r.NqF(t,-1)).dtype!==e.dtype&&(t=r.pju(t,e.dtype)),r.pju(r.DgJ(e,t),"float32")}let h=o.FD,f=o.FD,p=o.ke,g=o.ke,m=o.t3,b=o.t3,y=o.uq,v=o.Ls,x=o.KM,w={binaryAccuracy:l,categoricalAccuracy:u,precision:function(e,t){return(0,r.lub)(()=>{let n=(0,r.lub)(()=>r.pju(r.Smz(r.HvI(r.DgJ(e,1),r.DgJ(t,1))),"float32")),i=(0,r.lub)(()=>r.pju(r.Smz(r.HvI(r.DgJ(e,0),r.DgJ(t,1))),"float32")),a=r.IHx(n,i);return r.pju(r.arb(r.pjt(a,0),r.hiC(n,a),0),"float32")})},categoricalCrossentropy:y,sparseCategoricalCrossentropy:x,mse:h,MSE:f,mae:p,MAE:g,mape:m,MAPE:b,cosine:v};function k(e){if("string"==typeof e&&e in w)return w[e];if("string"!=typeof e&&null!=e)return e;throw new a.nu(`Unknown metric ${e}`)}function E(e){if(s.hu(null!==e,`Unknown LossOrMetricFn ${e}`),"string"==typeof e)return e;{let t;for(let n of Object.keys(o.dr))if(o.dr[n]===e){t=n;break}if(void 0!==t)return t;for(let n of Object.keys(w))if(w[n]===e){t=n;break}return void 0!==t?t:e.name}}},72978:function(e,t,n){"use strict";n.d(t,{FB:function(){return f}});var r=n(10280),i=n(76334),a=n(84996),o=n(64580),s=n(6897),l=n(64579),u=n(25732),c=n(94120),d=n(23218),h=n(97982);async function f(e,t){if(null==t&&(t={}),"string"==typeof e){let n=r.io.getLoadHandlers(e,t);if(0===n.length)n.push(r.io.browserHTTPRequest(e,t));else if(n.length>1)throw new l.nu(`Found more than one (${n.length}) load handlers for URL '${e}'`);e=n[0]}return p(e,void 0,t)}async function p(e,t,n){if(null==n&&(n={}),null==e.load)throw new l.nu("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let i=await e.load(),a=i.modelTopology;null!=a.model_config&&(a=a.model_config);let o=null==n.strict||n.strict,s=null!=i.weightData&&null!=i.weightSpecs&&o,c=(0,u.v)((0,d.a)(a),t,s),h=i.trainingConfig;if(null!=h&&c.loadTrainingConfig(h),null!=i.userDefinedMetadata&&c.setUserDefinedMetadata(i.userDefinedMetadata),null!=i.weightData){if(null==i.weightSpecs)throw new l.nu("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:e,optimizerWeights:t}=function(e,t){let n=r.io.decodeWeights(e,t),i={},a=[];return t.forEach(e=>{"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):i[e.name]=n[e.name]}),{modelWeights:i,optimizerWeights:a}}(i.weightData,i.weightSpecs);c.loadWeights(e,o),null!=c.optimizer&&t.length>0&&await c.optimizer.setWeights(t),(0,r.B90)(e),(0,r.B90)(t.map(e=>e.tensor))}return c}class g extends s.QV{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:(0,i.s)("sequential_"),null!=e.layers)for(let t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(e=>e<0))throw new l.nu(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){let t;let n=e instanceof g||e instanceof s.QV;if(n){if(1!==(t=e).outputs.length)throw new l.nu("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new l.nu("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new l.nu("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let t=(0,a.I)({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(n)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new l.nu(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new l.nu("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=(0,o.hA)(this.outputs[0])}this.inboundNodes=[],new o.NB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:c.JE(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{let t=e.apply(this.outputs[0]);if(Array.isArray(t))throw TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if((0,h.Wf)(e),0===this.inputs.length||0===this.outputs.length)throw TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new s.QV({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new l.LH("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new l.LH("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new l.LH("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new l.LH("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},i=!1){let a;let o={};if(t instanceof Array){if(!(null!=t[0].className)||"Merge"===t[0].className)throw new l.nu("Legacy serialization format not supported yet.");a=t}else r.D5U.assert(null!=t.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=t.layers,delete t.layers,o=t;let s=new e(o);if(!(s instanceof g))throw new l.nj(`Sequential.fromConfig called on non-Sequential input: ${s}`);for(let e of a){let t=void 0,n=(0,u.v)(e,t,i);i&&n.setFastWeightInitDuringBuild(!0),s.add(n)}return s}set stopTraining(e){if(null==this.model)throw new l.nu("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new l.nu("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let t of this.layers){let n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}g.className="Sequential",r.m7h.registerClass(g)},86754:function(e,t,n){"use strict";n.d(t,{j:function(){return o}});var r=n(10280),i=n(10685),a=n(64579);function o(e){let t={Adagrad:()=>r.p_j.adagrad(.01),Adadelta:()=>r.p_j.adadelta(1,.95,(0,i.Ho)()),Adam:()=>r.p_j.adam(.001,.9,.999,(0,i.Ho)()),Adamax:()=>r.p_j.adamax(.002,.9,.999,(0,i.Ho)(),0),RMSProp:()=>r.p_j.rmsprop(.001,.9,0,(0,i.Ho)()),SGD:()=>r.p_j.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new a.nu(`Unknown Optimizer ${e}`)}},18030:function(e,t,n){"use strict";n.d(t,{EC:function(){return d},SG:function(){return u}});var r=n(10280),i=n(1552),a=n(94120);class o extends r.m7h.Serializable{}class s extends o{constructor(e){super(),function(e){if(null!=e&&"object"!=typeof e)throw Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return(0,r.lub)(()=>{let t=(0,r.lls)([1]);return this.hasL1&&(t=(0,r.IHx)(t,(0,r.Smz)(r.dC7(this.l1,(0,r.WnP)(e))))),this.hasL2&&(t=(0,r.IHx)(t,(0,r.Smz)(r.dC7(this.l2,i.h6(e))))),r.XLQ(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}s.className="L1L2",r.m7h.registerClass(s);let l={l1l2:"L1L2"};function u(e){return(0,a.Kj)(e)}function c(e,t={}){return(0,a.tU)(e,r.m7h.SerializationMap.getMap().classNameMap,t,"regularizer")}function d(e){return null==e?null:"string"==typeof e?c({className:e in l?l[e]:e,config:{}}):e instanceof o?e:c(e)}},84562:function(e,t,n){"use strict";function r(e,t,n=!1){if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!function e(t){if(null===t)return!0;if("object"==typeof t){if(Object.getPrototypeOf(t)===Object.prototype){for(let n of Object.keys(t))if("string"!=typeof n||!e(t[n]))return!1;return!0}if(!Array.isArray(t))return!1;for(let n of t)if(!e(n))return!1;return!0}{let e=typeof t;return"string"===e||"number"===e||"boolean"===e}}(e))throw Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){let n=JSON.stringify(e);n.length>1048576&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}n.d(t,{WE:function(){return r}})},59997:function(e,t,n){"use strict";n.d(t,{$U:function(){return l},AF:function(){return o},kt:function(){return s}});var r=n(64579),i=n(94120),a=n(86314);function o(e,t,n){if("number"==typeof e)return(0,i.JE)(e,t);if(e.length!==t)throw new r.nu(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let i=0;i<t;++i){let o=e[i];if(!(0,a.U)(o))throw new r.nu(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${o}`)}return e}function s(e,t,n,r,i=1){return null==e?e:Math.floor((("same"===n?e:e-(t+(t-1)*(i-1))+1)+r-1)/r)}function l(e,t,n,i){if(null==e)return null;if("valid"===i)e=e*t+(0,a.Fp)([n-t,0]);else if("same"===i)e*=t;else throw new r.nu(`Unsupport padding mode: ${i}.`);return e}},94120:function(e,t,n){"use strict";n.d(t,{Bq:function(){return l},D1:function(){return c},Ds:function(){return x},JE:function(){return a},Kj:function(){return f},L7:function(){return g},Mx:function(){return v},QX:function(){return s},Tw:function(){return m},WT:function(){return w},hu:function(){return o},iQ:function(){return function e(t,n){Array.isArray(t)?(r.D5U.assert(t.length>0,()=>`${n} is unexpectedly an empty array.`),t.forEach((t,r)=>e(t,`element ${r+1} of ${n}`))):r.D5U.assert(Number.isInteger(t)&&t>0,()=>`Expected ${n} to be a positive integer, but got ${function e(t){return null===t?"null":Array.isArray(t)?"["+t.map(t=>e(t)).join(",")+"]":"string"==typeof t?`"${t}"`:`${t}`}(t)}.`)}},nK:function(){return b},tU:function(){return p},xn:function(){return y},zW:function(){return d},zZ:function(){return u}});var r=n(10280),i=n(64579);function a(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{let n=Array(t);return n.fill(e),n}}function o(e,t){if(!e)throw new i.ps(t)}function s(e,t){let n=0;for(let r of e)r===t&&n++;return n}function l(e){return 1===e.length?e[0]:e}function u(e){return Array.isArray(e)?e:[e]}function c(e){let t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function d(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let h={};function f(e){if(null==e)return null;let t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function p(e,t={},n={},r="object",a=!1){if("string"==typeof e){let a;if(e in n)a=n[e];else if(e in h)a=h[e];else if(null==(a=t[e]))throw new i.nu(`Unknown ${r}: ${e}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}{let o,s;if(null==e.className||null==e.config)throw new i.nu(`${r}: Improper config format: ${JSON.stringify(e)}.
'className' and 'config' must set.`);let l=e.className;if(l in n?[o,s]=n[l]:l in h?[o,s]=h.className:l in t&&([o,s]=t[l]),null==o)throw new i.nu(`Unknown ${r}: ${l}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=s){let t={};for(let e of Object.keys(h))t[e]=h[e];for(let e of Object.keys(n))t[e]=n[e];e.config.customObjects=t;let r=Object.assign({},h);for(let e of Object.keys(n))h[e]=n[e];!function e(t){if(null!=t&&"object"==typeof t){if(Array.isArray(t))t.forEach(t=>e(t));else for(let n of Object.keys(t)){let r=t[n];null!=r&&"object"==typeof r&&(Array.isArray(r)||"ndarray"!==r.type||"number"!=typeof r.value?e(r):t[n]=r.value)}}}(e.config);let i=s(o,e.config,n,a);return h=Object.assign({},r),i}{let t=Object.assign({},h);for(let e of Object.keys(n))h[e]=n[e];let r=new o(e.config);return h=Object.assign({},t),r}}}function g(e,t){return -1*(e<t?-1:e>t?1:0)}function m(e){if(null==e)return e;let t=[];for(let n of e)-1===t.indexOf(n)&&t.push(n);return t}function b(e){if(null==e)throw new i.nu(`Invalid value in obj: ${JSON.stringify(e)}`);for(let t in e)if(e.hasOwnProperty(t))return!1;return!0}function y(e,t,n){if(null!=n&&0>e.indexOf(n))throw new i.nu(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function v(e,t,n=0,r=1/0){return o(n>=0),o(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(e=>typeof e===t)}function x(e,t,n){let i,a=null!=n?n():r.D5U.now();return(...o)=>{let s=null!=n?n():r.D5U.now();return s-a<t?i:(a=s,i=e(...o))}}function w(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}},85037:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(34923);function i(e,t,n,i=console.log){let o;let s=function(e){let t=!0,n=[],r=[];for(let t in e.nodesByDepth)n.push(e.nodesByDepth[t]);for(let e of n){if(e.length>1||1===e.length&&e[0].inboundLayers.length>1){t=!1;break}r.push(...e)}if(t)for(let n of e.layers){let e=!1;for(let i of n.inboundNodes)if(-1!==r.indexOf(i)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),l=["Layer (type)","Input Shape","Output shape","Param #"];if(s?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(e=>Math.floor(t*e))),!s)for(let t in l.push("Receives inputs"),o=[],e.nodesByDepth)o.push(...e.nodesByDepth[t]);i("_".repeat(t)),a(l,n,i),i("=".repeat(t));let u=e.layers;for(let e=0;e<u.length;++e)s?function(e,t,n){let r,i;try{i=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(e){i="multiple"}try{r=JSON.stringify(e.outputShape)}catch(e){r="multiple"}let o=e.name,s=e.getClassName();a([`${o} (${s})`,i,r,e.countParams().toString()],t,n)}(u[e],n,i):function(e,t,n,r){let i,o;try{o=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(e){o="multiple"}try{i=JSON.stringify(e.outputShape)}catch(e){i="multiple"}let s=[];for(let t of e.inboundNodes)if(null==n||!(n.length>0)||-1!==n.indexOf(t))for(let e=0;e<t.inboundLayers.length;++e){let n=t.inboundLayers[e].name,r=t.nodeIndices[e],i=t.tensorIndices[e];s.push(`${n}[${r}][${i}]`)}let l=e.name,u=e.getClassName(),c=0===s.length?"":s[0];a([`${l} (${u})`,o,i,e.countParams().toString(),c],t,r);for(let e=1;e<s.length;++e)a(["","","","",s[e]],t,r)}(u[e],n,o,i),i((e===u.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();let c=null!=e.collectedTrainableWeights?(0,r.t)(e.collectedTrainableWeights):(0,r.t)(e.trainableWeights),d=(0,r.t)(e.nonTrainableWeights);i(`Total params: ${c+d}`),i(`Trainable params: ${c}`),i(`Non-trainable params: ${d}`),i("_".repeat(t))}function a(e,t,n=console.log){let r="";for(let n=0;n<e.length;++n)n>0&&(r=r.slice(0,r.length-1)+" "),r+=e[n],r=r.slice(0,t[n]),r+=" ".repeat(t[n]-r.length);n(r)}},86314:function(e,t,n){"use strict";n.d(t,{Fp:function(){return s},NS:function(){return a},U:function(){return i},VV:function(){return o},w6:function(){return l}});var r=n(64579);function i(e){return e===parseInt(e.toString(),10)}function a(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let i=t;i<n;++i)r*=e[i];return r}function o(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r<t&&(t=r)}return t}function s(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r>t&&(t=r)}return t}function l(e,t){if(t<e)throw new r.nu(`end (${t}) < begin (${e}) is forbidden.`);let n=[];for(let r=e;r<t;++r)n.push(r);return n}},23218:function(e,t,n){"use strict";n.d(t,{a:function(){return function e(t,n){if(null===t)return null;if("string"==typeof t)return r.zW(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){let r=[],a=t.length;for(let o=0;o<a;++o){let a=t[o];i(n,o,a)?r.push(a):r.push(e(a,n))}return r}{let n={};for(let i of Object.keys(t)){let a=t[i];if("name"===i&&"string"==typeof a)n[i]=a;else{let t=r.zW(i);n[t]=e(a,t)}}return n}}},q:function(){return function e(t,n){if(null==t)return null;if("string"==typeof t)return r.D1(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){let r=[],a=t.length;for(let o=0;o<a;++o){let a=t[o];i(n,o,a)?r.push(a):r.push(e(a,n))}return r}{let n={};for(let i of Object.keys(t)){let a=t[i],o=r.D1(i);("name"===i||"className"===i)&&"string"==typeof a?n[o]=a:n[o]=e(a,i)}return n}}}});var r=n(94120);function i(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}},97982:function(e,t,n){"use strict";n.d(t,{Wf:function(){return s},XO:function(){return i},nQ:function(){return o},x6:function(){return a}});var r=n(64579);function i(e){return Array.isArray(e)&&Array.isArray(e[0])}function a(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function o(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new r.nu(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function s(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))return e;if(1===e.length)return e[0];throw new r.nu(`Expected exactly 1 Shape; got ${e.length}`)}},34923:function(e,t,n){"use strict";function r(e){let t=0;for(let n of e)0===n.shape.length?t+=1:t+=n.shape.reduce((e,t)=>e*t);return t}n.d(t,{t:function(){return r}})},48234:function(e,t,n){"use strict";n.d(t,{FQ:function(){return l},fU:function(){return s},zb:function(){return u}});var r=n(10280),i=n(76334),a=n(38440);n(64579);let o="Variable";class s{constructor(e,t="float32",n=o,s=!0,l=null){this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=(0,i.L)(),n=null==n?o:n,this.originalName=(0,a.MU)(n),this.name=(0,a.w8)(this.originalName),this.trainable_=s,this.constraint=l,this.val=r.VD$(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function l(e){return e.map(e=>e.read())}function u(e){e.forEach(e=>{e[0].write(e[1])})}},55690:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});let r="4.22.0"},47573:function(e,t,n){"use strict";let r;n.d(t,{FBF:function(){return rT.FB},odF:function(){return f.odF}});var i,a,o,s,l,u,c,d,h,f=n(10280),p=n(35047),g=n(58893),m=n(45314),b=n(9794);let y={kernelName:p.SYM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(e,(0,b.N)((0,g.p)(n,"float32"),-1))}}};var v=n(83511),x=n(22666),w=n(16070),k=n(99467),E=n(77941),I=n(35799);let S={kernelName:p.VGw,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=(0,E.h)((0,g.p)(n,"float32")),r=(0,k._)((0,I.l)((0,w.i)(1),t));return(0,x.W)((0,v.h)(e,r))}}}},T={kernelName:p.SpW,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=(0,k._)((0,I.l)((0,E.h)((0,g.p)(n,"float32")),1));return(0,v.h)(e,t)}}}};var C=n(95221),N=n(96439),A=n(71101);let R={kernelName:p.mm_,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=C.assertAndGetBroadcastShape(n.shape,r.shape);return{a:()=>{let t=e,r=C.getReductionAxes(n.shape,i);return r.length>0&&(t=(0,A.S)(t,r)),(0,N.X)(t,n.shape)},b:()=>{let t=e,n=C.getReductionAxes(r.shape,i);return n.length>0&&(t=(0,A.S)(t,n)),(0,N.X)(t,r.shape)}}}},D={kernelName:p.Xze,saveAllInputs:!0,gradFunc:(e,t)=>{let n={};return t.forEach((t,r)=>{n[r]=()=>e.clone()}),n}};var $=n(72898);let _={kernelName:p.sJF,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,$.P)(n)}}},F={kernelName:p.aJk,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,$.P)(n)}}},O={kernelName:p.M2y,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,v.h)(e,(0,k._)((0,I.l)((0,w.i)(1),(0,E.h)((0,g.p)(n,"float32")))))}}};var P=n(83266);let M={kernelName:p.qw7,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=(0,k._)((0,P.I)((0,w.i)(1),(0,E.h)((0,g.p)(n,"float32"))));return(0,v.h)(e,t)}}}},L={kernelName:p.QCc,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=(0,C.assertAndGetBroadcastShape)(n.shape,r.shape);return{a:()=>{let t=(0,P.I)((0,E.h)(n),(0,E.h)(r)),a=(0,m.d)(e,(0,v.h)(r,t)),o=(0,C.getReductionAxes)(n.shape,i);return o.length>0&&(a=(0,A.S)(a,o)),(0,N.X)(a,n.shape)},b:()=>{let t=(0,P.I)((0,E.h)(n),(0,E.h)(r)),a=(0,x.W)((0,m.d)(e,(0,v.h)(n,t))),o=(0,C.getReductionAxes)(r.shape,i);return o.length>0&&(a=(0,A.S)(a,o)),(0,N.X)(a,r.shape)}}}},B={kernelName:p.jMg,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,v.h)(e,(0,P.I)((0,E.h)((0,g.p)(n,"float32")),1))}}},U={kernelName:p.Oyi,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,v.h)(e,(0,I.l)((0,w.i)(1),(0,E.h)((0,g.p)(n,"float32"))))}}};var z=n(49681),V=n(50971),W=n(2771),j=n(79011),H=n(32888);let K=(0,H.op)({avgPool3dGrad_:function(e,t,n,r,i,a){let o=(0,V._1)(e,"dy","avgPool3dGrad"),s=(0,V._1)(t,"input","avgPool3dGrad"),l=o,u=s,c=!1;4===s.rank&&(c=!0,l=(0,N.X)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),u=(0,N.X)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),W.hu(5===l.rank,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),W.hu(5===u.rank,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),(0,j.m)("avgPool3dGrad",i,a);let d={dy:l,input:u},h=z.BV.runKernel(p.IMb,d,{filterSize:n,strides:r,pad:i,dimRoundingMode:a});return c?(0,N.X)(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),G={kernelName:p._k9,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:i,strides:a,pad:o,dimRoundingMode:s}=n;return{x:()=>K(e,r,i,a,o,s)}}},X=(0,H.op)({avgPoolGrad_:function(e,t,n,r,i){let a=(0,V._1)(e,"dy","avgPoolGrad"),o=(0,V._1)(t,"input","avgPoolGrad");W.hu(o.rank===a.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${a.rank})`);let s=o,l=a,u=!1;3===o.rank&&(u=!0,s=(0,N.X)(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=(0,N.X)(a,[1,a.shape[0],a.shape[1],a.shape[2]])),W.hu(4===l.rank,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),W.hu(4===s.rank,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${s.rank}.`);let c={dy:l,input:s},d=z.BV.runKernel(p.ROF,c,{filterSize:n,strides:r,pad:i});return u?(0,N.X)(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),q={kernelName:p.JhU,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:i,strides:a,pad:o}=n;return{x:()=>X(e,r,i,a,o)}}};var Y=n(45193);let Q={kernelName:p.XLW,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{let[r,i]=t,{transposeA:a,transposeB:o}=n;return a||o?!a&&o?{a:()=>(0,Y.O)(e,i,!1,!1),b:()=>(0,Y.O)(e,r,!0,!1)}:a&&!o?{a:()=>(0,Y.O)(i,e,!1,!0),b:()=>(0,Y.O)(r,e,!1,!1)}:{a:()=>(0,Y.O)(i,e,!0,!0),b:()=>(0,Y.O)(e,r,!0,!0)}:{a:()=>(0,Y.O)(e,i,!1,!0),b:()=>(0,Y.O)(r,e,!0,!1)}}},J=(0,H.op)({spaceToBatchND_:function(e,t,n){let r=(0,V._1)(e,"x","spaceToBatchND");return W.hu(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),W.hu(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),W.hu(r.shape.reduce((e,r,i)=>i>0&&i<=t.length?e&&(r+n[i-1][0]+n[i-1][1])%t[i-1]==0:e,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`),z.BV.runKernel(p.TQc,{x:r},{blockShape:t,paddings:n})}}),Z={kernelName:p.zws,gradFunc:(e,t,n)=>{let{blockShape:r,crops:i}=n;return{x:()=>J(e,r,i)}}},ee={kernelName:p.Ly9,gradFunc:(e,t,n)=>{let r=n.inputShape,i=n.shape,a=Array.from(i);for(let e=r.length-1;e>=0;e--)if(r[e]===i[e])a[e]=1;else if(1!==r[e])throw Error(`broadcastTo(): [${r}] cannot be broadcast to [${i}].`);let o=[];for(let e=0;e<a.length;e++)a[e]>1&&o.push(e);return{x:()=>(0,A.S)(e,o,!0)}}},et={kernelName:p.RFZ,gradFunc:e=>({x:()=>e.clone()})},en={kernelName:p.gJX,gradFunc:e=>({x:()=>(0,$.P)(e)})};var er=n(39344),ei=n(7444),ea=n(85364),eo=n(81275);let es={kernelName:p.xnO,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{clipValueMin:i,clipValueMax:a}=n;return{x:()=>(0,eo.a)((0,ea.H)((0,er.b)(r,i),(0,ei.z)(r,a)),e,(0,$.P)(e))}}},el={kernelName:p.yj2,inputsToSave:["x"],gradFunc:y.gradFunc};var eu=n(59509);let ec={kernelName:p.Eh3,saveAllInputs:!0,gradFunc:(e,t,n)=>{let r=t.map(e=>e.shape),{axis:i}=n,a=(0,W.EC)(i,t[0].shape)[0],o=r.map(e=>e[a]);return(0,eu.V)(e,o,a).map(e=>()=>e)}};var ed=n(16453),eh=n(28725);let ef={kernelName:p.mhS,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,i]=t,{dilations:a,strides:o,pad:s,dataFormat:l}=n;return W.hu(j.I0(a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>(0,eh._)(r.shape,e,i,o,s,l),filter:()=>(0,ed.p)(r,e,i.shape,o,s,l)}}};var ep=n(93468);let eg={kernelName:p.wm,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{let[r,i]=t,{strides:a,pad:o,dataFormat:s,dimRoundingMode:l}=n;return{dy:()=>(0,ep.T)(e,i,a,o,s,1,l),filter:()=>(0,ed.p)(e,r,i.shape,a,o,s,l)}}},em=(0,H.op)({conv3DBackpropFilter_:function(e,t,n,r,i){let a=e;4===e.rank&&(a=(0,N.X)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let o=t;4===o.rank&&(o=(0,N.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),W.hu(5===a.rank,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`),W.hu(5===o.rank,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),W.hu(5===n.length,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),W.hu(a.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${n[3]}.`),W.hu(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);let s={x:a,dy:o};return z.BV.runKernel(p.o2y,s,{strides:r,pad:i,filterShape:n})}});var eb=n(59457);let ey={kernelName:p.x12,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:i,pad:a}=n;W.hu((0,j.I0)(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);let[o,s]=t;return{x:()=>(0,eb._)(o.shape,e,s,i,a),filter:()=>em(o,e,s.shape,i,a)}}},ev=(0,H.op)({sin_:function(e){let t=(0,V._1)(e,"x","sin","float32");return z.BV.runKernel(p.RQH,{x:t})}}),ex={kernelName:p.mc4,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)((0,x.W)(ev((0,g.p)(n,"float32"))),e)}}},ew=(0,H.op)({sinh_:function(e){let t=(0,V._1)(e,"x","sinh");return z.BV.runKernel(p.wYB,{x:t})}}),ek={kernelName:p.TR1,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(ew((0,g.p)(n,"float32")),e)}}};var eE=n(47050);let eI=(0,H.op)({cumsum_:function(e,t=0,n=!1,r=!1){let i=(0,V._1)(e,"x","cumsum");return z.BV.runKernel(p.iHb,{x:i},{axis:t,exclusive:n,reverse:r})}});var eS=n(26439);let eT={kernelName:p.iHb,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:i,exclusive:a,reverse:o}=n;return{x:()=>{let t=(0,eE.Q3)([i],r.rank),n=eI(e,i,a,!o);return null!=t&&(n=(0,eS.p)(n,t)),n}}}};var eC=n(77982),eN=n(83171);let eA={kernelName:p.cie,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:i,pad:a,dimRoundingMode:o}=n,s=null==r?[1,1]:r;W.hu(j.I0(s),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);let[l,u]=t;return W.hu(4===l.rank,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),W.hu(4===u.rank,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),W.hu(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),W.hu(j.jT(i,s),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${s}'.`),j.m("depthwiseConv2d",a,o),{x:()=>(0,eN.v)(l.shape,e,u,i,a,s,o),filter:()=>(0,eC.z)(l,e,u.shape,i,a,s,o)}}},eR={kernelName:p.p4S,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,i]=t,a={x:r,filter:i,dy:e},o={x:r,filter:i,dy:e};return{x:()=>z.BV.runKernel(p.ekb,a,n),filter:()=>z.BV.runKernel(p.Vn9,o,n)}}},eD={kernelName:p.SX0,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t,r={dy:e,y:n};return{x:()=>z.BV.runKernel(p.HEU,r)}}};var e$=n(17840);let e_={kernelName:p.Omj,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=(0,m.d)((0,e$.Q)((0,x.W)((0,E.h)(n))),2/Math.sqrt(Math.PI));return{x:()=>(0,m.d)(e,r)}}},eF={kernelName:p.NEP,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(e,n)}}},eO={kernelName:p.YFo,inputsToSave:["input"],gradFunc:(e,t)=>{let[n]=t;return{input:()=>(0,N.X)(e,n.shape)}}},eP={kernelName:p.Y0y,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(e,(0,e$.Q)(n))}}},eM={kernelName:p.OR,gradFunc:e=>({x:()=>(0,$.P)(e)})},eL={kernelName:p.jeX,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=(0,C.assertAndGetBroadcastShape)(n.shape,r.shape);return{a:()=>{let t=(0,v.h)(e,(0,g.p)(r,"float32")),a=(0,C.getReductionAxes)(n.shape,i);return a.length>0?(0,N.X)((0,A.S)(t,a),n.shape):t},b:()=>{let t=(0,m.d)(e,(0,g.p)(n,"float32")),a=(0,C.getReductionAxes)(r.shape,i);a.length>0&&(t=(0,N.X)((0,A.S)(t,a),r.shape));let o=(0,E.h)(r);return(0,x.W)((0,v.h)(t,(0,g.p)(o,"float32")))}}}},eB=(0,H.op)({rsqrt_:function(e){let t=(0,V._1)(e,"x","rsqrt","float32");return z.BV.runKernel(p.bV0,{x:t})}});var eU=n(47642);let ez={kernelName:p.sHE,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{let{varianceEpsilon:r}=n,[i,a,o,s]=t,l=null==s?(0,w.i)(1):s,u=(0,C.getReductionAxes)(a.shape,i.shape),c=[];if(1===a.rank){for(let e=0;e<i.shape.length-1;++e)c.push(i.shape[e]);c.push(1)}let d=(0,I.l)(i,a),h=(0,m.d)(e,l),f=eB((0,P.I)(o,(0,w.i)(r))),p=(0,m.d)((0,m.d)((0,m.d)(f,f),f),(0,w.i)(-.5));return{x:()=>1===a.rank?(0,N.X)((0,m.d)((0,m.d)(e,(0,eU.G)((0,N.X)(f,[1,1,1,a.shape[0]]),c)),l),i.shape):(0,N.X)((0,m.d)((0,m.d)(e,f),l),i.shape),mean:()=>{let e=(0,m.d)((0,m.d)(f,(0,w.i)(-1)),h);return 1===a.rank&&(e=(0,A.S)(e,u)),(0,N.X)(e,a.shape)},variance:()=>{let e=(0,m.d)((0,m.d)(p,d),h);return 1===a.rank&&(e=(0,A.S)(e,u)),(0,N.X)(e,a.shape)},scale:()=>{let t=(0,m.d)(d,f),n=(0,m.d)(e,t);return 1===a.rank&&(n=(0,A.S)(n,u)),(0,N.X)(n,a.shape)},offset:()=>{let t=e;return 1===a.rank&&(t=(0,A.S)(t,u)),(0,N.X)(t,a.shape)}}}};var eV=n(95363);let eW=(0,H.op)({unsortedSegmentSum_:function(e,t,n){let r=(0,V._1)(e,"x","unsortedSegmentSum"),i=(0,V._1)(t,"segmentIds","unsortedSegmentSum","int32");return(0,W.hu)((0,W.GN)(n),()=>"numSegments must be of dtype int"),z.BV.runKernel(p.Qvg,{x:r,segmentIds:i},{numSegments:n})}}),ej={kernelName:p.qi_,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{let[r,i]=t,{axis:a,batchDims:o}=n,s=(0,W.EC)(a,r.shape)[0],l=(e,t,n)=>()=>{let r=e.shape,i=t.size,o=r.slice(0,s),l=o.length,u=r.slice(a,r.length).slice(1),c=u.length,d=eH(0,l),h=eH(l+1,l+1+c),f=eK([o,[i],u]),p=(0,N.X)(n,f),g=(0,N.X)(t,[i]),m=eK([[l],d,h]),b=eW((0,eS.p)(p,m),g,e.shape[s]),y=(0,eE.LJ)(m);return(0,eS.p)(b,y)};if(1!==o)return{x:l(r,i,e),indices:()=>i};{let t=r.shape[0],n=r.split(t,0);return{x:()=>(0,eV.k)(n.map((t,n)=>l(t,i.slice(n,1),e.slice(n,1))())).reshape(r.shape),indices:()=>i}}}};function eH(e,t){let n=[];for(let r=e;r<t;++r)n.push(r);return n}function eK(e){let t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}let eG={kernelName:p.Acj,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>(0,$.P)(n),b:()=>(0,$.P)(r)}}},eX={kernelName:p.iJz,gradFunc:e=>({x:()=>(0,g.p)(e,"float32")})},eq={kernelName:p.avt,gradFunc:e=>({x:()=>(0,$.P)(e)})},eY={kernelName:p.iWB,gradFunc:e=>({x:()=>(0,$.P)(e)})},eQ={kernelName:p.r7n,gradFunc:e=>({x:()=>(0,$.P)(e)})};var eJ=n(95334);let eZ={kernelName:p.J$2,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{alpha:i}=n,a=(0,eJ.p)(r,0);return{x:()=>(0,eo.a)(a,e,(0,m.d)(e,i))}}},e0={kernelName:p.kU,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,v.h)(e,(0,P.I)(n,1))}}},e1={kernelName:p.ZbH,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,v.h)(e,(0,g.p)(n,"float32"))}}},e2={kernelName:p.qCd,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{axis:i}=n;return{logits:()=>{let t=(0,e$.Q)(r);return(0,I.l)(e,(0,m.d)((0,A.S)(e,i,!0),t))}}}},e3=(0,H.op)({localResponseNormalizationBackprop_:function(e,t,n,r=5,i=1,a=1,o=.5){return z.BV.runKernel(p.Hhh,{x:e,y:t,dy:n},{depthRadius:r,bias:i,alpha:a,beta:o})}}),e4={kernelName:p.eZ0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,i]=t,{depthRadius:a,bias:o,alpha:s,beta:l}=n;return{x:()=>e3(r,i,e,a,o,s,l)}}};var e5=n(5252);function e8(e,t,n,r){return t.rank<n.rank&&(t=(0,N.X)(t,eE.rv(t.shape,r))),e.rank<n.rank&&(e=(0,N.X)(e,eE.rv(e.shape,r))),{x:()=>(0,m.d)(e,(0,g.p)((0,e5.D)(n,t),e.dtype))}}let e6={kernelName:p.YoZ,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let{reductionIndices:r}=n,i=t[0],a=t[1],o=W.EC(r,i.shape),s=e8(e,a,i,o);return{x:()=>s.x()}}};var e7=n(78461);let e9={kernelName:p.BMI,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>(0,m.d)(e,(0,g.p)((0,er.b)(n,r),"float32")),b:()=>(0,m.d)(e,(0,g.p)((0,e7.d)(n,r),"float32"))}}},te=(0,H.op)({maxPool3dGrad_:function(e,t,n,r,i,a,o){let s=(0,V._1)(e,"dy","maxPool3dGrad"),l=(0,V._1)(t,"input","maxPool3dGrad"),u=(0,V._1)(n,"output","maxPool3dGrad"),c=s,d=l,h=u,f=!1;4===l.rank&&(f=!0,c=(0,N.X)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=(0,N.X)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=(0,N.X)(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),W.hu(5===c.rank,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),W.hu(5===d.rank,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),W.hu(5===h.rank,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),(0,j.m)("maxPool3dGrad",a,o);let g={dy:c,input:d,output:h},m=z.BV.runKernel(p.OU7,g,{filterSize:r,strides:i,pad:a,dimRoundingMode:o});return f?(0,N.X)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}}),tt={kernelName:p.OAf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,i]=t,{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=n;return{x:()=>te(e,r,i,a,o,s,l)}}},tn=(0,H.op)({maxPoolGrad_:function(e,t,n,r,i,a,o){let s=(0,V._1)(e,"dy","maxPoolGrad"),l=(0,V._1)(t,"input","maxPoolGrad"),u=(0,V._1)(n,"output","maxPoolGrad");return W.hu(l.rank===s.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${s.rank})`),W.hu(4===s.rank,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${s.rank}.`),W.hu(4===l.rank,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),j.m("maxPoolGrad",a,o),z.BV.runKernel(p.OV7,{dy:s,input:l,output:u},{filterSize:r,strides:i,pad:a,dimRoundingMode:o})}}),tr={kernelName:p.mTV,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,i]=t,{filterSize:a,strides:o,pad:s}=n;return{x:()=>tn(e,r,i,a,o,s)}}};var ti=n(36374);let ta={kernelName:p.q2K,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:i}=n,a=W.EC(i,r.shape),o=(0,eE.kz)(r.shape,a)[1],s=W.NA(o);return{x:()=>{let t=r.shape.slice();a.forEach(e=>{t[e]=1});let n=(0,N.X)(e,t);return(0,v.h)((0,m.d)(n,(0,ti.i)(r.shape,"float32")),s)}}}},to={kernelName:p.c17,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let{axis:r}=n,[i,a]=t,o=W.EC(r,i.shape),s=e8(e,a,i,o);return{x:()=>s.x()}}},ts={kernelName:p.q8u,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>(0,m.d)(e,(0,g.p)((0,ei.z)(n,r),"float32")),b:()=>(0,m.d)(e,(0,g.p)((0,eJ.p)(n,r),"float32"))}}};var tl=n(90308);let tu={kernelName:p.jQs,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:i}=n,a=i.map(e=>e[0]);return{x:()=>(0,tl.t)(e,a,r.shape)}}};var tc=n(8703);let td={kernelName:p.Vbg,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=(0,C.assertAndGetBroadcastShape)(n.shape,r.shape);return{a:()=>{let t=(0,C.getReductionAxes)(n.shape,i);return t.length>0?(0,N.X)((0,A.S)(e,t),n.shape):e},b:()=>{let t=(0,m.d)(e,(0,x.W)((0,tc.G)((0,v.h)(n,r)))),a=(0,C.getReductionAxes)(r.shape,i);return a.length>0?(0,N.X)((0,A.S)(t,a),r.shape):t}}}},th={kernelName:p.wYn,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=(0,C.assertAndGetBroadcastShape)(n.shape,r.shape);return{a:()=>{let t=(0,m.d)(e,(0,g.p)(r,"float32")),a=(0,C.getReductionAxes)(n.shape,i);return a.length>0?(0,N.X)((0,A.S)(t,a),n.shape):t},b:()=>{let t=(0,m.d)(e,(0,g.p)(n,"float32")),a=(0,C.getReductionAxes)(r.shape,i);return a.length>0?(0,N.X)((0,A.S)(t,a),r.shape):t}}}},tf={kernelName:p.kuV,gradFunc:e=>({x:()=>(0,x.W)(e)})};var tp=n(40290);let tg={kernelName:p.we_,inputsToSave:["indices"],gradFunc:(e,t)=>{let n=t[0];return{indices:()=>(0,tp.l)(n.shape,"float32")}}},tm={kernelName:p.qWM,gradFunc:e=>({x:()=>(0,$.P)(e)})};var tb=n(51863);let ty={kernelName:p.QiL,saveAllInputs:!0,gradFunc:(e,t,n)=>{let{axis:r}=n;return(0,tb.H)(e,r).map(e=>()=>e)}},tv={kernelName:p.lyA,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:i}=n,a=i.map(e=>e[0]);return{x:()=>(0,tl.t)(e,a,r.shape)}}};var tx=n(78399),tw=n(12611);let tk={kernelName:p.pe_,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{let[n,r,i]=t,a=C.assertAndGetBroadcastShape(n.shape,r.shape);return{a:()=>{let t=(0,g.p)(r,"float32"),i=(0,m.d)(e,(0,m.d)(t,(0,tw.s)(n,(0,I.l)(t,(0,w.i)(1))))),o=C.getReductionAxes(n.shape,a);return o.length>0&&(i=(0,A.S)(i,o)),(0,N.X)(i,n.shape)},b:()=>{let t=(0,eJ.p)(n,0),o=(0,eo.a)(t,(0,tx.c)(n),(0,$.P)(n)),s=(0,m.d)(e,(0,m.d)(i,o)),l=C.getReductionAxes(r.shape,a);return l.length>0&&(s=(0,A.S)(s,l)),(0,N.X)(s,r.shape)}}}},tE={kernelName:p.o0g,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{let[n,r]=t,i=(0,eJ.p)(n,0);return{x:()=>(0,eo.a)(i,e,(0,m.d)(e,r)),alpha:()=>{let t=(0,eo.a)(i,(0,$.P)(e),(0,m.d)(e,n)),a=(0,C.getReductionAxes)(r.shape,e.shape);return a.length>0&&(t=(0,A.S)(t,a)),(0,N.X)(t,r.shape)}}}},tI=(0,H.op)({cumprod_:function(e,t=0,n=!1,r=!1){let i=(0,V._1)(e,"x","cumprod");return z.BV.runKernel(p.Byc,{x:i},{axis:t,exclusive:n,reverse:r})}}),tS={kernelName:p.DlI,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:i}=n,a=[];return a=null==i?r.shape.map((e,t)=>t):"number"==typeof i?[i]:i,{x:()=>(function(e,t,n){let r=e.shape.length,i=r-n.length,a=eE.Q3(n,r),o=e;null!=a&&(o=(0,eS.p)(e,a));let s=o.shape.slice(),l=s.splice(r-n.length,n.length).reduce((e,t)=>e*t,1);s.push(l);let u=function(e,t,n){let r=e.shape.slice();r[n]=1;let i=(0,N.X)(t,r),a=tI(e,n,!0,!1),o=tI(e,n,!0,!0),s=(0,m.d)(a,o);return(0,m.d)(i,s)}(o.reshape(s),t,i);if(u=u.reshape(o.shape),null!=a){let e=eE.LJ(a);u=(0,eS.p)(u,e)}return u})(r,e,a)}}},tT={kernelName:p.oHH,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=C.assertAndGetBroadcastShape(n.shape,r.shape);return{a:()=>{let t=(0,v.h)(e,(0,g.p)(r,"float32")),a=C.getReductionAxes(n.shape,i);return a.length>0?(0,N.X)((0,A.S)(t,a),n.shape):t},b:()=>{let t=(0,m.d)(e,(0,g.p)(n,"float32")),a=C.getReductionAxes(r.shape,i);a.length>0&&(t=(0,N.X)((0,A.S)(t,a),r.shape));let o=(0,E.h)(r);return(0,x.W)((0,v.h)(t,(0,g.p)(o,"float32")))}}}},tC={kernelName:p.$HU,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,v.h)(e,(0,x.W)((0,E.h)(n)))}}},tN={kernelName:p.SbG,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=(0,m.d)((0,ei.z)(n,6),(0,b.N)(n));return{x:()=>(0,m.d)(e,(0,g.p)(r,"float32"))}}},tA={kernelName:p.qkr,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(e,(0,g.p)((0,b.N)(n),"float32"))}}},tR={kernelName:p.HZH,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,N.X)(e,n.shape)}}},tD={kernelName:p._Yw,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,i={dy:e,images:r};return{images:()=>z.BV.runKernel(p.zbQ,i,n)}}},t$={kernelName:p.dpD,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,i={dy:e,images:r};return{images:()=>z.BV.runKernel(p.Hmb,i,n)}}};var t_=n(36439);let tF={kernelName:p.mKl,gradFunc:(e,t,n)=>{let{dims:r}=n,i=(0,W.EC)(r,e.shape);return{x:()=>(0,t_.G)(e,i)}}},tO={kernelName:p.e07,gradFunc:e=>({x:()=>(0,$.P)(e)})},tP={kernelName:p.bV0,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,x.W)((0,v.h)(e,(0,m.d)((0,tw.s)(n,1.5),2)))}}},tM=(0,H.op)({logicalNot_:function(e){let t=(0,V._1)(e,"x","logicalNot","bool");return z.BV.runKernel(p.VfG,{x:t})}}),tL={kernelName:p.PhF,inputsToSave:["condition"],gradFunc:(e,t)=>{let[n]=t;return{condition:()=>(0,g.p)((0,$.P)(n),"float32"),t:()=>(0,m.d)(e,(0,g.p)(n,e.dtype)),e:()=>(0,m.d)(e,(0,g.p)(tM(n),e.dtype))}}};var tB=n(97184);let tU={kernelName:p.oFR,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=(0,eJ.p)(n,(0,w.i)(0)),r=(0,w.i)(tB.y),i=(0,w.i)(tB.$),a=(0,m.d)(e,i),o=(0,m.d)((0,m.d)(e,r),(0,e$.Q)((0,g.p)(n,"float32")));return(0,eo.a)(t,a,o)}}}},tz={kernelName:p.a5O,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(e,(0,m.d)(n,(0,I.l)((0,w.i)(1),n)))}}},tV={kernelName:p.i5y,gradFunc:e=>({x:()=>(0,$.P)(e)})},tW=(0,H.op)({cos_:function(e){let t=(0,V._1)(e,"x","cos","float32");return z.BV.runKernel(p.mc4,{x:t})}}),tj={kernelName:p.RQH,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(tW((0,g.p)(n,"float32")),e)}}},tH=(0,H.op)({cosh_:function(e){let t=(0,V._1)(e,"x","cosh","float32");return z.BV.runKernel(p.TR1,{x:t})}}),tK={kernelName:p.wYB,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(tH((0,g.p)(n,"float32")),e)}}};var tG=n(93649),tX=n(96614);let tq={kernelName:p.p2w,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{begin:i,size:a}=n,o=r.shape,[s,l]=(0,tX.parseSliceParams)(r,i,a),u=[];for(let t=0;t<e.rank;t++)u.push([s[t],o[t]-s[t]-l[t]]);return{x:()=>(0,tG.v)(e,u)}}},tY={kernelName:p.Gcp,outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{dim:i}=n,a=(0,m.d)(e,r);return{logits:()=>(0,I.l)(a,(0,m.d)((0,A.S)(a,[i],!0),r))}}};var tQ=n(95986);let tJ={kernelName:p.MRv,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(e,(0,tQ.X)(n))}}},tZ=(0,H.op)({batchToSpaceND_:function(e,t,n){let r=(0,V._1)(e,"x","batchToSpaceND"),i=t.reduce((e,t)=>e*t);return W.hu(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),W.hu(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),W.hu(r.shape[0]%i==0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${i}`),z.BV.runKernel(p.zws,{x:r},{blockShape:t,crops:n})}}),t0={kernelName:p.TQc,gradFunc:(e,t,n)=>{let{blockShape:r,paddings:i}=n;return{x:()=>tZ(e,r,i)}}};var t1=n(8863);let t2={kernelName:p.L8s,gradFunc:(e,t,n)=>{let{axis:r}=n;return{x:()=>(0,t1.z)(e,r)}}},t3={kernelName:p.FKq,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,v.h)(e,(0,m.d)((0,k._)((0,g.p)(n,"float32")),2))}}},t4={kernelName:p.bK0,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(e,(0,m.d)((0,g.p)(n,"float32"),2))}}},t5={kernelName:p._tC,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=(0,w.i)(2);return{a:()=>(0,m.d)(e,(0,m.d)(i,(0,I.l)(n,r))),b:()=>(0,m.d)(e,(0,m.d)(i,(0,I.l)(r,n)))}}},t8={kernelName:p.h8e,gradFunc:e=>({x:()=>(0,$.P)(e)})},t6={kernelName:p.Tr8,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=C.assertAndGetBroadcastShape(n.shape,r.shape);return{a:()=>{let t=e,r=C.getReductionAxes(n.shape,i);return r.length>0&&(t=(0,A.S)(t,r)),(0,N.X)(t,n.shape)},b:()=>{let t=e,n=C.getReductionAxes(r.shape,i);return n.length>0&&(t=(0,A.S)(t,n)),(0,N.X)((0,x.W)(t),r.shape)}}}},t7={kernelName:p.GBy,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,i=r.shape.slice(),{axis:a}=n;(0,W.EC)(a,r.shape).forEach(e=>{i[e]=1});let o=(0,N.X)(e,i),s=(0,m.d)(o,(0,ti.i)(r.shape,"float32"));return{x:()=>s}}},t9={kernelName:p.sEM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,v.h)(e,(0,E.h)(tW(n)))}}},ne={kernelName:p.MIZ,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)((0,I.l)((0,w.i)(1),(0,E.h)(n)),e)}}},nt={kernelName:p.n9L,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{reps:i}=n;return{x:()=>{let t=(0,$.P)(r);if(1===r.rank)for(let n=0;n<i[0];++n)t=(0,P.I)(t,(0,tl.t)(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<i[0];++n)for(let a=0;a<i[1];++a)t=(0,P.I)(t,(0,tl.t)(e,[n*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<i[0];++n)for(let a=0;a<i[1];++a)for(let o=0;o<i[2];++o)t=(0,P.I)(t,(0,tl.t)(e,[n*r.shape[0],a*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(4===r.rank)for(let n=0;n<i[0];++n)for(let a=0;a<i[1];++a)for(let o=0;o<i[2];++o)for(let s=0;s<i[3];++s)t=(0,P.I)(t,(0,tl.t)(e,[n*r.shape[0],a*r.shape[1],o*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return t}}}},nn={kernelName:p.G3Y,gradFunc:(e,t,n)=>{let{perm:r}=n,i=eE.LJ(r);return{x:()=>(0,eS.p)(e,i)}}},nr={kernelName:p.ToN,gradFunc:(e,t,n)=>{let{axis:r}=n;return{value:()=>(0,eV.k)(e,r)}}};var ni=n(4968),na=n(83655),no=n(92673);let ns={kernelName:p.Qvg,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(function(e,t){let n=(0,no.g)(t,(0,$.P)(t)),r=(0,na.I)(e,n),i=(0,er.b)(t,(0,w.i)(0,"int32")),a=r.rank-i.rank;for(let e=0;e<a;++e)i=(0,ni.d)(i,e+1);i=(0,ea.H)(i,(0,ti.i)(r.shape,"bool"));let o=(0,$.P)(r);return(0,eo.a)(i,r,o)})(e,n)}}},nl={kernelName:p.RuY,gradFunc:e=>({x:()=>(0,$.P)(e)})};var nu=n(29922);for(let e of[y,S,T,R,D,_,F,O,M,L,B,U,G,q,Q,Z,ee,et,en,es,el,ec,eg,ef,ey,ex,ek,eT,eA,eR,tT,eD,e_,eF,eO,eP,eL,eM,ez,ej,eG,eX,eq,eY,eQ,eZ,e0,e1,e2,e4,e6,e6,e9,tt,tr,ta,to,ts,tu,td,th,tf,tg,tm,ty,tv,tv,tk,tE,tS,tC,tN,tA,tR,tD,t$,tF,tO,tP,tL,tU,tz,tV,tj,tK,tq,tY,tJ,t0,t0,t2,t2,t3,t5,t4,t8,t6,t7,t9,ne,nt,nn,nr,ns,nl])(0,nu.Li)(e);var nc=n(99044),nd=n(86150);(0,nd.t3)().prototype.abs=function(){return this.throwIfDisposed(),(0,nc.W)(this)};let nh=(0,H.op)({acos_:function(e){let t=(0,V._1)(e,"x","acos");return z.BV.runKernel(p.VGw,{x:t})}});(0,nd.t3)().prototype.acos=function(){return this.throwIfDisposed(),nh(this)};let nf=(0,H.op)({acosh_:function(e){let t=(0,V._1)(e,"x","acosh");return z.BV.runKernel(p.SpW,{x:t})}});(0,nd.t3)().prototype.acosh=function(){return this.throwIfDisposed(),nf(this)},(0,nd.t3)().prototype.add=function(e){return this.throwIfDisposed(),(0,P.I)(this,e)};var np=n(45195);(0,nd.t3)().prototype.all=function(e,t){return this.throwIfDisposed(),(0,np.$)(this,e,t)};var ng=n(6591);(0,nd.t3)().prototype.any=function(e,t){return this.throwIfDisposed(),(0,ng.Y)(this,e,t)};var nm=n(21231);(0,nd.t3)().prototype.argMax=function(e){return this.throwIfDisposed(),(0,nm.N)(this,e)};let nb=(0,H.op)({argMin_:function(e,t=0){let n=(0,V._1)(e,"x","argMin");return z.BV.runKernel(p.aJk,{x:n},{axis:t})}});(0,nd.t3)().prototype.argMin=function(e){return this.throwIfDisposed(),nb(this,e)},(0,nd.t3)().prototype.asScalar=function(){return this.throwIfDisposed(),(0,W.hu)(1===this.size,()=>"The array must have only 1 element."),(0,N.X)(this,[])},(0,nd.t3)().prototype.asType=function(e){return this.throwIfDisposed(),(0,g.p)(this,e)},(0,nd.t3)().prototype.as1D=function(){return this.throwIfDisposed(),(0,N.X)(this,[this.size])},(0,nd.t3)().prototype.as2D=function(e,t){return this.throwIfDisposed(),(0,N.X)(this,[e,t])},(0,nd.t3)().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),(0,N.X)(this,[e,t,n])},(0,nd.t3)().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),(0,N.X)(this,[e,t,n,r])},(0,nd.t3)().prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),(0,N.X)(this,[e,t,n,r,i])};let ny=(0,H.op)({asin_:function(e){let t=(0,V._1)(e,"x","asin");return z.BV.runKernel(p.M2y,{x:t})}});(0,nd.t3)().prototype.asin=function(){return this.throwIfDisposed(),ny(this)};let nv=(0,H.op)({asinh_:function(e){let t=(0,V._1)(e,"x","asinh");return z.BV.runKernel(p.qw7,{x:t})}});(0,nd.t3)().prototype.asinh=function(){return this.throwIfDisposed(),nv(this)};let nx=(0,H.op)({atan_:function(e){let t=(0,V._1)(e,"x","atan");return z.BV.runKernel(p.jMg,{x:t})}});(0,nd.t3)().prototype.atan=function(){return this.throwIfDisposed(),nx(this)};var nw=n(45420);let nk=(0,H.op)({atan2_:function(e,t){let n=(0,V._1)(e,"a","atan2"),r=(0,V._1)(t,"b","atan2");[n,r]=(0,nw.makeTypesMatch)(n,r);let i={a:n,b:r};return z.BV.runKernel(p.QCc,i)}});(0,nd.t3)().prototype.atan2=function(e){return this.throwIfDisposed(),nk(this,e)};let nE=(0,H.op)({atanh_:function(e){let t=(0,V._1)(e,"x","atanh");return z.BV.runKernel(p.Oyi,{x:t})}});(0,nd.t3)().prototype.atanh=function(){return this.throwIfDisposed(),nE(this)};var nI=n(72126);(0,nd.t3)().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),(0,nI.w)(this,e,t,n,r)},(0,nd.t3)().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),tZ(this,e,t)};var nS=n(60592);(0,nd.t3)().prototype.batchNorm=function(e,t,n,r,i){return this.throwIfDisposed(),(0,nS.t)(this,e,t,n,r,i)};var nT=n(25896);(0,nd.t3)().prototype.broadcastTo=function(e){return this.throwIfDisposed(),(0,nT.U)(this,e)},(0,nd.t3)().prototype.cast=function(e){return this.throwIfDisposed(),(0,g.p)(this,e)};let nC=(0,H.op)({ceil_:function(e){let t=(0,V._1)(e,"x","ceil","float32");return z.BV.runKernel(p.gJX,{x:t})}});(0,nd.t3)().prototype.ceil=function(){return this.throwIfDisposed(),nC(this)};var nN=n(57463);(0,nd.t3)().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),(0,nN.i)(this,e,t)},(0,nd.t3)().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof nd.es&&(e=[e]),(0,t1.z)([this,...e],t)};var nA=n(26412);(0,nd.t3)().prototype.conv1d=function(e,t,n,r,i,a){return this.throwIfDisposed(),(0,nA.P)(this,e,t,n,r,i,a)};var nR=n(35883);(0,nd.t3)().prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),(0,nR.b)(this,e,t,n,r,i)},(0,nd.t3)().prototype.conv2d=function(e,t,n,r,i,a){return this.throwIfDisposed(),(0,ep.T)(this,e,t,n,r,i,a)},(0,nd.t3)().prototype.cos=function(){return this.throwIfDisposed(),tW(this)},(0,nd.t3)().prototype.cosh=function(){return this.throwIfDisposed(),tH(this)},(0,nd.t3)().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),tI(this,e,t,n)},(0,nd.t3)().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),eI(this,e,t,n)};let nD=(0,H.op)({depthToSpace_:function(e,t,n="NHWC"){let r=(0,V._1)(e,"x","depthToSpace","float32"),i="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return W.hu(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),W.hu(i*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${t}  for depthToSpace with input shape
    ${r.shape}`),W.hu(a*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${t} for depthToSpace with input shape
        ${r.shape}`),W.hu(o%(t*t)==0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${o} for depthToSpace with input shape ${r.shape}`),z.BV.runKernel(p.T0n,{x:r},{blockSize:t,dataFormat:n})}});(0,nd.t3)().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),nD(this,e,t)};var n$=n(52489);(0,nd.t3)().prototype.depthwiseConv2d=function(e,t,n,r,i,a){return this.throwIfDisposed(),(0,n$.B)(this,e,t,n,r,i,a)};let n_=(0,H.op)({dilation2d_:function(e,t,n,r,i=[1,1],a="NHWC"){let o=(0,V._1)(e,"x","dilation2d"),s=(0,V._1)(t,"filter","dilation2d");W.hu(3===o.rank||4===o.rank,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),W.hu(3===s.rank,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),W.hu("NHWC"===a,()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let l=o,u=!1;3===o.rank&&(l=(0,N.X)(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0),W.hu(l.shape[3]===s.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${s.shape[2]}`);let c={x:l,filter:s},d=z.BV.runKernel(p.p4S,c,{strides:n,pad:r,dilations:i});return u?(0,N.X)(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});(0,nd.t3)().prototype.dilation2d=function(e,t,n,r,i){return this.throwIfDisposed(),n_(this,e,t,n,r,i)};let nF=(0,H.op)({divNoNan_:function(e,t){let n=(0,V._1)(e,"a","div"),r=(0,V._1)(t,"b","div");[n,r]=(0,nw.makeTypesMatch)(n,r);let i=(0,v.h)(n,r),a=(0,$.P)(i),o=(0,e5.D)(r,a);return(0,eo.a)(o,a,i)}});(0,nd.t3)().prototype.divNoNan=function(e){return this.throwIfDisposed(),nF(this,e)},(0,nd.t3)().prototype.div=function(e){return this.throwIfDisposed(),(0,v.h)(this,e)};let nO=(0,H.op)({dot_:function(e,t){let n=(0,V._1)(e,"t1","dot"),r=(0,V._1)(t,"t2","dot");W.hu((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);let i=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];if(W.hu(i===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${a}.`),1===n.rank&&1===r.rank){let e=(0,N.X)(n,[1,-1]),t=(0,N.X)(r,[-1,1]),i=(0,Y.O)(e,t);return(0,N.X)(i,[])}if(1===n.rank&&2===r.rank){let e=(0,N.X)(n,[1,-1]),t=(0,N.X)(r,[r.shape[0],r.shape[1]]),i=(0,Y.O)(e,t);return(0,N.X)(i,[i.size])}if(2===n.rank&&1===r.rank){let e=(0,N.X)(r,[-1,1]),t=(0,Y.O)(n,e);return(0,N.X)(t,[t.size])}{let e=(0,N.X)(r,[r.shape[0],r.shape[1]]);return(0,Y.O)(n,e)}}});(0,nd.t3)().prototype.dot=function(e){return this.throwIfDisposed(),nO(this,e)};var nP=n(74077);(0,nd.t3)().prototype.elu=function(){return this.throwIfDisposed(),(0,nP.p)(this)},(0,nd.t3)().prototype.equal=function(e){return this.throwIfDisposed(),(0,e5.D)(this,e)};var nM=n(42710);(0,nd.t3)().prototype.erf=function(){return this.throwIfDisposed(),(0,nM.q)(this)};var nL=n(95872);let nB=(0,H.op)({euclideanNorm_:function(e,t=null,n=!1){return(0,nL.K)(e,"euclidean",t,n)}});(0,nd.t3)().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),nB(this,e,t)},(0,nd.t3)().prototype.exp=function(){return this.throwIfDisposed(),(0,e$.Q)(this)},(0,nd.t3)().prototype.expandDims=function(e){return this.throwIfDisposed(),(0,ni.d)(this,e)};let nU=(0,H.op)({expm1_:function(e){let t=(0,V._1)(e,"x","expm1");return z.BV.runKernel(p.Y0y,{x:t})}});(0,nd.t3)().prototype.expm1=function(){return this.throwIfDisposed(),nU(this)};var nz=n(36368);(0,nd.t3)().prototype.fft=function(){return this.throwIfDisposed(),(0,nz.k)(this)},(0,nd.t3)().prototype.flatten=function(){return this.throwIfDisposed(),(0,N.X)(this,[this.size])},(0,nd.t3)().prototype.floor=function(){return this.throwIfDisposed(),(0,tc.G)(this)};var nV=n(77576);(0,nd.t3)().prototype.floorDiv=function(e){return this.throwIfDisposed(),(0,nV.q)(this,e)},(0,nd.t3)().prototype.gather=function(e,t,n){return this.throwIfDisposed(),(0,na.I)(this,e,t,n)},(0,nd.t3)().prototype.greaterEqual=function(e){return this.throwIfDisposed(),(0,er.b)(this,e)},(0,nd.t3)().prototype.greater=function(e){return this.throwIfDisposed(),(0,eJ.p)(this,e)};var nW=n(93267);(0,nd.t3)().prototype.ifft=function(){return this.throwIfDisposed(),(0,nW.S)(this)};var nj=n(33170);(0,nd.t3)().prototype.irfft=function(){return this.throwIfDisposed(),(0,nj.w)(this)};let nH=(0,H.op)({isFinite_:function(e){let t=(0,V._1)(e,"x","isFinite");return z.BV.runKernel(p.avt,{x:t})}});(0,nd.t3)().prototype.isFinite=function(){return this.throwIfDisposed(),nH(this)};let nK=(0,H.op)({isInf_:function(e){let t=(0,V._1)(e,"x","isInf");return z.BV.runKernel(p.iWB,{x:t})}});(0,nd.t3)().prototype.isInf=function(){return this.throwIfDisposed(),nK(this)};let nG=(0,H.op)({isNaN_:function(e){let t=(0,V._1)(e,"x","isNaN");return z.BV.runKernel(p.r7n,{x:t})}});(0,nd.t3)().prototype.isNaN=function(){return this.throwIfDisposed(),nG(this)};var nX=n(16437);(0,nd.t3)().prototype.leakyRelu=function(e){return this.throwIfDisposed(),(0,nX.h)(this,e)},(0,nd.t3)().prototype.lessEqual=function(e){return this.throwIfDisposed(),(0,ei.z)(this,e)},(0,nd.t3)().prototype.less=function(e){return this.throwIfDisposed(),(0,e7.d)(this,e)};let nq=(0,H.op)({localResponseNormalization_:function(e,t=5,n=1,r=1,i=.5){let a=(0,V._1)(e,"x","localResponseNormalization");W.hu(4===a.rank||3===a.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),W.hu(W.GN(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let o=a,s=!1;3===a.rank&&(s=!0,o=(0,N.X)(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let l={x:o},u=z.BV.runKernel(p.eZ0,l,{depthRadius:t,bias:n,alpha:r,beta:i});return s?(0,N.X)(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});(0,nd.t3)().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),nq(this,e,t,n,r)};var nY=n(64310),nQ=n(34779);let nJ=(0,H.op)({logSigmoid_:function(e){let t=(0,V._1)(e,"x","logSigmoid");return(0,nY.cb)(e=>({value:(0,x.W)((0,nQ.W)((0,x.W)(e))),gradFunc:t=>(0,m.d)(t,(0,tQ.X)((0,x.W)(e)))}))(t)}});(0,nd.t3)().prototype.logSigmoid=function(){return this.throwIfDisposed(),nJ(this)};var nZ=n(28152);(0,nd.t3)().prototype.logSoftmax=function(e){return this.throwIfDisposed(),(0,nZ.C)(this,e)};var n0=n(51555);(0,nd.t3)().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),(0,n0.l)(this,e,t)},(0,nd.t3)().prototype.log=function(){return this.throwIfDisposed(),(0,tx.c)(this)};var n1=n(59865);(0,nd.t3)().prototype.log1p=function(){return this.throwIfDisposed(),(0,n1.K)(this)},(0,nd.t3)().prototype.logicalAnd=function(e){return this.throwIfDisposed(),(0,ea.H)(this,e)},(0,nd.t3)().prototype.logicalNot=function(){return this.throwIfDisposed(),tM(this)};let n2=(0,H.op)({logicalOr_:function(e,t){let n=(0,V._1)(e,"a","logicalOr","bool"),r=(0,V._1)(t,"b","logicalOr","bool");return(0,C.assertAndGetBroadcastShape)(n.shape,r.shape),z.BV.runKernel(p.MZg,{a:n,b:r})}});(0,nd.t3)().prototype.logicalOr=function(e){return this.throwIfDisposed(),n2(this,e)};let n3=(0,H.op)({logicalXor_:function(e,t){let n=(0,V._1)(e,"a","logicalXor","bool"),r=(0,V._1)(t,"b","logicalXor","bool");return(0,C.assertAndGetBroadcastShape)(n.shape,r.shape),(0,ea.H)(n2(e,t),tM((0,ea.H)(e,t)))}});(0,nd.t3)().prototype.logicalXor=function(e){return this.throwIfDisposed(),n3(this,e)},(0,nd.t3)().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),(0,Y.O)(this,e,t,n)};var n4=n(7761);(0,nd.t3)().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),(0,n4._)(this,e,t,n,r)};var n5=n(23262);(0,nd.t3)().prototype.max=function(e,t){return this.throwIfDisposed(),(0,n5.F)(this,e,t)},(0,nd.t3)().prototype.maximum=function(e){return this.throwIfDisposed(),(0,no.g)(this,e)};var n8=n(60697);(0,nd.t3)().prototype.mean=function(e,t){return this.throwIfDisposed(),(0,n8.J)(this,e,t)};var n6=n(2376);(0,nd.t3)().prototype.min=function(e,t){return this.throwIfDisposed(),(0,n6.V)(this,e,t)};var n7=n(26004);(0,nd.t3)().prototype.minimum=function(e){return this.throwIfDisposed(),(0,n7.L)(this,e)};let n9=(0,H.op)({mirrorPad_:function(e,t,n){W.hu("reflect"===n||"symmetric"===n,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let r=(0,V._1)(e,"x","mirrorPad");if(0===r.rank)throw Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");W.hu(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);let i="reflect"===n?1:0;for(let e=0;e<r.rank;e++)W.hu(2===t[e].length,()=>"Invalid number of paddings. Must be length of 2 each."),W.hu(t[e][0]>=0&&t[e][0]<=r.shape[e]-i&&t[e][1]>=0&&t[e][1]<=r.shape[e]-i,()=>`Padding in dimension ${e} cannot be greater than or equal to ${r.shape[e]-i} or less than 0 for input of shape ${r.shape}`);return z.BV.runKernel(p.jQs,{x:r},{paddings:t,mode:n})}});(0,nd.t3)().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),n9(this,e,t)};let re=(0,H.op)({mod_:function(e,t){let n=(0,V._1)(e,"a","mod"),r=(0,V._1)(t,"b","mod");[n,r]=(0,nw.makeTypesMatch)(n,r);let i={a:n,b:r};return z.BV.runKernel(p.Vbg,i)}});(0,nd.t3)().prototype.mod=function(e){return this.throwIfDisposed(),re(this,e)},(0,nd.t3)().prototype.mul=function(e){return this.throwIfDisposed(),(0,m.d)(this,e)},(0,nd.t3)().prototype.neg=function(){return this.throwIfDisposed(),(0,x.W)(this)},(0,nd.t3)().prototype.norm=function(e,t,n){return this.throwIfDisposed(),(0,nL.K)(this,e,t,n)};var rt=n(21834);(0,nd.t3)().prototype.notEqual=function(e){return this.throwIfDisposed(),(0,rt.Q)(this,e)};var rn=n(88713);(0,nd.t3)().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),(0,rn.l)(this,e,t,n)};var rr=n(18272);(0,nd.t3)().prototype.onesLike=function(){return this.throwIfDisposed(),(0,rr.J)(this)},(0,nd.t3)().prototype.pad=function(e,t){return this.throwIfDisposed(),(0,tG.v)(this,e,t)};let ri=(0,H.op)({pool_:function(e,t,n,r,i,a,o){let s;null==i&&(i=[1,1]),null==a&&(a=1),0===r&&(r="valid");let l=(0,V._1)(e,"x","maxPool"),u=l,c=!1;3===l.rank&&(c=!0,u=(0,N.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),W.hu(j.jT(a,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${i}'`);let d=j.Xw(u.shape,t,a,i,r),h=[d.dilationHeight,d.dilationWidth];s="same"===r?function(e,t){let n=e.map((e,n)=>e+(e-1)*(t[n]-1)).map(e=>e-1),r=n.map(e=>Math.floor(e/2)),i=n.map((e,t)=>e-r[t]);return n.map((e,t)=>[r[t],i[t]])}([d.filterHeight,d.filterWidth],h):[[0,0],[0,0]];let f=1===h[0]&&1===h[1],[p,g]=function(e,t,n){let r=n.map(e=>e[0]),i=n.map(e=>e[1]),a=e.concat(r,i),o=t.map((e,t)=>(e-a[t]%e)%e),s=i.map((e,t)=>e+o[t]);return[t.map((e,t)=>[r[t],s[t]]),t.map((e,t)=>[0,o[t]])]}([d.inHeight,d.inWidth],h,s),m=f?r:"valid",b=f?u:J(u,h,p),y=("avg"===n?()=>(0,nI.w)(b,t,a,m,o):()=>(0,n4._)(b,t,a,m,o))(),v=f?y:tZ(y,h,g);return c?(0,N.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}});(0,nd.t3)().prototype.pool=function(e,t,n,r,i,a){return this.throwIfDisposed(),ri(this,e,t,n,r,i,a)},(0,nd.t3)().prototype.pow=function(e){return this.throwIfDisposed(),(0,tw.s)(this,e)};var ra=n(39427);(0,nd.t3)().prototype.prelu=function(e){return this.throwIfDisposed(),(0,ra.A)(this,e)};let ro=(0,H.op)({prod_:function(e,t=null,n=!1){let r=(0,V._1)(e,"x","prod");"bool"===r.dtype&&(r=(0,g.p)(r,"int32"));let i={x:r};return z.BV.runKernel(p.DlI,i,{axis:t,keepDims:n})}});(0,nd.t3)().prototype.prod=function(e,t){return this.throwIfDisposed(),ro(this,e,t)};let rs=(0,H.op)({reciprocal_:function(e){let t=(0,V._1)(e,"x","reciprocal");return z.BV.runKernel(p.$HU,{x:t})}});(0,nd.t3)().prototype.reciprocal=function(){return this.throwIfDisposed(),rs(this)};var rl=n(50114);(0,nd.t3)().prototype.relu=function(){return this.throwIfDisposed(),(0,rl.U)(this)};var ru=n(96762);(0,nd.t3)().prototype.relu6=function(){return this.throwIfDisposed(),(0,ru.b)(this)},(0,nd.t3)().prototype.reshapeAs=function(e){return this.throwIfDisposed(),(0,N.X)(this,e.shape)},(0,nd.t3)().prototype.reshape=function(e){return this.throwIfDisposed(),(0,N.X)(this,e)};var rc=n(91517);(0,nd.t3)().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),(0,rc.I)(this,e,t,n)};var rd=n(21214);(0,nd.t3)().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),(0,rd.j)(this,e,t,n)},(0,nd.t3)().prototype.reverse=function(e){return this.throwIfDisposed(),(0,t_.G)(this,e)};var rh=n(47797);(0,nd.t3)().prototype.rfft=function(){return this.throwIfDisposed(),(0,rh.Q)(this)};var rf=n(51100);(0,nd.t3)().prototype.round=function(){return this.throwIfDisposed(),(0,rf.N)(this)},(0,nd.t3)().prototype.rsqrt=function(){return this.throwIfDisposed(),eB(this)};var rp=n(90615);(0,nd.t3)().prototype.selu=function(){return this.throwIfDisposed(),(0,rp.U)(this)};var rg=n(58661);(0,nd.t3)().prototype.separableConv2d=function(e,t,n,r,i,a){return this.throwIfDisposed(),(0,rg.U)(this,e,t,n,r,i,a)},(0,nd.t3)().prototype.sigmoid=function(){return this.throwIfDisposed(),(0,tQ.X)(this)};let rm=(0,H.op)({sign_:function(e){let t=(0,V._1)(e,"x","sign");return z.BV.runKernel(p.i5y,{x:t})}});(0,nd.t3)().prototype.sign=function(){return this.throwIfDisposed(),rm(this)},(0,nd.t3)().prototype.sin=function(){return this.throwIfDisposed(),ev(this)},(0,nd.t3)().prototype.sinh=function(){return this.throwIfDisposed(),ew(this)},(0,nd.t3)().prototype.slice=function(e,t){return this.throwIfDisposed(),(0,tl.t)(this,e,t)};var rb=n(63919);(0,nd.t3)().prototype.softmax=function(e){return this.throwIfDisposed(),(0,rb.X)(this,e)},(0,nd.t3)().prototype.softplus=function(){return this.throwIfDisposed(),(0,nQ.W)(this)},(0,nd.t3)().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),J(this,e,t)},(0,nd.t3)().prototype.split=function(e,t){return this.throwIfDisposed(),(0,eu.V)(this,e,t)},(0,nd.t3)().prototype.sqrt=function(){return this.throwIfDisposed(),(0,k._)(this)},(0,nd.t3)().prototype.square=function(){return this.throwIfDisposed(),(0,E.h)(this)};var ry=n(67436);(0,nd.t3)().prototype.squaredDifference=function(e){return this.throwIfDisposed(),(0,ry.$)(this,e)};var rv=n(48772);(0,nd.t3)().prototype.squeeze=function(e){return this.throwIfDisposed(),(0,rv.L)(this,e)},(0,nd.t3)().prototype.stack=function(e,t){this.throwIfDisposed();let n=e instanceof nd.es?[this,e]:[this,...e];return(0,eV.k)(n,t)},(0,nd.t3)().prototype.step=function(e){return this.throwIfDisposed(),(0,b.N)(this,e)};let rx=(0,H.op)({stridedSlice_:function(e,t,n,r,i=0,a=0,o=0,s=0,l=0){let u=(0,V._1)(e,"x","stridedSlice","string_or_numeric");return z.BV.runKernel(p.jQk,{x:u},{begin:t,end:n,strides:r,beginMask:i,endMask:a,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l})}});(0,nd.t3)().prototype.stridedSlice=function(e,t,n,r,i,a,o,s){return this.throwIfDisposed(),rx(this,e,t,n,r,i,a,o,s)},(0,nd.t3)().prototype.sub=function(e){return this.throwIfDisposed(),(0,I.l)(this,e)},(0,nd.t3)().prototype.sum=function(e,t){return this.throwIfDisposed(),(0,A.S)(this,e,t)};let rw=(0,H.op)({tan_:function(e){let t=(0,V._1)(e,"x","tan","float32");return z.BV.runKernel(p.sEM,{x:t})}});(0,nd.t3)().prototype.tan=function(){return this.throwIfDisposed(),rw(this)};var rk=n(13831);(0,nd.t3)().prototype.tanh=function(){return this.throwIfDisposed(),(0,rk.A)(this)},(0,nd.t3)().prototype.tile=function(e){return this.throwIfDisposed(),(0,eU.G)(this,e)},(0,nd.t3)().prototype.toBool=function(){return this.throwIfDisposed(),(0,g.p)(this,"bool")},(0,nd.t3)().prototype.toFloat=function(){return this.throwIfDisposed(),(0,g.p)(this,"float32")},(0,nd.t3)().prototype.toInt=function(){return this.throwIfDisposed(),(0,g.p)(this,"int32")};let rE=(0,H.op)({topk_:function(e,t=1,n=!0){let r=(0,V._1)(e,"x","topk");if(0===r.rank)throw Error("topk() expects the input to be of rank 1 or higher");let i=r.shape[r.shape.length-1];if(t<0)throw Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>i)throw Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${t}`);let[a,o]=z.BV.runKernel(p.cWu,{x:r},{k:t,sorted:n});return{values:a,indices:o}}});(0,nd.t3)().prototype.topk=function(e,t){return this.throwIfDisposed(),rE(this,e,t)},(0,nd.t3)().prototype.transpose=function(e){return this.throwIfDisposed(),(0,eS.p)(this,e)};let rI=(0,H.op)({unique_:function(e,t=0){let n=(0,V._1)(e,"x","unique","string_or_numeric");(0,W.hu)(n.rank>0,()=>"The input tensor must be at least 1D");let[r,i]=z.BV.runKernel(p.kpP,{x:n},{axis:t});return{values:r,indices:i}}});(0,nd.t3)().prototype.unique=function(e){return this.throwIfDisposed(),rI(this,e)},(0,nd.t3)().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),eW(this,e,t)},(0,nd.t3)().prototype.unstack=function(e){return this.throwIfDisposed(),(0,tb.H)(this,e)},(0,nd.t3)().prototype.where=function(e,t){return this.throwIfDisposed(),(0,eo.a)(e,this,t)},(0,nd.t3)().prototype.zerosLike=function(){return this.throwIfDisposed(),(0,$.P)(this)};var rS=n(95241);(0,f.OBj)().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,rS.kS),n(22380),n(79878),n(30163),n(51957),n(30632),n(72978),n(18030),n(19914),n(6897),n(64579),n(10525),n(64580);var rT=n(70738);n(85903),n(48234);var rC=n(55690);(0,f.OBj)().registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}),(i=u||(u={}))[i.DT_INVALID=0]="DT_INVALID",i[i.DT_FLOAT=1]="DT_FLOAT",i[i.DT_DOUBLE=2]="DT_DOUBLE",i[i.DT_INT32=3]="DT_INT32",i[i.DT_UINT8=4]="DT_UINT8",i[i.DT_INT16=5]="DT_INT16",i[i.DT_INT8=6]="DT_INT8",i[i.DT_STRING=7]="DT_STRING",i[i.DT_COMPLEX64=8]="DT_COMPLEX64",i[i.DT_INT64=9]="DT_INT64",i[i.DT_BOOL=10]="DT_BOOL",i[i.DT_QINT8=11]="DT_QINT8",i[i.DT_QUINT8=12]="DT_QUINT8",i[i.DT_QINT32=13]="DT_QINT32",i[i.DT_BFLOAT16=14]="DT_BFLOAT16",i[i.DT_QINT16=15]="DT_QINT16",i[i.DT_QUINT16=16]="DT_QUINT16",i[i.DT_UINT16=17]="DT_UINT16",i[i.DT_COMPLEX128=18]="DT_COMPLEX128",i[i.DT_HALF=19]="DT_HALF",i[i.DT_RESOURCE=20]="DT_RESOURCE",i[i.DT_VARIANT=21]="DT_VARIANT",i[i.DT_UINT32=22]="DT_UINT32",i[i.DT_UINT64=23]="DT_UINT64",i[i.DT_FLOAT_REF=101]="DT_FLOAT_REF",i[i.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",i[i.DT_INT32_REF=103]="DT_INT32_REF",i[i.DT_UINT8_REF=104]="DT_UINT8_REF",i[i.DT_INT16_REF=105]="DT_INT16_REF",i[i.DT_INT8_REF=106]="DT_INT8_REF",i[i.DT_STRING_REF=107]="DT_STRING_REF",i[i.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",i[i.DT_INT64_REF=109]="DT_INT64_REF",i[i.DT_BOOL_REF=110]="DT_BOOL_REF",i[i.DT_QINT8_REF=111]="DT_QINT8_REF",i[i.DT_QUINT8_REF=112]="DT_QUINT8_REF",i[i.DT_QINT32_REF=113]="DT_QINT32_REF",i[i.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",i[i.DT_QINT16_REF=115]="DT_QINT16_REF",i[i.DT_QUINT16_REF=116]="DT_QUINT16_REF",i[i.DT_UINT16_REF=117]="DT_UINT16_REF",i[i.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",i[i.DT_HALF_REF=119]="DT_HALF_REF",i[i.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",i[i.DT_VARIANT_REF=121]="DT_VARIANT_REF",i[i.DT_UINT32_REF=122]="DT_UINT32_REF",i[i.DT_UINT64_REF=123]="DT_UINT64_REF",(o=(a=c||(c={})).CheckpointFormatVersion||(a.CheckpointFormatVersion={}))[o.LEGACY=0]="LEGACY",o[o.V1=1]="V1",o[o.V2=2]="V2",n(96434).Buffer,n(3850);var rN=n(59900);function rA(e){return null===e?null:rR(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function rR(e){let t=!1;if(f.OBj().get("IS_BROWSER"))t=e instanceof TextDecoder;else{let{StringDecoder:r}=n(34977);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof f.esB)&&!(e instanceof Promise)&&!t)}function rD(e){return e instanceof f.esB?{value:e.clone(),recurse:!1}:rR(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class r${constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw RangeError("Can't create ring buffer of capacity < 1.");this.data=Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(let t of e)this.push(t)}pop(){if(this.isEmpty())throw RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);let e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw RangeError("Ring buffer is empty.");let e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw RangeError("Ring buffer is empty.");let t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class r_ extends r${constructor(){super(r_.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){let e=2*this.capacity,t=Array(e),n=this.length();for(let e=0;e<n;e++)t[e]=this.get(this.wrap(this.begin+e));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}r_.INITIAL_CAPACITY=32;class rF{async toArray(){let e=[],t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){let e=this.prefetch(100),t=[],n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)n=e((t=await this.next()).value)}handleErrors(e){return new rW(this,e)}filter(e){return new rz(this,e)}map(e){return new rV(this,e)}mapAsync(e){return new rj(this,e)}serialMapAsync(e){return new rj(this,e).serial()}flatmap(e){return new rK(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(e=>!0===e)}rowMajorBatch(e,t=!0){return new rU(this,e,t)}columnMajorBatch(e,t=!0,n=rA){return this.rowMajorBatch(e,t).map(e=>(function(e,t=rA){return function e(t,n,r=new Set){let i=t[0];if(r.has(i))throw Error("Circular references are not supported.");let a=n(t);if(a.recurse&&null!==a.value)throw Error("A deep zip function may not return both a value and recurse=true.");if(!a.recurse)return a.value;if(rR(i)){let a=Array.isArray(i)?[]:{};for(let o in r.add(i),i){let i=e(t.map(e=>e[o]),n,r);a[o]=i}return r.delete(i),a}throw Error(`Can't recurse into non-iterable type: ${i}`)}(e,t)})(e,n))}concatenate(e,t){return new rG(new rO([this,e]),t)}take(e){return e<0||null==e?this:new rB(this,e)}skip(e){return e<0||null==e?this:new rL(this,e)}prefetch(e){return new rX(this,e)}shuffle(e,t){return new rq(this,e,t)}serial(){return new rM(this)}}class rO extends rF{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};let e=this.items[this.trav];return this.trav++,{value:function e(t,n,r=new Map,i=new Set){if(null==t)return null;if("function"==typeof Blob&&t instanceof Blob)return t.slice();if(i.has(t))throw Error("Circular references are not supported.");if(r.has(t))return r.get(t);let a=n(t);if(a.recurse&&null!==a.value)throw Error("A deep map function may not return both a value and recurse=true.");if(!a.recurse)return r.set(t,a.value),a.value;if(rR(t)){let a=Array.isArray(t)?[]:{};for(let o in i.add(t),t){let s=e(t[o],n,r,i);a[o]=s}return i.delete(t),t.__proto__&&(a.__proto__=t.__proto__),a}throw Error(`Can't recurse into non-iterable type: ${t}`)}(e,rD),done:!1}}}class rP extends rF{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message=`Error thrown while iterating through a dataset: ${e.message}`,e}}}class rM extends rF{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class rL extends rF{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){let e=await this.upstream.next();if(e.done)return e;f.B90(e.value)}return this.upstream.next()}}class rB extends rF{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class rU extends rF{constructor(e,t,n=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){let e=[];for(;e.length<this.batchSize;){let t=await this.upstream.next();if(t.done){if(this.enableSmallLastBatch&&e.length>0)return{value:e,done:!1};return{value:null,done:!0}}e.push(t.value)}return{value:e,done:!1}}}class rz extends rF{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){let e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;f.B90(e.value)}}}class rV extends rF{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=f.piX.getTensorsInContainer(e.value),n=this.transform(e.value),r=f.piX.getTensorsInContainer(n);for(let e of t)f.piX.isTensorInList(e,r)||e.dispose();return{value:n,done:!1}}}class rW extends rF{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class rj extends rF{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=f.piX.getTensorsInContainer(e.value),n=await this.transform(e.value),r=f.piX.getTensorsInContainer(n);for(let e of t)f.piX.isTensorInList(e,r)||e.dispose();return{value:n,done:!1}}}class rH extends rF{constructor(){super(),this.outputQueue=new r_,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class rK extends rH{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){let e=await this.upstream.next();if(e.done)return!1;let t=f.piX.getTensorsInContainer(e.value),n=this.transform(e.value),r=f.piX.getTensorsInContainer(n);for(let e of(this.outputQueue.pushAll(n),t))f.piX.isTensorInList(e,r)||e.dispose();return!0}}class rG extends rF{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){let e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}let t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}(s=d||(d={}))[s.FAIL=0]="FAIL",s[s.SHORTEST=1]="SHORTEST",s[s.LONGEST=2]="LONGEST";class rX extends rF{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new r$(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){let e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class rq extends rX{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=rN.alea(n||f.D5U.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){let e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class rY{constructor(){this.size=null}batch(e,t=!0){let n=this;return f.D5U.assert(e>0,()=>`batchSize needs to be positive, but it is
      ${e}`),rQ(async()=>(await n.iterator()).columnMajorBatch(e,t,rJ),this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e))}concatenate(e){let t=this;return rQ(async()=>(await t.iterator()).concatenate(await e.iterator()),this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null)}filter(e){let t=this;return rQ(async()=>(await t.iterator()).filter(t=>f.lub(()=>e(t))),this.size===1/0?1/0:null)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){let t=this;return rQ(async()=>(await t.iterator()).map(t=>f.lub(()=>e(t))),this.size)}mapAsync(e){let t=this;return rQ(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(null==e)throw RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");let t=this;return rQ(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){let t=this;return rQ(async()=>new rG(new rP(async()=>({value:await t.iterator(),done:!1})).take(e),void 0),null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null)}skip(e){let t=this;return rQ(async()=>(await t.iterator()).skip(e),null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null)}shuffle(e,t,n=!0){if(null==e||e<0){if(null==this.size)throw RangeError("`Dataset.shuffle()` requires bufferSize to be specified.");throw RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`)}let r=this,i=rN.alea(t||f.D5U.now().toString());return rQ(async()=>{let t=i.int32();return n&&(t+=i.int32()),(await r.iterator()).shuffle(e,t.toString())},this.size)}take(e){let t=this;return rQ(async()=>(await t.iterator()).take(e),null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null)}async toArray(){if(this.size===1/0)throw Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function rQ(e,t=null){return new class extends rY{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function rJ(e){var t,n;return null===e?null:null==(t=e[0])||null===(n=t)||"object"!=typeof n&&"function"!=typeof n||Array.isArray(t)||"object"==typeof t&&t instanceof f.esB||f.D5U.isTypedArray(t)?{value:function(e){if(0===e.length)throw Error("Can't make a batch of zero elements.");return e[0]instanceof f.esB?f.knu(e):f.XeE(e)}(e),recurse:!1}:{value:null,recurse:!0}}rY.MAX_BUFFER_SIZE=1e4,Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote"),n(96434).Buffer;var rZ=n(43343);let r0=f.GDt.ZA;class r1 extends f.Zuw{nextDataId(){return r1.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new f.JLz(this,(0,f.SRH)())}write(e,t,n){this.firstUse&&(this.firstUse=!1,(0,f.OBj)().get("IS_NODE")&&f.backend_util.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));let r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&f.D5U.isString(n[0])){let i=n.map(e=>f.D5U.encodeString(e));r=this.write(i,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){let t=this.data.get(e);t.refCount++}decRef(e){if(this.data.has(e)){let t=this.data.get(e);t.refCount--}}move(e,t,n,r,i){this.data.set(e,{values:t,dtype:r,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){let{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){let e=this.readSync(n.real.dataId),t=this.readSync(n.imag.dataId);return f.backend_util.mergeRealAndImagArrays(e,t)}return f.D5U.convertBackendValuesAndArrayBuffer(this.data.get(e).values,t)}bufferSync(e){let t=this.readSync(e.dataId);if("string"===e.dtype)try{let n=t.map(e=>f.D5U.decodeString(e));return(0,f.f3b)(e.shape,e.dtype,n)}catch(e){throw Error("Failed to decode encoded string bytes into utf-8")}return(0,f.f3b)(e.shape,e.dtype,t)}makeOutput(e,t,n){return(0,f.SRH)().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){let t=f.D5U.now();return e(),{kernelMs:f.D5U.now()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){(0,rZ.H)([e],"where");let t=this.readSync(e.dataId);return r0(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}r1.nextDataId=0,(0,f.jqO)("cpu",()=>new r1,1);var r2=n(18659);let r3=(0,r2.A)(f.SX0,e=>e>=0?e:Math.exp(e)-1),r4={kernelName:f.SX0,backendName:"cpu",kernelFunc:r3};var r5=n(36583);function r8(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:a}=r;(0,rZ.H)([i],"leakyRelu");let o=f.D5U.sizeFromShape(i.shape),s=n.data.get(i.dataId).values,l=f.D5U.getTypedArrayFromDType("float32",o);for(let e=0;e<s.length;e++)l[e]=s[e]<0?a*s[e]:s[e];return n.makeTensorInfo(i.shape,"float32",l)}let r6={kernelName:f.J$2,backendName:"cpu",kernelFunc:r8};var r7=n(80438);let r9=(0,r7.b)((e,t)=>e<0?t*e:e);function ie(e){let{inputs:t,backend:n}=e,{x:r,alpha:i}=t;(0,rZ.H)([r,i],"prelu");let a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,[s,l]=r9(r.shape,i.shape,a,o,"float32");return n.makeTensorInfo(l,"float32",s)}let it={kernelName:f.o0g,backendName:"cpu",kernelFunc:ie},ir=(0,r2.A)(f.qkr,e=>Math.max(0,e)),ii={kernelName:f.qkr,backendName:"cpu",kernelFunc:ir},ia=(0,r2.A)(f.SbG,e=>Math.min(Math.max(0,e),6)),io={kernelName:f.SbG,backendName:"cpu",kernelFunc:ia};var is=n(94559);function il(e,t,n,r,i){if("linear"===n)return(0,r5.y)({inputs:{x:t},backend:e});if("relu"===n)return ir({inputs:{x:t},backend:e});if("elu"===n)return r3({inputs:{x:t},backend:e});if("relu6"===n)return ia({inputs:{x:t},backend:e});if("prelu"===n)return ie({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return r8({inputs:{x:t},backend:e,attrs:{alpha:i}});if("sigmoid"===n)return(0,is.XD)({inputs:{x:t},backend:e});throw Error(`Activation ${n} has not been implemented for the CPU backend.`)}var iu=n(7152);function ic(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:a}=r,o=f.D5U.sizeFromShape(i.shape),s=f.D5U.inferFromImplicitShape(a,o),l=f.D5U.sizeFromShape(s);f.D5U.assert(o===l,()=>`The new shape (${s}) has ${l} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);let u=n.data.get(i.dataId);if(null!=u.complexTensorInfos){let e=u.complexTensorInfos.real,t=u.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:i.dataId,shape:s,dtype:i.dtype}}let id={kernelName:f.HZH,backendName:"cpu",kernelFunc:ic};function ih(e){let{inputs:t,backend:n,attrs:r}=e,{a:i,b:a}=t,{transposeA:o,transposeB:s}=r;(0,rZ.H)([i,a],"matMul");let l=i.shape.length,u=a.shape.length,c=o?i.shape[l-2]:i.shape[l-1],d=s?a.shape[u-1]:a.shape[u-2],h=o?i.shape[l-1]:i.shape[l-2],p=s?a.shape[u-2]:a.shape[u-1],g=i.shape.slice(0,-2),m=a.shape.slice(0,-2),b=f.D5U.sizeFromShape(g),y=f.D5U.sizeFromShape(m),v=f.Jyw.assertAndGetBroadcastShape(i.shape.slice(0,-2),a.shape.slice(0,-2)).concat([h,p]);f.D5U.assert(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${i.shape} and ${a.shape} and transposeA=${o} and transposeB=${s} must match.`);let x=ic({inputs:{x:i},backend:n,attrs:{shape:o?[b,c,h]:[b,h,c]}}),w=ic({inputs:{x:a},backend:n,attrs:{shape:s?[y,p,d]:[y,d,p]}}),k=o?x.shape[1]:x.shape[2],E=o?x.shape[2]:x.shape[1],I=s?w.shape[1]:w.shape[2],S=Math.max(b,y),T=n.data.get(x.dataId).values,C=n.data.get(w.dataId).values,N=f.D5U.computeStrides(x.shape),A=f.D5U.computeStrides(w.shape),[R,D,$]=o?[N[0],1,N[1]]:[N[0],N[1],1],[_,F,O]=s?[1,A[1],A[0]]:[A[1],1,A[0]],P=E*I,M=(0,f.f3b)([S,E,I],x.dtype),L=M.values,B=n.blockSize;for(let e=0;e<S;e++){let t=e%b,n=e%y;for(let r=0;r<E;r+=B){let i=Math.min(r+B,E);for(let a=0;a<I;a+=B){let o=Math.min(a+B,I);for(let s=0;s<k;s+=B){let l=Math.min(s+B,k);for(let u=r;u<i;u++)for(let r=a;r<o;r++){let i=0;for(let e=s;e<l;e++)i+=T[t*R+u*D+e*$]*C[e*_+r*F+n*O];L[e*P+(u*I+r)]+=i}}}}}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(v,M.dtype,M.values)}let ip={kernelName:f.XLW,backendName:"cpu",kernelFunc:ih},ig={kernelName:f.usg,backendName:"cpu",kernelFunc:function(e){let t,n,r;let{inputs:i,backend:a,attrs:o}=e,{a:s,b:l,bias:u,preluActivationWeights:c}=i,{transposeA:d,transposeB:h,activation:f,leakyreluAlpha:p}=o,g=[];for(let e of(t=ih({inputs:{a:s,b:l},attrs:{transposeA:d,transposeB:h},backend:a}),u&&(n=(0,iu.IH)({inputs:{a:t,b:u},backend:a}),g.push(t),t=n),f&&(r=il(a,t,f,c,p),g.push(t),t=r),g))a.disposeIntermediateTensorInfo(e);return t}};var im=n(50652);let ib=(0,r2.A)(f.VGw,e=>Math.acos(e)),iy={kernelName:f.VGw,backendName:"cpu",kernelFunc:ib},iv=(0,r2.A)(f.SpW,e=>Math.acosh(e)),ix={kernelName:f.SpW,backendName:"cpu",kernelFunc:iv},iw={kernelName:f.Xze,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e;(0,rZ.H)(t,"addN");let r=t.map(e=>n.data.get(e.dataId).values),i=(0,f.f3b)(t[0].shape,t[0].dtype),a=i.values;for(let e=0;e<t.length;e++){let t=r[e];for(let e=0;e<a.length;e++)a[e]+=t[e]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}};var ik=n(76086);let iE={kernelName:f.oT6,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r;(0,rZ.H)(i,"all");let s=f.D5U.parseAxisParam(a,i.shape),l=s,u=f.backend_util.getAxesPermutation(l,i.shape.length),c=i;null!=u&&(c=(0,ik.p)({inputs:{x:i},backend:n,attrs:{perm:u}}),l=f.backend_util.getInnerMostAxes(l.length,i.shape.length)),f.backend_util.assertAxesAreInnerMostDims("all",l,c.shape.length);let[d,h]=f.backend_util.computeOutAndReduceShapes(c.shape,l),p=f.D5U.sizeFromShape(h),g=f.D5U.makeZerosTypedArray(f.D5U.sizeFromShape(d),c.dtype),m=n.data.get(c.dataId).values;for(let e=0;e<g.length;++e){let t=e*p,n=m[t];for(let e=0;e<p;++e){let r=m[t+e];n=n&&r}g[e]=n}null!=u&&n.disposeIntermediateTensorInfo(c);let b=n.makeTensorInfo(d,c.dtype,g);if(o){let e=ic({inputs:{x:b},backend:n,attrs:{shape:f.backend_util.expandShapeToKeepDim(d,s)}});return n.disposeIntermediateTensorInfo(b),e}return b}},iI={kernelName:f.IKK,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r;(0,rZ.H)(i,"any");let s=f.D5U.parseAxisParam(a,i.shape),l=s,u=f.backend_util.getAxesPermutation(l,i.shape.length),c=i;null!=u&&(c=(0,ik.p)({inputs:{x:i},backend:n,attrs:{perm:u}}),l=f.backend_util.getInnerMostAxes(l.length,i.shape.length)),f.backend_util.assertAxesAreInnerMostDims("any",l,c.shape.length);let[d,h]=f.backend_util.computeOutAndReduceShapes(c.shape,l),p=f.D5U.sizeFromShape(h),g=f.D5U.makeZerosTypedArray(f.D5U.sizeFromShape(d),c.dtype),m=n.data.get(c.dataId).values;for(let e=0;e<g.length;++e){let t=e*p,n=m[t];for(let e=0;e<p;++e){let r=m[t+e];n=n||r}g[e]=n}null!=u&&n.disposeIntermediateTensorInfo(c);let b=n.makeTensorInfo(d,c.dtype,g);if(o){let e=ic({inputs:{x:b},backend:n,attrs:{shape:f.backend_util.expandShapeToKeepDim(d,s)}});return n.disposeIntermediateTensorInfo(b),e}return b}},iS={kernelName:f.sJF,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r;(0,rZ.H)(i,"argMax");let o=f.D5U.parseAxisParam(a,i.shape),s=f.backend_util.getAxesPermutation(o,i.shape.length),l=i,u=[];null!=s&&(u.push(l=(0,ik.p)({inputs:{x:i},backend:n,attrs:{perm:s}})),o=f.backend_util.getInnerMostAxes(o.length,l.shape.length)),o=[o[0]],f.backend_util.assertAxesAreInnerMostDims("argMax",o,l.shape.length);let[c,d]=f.backend_util.computeOutAndReduceShapes(l.shape,o),h=f.D5U.sizeFromShape(c),p=f.D5U.makeZerosTypedArray(h,"int32"),g=f.D5U.sizeFromShape(d),m=n.data.get(l.dataId).values;for(let e=0;e<p.length;++e){let t=e*g,n=m[t],r=0;for(let e=0;e<g;++e){let i=m[t+e];i>n&&(n=i,r=e)}p[e]=r}return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(c,"int32",p)}},iT={kernelName:f.aJk,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r;(0,rZ.H)(i,"argMin");let o=f.D5U.parseAxisParam(a,i.shape),s=f.backend_util.getAxesPermutation(o,i.shape.length),l=i,u=[];null!=s&&(u.push(l=(0,ik.p)({inputs:{x:i},backend:n,attrs:{perm:s}})),o=f.backend_util.getInnerMostAxes(o.length,l.shape.length)),o=[o[0]],f.backend_util.assertAxesAreInnerMostDims("argMin",o,l.shape.length);let[c,d]=f.backend_util.computeOutAndReduceShapes(l.shape,o),h=f.D5U.sizeFromShape(c),p=f.D5U.makeZerosTypedArray(h,"int32"),g=f.D5U.sizeFromShape(d),m=n.data.get(l.dataId).values;for(let e=0;e<p.length;++e){let t=e*g,n=m[t],r=0;for(let e=0;e<g;++e){let i=m[t+e];i<n&&(n=i,r=e)}p[e]=r}return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(c,"int32",p)}},iC=(0,r2.A)(f.M2y,e=>Math.asin(e)),iN={kernelName:f.M2y,backendName:"cpu",kernelFunc:iC},iA=(0,r2.A)(f.qw7,e=>Math.asinh(e)),iR={kernelName:f.qw7,backendName:"cpu",kernelFunc:iA},iD=(0,r2.A)(f.jMg,e=>Math.atan(e)),i$={kernelName:f.jMg,backendName:"cpu",kernelFunc:iD};var i_=n(98150);let iF=(0,r7.b)((e,t)=>Math.atan2(e,t)),iO=(0,i_.j)(f.QCc,iF),iP={kernelName:f.QCc,backendName:"cpu",kernelFunc:iO},iM=(0,r2.A)(f.Oyi,e=>Math.atanh(e)),iL={kernelName:f.Oyi,backendName:"cpu",kernelFunc:iM};function iB(e,t,n,r,i,a){let o=i.strideHeight,s=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,d=i.effectiveFilterWidth,h=i.padInfo.top,p=i.padInfo.left,g="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=(0,f.f3b)(i.outShape,n),b=m.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],v=i.outShape[2]*i.outShape[3],x=i.outShape[3];for(let t=0;t<i.batchSize;++t){let n=t*y,f=t*r[0];for(let t=0;t<i.inChannels;++t)for(let m=0;m<i.outHeight;++m){let y=m*o-h,w=Math.max(0,y),k=Math.min(i.inHeight,c+y),E=n+m*v;for(let n=0;n<i.outWidth;++n){let o=n*s-p,c=Math.max(0,o),h=Math.min(i.inWidth,d+o),m=g,y=0,v=0;for(let n=w;n<k;n+=l){let i=f+n*r[1];for(let n=c;n<h;n+=u){let o=e[i+n*r[2]+t];"max"===a&&o>m?m=o:"avg"===a&&(y+=o,v++)}if(isNaN(m))break}b[E+n*x+t]="avg"===a?y/v:m}}}return m}function iU(e,t,n,r,i=!1,a=!1){let o=(0,f.f3b)(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,g=r.padInfo.left,m=(0,f.f3b)(t,n,e);for(let e=0;e<r.batchSize;++e)for(let t=0;t<r.inChannels;++t)for(let n=0;n<r.outHeight;++n){let f=n*s-p,b=f;for(;b<0;)b+=u;let y=Math.min(r.inHeight,d+f);for(let s=0;s<r.outWidth;++s){let d=s*l-g,p=d;for(;p<0;)p+=c;let v=Math.min(r.inWidth,h+d),x=Number.NEGATIVE_INFINITY,w=-1;for(let n=b;n<y;n+=u){let o=n-f;for(let s=p;s<v;s+=c){let l=s-d,u=m.get(e,n,s,t);u>x&&(x=u,w=i?a?((e*r.inHeight+n)*r.inWidth+s)*r.inChannels+t:(n*r.inWidth+s)*r.inChannels+t:o*h+l)}}o.set(w,e,n,s,t)}}return o}function iz(e,t,n,r,i,a){let o=i.strideDepth,s=i.strideHeight,l=i.strideWidth,u=i.dilationDepth,c=i.dilationHeight,d=i.dilationWidth,h=i.effectiveFilterDepth,p=i.effectiveFilterHeight,g=i.effectiveFilterWidth,m=i.padInfo.front,b=i.padInfo.top,y=i.padInfo.left,v="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=(0,f.f3b)(i.outShape,n),w=x.values,k=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],E=i.outShape[2]*i.outShape[3]*i.outShape[4],I=i.outShape[3]*i.outShape[4],S=i.outShape[4];for(let t=0;t<i.batchSize;++t){let n=t*k,f=t*r[0];for(let t=0;t<i.inChannels;++t)for(let x=0;x<i.outDepth;++x){let k=x*o-m,T=k;for(;T<0;)T+=u;let C=Math.min(i.inDepth,h+k),N=n+x*E;for(let n=0;n<i.outHeight;++n){let o=n*s-b,h=o;for(;h<0;)h+=c;let m=Math.min(i.inHeight,p+o),x=N+n*I;for(let n=0;n<i.outWidth;++n){let o=n*l-y,s=o;for(;s<0;)s+=d;let p=Math.min(i.inWidth,g+o),b=x+n*S,k=v,E=0,I=0;for(let n=T;n<C;n+=u){let i=f+n*r[1];for(let n=h;n<m;n+=c){let o=i+n*r[2];for(let n=s;n<p;n+=d){let i=e[o+n*r[3]+t];if("max"===a&&i>k?k=i:"avg"===a&&(E+=i,I++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}w[b+t]="avg"===a?E/Math.max(I,1):k}}}}return x}let iV={kernelName:f.JhU,backendName:"cpu",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a}=n;(0,rZ.H)(a,"avgPool");let{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=i;f.D5U.assert(f.backend_util.eitherStridesOrDilationsAreOne(s,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`);let c=f.backend_util.computePool2DInfo(a.shape,o,s,1,l,u);if(1===c.filterWidth&&1===c.filterHeight&&f.D5U.arraysEqual(c.inShape,c.outShape))t=(0,r5.y)({inputs:{x:a},backend:r});else{let e=r.data.get(a.dataId).values,n=f.D5U.computeStrides(a.shape),i=iB(e,a.shape,a.dtype,n,c,"avg");t=r.makeTensorInfo(c.outShape,a.dtype,i.values)}return t}},iW={kernelName:f._k9,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;(0,rZ.H)(i,"avgPool3d");let c=f.backend_util.computePool3DInfo(i.shape,a,o,1,s,l,u),d=iz(n.data.get(i.dataId).values,i.shape,i.dtype,f.D5U.computeStrides(i.shape),c,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}},ij={kernelName:f.IMb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;(0,rZ.H)([i,a],"avgPool3DGrad");let c=f.backend_util.computePool3DInfo(a.shape,o,s,1,l,u),d=c.strideDepth,h=c.strideHeight,p=c.strideWidth,g=c.filterDepth,m=c.filterHeight,b=c.filterWidth,y=c.dilationDepth,v=c.dilationHeight,x=c.dilationWidth,w=c.effectiveFilterDepth,k=c.effectiveFilterHeight,E=c.effectiveFilterWidth,I=w-1-c.padInfo.front,S=E-1-c.padInfo.left,T=k-1-c.padInfo.top,C=(0,f.f3b)(a.shape,"float32"),N=1/(g*m*b),A=n.bufferSync(i);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let n=0;n<c.inDepth;++n)for(let r=0;r<c.inHeight;++r)for(let i=0;i<c.inWidth;++i){let a=n-I,o=r-T,s=i-S,l=0;for(let n=0;n<w;n+=y){let r=(a+n)/d;if(!(r<0)&&!(r>=c.outDepth)&&Math.floor(r)===r)for(let n=0;n<k;n+=v){let i=(o+n)/h;if(!(i<0)&&!(i>=c.outHeight)&&Math.floor(i)===i)for(let n=0;n<E;n+=x){let a=(s+n)/p;a<0||a>=c.outWidth||Math.floor(a)!==a||(l+=A.get(e,r,i,a,t))}}}C.set(l*N,e,n,r,i,t)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}},iH={kernelName:f.ROF,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t;(0,rZ.H)([i,a],"avgPoolGrad");let{filterSize:o,strides:s,pad:l}=r,u=f.backend_util.computePool2DInfo(a.shape,o,s,1,l),c=u.strideHeight,d=u.strideWidth,h=u.filterHeight,p=u.filterWidth,g=u.dilationHeight,m=u.dilationWidth,b=u.effectiveFilterHeight,y=u.effectiveFilterWidth,v=y-1-u.padInfo.left,x=b-1-u.padInfo.top,w=(0,f.f3b)(a.shape,"float32"),k=1/(h*p),E=n.data.get(i.dataId).values,I=(0,f.f3b)(i.shape,"float32",E);for(let e=0;e<u.batchSize;++e)for(let t=0;t<u.inChannels;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){let i=n-x,a=r-v,o=0;for(let n=0;n<b;n+=g){let r=(i+n)/c;if(!(r<0)&&!(r>=u.outHeight)&&Math.floor(r)===r)for(let n=0;n<y;n+=m){let i=(a+n)/d;i<0||i>=u.outWidth||Math.floor(i)!==i||(o+=I.get(e,r,i,t))}}w.set(o*k,e,n,r,t)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}},iK={kernelName:f.sHE,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,scale:a,offset:o,mean:s,variance:l}=t;f.D5U.assert(s.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),f.D5U.assert(null==o||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),f.D5U.assert(null==a||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),(0,rZ.H)([i,s,l,a,o],"batchNorm");let{varianceEpsilon:u}=r;null==u&&(u=.001);let c=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,h=n.data.get(l.dataId).values,p=a?n.data.get(a.dataId).values:new Float32Array([1]),g=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),b=g.length,y=p.length,v=h.length,x=d.length,w=0,k=0,E=0,I=0;for(let e=0;e<c.length;++e)m[e]=g[w++]+(c[e]-d[k++])*p[E++]/Math.sqrt(h[I++]+u),w>=b&&(w=0),k>=x&&(k=0),E>=y&&(E=0),I>=v&&(I=0);return n.makeTensorInfo(i.shape,i.dtype,m)}};var iG=n(12092);let iX={kernelName:f.zws,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,crops:o}=r;(0,rZ.H)([i],"batchToSpaceND");let s=a.reduce((e,t)=>e*t),l=f.backend_util.getReshaped(i.shape,a,s),u=f.backend_util.getPermuted(l.length,a.length),c=f.backend_util.getReshapedPermuted(i.shape,a,s),d=f.backend_util.getSliceBeginCoords(o,a.length),h=f.backend_util.getSliceSize(c,o,a.length),p=ic({inputs:{x:i},backend:n,attrs:{shape:l}}),g=(0,ik.p)({inputs:{x:p},backend:n,attrs:{perm:u}}),m=ic({inputs:{x:g},backend:n,attrs:{shape:c}}),b=(0,iG.tP)({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),b}};var iq=n(91299);let iY={kernelName:f.zvY,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:o}=r,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,u=(0,iq.W)(s,l,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,u)}};var iQ=n(44876);let iJ={kernelName:f.eEB,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{s0:r,s1:i}=t,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,s=f.backend_util.assertAndGetBroadcastShape(Array.from(a),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}};var iZ=n(92432),i0=n(97369);let i1=(0,r2.A)(f.xnO,(e,t)=>e>t.clipValueMax?t.clipValueMax:e<t.clipValueMin?t.clipValueMin:e),i2={kernelName:f.xnO,backendName:"cpu",kernelFunc:i1};var i3=n(30926);let i4={kernelName:f.yj2,backendName:"cpu",kernelFunc:e=>{let{x:t}=e.inputs,n=e.backend,r=new Float32Array(f.D5U.sizeFromShape(t.shape)),i=n.data.get(t.dataId),a=i.complexTensorInfos.real,o=i.complexTensorInfos.imag,s=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values;for(let e=0;e<s.length;e++){let t=s[e],n=l[e];r[e]=Math.hypot(t,n)}return n.makeOutput(r,t.shape,"float32")}};var i5=n(7851);function i8(e){let{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}let i6={kernelName:f.J_u,backendName:"cpu",kernelFunc:i8};var i7=n(1974);function i9(e){let{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,a=f.D5U.parseAxisParam(i,t[0].shape)[0],o=t.map(e=>e.shape);f.backend_util.assertParamsConsistent(o,a);let s=f.backend_util.computeOutShape(t.map(e=>e.shape),a);if(0===f.D5U.sizeFromShape(s))return n.makeTensorInfo(s,t[0].dtype,[]);let l=t.filter(e=>f.D5U.sizeFromShape(e.shape)>0);if(1===l.length)return(0,r5.y)({inputs:{x:l[0]},backend:n});if("complex64"===l[0].dtype){let e=l.map(e=>(0,i7.k)({inputs:{input:e},backend:n})),t=l.map(e=>i8({inputs:{input:e},backend:n})),r=i9({inputs:e,backend:n,attrs:{axis:a}}),i=i9({inputs:t,backend:n,attrs:{axis:a}}),o=(0,i3.P)({inputs:{real:r,imag:i},backend:n});return e.forEach(e=>n.disposeIntermediateTensorInfo(e)),t.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),o}let u=l.map(e=>{let t=f.D5U.sizeFromShape(e.shape.slice(a));return ic({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})}),c=u.map(e=>({vals:n.data.get(e.dataId).values,shape:e.shape}));s=f.backend_util.computeOutShape(u.map(e=>e.shape),1);let d=1===u[0].shape[0],h=(0,i5.j)(c,s,t[0].dtype,d),p=f.backend_util.computeOutShape(l.map(e=>e.shape),a),g=n.makeTensorInfo(p,t[0].dtype,h);return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),g}let ae={kernelName:f.Eh3,backendName:"cpu",kernelFunc:i9};function at(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:o,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r;(0,rZ.H)([i,a],"conv2d");let d=f.backend_util.convertConv2DDataFormat(l),h=f.backend_util.computeConv2DInfo(i.shape,a.shape,o,u,s,c,!1,d),p=h.filterHeight,g=h.filterWidth,m=h.dilationHeight,b=h.dilationWidth,y=h.padInfo.left,v=h.padInfo.top,x="channelsLast"===h.dataFormat,w=new f.YDk(h.outShape,i.dtype),k=f.D5U.computeStrides(i.shape),E=f.D5U.computeStrides(a.shape),I=k[0],S=x?k[1]:k[2],T=x?k[2]:1,C=x?1:k[1],N=w.strides[0],A=x?w.strides[1]:w.strides[2],R=x?w.strides[2]:1,D=x?1:w.strides[1],$=n.data.get(i.dataId).values,_=n.data.get(a.dataId).values,F=w.values;for(let e=0;e<h.batchSize;++e){let t=e*I,n=e*N;for(let e=0;e<h.outHeight;++e){let r=n+e*A,i=e*h.strideHeight-v;for(let e=0;e<p;++e){let n=i+e*m;if(n<0||n>=h.inHeight)continue;let a=e*E[0],o=t+n*S;for(let e=0;e<h.outWidth;++e){let t=r+e*R,n=e*h.strideWidth-y;for(let e=0;e<g;++e){let r=n+e*b;if(r<0||r>=h.inWidth)continue;let i=a+e*E[1],s=o+r*T,l=i;for(let e=0;e<h.inChannels;++e){let n=$[s+e*C];for(let e=0;e<h.outChannels;++e)F[t+e*D]+=n*_[l+e];l+=h.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,F)}let an={kernelName:f.mhS,backendName:"cpu",kernelFunc:at},ar={kernelName:f.wUP,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;(0,rZ.H)([i,a],"conv2dBackpropFilter");let d=f.backend_util.convertConv2DDataFormat(l),h=f.backend_util.computeConv2DInfo(i.shape,c,o,1,s,u,!1,d),{strideHeight:p,strideWidth:g,filterHeight:m,filterWidth:b}=h,y="channelsLast"===h.dataFormat,v=new f.YDk(h.filterShape,"float32"),x=h.padInfo.left,w=h.padInfo.top,k=n.data.get(i.dataId).values,E=n.data.get(a.dataId).values,I=new f.YDk(i.shape,i.dtype,k),S=new f.YDk(a.shape,a.dtype,E);for(let e=0;e<m;++e){let t=Math.max(0,Math.ceil((w-e)/p)),n=Math.min(h.outHeight,(h.inHeight+w-e)/p);for(let r=0;r<b;++r){let i=Math.max(0,Math.ceil((x-r)/g)),a=Math.min(h.outWidth,(h.inWidth+x-r)/g);for(let o=0;o<h.inChannels;++o)for(let s=0;s<h.outChannels;++s){let l=0;for(let u=0;u<h.batchSize;++u)for(let c=t;c<n;++c){let t=e+c*p-w;for(let e=i;e<a;++e){let n=r+e*g-x;y?l+=I.get(u,t,n,o)*S.get(u,c,e,s):l+=I.get(u,o,t,n)*S.get(u,s,c,e)}}v.set(l,e,r,o,s)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}},ai={kernelName:f.wm,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r;(0,rZ.H)([i,a],"conv2dBackpropInput");let d=f.D5U.computeStrides(a.shape),h=f.D5U.computeStrides(i.shape),p=f.backend_util.convertConv2DDataFormat(u),g=f.backend_util.computeConv2DInfo(o,a.shape,s,1,l,c,!1,p),m=new f.YDk(g.inShape,"float32"),b=m.values,y=n.data.get(i.dataId).values,v=n.data.get(a.dataId).values,[x,w,k]=d,{batchSize:E,filterHeight:I,filterWidth:S,inChannels:T,inHeight:C,inWidth:N,outChannels:A,outHeight:R,outWidth:D,strideHeight:$,strideWidth:_}=g;p=g.dataFormat;let F=I-1-g.padInfo.top,O=S-1-g.padInfo.left,P="channelsLast"===p,M=m.strides[0],L=P?m.strides[1]:m.strides[2],B=P?m.strides[2]:1,U=P?1:m.strides[1],z=h[0],V=P?h[1]:h[2],W=P?h[2]:1,j=P?1:h[1];for(let e=0;e<E;++e)for(let t=0;t<T;++t)for(let n=0;n<C;++n){let r=n-F,i=Math.max(0,Math.ceil(r/$)),a=Math.min(R,(I+r)/$);for(let o=0;o<N;++o){let s=o-O,l=Math.max(0,Math.ceil(s/_)),u=Math.min(D,(S+s)/_),c=0;for(let n=i;n<a;++n){let i=n*$-r;for(let r=l;r<u;++r){let a=r*_-s,o=z*e+V*n+W*r,l=x*(I-1-i)+w*(S-1-a)+k*t;for(let e=0;e<A;++e)c+=y[o+j*e]*v[l+e]}}b[M*e+L*n+B*o+U*t]=c}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}},aa={kernelName:f.x12,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:o,pad:s,dilations:l}=r;(0,rZ.H)([i,a],"conv3d");let u=f.backend_util.computeConv3DInfo(i.shape,a.shape,o,l,s),{filterDepth:c,filterHeight:d,filterWidth:h,dilationDepth:p,dilationHeight:g,dilationWidth:m,padInfo:b}=u,y=b.front,v=b.left,x=b.top,w=new f.YDk(u.outShape,i.dtype),k=n.data.get(i.dataId).values,E=n.data.get(a.dataId).values,I=w.values,S=f.D5U.computeStrides(i.shape),T=f.D5U.computeStrides(a.shape);for(let e=0;e<u.batchSize;++e){let t=e*S[0],n=e*w.strides[0];for(let e=0;e<u.outDepth;++e){let r=n+e*w.strides[1],i=e*u.strideDepth-y;for(let e=0;e<c;++e){let n=i+e*p;if(n<0||n>=u.inDepth)continue;let a=e*T[0],o=t+n*S[1];for(let e=0;e<u.outHeight;++e){let t=r+e*w.strides[2],n=e*u.strideHeight-x;for(let e=0;e<d;++e){let r=n+e*g;if(r<0||r>=u.inHeight)continue;let i=a+e*T[1],s=o+r*S[2];for(let e=0;e<u.outWidth;++e){let n=t+e*u.outChannels,r=e*u.strideWidth-v;for(let e=0;e<h;++e){let t=r+e*m;if(t<0||t>=u.inWidth)continue;let a=i+e*T[2],o=s+t*u.inChannels,l=a;for(let e=0;e<u.inChannels;++e){let t=k[o+e];for(let e=0;e<u.outChannels;++e)I[n+e]+=t*E[l+e];l+=u.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}},ao={kernelName:f.o2y,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:o,pad:s,filterShape:l}=r;(0,rZ.H)([i,a],"conv3dBackpropFilterV2");let u=f.D5U.computeStrides(i.shape),c=f.D5U.computeStrides(a.shape),d=f.backend_util.computeConv3DInfo(i.shape,l,o,1,s),h=d.strideDepth,p=d.strideHeight,g=d.strideWidth,m=d.filterDepth,b=d.filterHeight,y=d.filterWidth,v=new f.YDk(d.filterShape,"float32"),x=v.values,[w,k,E,I]=v.strides,S=n.data.get(a.dataId).values,[T,C,N,A]=c,R=n.data.get(i.dataId).values,[D,$,_,F]=u,O=d.padInfo.front,P=d.padInfo.left,M=d.padInfo.top;for(let e=0;e<m;++e){let t=Math.max(0,Math.ceil((O-e)/h)),n=Math.min(d.outDepth,(d.inDepth+O-e)/h),r=e*w;for(let i=0;i<b;++i){let a=Math.max(0,Math.ceil((M-i)/p)),o=Math.min(d.outHeight,(d.inHeight+M-i)/p),s=i*k+r;for(let r=0;r<y;++r){let l=Math.max(0,Math.ceil((P-r)/g)),u=Math.min(d.outWidth,(d.inWidth+P-r)/g),c=r*E+s;for(let s=0;s<d.inChannels;++s){let f=s*I+c;for(let c=0;c<d.outChannels;++c){let m=0;for(let f=0;f<d.batchSize;++f){let d=f*D,b=f*T;for(let f=t;f<n;++f){let t=(e+f*h-O)*$+d,n=f*C+b;for(let e=a;e<o;++e){let a=(i+e*p-M)*_+t,o=e*N+n;for(let e=l;e<u;++e){let t=(r+e*g-P)*F+a,n=e*A+o;m+=R[t+s]*S[n+c]}}}}x[f+c]=m}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}},as={kernelName:f.ik2,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{pad:o,strides:s,inputShape:l}=r;(0,rZ.H)([i],"conv3dBackpropInputV2");let u=f.D5U.computeStrides(i.shape),c=f.D5U.computeStrides(a.shape),d=f.backend_util.computeConv3DInfo(l,a.shape,s,1,o),h=new f.YDk(d.inShape,"float32"),p=h.values,[g,m,b,y]=h.strides,v=n.data.get(i.dataId).values,[x,w,k,E]=u,I=n.data.get(a.dataId).values,[S,T,C,N]=c,{batchSize:A,filterDepth:R,filterHeight:D,filterWidth:$,inChannels:_,inDepth:F,inHeight:O,inWidth:P,outChannels:M,outDepth:L,outHeight:B,outWidth:U,strideDepth:z,strideHeight:V,strideWidth:W}=d,j=R-1-d.padInfo.front,H=D-1-d.padInfo.top,K=$-1-d.padInfo.left;for(let e=0;e<A;++e)for(let t=0;t<_;++t)for(let n=0;n<F;++n){let r=n-j,i=Math.max(0,Math.ceil(r/z)),a=Math.min(L,(R+r)/z);for(let o=0;o<O;++o){let s=o-H,l=Math.max(0,Math.ceil(s/V)),u=Math.min(B,(D+s)/V);for(let c=0;c<P;++c){let d=c-K,h=Math.max(0,Math.ceil(d/W)),f=Math.min(U,($+d)/W),A=0;for(let n=i;n<a;++n){let i=n*z-r;for(let r=l;r<u;++r){let a=r*V-s;for(let o=h;o<f;++o){let s=o*W-d,l=x*e+w*n+k*r+E*o,u=S*(R-1-i)+T*(D-1-a)+C*($-1-s)+N*t;for(let e=0;e<M;++e)A+=v[l+e]*I[u+e]}}}p[g*e+m*n+b*o+y*c+t]=A}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},al=(0,r2.A)(f.mc4,e=>Math.cos(e)),au={kernelName:f.mc4,backendName:"cpu",kernelFunc:al},ac=(0,r2.A)(f.TR1,e=>Math.cosh(e)),ad={kernelName:f.TR1,backendName:"cpu",kernelFunc:ac},ah={kernelName:f.VcC,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:a,boxInd:o}=t,{cropSize:s,method:l,extrapolationValue:u}=r,[c,d,h,p]=i.shape,g=a.shape[0],[m,b]=s,y=(0,f.f3b)([g,m,b,p],"float32"),v=n.data.get(a.dataId).values,x=n.data.get(o.dataId).values,w=n.data.get(i.dataId).values,k=f.D5U.computeStrides(i.shape),E=f.D5U.computeStrides(y.shape);for(let e=0;e<g;e++){let t=4*e,n=v[t],r=v[t+1],i=v[t+2],a=v[t+3],o=x[e];if(o>=c)continue;let s=m>1?(i-n)*(d-1)/(m-1):0,f=b>1?(a-r)*(h-1)/(b-1):0;for(let t=0;t<m;t++){let c=m>1?n*(d-1)+t*s:.5*(n+i)*(d-1);if(c<0||c>d-1){for(let n=0;n<b;n++)for(let r=0;r<p;r++){let i=r+n*E[2]+t*E[1]+e*E[0];y.values[i]=u}continue}if("bilinear"===l){let n=Math.floor(c),i=Math.ceil(c),s=c-n;for(let l=0;l<b;l++){let c=b>1?r*(h-1)+l*f:.5*(r+a)*(h-1);if(c<0||c>h-1){for(let n=0;n<p;n++){let r=n+l*E[2]+t*E[1]+e*E[0];y.values[r]=u}continue}let d=Math.floor(c),g=Math.ceil(c),m=c-d;for(let r=0;r<p;r++){let a=r+d*k[2]+n*k[1]+o*k[0],u=w[a],c=w[a=r+g*k[2]+n*k[1]+o*k[0]],h=w[a=r+d*k[2]+i*k[1]+o*k[0]],f=w[a=r+g*k[2]+i*k[1]+o*k[0]],p=u+(c-u)*m,b=h+(f-h)*m;a=r+l*E[2]+t*E[1]+e*E[0],y.values[a]=p+(b-p)*s}}}else for(let n=0;n<b;++n){let i=b>1?r*(h-1)+n*f:.5*(r+a)*(h-1);if(i<0||i>h-1){for(let r=0;r<p;r++){let i=r+n*E[2]+t*E[1]+e*E[0];y.values[i]=u}continue}let s=Math.round(i),l=Math.round(c);for(let r=0;r<p;r++){let i=r+s*k[2]+l*k[1]+o*k[0],a=r+n*E[2]+t*E[1]+e*E[0];y.values[a]=w[i]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},af={kernelName:f.Byc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:o,reverse:s}=r;(0,rZ.H)(i,"cumprod");let l=f.backend_util.getAxesPermutation([a],i.shape.length),u=i;null!=l&&(u=(0,ik.p)({inputs:{x:i},backend:n,attrs:{perm:l}}));let c=f.backend_util.getInnerMostAxes(1,i.shape.length)[0];if(c!==u.shape.length-1)throw Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);let d=(0,f.x8V)(u.dtype,"int32"),h=f.D5U.makeOnesTypedArray(f.D5U.sizeFromShape(u.shape),d),p=n.data.get(u.dataId).values,g=u.shape[u.shape.length-1],m=s?(e,t)=>e+g-t-1:(e,t)=>e+t;for(let e=0;e<p.length;e+=g)for(let t=0;t<g;t++){let n=m(e,t);if(0===t)h[n]=o?1:p[n];else{let r=m(e,t-1);h[n]=o?p[r]*h[r]:p[n]*h[r]}}let b=n.makeTensorInfo(u.shape,d,h);if(null!=l){let e=f.backend_util.getUndoAxesPermutation(l),t=(0,ik.p)({inputs:{x:b},backend:n,attrs:{perm:e}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(u),t}return b}},ap={kernelName:f.iHb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:o,reverse:s}=r;(0,rZ.H)(i,"cumsum");let l=f.backend_util.getAxesPermutation([a],i.shape.length),u=i;null!=l&&(u=(0,ik.p)({inputs:{x:i},backend:n,attrs:{perm:l}}));let c=f.backend_util.getInnerMostAxes(1,i.shape.length)[0];if(c!==u.shape.length-1)throw Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);let d=(0,f.x8V)(u.dtype,"int32"),h=f.D5U.makeZerosTypedArray(f.D5U.sizeFromShape(u.shape),d),p=n.data.get(u.dataId).values,g=u.shape[u.shape.length-1],m=s?(e,t)=>e+g-t-1:(e,t)=>e+t;for(let e=0;e<p.length;e+=g)for(let t=0;t<g;t++){let n=m(e,t);if(0===t)h[n]=o?0:p[n];else{let r=m(e,t-1);h[n]=o?p[r]+h[r]:p[n]+h[r]}}let b=n.makeTensorInfo(u.shape,d,h);if(null!=l){let e=f.backend_util.getUndoAxesPermutation(l),t=(0,ik.p)({inputs:{x:b},backend:n,attrs:{perm:e}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(u),t}return b}},ag={kernelName:f.QRR,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:o,binaryOutput:s}=r;if(1===i.shape.length){let e=n.data.get(i.dataId).values,t=n.data.get(a.dataId).values,r=(0,iq.W)(e,t,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,r)}if(2===i.shape.length){let e=n.bufferSync(i),t=n.bufferSync(a),r=(0,iq.i)(e,t,o,s);return n.makeTensorInfo(r.shape,a.dtype,r.values)}throw Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}},am={kernelName:f.T0n,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:a,dataFormat:o}=r;f.D5U.assert("NHWC"===o,()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);let s=i.shape[0],l=i.shape[1],u=i.shape[2],c=i.shape[3],d=l*a,h=u*a,p=c/(a*a),g=n.data.get(i.dataId).values,m=new Float32Array(s*d*h*p),b=0;for(let e=0;e<s;++e)for(let t=0;t<d;++t){let n=Math.floor(t/a),r=t%a;for(let t=0;t<h;++t){let i=Math.floor(t/a),o=t%a,s=(r*a+o)*p;for(let t=0;t<p;++t){let r=t+s+c*(i+u*(n+l*e));m[b++]=g[r]}}}return n.makeTensorInfo([s,d,h,p],i.dtype,m)}};function ab(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:o,pad:s,dilations:l,dimRoundingMode:u}=r;(0,rZ.H)([i,a],"depthwiseConv2DNative");let c=f.D5U.computeStrides(i.shape),d=f.D5U.computeStrides(a.shape),h=l;null==h&&(h=[1,1]),f.D5U.assert(f.backend_util.eitherStridesOrDilationsAreOne(o,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${h}'`);let p=f.backend_util.computeConv2DInfo(i.shape,a.shape,o,h,s,u,!0),{filterHeight:g,filterWidth:m,dilationHeight:b,dilationWidth:y,padInfo:v}=p,x=v.left,w=v.top,k=p.outChannels/p.inChannels,E=new f.YDk(p.outShape,i.dtype),I=n.data.get(i.dataId).values,S=n.data.get(a.dataId).values,T=E.values;for(let e=0;e<p.batchSize;++e){let t=e*c[0],n=e*E.strides[0];for(let e=0;e<p.outHeight;++e){let r=n+e*E.strides[1],i=e*p.strideHeight-w;for(let e=0;e<g;++e){let n=i+e*b;if(n<0||n>=p.inHeight)continue;let a=e*d[0],o=t+n*c[1];for(let e=0;e<p.outWidth;++e){let t=r+e*E.strides[2],n=e*p.strideWidth-x;for(let e=0;e<m;++e){let r=n+e*y;if(r<0||r>=p.inWidth)continue;let i=a+e*d[1],s=o+r*p.inChannels,l=t,u=i;for(let e=0;e<p.inChannels;++e){let t=I[s+e];for(let e=0;e<k;++e)T[l+e]+=t*S[u+e];l+=k,u+=k}}}}}}return n.makeTensorInfo(E.shape,E.dtype,E.values)}let ay={kernelName:f.cie,backendName:"cpu",kernelFunc:ab},av={kernelName:f.sL$,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r;(0,rZ.H)([i,a],"depthwiseConv2dNativeBackpropFilter");let d=f.backend_util.computeConv2DInfo(i.shape,c,o,s,l,u,!0),{strideHeight:h,strideWidth:p,filterHeight:g,filterWidth:m}=d,b=new f.YDk(d.filterShape,"float32"),y=d.padInfo.left,v=d.padInfo.top,x=d.outChannels/d.inChannels,w=n.data.get(i.dataId).values,k=new f.YDk(i.shape,i.dtype,w),E=n.data.get(a.dataId).values,I=new f.YDk(a.shape,a.dtype,E);for(let e=0;e<g;++e){let t=Math.max(0,Math.ceil((v-e)/h)),n=Math.min(d.outHeight,(d.inHeight+v-e)/h);for(let r=0;r<m;++r){let i=Math.max(0,Math.ceil((y-r)/p)),a=Math.min(d.outWidth,(d.inWidth+y-r)/p);for(let o=0;o<d.outChannels;++o){let s=Math.trunc(o/x),l=o%x,u=0;for(let l=0;l<d.batchSize;++l)for(let c=t;c<n;++c){let t=e+c*h-v;for(let e=i;e<a;++e){let n=r+e*p-y;u+=k.get(l,t,n,s)*I.get(l,c,e,o)}}b.set(u,e,r,s,l)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},ax={kernelName:f.y7R,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r;(0,rZ.H)([i,a],"depthwiseConv2DNativeBackpropInput");let d=f.D5U.computeStrides(i.shape),h=f.D5U.computeStrides(a.shape),p=f.backend_util.computeConv2DInfo(c,a.shape,o,s,l,u,!0),g=new f.YDk(p.inShape,"float32"),m=g.values,[b,y,v]=g.strides,x=n.data.get(i.dataId).values,[w,k,E]=d,I=n.data.get(a.dataId).values,[S,T,C]=h,{batchSize:N,filterHeight:A,filterWidth:R,inChannels:D,inHeight:$,inWidth:_,outChannels:F,outHeight:O,outWidth:P,strideHeight:M,strideWidth:L}=p,B=A-1-p.padInfo.top,U=R-1-p.padInfo.left,z=F/D;for(let e=0;e<N;++e)for(let t=0;t<D;++t)for(let n=0;n<$;++n){let r=n-B,i=Math.max(0,Math.ceil(r/M)),a=Math.min(O,(A+r)/M);for(let o=0;o<_;++o){let s=o-U,l=Math.max(0,Math.ceil(s/L)),u=Math.min(P,(R+s)/L),c=0;for(let n=i;n<a;++n){let i=n*M-r;for(let r=l;r<u;++r){let a=r*L-s,o=w*e+k*n+E*r,l=S*(A-1-i)+T*(R-1-a)+C*t;for(let e=0;e<z;++e)c+=x[o+(t*z+e)]*I[l+e]}}m[b*e+y*n+v*o+t]=c}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}},aw={kernelName:f.$w,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t,i=f.D5U.sizeFromShape(r.shape),a=n.data.get(r.dataId).values,o=(0,f.f3b)([i,i],r.dtype),s=o.values;for(let e=0;e<a.length;e++)s[e*i+e]=a[e];let l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}},ak={kernelName:f.p4S,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:i}=e,{strides:a,pad:o,dilations:s}=n,l=t.data.get(r.dataId).values,u=r.shape.length,c=t.data.get(i.dataId).values,d=i.shape.length,{batchSize:h,inHeight:p,inWidth:g,inChannels:m,outHeight:b,outWidth:y,padInfo:v,strideHeight:x,strideWidth:w,filterHeight:k,filterWidth:E,dilationHeight:I,dilationWidth:S,outShape:T}=f.backend_util.computeDilation2DInfo(r.shape,i.shape,a,o,"NHWC",s),C=f.D5U.sizeFromShape(T),N=T.length,A=f.D5U.getArrayFromDType(r.dtype,C);for(let e=0;e<h;++e)for(let t=0;t<b;++t){let n=t*x-v.top;for(let a=0;a<y;++a){let o=a*w-v.left;for(let s=0;s<m;++s){let h=Number.MIN_SAFE_INTEGER;for(let t=0;t<k;++t){let a=n+t*I;if(a>=0&&a<p)for(let n=0;n<E;++n){let p=o+n*S;if(p>=0&&p<g){let o=f.D5U.locToIndex([e,a,p,s],u,f.D5U.computeStrides(r.shape)),g=f.D5U.locToIndex([t,n,s],d,f.D5U.computeStrides(i.shape)),m=l[o]+c[g];m>h&&(h=m)}}}A[f.D5U.locToIndex([e,t,a,s],N,f.D5U.computeStrides(T))]=h}}}return{dataId:t.write(f.D5U.toTypedArray(A,r.dtype),T,r.dtype),shape:T,dtype:r.dtype}}},aE={kernelName:f.Vn9,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:i,dy:a}=e,{strides:o,pad:s,dilations:l}=n,u=f.D5U.toNestedArray(r.shape,t.data.get(r.dataId).values),c=f.D5U.toNestedArray(i.shape,t.data.get(i.dataId).values),{batchSize:d,inHeight:h,inWidth:p,inChannels:g,outHeight:m,outWidth:b,padInfo:y,strideHeight:v,strideWidth:x,filterHeight:w,filterWidth:k,dilationHeight:E,dilationWidth:I,outShape:S}=f.backend_util.computeDilation2DInfo(r.shape,i.shape,o,s,"NHWC",l);f.D5U.assert(a.rank===S.length,()=>`Error in ${f.Vn9}, dy must have the same rank as output ${S.length}, but got ${a.rank}`);let T=f.D5U.toNestedArray(S,t.data.get(a.dataId).values),C=f.D5U.makeZerosNestedTypedArray(i.shape,i.dtype);for(let e=0;e<d;++e)for(let t=0;t<m;++t){let n=t*v-y.top;for(let r=0;r<b;++r){let i=r*x-y.left;for(let a=0;a<g;++a){let o=Number.MIN_SAFE_INTEGER,s=0,l=0;for(let t=0;t<w;++t){let r=n+t*E;if(r>=0&&r<h)for(let n=0;n<k;++n){let d=i+n*I;if(d>=0&&d<p){let i=u[e][r][d][a]+c[t][n][a];i>o&&(o=i,s=t,l=n)}}}C[s][l][a]+=T[e][t][r][a]}}}return{dataId:t.write(f.D5U.toTypedArray(C,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},aI={kernelName:f.ekb,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:i,dy:a}=e,{strides:o,pad:s,dilations:l}=n,u=f.D5U.toNestedArray(r.shape,t.data.get(r.dataId).values),c=f.D5U.toNestedArray(i.shape,t.data.get(i.dataId).values),{batchSize:d,inHeight:h,inWidth:p,inChannels:g,outHeight:m,outWidth:b,padInfo:y,strideHeight:v,strideWidth:x,filterHeight:w,filterWidth:k,dilationHeight:E,dilationWidth:I,outShape:S}=f.backend_util.computeDilation2DInfo(r.shape,i.shape,o,s,"NHWC",l);f.D5U.assert(a.rank===S.length,()=>`Error in ${f.ekb}, dy must have the same rank as output ${S.length}, but got ${a.rank}`);let T=f.D5U.toNestedArray(S,t.data.get(a.dataId).values),C=f.D5U.makeZerosNestedTypedArray(r.shape,r.dtype);for(let e=0;e<d;++e)for(let t=0;t<m;++t){let n=t*v-y.top;for(let r=0;r<b;++r){let i=r*x-y.left;for(let a=0;a<g;++a){let o=Number.MIN_SAFE_INTEGER,s=n<0?0:n,l=i<0?0:i;for(let t=0;t<w;++t){let r=n+t*E;if(r>=0&&r<h)for(let n=0;n<k;++n){let d=i+n*I;if(d>=0&&d<p){let i=u[e][r][d][a]+c[t][n][a];i>o&&(o=i,s=r,l=d)}}}C[e][s][l][a]+=T[e][t][r][a]}}}return{dataId:t.write(f.D5U.toTypedArray(C,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},aS={kernelName:f.hGc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{image:i}=t,{canvas:a,options:o}=r,{contextOptions:s,imageOptions:l}=o||{},u=(null==l?void 0:l.alpha)||1,c=(null==s?void 0:s.contextType)||"2d";if("2d"!==c)throw Error(`Context type ${s.contextType} is not supported by the CPU backend.`);let d=a.getContext(c,(null==s?void 0:s.contextAttributes)||{});if(null==d)throw Error(`Could not get the context with ${c} type.`);let[h,f]=i.shape.slice(0,2),p=2===i.shape.length?1:i.shape[2],g=n.data.get(i.dataId).values,m="float32"===i.dtype?255:1,b=new Uint8ClampedArray(f*h*4);for(let e=0;e<h*f;++e){let t=[0,0,0,255*u];for(let n=0;n<p;n++){let r=g[e*p+n];if("float32"===i.dtype){if(r<0||r>1)throw Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${r}.`)}else if("int32"===i.dtype&&(r<0||r>255))throw Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${r}.`);1===p?(t[0]=r*m,t[1]=r*m,t[2]=r*m):t[n]=r*m}let n=4*e;b[n+0]=Math.round(t[0]),b[n+1]=Math.round(t[1]),b[n+2]=Math.round(t[2]),b[n+3]=Math.round(t[3])}a.width=f,a.height=h;let y=new ImageData(b,f,h);return d.putImageData(y,0,0),i}};var aT=n(11247),aC=n(82571);function aN(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a}=n,{axis:o,keepDims:s}=i;(0,rZ.H)(a,"sum");let l=(t="bool"===a.dtype?(0,iZ.pj)({inputs:{x:a},backend:r,attrs:{dtype:"int32"}}):(0,r5.y)({inputs:{x:a},backend:r})).shape.length,u=f.D5U.parseAxisParam(o,t.shape),c=f.backend_util.getAxesPermutation(u,l),d=u,h=t;null!=c&&(h=(0,ik.p)({inputs:{x:t},backend:r,attrs:{perm:c}}),d=f.backend_util.getInnerMostAxes(d.length,l)),f.backend_util.assertAxesAreInnerMostDims("sum",d,h.shape.length);let[p,g]=f.backend_util.computeOutAndReduceShapes(h.shape,d),m=f.backend_util.upcastType(h.dtype,"int32"),b=(0,aC.l)(r,p,m),y=f.D5U.sizeFromShape(g),v=r.data.get(b.dataId).values,x=r.data.get(h.dataId).values;for(let e=0;e<v.length;++e){let t=e*y,n=0;for(let e=0;e<y;++e)n+=x[t+e];v[e]=n}if(s){let e=f.backend_util.expandShapeToKeepDim(b.shape,u),t=b;b=ic({inputs:{x:b},backend:r,attrs:{shape:e}}),r.disposeIntermediateTensorInfo(t)}return r.disposeIntermediateTensorInfo(t),null!=c&&r.disposeIntermediateTensorInfo(h),b}let aA={kernelName:f.GBy,backendName:"cpu",kernelFunc:aN},aR={kernelName:f.$g6,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,{allDims:a,summedDims:o,idDims:s}=f.backend_util.decodeEinsumEquation(i,t.length);f.backend_util.checkEinsumDimSizes(a.length,s,t);let{path:l,steps:u}=f.backend_util.getEinsumComputePath(o,s),c=u.length,d=null,h=a.length,p=[];for(let e=0;e<c;++e){for(let r of u[e]){let e;let{permutationIndices:i,expandDims:a}=f.backend_util.getEinsumPermutation(h,s[r]);f.backend_util.isIdentityPermutation(i)?e=t[r]:(e=(0,ik.p)({inputs:{x:t[r]},backend:n,attrs:{perm:i}}),p.push(e));let o=e.shape.slice();for(let e=0;e<a.length;++e)o.splice(a[e],0,1);f.D5U.arraysEqual(e.shape,o)||(e=ic({inputs:{x:e},backend:n,attrs:{shape:o}}),p.push(e)),null===d?d=e:(d=(0,aT.Jp)({inputs:{a:e,b:d},backend:n}),p.push(d))}e<c-1&&(l[e]>=0&&(d=aN({inputs:{x:d},backend:n,attrs:{axis:l[e]-(a.length-h),keepDims:!1}}),p.push(d)),h--)}for(let e of p)e!==d&&n.disposeIntermediateTensorInfo(e);return d}},aD={kernelName:f.HEU,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{dy:r,y:i}=t;(0,rZ.H)([r,i],"eluGrad");let a=new Float32Array(f.D5U.sizeFromShape(i.shape)),o=n.data.get(i.dataId).values,s=n.data.get(r.dataId).values;for(let e=0;e<o.length;++e){let t=o[e];t>=0?a[e]=s[e]:a[e]=s[e]*(t+1)}return n.makeTensorInfo(i.shape,"float32",a)}};var a$=n(10545);let a_=f.backend_util.ERF_P,aF=f.backend_util.ERF_A1,aO=f.backend_util.ERF_A2,aP=f.backend_util.ERF_A3,aM=f.backend_util.ERF_A4,aL=f.backend_util.ERF_A5,aB=(0,r2.A)(f.Omj,e=>{let t=Math.sign(e),n=Math.abs(e),r=1/(1+a_*n);return t*(1-((((aL*r+aM)*r+aP)*r+aO)*r+aF)*r*Math.exp(-n*n))}),aU={kernelName:f.Omj,backendName:"cpu",kernelFunc:aB};var az=n(58275);function aV(e){let{inputs:t,backend:n,attrs:r}=e,{input:i}=t,{dim:a}=r,o=i.shape.length,s=i.shape.slice(),l=a;return a<0&&(f.D5U.assert(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+a+1),s.splice(l,0,1),ic({inputs:{x:i},backend:n,attrs:{shape:s}})}let aW={kernelName:f.YFo,backendName:"cpu",kernelFunc:aV};var aj=n(85591);let aH=(0,r7.b)((e,t)=>e/t),aK=(0,i_.j)(f.oHH,aH),aG={kernelName:f.oHH,backendName:"cpu",kernelFunc:aK};var aX=n(52199);function aq(e,t,n){let r=e.shape,i=r[0],a=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[i,a],c=f.D5U.sizeFromShape(u),d=f.D5U.getTypedArrayFromDType("float32",c),h=f.D5U.getTypedArrayFromDType("float32",c);for(let e=0;e<i;e++){let r=(0,iG.tP)({inputs:{x:s},backend:n,attrs:{begin:[e,0],size:[1,a]}}),i=(0,iG.tP)({inputs:{x:l},backend:n,attrs:{begin:[e,0],size:[1,a]}}),o=(0,i3.P)({inputs:{real:r,imag:i},backend:n}),{real:u,imag:c}=function(e,t,n){let r=f.D5U.sizeFromShape(e.shape),i=n.data.get(e.dataId),a=n.data.get(i.complexTensorInfos.real.dataId).values,o=n.data.get(i.complexTensorInfos.imag.dataId).values;if((r&r-1)==0){let i=function e(t,n,r,i,a){if(1===r)return{real:t,imag:n};let o=f.backend_util.mergeRealAndImagArrays(t,n),s=r/2,l=f.backend_util.complexWithEvenIndex(o),u=l.real,c=l.imag,d=[u.length],h=a.makeTensorInfo(d,"float32",u),p=a.makeTensorInfo(d,"float32",c),g=(0,i3.P)({inputs:{real:h,imag:p},backend:a}),m=f.backend_util.complexWithOddIndex(o),b=m.real,y=m.imag,v=[b.length],x=a.makeTensorInfo(v,"float32",b),w=a.makeTensorInfo(v,"float32",y),k=(0,i3.P)({inputs:{real:x,imag:w},backend:a}),E=e(u,c,s,i,a),I=E.real,S=E.imag,T=[I.length],C=a.makeTensorInfo(T,"float32",I),N=a.makeTensorInfo(T,"float32",S),A=(0,i3.P)({inputs:{real:C,imag:N},backend:a}),R=e(b,y,s,i,a),D=R.real,$=R.imag,_=[D.length],F=a.makeTensorInfo(_,"float32",D),O=a.makeTensorInfo(_,"float32",$),P=(0,i3.P)({inputs:{real:F,imag:O},backend:a}),M=f.backend_util.exponents(r,i),L=[M.real.length],B=a.makeTensorInfo(L,"float32",M.real),U=a.makeTensorInfo(L,"float32",M.imag),z=(0,i3.P)({inputs:{real:B,imag:U},backend:a}),V=(0,aT.Jp)({inputs:{a:z,b:P},backend:a}),W=(0,iu.IH)({inputs:{a:A,b:V},backend:a}),j=(0,aX.lu)({inputs:{a:A,b:V},backend:a}),H=(0,i7.k)({inputs:{input:W},backend:a}),K=(0,i7.k)({inputs:{input:j},backend:a}),G=i8({inputs:{input:W},backend:a}),X=i8({inputs:{input:j},backend:a}),q=i9({inputs:[H,K],backend:a,attrs:{axis:0}}),Y=i9({inputs:[G,X],backend:a,attrs:{axis:0}}),Q=a.data.get(q.dataId).values,J=a.data.get(Y.dataId).values;return a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(g),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(k),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(A),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(X),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(Y),{real:Q,imag:J}}(a,o,r,t,n),s=[e.shape[0],e.shape[1]];if(t){let e=n.makeTensorInfo(s,"float32",i.real),t=n.makeTensorInfo(s,"float32",i.imag),a=n.makeTensorInfo([],"float32",f.D5U.createScalarValue(r,"float32")),o=(0,r5.y)({inputs:{x:a},backend:n}),l=aG.kernelFunc({inputs:{a:e,b:a},backend:n}),u=aG.kernelFunc({inputs:{a:t,b:o},backend:n}),c=n.data.get(l.dataId).values,d=n.data.get(u.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),{real:c,imag:d}}return i}{let e=function(e,t,n){let r=new Float32Array(2*t);for(let i=0;i<t;i++){let a=0,o=0;for(let r=0;r<t;r++){let s=f.backend_util.exponent(i*r,t,n),l=f.backend_util.getComplexWithIndex(e,r);a+=l.real*s.real-l.imag*s.imag,o+=l.real*s.imag+l.imag*s.real}n&&(a/=t,o/=t),f.backend_util.assignToTypedArray(r,a,o,i)}return r}(f.backend_util.mergeRealAndImagArrays(a,o),r,t);return f.backend_util.splitRealAndImagArrays(e)}}(o,t,n),p=f.backend_util.mergeRealAndImagArrays(u,c);for(let t=0;t<a;t++){let n=f.backend_util.getComplexWithIndex(p,t);d[e*a+t]=n.real,h[e*a+t]=n.imag}n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o)}let p=n.makeTensorInfo(u,"float32",d),g=n.makeTensorInfo(u,"float32",h),m=(0,i3.P)({inputs:{real:p,imag:g},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),m}let aY={kernelName:f.vwp,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t,i=f.D5U.sizeFromShape(r.shape),a=r.shape[r.shape.length-1],o=ic({inputs:{x:r},backend:n,attrs:{shape:[i/a,a]}}),s=aq(o,!1,n),l=ic({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}};function aQ(e){let{backend:t,attrs:n}=e,{shape:r,value:i,dtype:a}=n,o=a||f.D5U.inferDtype(i),s=f.D5U.getArrayFromDType(o,f.D5U.sizeFromShape(r));return function(e,t,n){e.fill(t)}(s,i,0),t.makeTensorInfo(r,o,s)}let aJ={kernelName:f.deh,backendName:"cpu",kernelFunc:aQ},aZ={kernelName:f.Uyb,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,i=f.D5U.getTypedArrayFromDType(r.dtype,f.D5U.sizeFromShape(r.shape)),[a,o,s,l]=r.shape,u=n.data.get(r.dataId).values;for(let e=0;e<a;e++){let t=e*s*o*l;for(let e=0;e<o;e++){let n=s*l*e;for(let e=0;e<s;e++){let r=e*l;for(let a=0;a<l;a++){let o=Math.round(s-e-1),c=t+n+r+a,d=u[c];o>=0&&o<s&&(d=u[t+n+o*l+a]),i[c]=d}}}}return{dataId:n.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};var a0=n(23813);let a1=(0,r7.b)((e,t)=>Math.floor(e/t)),a2=(0,i_.j)(f.jeX,a1,null,"int32"),a3={kernelName:f.jeX,backendName:"cpu",kernelFunc:a2},a4={kernelName:f._V0,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,bias:o,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=r,g=at({inputs:{x:i,filter:a},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h}});if(o){let e=g;if("NCHW"===c&&1===o.shape.length&&1!==o.shape[0]){let e=ic({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});g=(0,iu.IH)({inputs:{a:g,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else g=(0,iu.IH)({inputs:{a:g,b:o},backend:n});n.disposeIntermediateTensorInfo(e)}if(f){let e=g;if("NCHW"===c&&"prelu"===f&&1===s.shape.length&&1!==s.shape[0]){let e=ic({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});g=il(n,g,f,e,p),n.disposeIntermediateTensorInfo(e)}else g=il(n,g,f,s,p);n.disposeIntermediateTensorInfo(e)}return g}},a5={kernelName:f.luS,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,bias:o,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=r,g=ab({inputs:{x:i,filter:a},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h}});if(o){let e=g;g=(0,iu.IH)({inputs:{a:g,b:o},backend:n}),n.disposeIntermediateTensorInfo(e)}if(f){let e=g;g=il(n,g,f,s,p),n.disposeIntermediateTensorInfo(e)}return g}};var a8=n(69169);let a6={kernelName:f.q1x,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{params:r,indices:i}=t,a=f.D5U.sizeFromShape(r.shape),o=i.shape,s=o[o.length-1],[l,u,c,d]=f.backend_util.prepareAndValidate(r,i);if(0===u)return n.makeTensorInfo(l,r.dtype,[]);let h=n.data.get(i.dataId).values,p=n.bufferSync(r),g=(0,a8.m)(h,p,r.dtype,u,s,c,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,g.values)}};var a7=n(53964);let a9={kernelName:f.qi_,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,indices:a}=t,{axis:o,batchDims:s}=r;(0,rZ.H)([i,a],"gatherV2");let l=f.D5U.parseAxisParam(o,i.shape)[0],u=n.data.get(a.dataId).values,c=i.shape[l];for(let e=0;e<u.length;++e){let t=u[e];f.D5U.assert(t<=c-1&&t>=0,()=>`GatherV2: the index value ${t} is not in [0, ${c-1}]`)}let d=s;null==s&&(d=0);let h=f.D5U.sizeFromShape(a.shape),p=f.backend_util.segment_util.collectGatherOpShapeInfo(i,a,l,d),g=ic({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=ic({inputs:{x:a},backend:n,attrs:{shape:[p.batchSize,h/p.batchSize]}}),b=[p.batchSize,p.outerSize,h/p.batchSize,p.sliceSize],y=n.bufferSync(m),v=n.bufferSync(g),x=(0,a7.i)(v,y,b);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,x.dtype,x.values)}};var oe=n(90054),ot=n(66450);let on={kernelName:f.Qg5,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t,i=f.D5U.sizeFromShape(r.shape),a=r.shape[r.shape.length-1],o=ic({inputs:{x:r},backend:n,attrs:{shape:[i/a,a]}}),s=aq(o,!0,n),l=ic({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}},or=(0,r2.A)(f.avt,e=>Number.isFinite(e)?1:0,"bool"),oi={kernelName:f.avt,backendName:"cpu",kernelFunc:or},oa=(0,r2.A)(f.iWB,e=>Math.abs(e)===1/0?1:0,"bool"),oo={kernelName:f.iWB,backendName:"cpu",kernelFunc:oa},os=(0,r2.A)(f.r7n,e=>Number.isNaN(e)?1:0,"bool"),ol={kernelName:f.r7n,backendName:"cpu",kernelFunc:os};var ou=n(94626),oc=n(79776),od=n(12950);let oh={kernelName:f.e7N,backendName:"cpu",kernelFunc:function(e){let{backend:t,attrs:n}=e,{start:r,stop:i,num:a}=n,o=(0,od.b)(r,i,a);return t.makeTensorInfo([o.length],"float32",o)}};var of=n(90290);let op=(0,r2.A)(f.kU,e=>Math.log1p(e)),og={kernelName:f.kU,backendName:"cpu",kernelFunc:op},om=(0,r7.b)((e,t)=>e&&t),ob=(0,i_.j)(f.PYm,om,null,"bool"),oy={kernelName:f.PYm,backendName:"cpu",kernelFunc:ob},ov=(0,r2.A)(f.VfG,e=>e?0:1,"bool"),ox={kernelName:f.VfG,backendName:"cpu",kernelFunc:ov},ow=(0,r7.b)((e,t)=>e||t),ok=(0,i_.j)(f.MZg,ow,null,"bool"),oE={kernelName:f.MZg,backendName:"cpu",kernelFunc:ok},oI={kernelName:f.eZ0,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:a,bias:o,alpha:s,beta:l}=r;(0,rZ.H)(i,"LRN");let u=i.shape[3],c=u-1,d=n.data.get(i.dataId).values,h=f.D5U.sizeFromShape(i.shape),p=new Float32Array(h);for(let e=0;e<h;e++){let t=function(e){let t=e%u,n=e-t+Math.max(0,t-a),r=e-t+Math.min(t+a,c),i=0;for(;n<=r;n++){let e=d[n];i+=e*e}return i}(e),n=d[e]*Math.pow(o+s*t,-l);p[e]=n}return n.makeTensorInfo(i.shape,i.dtype,p)}},oS={kernelName:f.Hhh,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,y:a,dy:o}=t,{depthRadius:s,bias:l,alpha:u,beta:c}=r;(0,rZ.H)(o,"LRNGrad");let d=f.D5U.sizeFromShape(o.shape),h=o.shape[3],p=n.data.get(o.dataId).values,g=n.data.get(i.dataId).values,m=n.data.get(a.dataId).values,b=new Float32Array(d);for(let e=0;e<d;e++){let t=e%h,n=e-t+Math.max(0,t-s),r=e-t+Math.min(h,t+s+1),i=0;for(let e=n;e<r;e++)i+=Math.pow(g[e],2);i=u*i+l;for(let t=n;t<r;t++){let n=-2*u*c*g[t]*m[e]/i;e===t&&(n+=Math.pow(i,-c)),n*=p[e],b[t]+=n}}return n.makeTensorInfo(o.shape,i.dtype,b)}};var oT=n(42529),oC=n(26339);function oN(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:a,keepDims:o}=r,s=i.shape,l=s.length,u=f.D5U.parseAxisParam(a,s),c=u,d=f.backend_util.getAxesPermutation(c,l),h=n.data.get(i.dataId).values;if(null!=d){let e=Array(l);for(let t=0;t<e.length;t++)e[t]=s[d[t]];h=(0,oC.H)(h,s,i.dtype,d,e),c=f.backend_util.getInnerMostAxes(c.length,l),s=e}(0,rZ.H)(i,"max"),f.backend_util.assertAxesAreInnerMostDims("max",c,l);let[p,g]=f.backend_util.computeOutAndReduceShapes(s,c),m=f.D5U.sizeFromShape(g),b=(0,oT.B)(h,m,p,i.dtype),y=n.write(b,p,i.dtype),v=p;return o&&(v=f.backend_util.expandShapeToKeepDim(p,u)),{dataId:y,shape:v,dtype:i.dtype}}let oA={kernelName:f.YoZ,backendName:"cpu",kernelFunc:oN};var oR=n(34536);let oD={kernelName:f.mTV,backendName:"cpu",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a}=n;(0,rZ.H)(a,"maxPool");let{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=i;f.D5U.assert(f.backend_util.eitherStridesOrDilationsAreOne(s,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`);let c=f.backend_util.computePool2DInfo(a.shape,o,s,1,l,u);if(1===c.filterWidth&&1===c.filterHeight&&f.D5U.arraysEqual(c.inShape,c.outShape))t=(0,r5.y)({inputs:{x:a},backend:r});else{let e=r.data.get(a.dataId).values,n=f.D5U.computeStrides(a.shape),i=iB(e,a.shape,a.dtype,n,c,"max");t=r.makeTensorInfo(c.outShape,a.dtype,i.values)}return t}},o$={kernelName:f.OAf,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;(0,rZ.H)(i,"maxPool3d");let c=f.backend_util.computePool3DInfo(i.shape,a,o,1,s,l,u),d=iz(n.data.get(i.dataId).values,i.shape,i.dtype,f.D5U.computeStrides(i.shape),c,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}},o_={kernelName:f.OU7,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;(0,rZ.H)([i,a],"maxPool3DGrad");let c=f.backend_util.computePool3DInfo(a.shape,o,s,1,l,u),d=function(e,t){let n=(0,f.f3b)(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,g=t.padInfo.left;for(let f=0;f<t.batchSize;++f)for(let m=0;m<t.inChannels;++m)for(let b=0;b<t.outDepth;++b){let y=b*r-h,v=y;for(;v<0;)v+=o;let x=Math.min(t.inDepth,u+y);for(let r=0;r<t.outHeight;++r){let u=r*i-p,h=u;for(;h<0;)h+=s;let w=Math.min(t.inHeight,c+u);for(let i=0;i<t.outWidth;++i){let p=i*a-g,k=p;for(;k<0;)k+=l;let E=Math.min(t.inWidth,d+p),I=Number.NEGATIVE_INFINITY,S=-1;for(let t=v;t<x;t+=o){let n=t-y;for(let r=h;r<w;r+=s){let i=r-u;for(let a=k;a<E;a+=l){let o=a-p,s=e.get(f,t,r,a,m);s>=I&&(I=s,S=n*c*d+i*c+o)}}}n.set(S,f,b,r,i,m)}}}return n}(n.bufferSync(a),c),h=c.strideDepth,p=c.strideHeight,g=c.strideWidth,m=c.dilationDepth,b=c.dilationHeight,y=c.dilationWidth,v=c.effectiveFilterDepth,x=c.effectiveFilterHeight,w=c.effectiveFilterWidth,k=v-1-c.padInfo.front,E=w-1-c.padInfo.left,I=x-1-c.padInfo.top,S=(0,f.f3b)(a.shape,"float32"),T=n.bufferSync(i);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let n=0;n<c.inDepth;++n)for(let r=0;r<c.inHeight;++r)for(let i=0;i<c.inWidth;++i){let a=n-k,o=r-I,s=i-E,l=0;for(let n=0;n<v;n+=m){let r=(a+n)/h;if(!(r<0)&&!(r>=c.outDepth)&&Math.floor(r)===r)for(let i=0;i<x;i+=b){let a=(o+i)/p;if(!(a<0)&&!(a>=c.outHeight)&&Math.floor(a)===a)for(let o=0;o<w;o+=y){let u=(s+o)/g;if(u<0||u>=c.outWidth||Math.floor(u)!==u)continue;let h=v*x*w-1-d.get(e,r,a,u,t)===n*x*w+i*w+o?1:0;0!==h&&(l+=T.get(e,r,a,u,t)*h)}}}S.set(l,e,n,r,i,t)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}},oF={kernelName:f.OV7,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a,output:o}=t;(0,rZ.H)([a,o],"maxPoolGrad");let{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=f.backend_util.computePool2DInfo(a.shape,s,l,1,u,c),h=n.data.get(a.dataId).values,p=(0,f.f3b)(d.outShape,a.dtype,iU(h,a.shape,a.dtype,d).values),g=d.strideHeight,m=d.strideWidth,b=d.dilationHeight,y=d.dilationWidth,v=d.effectiveFilterHeight,x=d.effectiveFilterWidth,w=x-1-d.padInfo.left,k=v-1-d.padInfo.top,E=(0,f.f3b)(a.shape,"float32"),I=n.data.get(i.dataId).values,S=(0,f.f3b)(i.shape,"float32",I);for(let e=0;e<d.batchSize;++e)for(let t=0;t<d.inChannels;++t)for(let n=0;n<d.inHeight;++n)for(let r=0;r<d.inWidth;++r){let i=n-k,a=r-w,o=0;for(let n=0;n<v;n+=b){let r=(i+n)/g;if(!(r<0)&&!(r>=d.outHeight)&&Math.floor(r)===r)for(let i=0;i<x;i+=y){let s=(a+i)/m;if(s<0||s>=d.outWidth||Math.floor(s)!==s)continue;let l=v*x-1-p.get(e,r,s,t)===n*x+i?1:0;0!==l&&(o+=S.get(e,r,s,t)*l)}}E.set(o,e,n,r,t)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}},oO={kernelName:f.vFR,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:i,strides:a,pad:o,includeBatchInIndex:s}=t;(0,rZ.H)(r,"MaxPoolWithArgmax");let l=n.data.get(r.dataId).values,u=f.backend_util.computePool2DInfo(r.shape,i,a,[1,1],o),[c,d]=function(e,t,n,r,i){let a=f.D5U.computeStrides(t),o=iB(e,t,n,a,i,"max"),s=iU(e,t,n,i,!0,r);return[o.values,s.values]}(l,r.shape,r.dtype,s,u),h=n.write(c,u.outShape,r.dtype),p=n.write(d,u.outShape,r.dtype);return[{dataId:h,shape:u.outShape,dtype:r.dtype},{dataId:p,shape:u.outShape,dtype:"int32"}]}},oP={kernelName:f.q2K,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r,s=f.D5U.parseAxisParam(a,i.shape),l=f.backend_util.computeOutAndReduceShapes(i.shape,s)[1],u=f.D5U.sizeFromShape(l),c=[],d=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(d);let h=(0,iZ.pj)({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});c.push(h);let p=aK({inputs:{a:h,b:d},backend:n});c.push(p);let g=aN({inputs:{x:p},backend:n,attrs:{axis:a,keepDims:o}});return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),g}},oM={kernelName:f.c17,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r;(0,rZ.H)(i,"min");let s=f.D5U.parseAxisParam(a,i.shape),l=s,u=f.backend_util.getAxesPermutation(l,i.shape.length),c=i;null!=u&&(c=(0,ik.p)({inputs:{x:i},backend:n,attrs:{perm:u}}),l=f.backend_util.getInnerMostAxes(l.length,i.shape.length)),f.backend_util.assertAxesAreInnerMostDims("min",l,c.shape.length);let[d,h]=f.backend_util.computeOutAndReduceShapes(c.shape,l),p=f.D5U.sizeFromShape(h),g=f.D5U.makeZerosTypedArray(f.D5U.sizeFromShape(d),c.dtype),m=n.data.get(c.dataId).values;for(let e=0;e<g.length;++e){let t=e*p,n=m[t];for(let e=0;e<p;++e){let r=m[t+e];(Number.isNaN(r)||r<n)&&(n=r)}g[e]=n}null!=u&&n.disposeIntermediateTensorInfo(c);let b=n.makeTensorInfo(d,c.dtype,g);if(o){let e=ic({inputs:{x:b},backend:n,attrs:{shape:f.backend_util.expandShapeToKeepDim(d,s)}});return n.disposeIntermediateTensorInfo(b),e}return b}};var oL=n(60168);let oB={kernelName:f.jQs,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:a,mode:o}=r;(0,rZ.H)(i,"mirrorPad");let s=a.map((e,t)=>e[0]+i.shape[t]+e[1]),l=a.map(e=>e[0]),u=a.map((e,t)=>e[0]+i.shape[t]),c="reflect"===o?0:1,d=n.data.get(i.dataId).values,h=i.shape.length,p=f.D5U.computeStrides(i.shape),g=f.D5U.sizeFromShape(s),m=s.length,b=f.D5U.computeStrides(s),y=f.D5U.getTypedArrayFromDType(i.dtype,g);for(let e=0;e<g;e++){let t=f.D5U.indexToLoc(e,m,b);for(let e=0;e<m;e++)t[e]<l[e]?t[e]=2*l[e]-t[e]-c:t[e]>=u[e]&&(t[e]=(u[e]-1)*2-t[e]+c);t=t.map((e,t)=>e-l[t]);let n=f.D5U.locToIndex(t,h,p);y[e]=d[n]}return{dataId:n.write(y,s,i.dtype),shape:s,dtype:i.dtype}}},oU=(0,r7.b)((e,t)=>{let n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),oz=(0,i_.j)(f.Vbg,oU),oV={kernelName:f.Vbg,backendName:"cpu",kernelFunc:oz};function oW(e){let{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:a}=r,o=i.shape.length,s=a;if(-1===s&&(s=o-1),s!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${s}`);let l=f.D5U.parseAxisParam([s],i.shape),u=oN({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=f.backend_util.expandShapeToKeepDim(u.shape,l),d=ic({inputs:{x:u},backend:n,attrs:{shape:c}}),h=(0,aX.lu)({inputs:{a:i,b:d},backend:n}),p=(0,az.Qq)({inputs:{x:h},backend:n}),g=aN({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),m=ic({inputs:{x:g},backend:n,attrs:{shape:c}}),b=aK({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),b}let oj={kernelName:f.Gcp,backendName:"cpu",kernelFunc:oW},oH={kernelName:f.NZg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:a,seed:o,normalized:s}=r;(0,rZ.H)(i,"multinomial");let l=s?i:oW({inputs:{logits:i},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,h=[u,a],p=f.D5U.makeZerosTypedArray(f.D5U.sizeFromShape(h),"int32");for(let e=0;e<u;++e){let t=e*c,n=new Float32Array(c-1);n[0]=d[t];for(let e=1;e<n.length;++e)n[e]=n[e-1]+d[t+e];let r=rN.alea(o.toString()),i=e*a;for(let e=0;e<a;++e){let t=r();p[i+e]=n.length;for(let r=0;r<n.length;r++)if(t<n[r]){p[i+e]=r;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",p)}};var oK=n(40358);let oG=f.GDt.GP,oX={kernelName:f.uv1,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r;(0,rZ.H)(i,"NonMaxSuppression");let{selectedIndices:u}=oG(n.data.get(i.dataId).values,n.data.get(a.dataId).values,o,s,l);return n.makeTensorInfo([u.length],"int32",new Int32Array(u))}},oq=f.GDt.qP,oY={kernelName:f.cye,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r;(0,rZ.H)(i,"NonMaxSuppressionPadded");let{selectedIndices:c,validOutputs:d}=oq(n.data.get(i.dataId).values,n.data.get(a.dataId).values,o,s,l,u);return[n.makeTensorInfo([c.length],"int32",new Int32Array(c)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}},oQ=f.GDt.pA,oJ={kernelName:f.W0H,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r;(0,rZ.H)(i,"NonMaxSuppressionWithScore");let{selectedIndices:c,selectedScores:d}=oQ(n.data.get(i.dataId).values,n.data.get(a.dataId).values,o,s,l,u);return[n.makeTensorInfo([c.length],"int32",new Int32Array(c)),n.makeTensorInfo([d.length],"float32",new Float32Array(d))]}};var oZ=n(40298);let o0={kernelName:f.we_,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:a,depth:o,onValue:s,offValue:l}=r;(0,rZ.H)(i,"oneHot");let u=f.D5U.sizeFromShape(i.shape),c=new Float32Array(u*o);c.fill(l);let d=n.data.get(i.dataId).values;for(let e=0;e<u;++e)d[e]>=0&&d[e]<o&&(c[e*o+d[e]]=s);return n.makeTensorInfo([...i.shape,o],a,c)}};function o1(e){let{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw Error("zerosLike is not supported for string tensors");if("complex64"!==r.dtype)return aQ({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}});{let e=(0,i7.k)({inputs:{input:r},backend:n}),t=o1({inputs:{x:e},backend:n}),i=i8({inputs:{input:r},backend:n}),a=o1({inputs:{x:i},backend:n}),o=(0,i3.P)({inputs:{real:t,imag:a},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),o}}let o2={kernelName:f.RuY,backendName:"cpu",kernelFunc:o1},o3={kernelName:f.qWM,backendName:"cpu",kernelFunc:function e(t){let{inputs:n,backend:r}=t,{x:i}=n;if("string"===i.dtype)throw Error("onesLike is not supported for string tensors");if("complex64"!==i.dtype)return aQ({backend:r,attrs:{shape:i.shape,value:1,dtype:i.dtype}});{let t=(0,i7.k)({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r}),a=i8({inputs:{input:i},backend:r}),o=o1({inputs:{x:a},backend:r}),s=(0,i3.P)({inputs:{real:n,imag:o},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(o),s}}};function o4(e){let{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return aV({inputs:{input:t[0]},backend:n,attrs:{dim:i}});let a=t[0].shape,o=t[0].dtype;t.forEach(e=>{f.D5U.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),f.D5U.assert(o===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let s=[],l=i9({inputs:t.map(e=>{let t=aV({inputs:{input:e},backend:n,attrs:{dim:i}});return s.push(t),t}),backend:n,attrs:{axis:i}});return s.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}let o5={kernelName:f.QiL,backendName:"cpu",kernelFunc:o4},o8={kernelName:f.lyA,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:a,constantValue:o}=r;(0,rZ.H)(i,"pad");let s=a.map((e,t)=>e[0]+i.shape[t]+e[1]),l=a.map(e=>e[0]),u=n.data.get(i.dataId).values,c=f.D5U.sizeFromShape(i.shape),d=i.shape.length,h=f.D5U.computeStrides(i.shape),p=f.D5U.sizeFromShape(s),g=s.length,m=f.D5U.computeStrides(s),b=f.D5U.getTypedArrayFromDType(i.dtype,p);0!==o&&b.fill(o);for(let e=0;e<c;e++){let t=f.D5U.indexToLoc(e,d,h).map((e,t)=>e+l[t]);b[f.D5U.locToIndex(t,g,m)]=u[e]}return{dataId:n.write(b,s,i.dtype),shape:s,dtype:i.dtype}}},o6=(0,r7.b)((e,t)=>Math.pow(e,t)),o7=(0,i_.j)(f.pe_,o6),o9={kernelName:f.pe_,backendName:"cpu",kernelFunc:o7};var se=n(18787),st=n(48153);let sn={kernelName:f.dDz,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:a,indices:o}=t,{outputRaggedRank:s}=r,l=i.map(e=>n.data.get(e.dataId).values),u=i.map(e=>e.shape),c=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,[h,f,p]=(0,st.c)(l,u,c,a.shape,a.dtype,d,o.shape,s),g=h.map(e=>n.makeTensorInfo([e.length],"int32",e)),m=n.makeTensorInfo(p,a.dtype,f);return g.concat([m])}};var sr=n(83230);let si={kernelName:f.CQl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:a}=t,o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[u,c]=(0,sr.S)(o,r.shape,r.dtype,s,i.shape,l,a.shape);return[n.makeTensorInfo([u.length],"int32",u),n.makeTensorInfo([c.length],r.dtype,c)]}};var sa=n(30792);let so={kernelName:f.BiW,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{shape:i,values:a,defaultValue:o,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,u=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,h=s.map(e=>n.data.get(e.dataId).values),f=s.map(e=>e.shape),[p,g]=(0,sa.p)(u,i.shape,c,a.shape,a.dtype,d,o.shape,h,f,l);return n.makeTensorInfo(p,a.dtype,g)}};var ss=n(24971);let sl={kernelName:f.e6w,backendName:"cpu",kernelFunc:function(e){let{backend:t,attrs:n}=e,{start:r,stop:i,dtype:a,step:o}=n,s=(0,ss.b)(r,i,o,a);return t.makeTensorInfo([s.length],a,s)}},su=(0,r2.A)(f.$HU,e=>1/e),sc={kernelName:f.$HU,backendName:"cpu",kernelFunc:su},sd={kernelName:f._Yw,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:o,size:s}=r;(0,rZ.H)(i,"resizeBilinear");let l=f.D5U.computeStrides(i.shape),[u,c]=s,[d,h,p,g]=i.shape,m=n.data.get(i.dataId).values,b=new Float32Array(f.D5U.sizeFromShape([d,u,c,g])),y=[a&&u>1?h-1:h,a&&c>1?p-1:p],v=[a&&u>1?u-1:u,a&&c>1?c-1:c],x=0,w=y[0]/v[0],k=y[1]/v[1];for(let e=0;e<d;e++)for(let t=0;t<u;t++){let n;let r=Math.max(0,Math.floor(n=o?w*(t+.5)-.5:w*t)),i=n-r,a=Math.min(h-1,Math.ceil(n)),s=e*l[0]+r*l[1],u=e*l[0]+a*l[1];for(let e=0;e<c;e++){let t;let n=Math.max(0,Math.floor(t=o?k*(e+.5)-.5:k*e)),r=t-n,a=Math.min(p-1,Math.ceil(t)),c=s+n*l[2],d=u+n*l[2],h=s+a*l[2],f=u+a*l[2];for(let e=0;e<g;e++){let t=m[c+e],n=m[d+e],a=m[h+e],o=m[f+e],s=t+(a-t)*r,l=s+(n+(o-n)*r-s)*i;b[x++]=l}}}return n.makeTensorInfo([d,u,c,g],"float32",b)}},sh={kernelName:f.zbQ,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:o}=r;(0,rZ.H)([a,i],"resizeBilinearGrad");let s=f.D5U.computeStrides(i.shape),[l,u,c,d]=i.shape,[,h,p]=a.shape,g=new Float32Array(l*u*c*d),m=[o&&h>1?u-1:u,o&&p>1?c-1:c],b=[o&&h>1?h-1:h,o&&p>1?p-1:p],y=m[0]/b[0],v=m[1]/b[1],x=n.data.get(a.dataId).values,w=0;for(let e=0;e<l;e++){let t=e*s[0];for(let e=0;e<h;e++){let n=e*y,r=Math.floor(n),i=Math.min(Math.ceil(n),u-1),a=t+r*s[1],o=t+i*s[1],l=n-r,h=1-l;for(let e=0;e<p;e++){let t=e*v,n=Math.floor(t),r=Math.min(Math.ceil(t),c-1),i=t-n,u=1-i,f=a+n*s[2],p=a+r*s[2],m=o+n*s[2],b=o+r*s[2],y=h*u,k=h*i,E=l*u,I=l*i;for(let e=0;e<d;e++){let t=x[w++];g[f+e]+=t*y,g[p+e]+=t*k,g[m+e]+=t*E,g[b+e]+=t*I}}}}return n.makeTensorInfo([l,c,u,d],"float32",g)}},sf={kernelName:f.dpD,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:o,size:s}=r;(0,rZ.H)(i,"resizeNearestNeighbor");let l=f.D5U.computeStrides(i.shape),[u,c]=s,[d,h,p,g]=i.shape,m=n.data.get(i.dataId).values,b=new Float32Array(d*u*c*g),y=[a&&u>1?h-1:h,a&&c>1?p-1:p],v=[a&&u>1?u-1:u,a&&c>1?c-1:c],x=y[0]/v[0],w=y[1]/v[1],k=0;for(let e=0;e<d;e++){let t=e*l[0];for(let e=0;e<u;e++){let n=o?x*(e+.5):x*e,r=Math.min(h-1,a?Math.round(n):Math.floor(n));o&&(r=Math.max(0,r));let i=t+r*l[1];for(let e=0;e<c;e++){let t=o?w*(e+.5):w*e,n=Math.min(p-1,a?Math.round(t):Math.floor(t));o&&(n=Math.max(0,n));let r=i+n*l[2];for(let e=0;e<g;e++){let t=m[r+e];b[k++]=t}}}}return n.makeTensorInfo([d,u,c,g],i.dtype,b)}},sp={kernelName:f.Hmb,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:o}=r;(0,rZ.H)([a,i],"resizeNearestNeighborGrad");let s=f.D5U.computeStrides(i.shape),l=f.D5U.computeStrides(a.shape),[u,c,d,h]=i.shape,[,p,g]=a.shape,m=new Float32Array(u*c*d*h),b=n.data.get(a.dataId).values,y=[o&&p>1?c-1:c,o&&g>1?d-1:d],v=[o&&p>1?p-1:p,o&&g>1?g-1:g],x=y[0]/v[0],w=y[1]/v[1],k=1/x,E=1/w,I=2*Math.ceil(k)+2,S=2*Math.ceil(E)+2;for(let e=0;e<u;e++){let t=e*s[0];for(let e=0;e<c;e++){let n=t+e*s[1],r=Math.floor(Math.floor(e*k)-I/2);for(let i=0;i<d;i++){let a=n+i*s[2],u=Math.floor(Math.floor(i*E)-S/2);for(let n=0;n<h;n++){let s=0;for(let a=0;a<I;a++){let h=a+r;if(h<0||h>=p)continue;let f=t+h*l[1],m=h*x;if(e===Math.min(c-1,o?Math.round(m):Math.floor(m)))for(let e=0;e<S;e++){let t=e+u;if(t<0||t>=g)continue;let r=f+t*l[2],a=t*w;i===Math.min(d-1,o?Math.round(a):Math.floor(a))&&(s+=b[r+n])}}m[a+n]=s}}}}return n.makeTensorInfo(i.shape,i.dtype,m)}},sg={kernelName:f.mKl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:a}=r;(0,rZ.H)(i,"reverse");let o=i.shape.length,s=f.D5U.parseAxisParam(a,i.shape);if(0===o)return(0,r5.y)({inputs:{x:i},backend:n});let l=new f.YDk(i.shape,i.dtype),u=n.bufferSync(i);for(let e=0;e<l.size;e++){let t=l.indexToLoc(e),n=t.slice();s.forEach(e=>n[e]=i.shape[e]-1-n[e]),l.set(u.get(...n),...t)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},sm={kernelName:f.b9H,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:i,fillValue:a,center:o}=t,s=f.D5U.getTypedArrayFromDType(r.dtype,f.D5U.sizeFromShape(r.shape)),[l,u,c,d]=r.shape,[h,p]=f.backend_util.getImageCenter(o,u,c),g=Math.sin(i),m=Math.cos(i),b=n.data.get(r.dataId).values;for(let e=0;e<l;e++){let t=e*c*u*d;for(let e=0;e<u;e++){let n=c*d*e;for(let r=0;r<c;r++){let i=r*d;for(let o=0;o<d;o++){let f=[l,e,r,o],y=f[2],v=f[1],x=(y-h)*m-(v-p)*g,w=(y-h)*g+(v-p)*m;x=Math.round(x+h),w=Math.round(w+p);let k=a;"number"!=typeof a&&(k=3===o?255:a[o]),x>=0&&x<c&&w>=0&&w<u&&(k=b[t+c*d*w+x*d+o]),s[t+n+i+o]=k}}}}return{dataId:n.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},sb=(0,r2.A)(f.e07,e=>{let t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1}),sy={kernelName:f.e07,backendName:"cpu",kernelFunc:sb};var sv=n(23894),sx=n(54589);let sw={kernelName:f.xQA,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:a}=t,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=f.backend_util.calculateShapes(a,i,o),h=n.bufferSync(i),p=n.bufferSync(a),g=(0,sx.N)(h,p,o,d,u,l,s,c,0,!0);return n.makeTensorInfo(o,g.dtype,g.values)}},sk={kernelName:f.nr8,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:a}=t,{side:o}=r,s=function(e,t,n,r,i,a){let o=f.D5U.getArrayFromDType("int32",n*i);for(let s=0;s<n;++s){let n=e.slice(s*r,(s+1)*r),l=s*i;for(let e=0;e<i;++e)o[l+e]="left"===a?function(e,t){let n=0,r=e.length,i=0;for(;n<r;)e[i=Math.floor((n+r)/2)]<t?n=i+1:r=i;return r}(n,t[e+l]):function(e,t){let n=0,r=e.length,i=0;for(;n<r;)e[i=Math.floor((n+r)/2)]<=t?n=i+1:r=i;return r}(n,t[e+l])}return o}(n.data.get(i.dataId).values,n.data.get(a.dataId).values,i.shape[0],i.shape[1],a.shape[1],o);return n.makeTensorInfo(a.shape,"int32",s)}},sE={kernelName:f.PhF,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{condition:r,t:i,e:a}=t;(0,rZ.H)([r,i,a],"select");let o=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,c=(0,f.x8V)(i.dtype,a.dtype),d=f.D5U.makeZerosTypedArray(f.D5U.sizeFromShape(i.shape),c),h=0,p=0===o||o>1||1===i.shape.length?1:f.D5U.sizeFromShape(i.shape.slice(1));for(let e=0;e<s.length;e++)for(let t=0;t<p;t++)1===s[e]?d[h++]=l[e]:d[h++]=u[e];return n.makeTensorInfo(i.shape,c,d)}},sI=f.backend_util.SELU_SCALEALPHA,sS=f.backend_util.SELU_SCALE,sT=(0,r2.A)(f.oFR,e=>e>=0?sS*e:sI*(Math.exp(e)-1)),sC={kernelName:f.oFR,backendName:"cpu",kernelFunc:sT},sN=(0,r2.A)(f.i5y,e=>e<0?-1:e>0?1:0),sA={kernelName:f.i5y,backendName:"cpu",kernelFunc:sN},sR=(0,r2.A)(f.RQH,e=>Math.sin(e)),sD={kernelName:f.RQH,backendName:"cpu",kernelFunc:sR},s$=(0,r2.A)(f.wYB,e=>Math.sinh(e)),s_={kernelName:f.wYB,backendName:"cpu",kernelFunc:s$},sF=Math.log(11920928955078125e-23)+2,sO=(0,r2.A)(f.MRv,e=>{let t=Math.exp(e);return e<sF?t:e>-sF?e:Math.log(1+t)}),sP={kernelName:f.MRv,backendName:"cpu",kernelFunc:sO},sM={kernelName:f.TQc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,paddings:o}=r;(0,rZ.H)([i],"spaceToBatchND");let s=f.D5U.sizeFromShape(a),l=[[0,0]];l.push(...o);for(let e=1+a.length;e<i.shape.length;++e)l.push([0,0]);let u=o8.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),c=f.backend_util.getReshaped(u.shape,a,s,!1),d=f.backend_util.getPermuted(c.length,a.length,!1),h=f.backend_util.getReshapedPermuted(u.shape,a,s,!1),p=ic({inputs:{x:u},backend:n,attrs:{shape:c}}),g=(0,ik.p)({inputs:{x:p},backend:n,attrs:{perm:d}}),m=ic({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),m}};var sL=n(48560);let sB={kernelName:f.O3z,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:a,defaultValue:o}=t;if(1!==a.shape.length)throw Error(`Dense shape must be a vector, saw:
        ${a.shape}`);if(2!==r.shape.length)throw Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(1!==i.shape.length)throw Error(`Values must be a vector, saw:
        ${i.shape}`);if(0!==o.shape.length)throw Error(`Default value must be a scalar, saw:
        ${o.shape}`);let s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values[0],[d,h,f,p,g]=(0,sL.c)(s,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],i.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(e=>Number(e)))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};var sU=n(38668);let sz={kernelName:f.nhH,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:a}=t;if(2!==r.shape.length)throw Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(1!==i.shape.length)throw Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(1!==a.shape.length)throw Error(`Target shape should be a vector but received shape ${a.shape}`);let o=Array.from(n.data.get(i.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(a.dataId).values),[u,c,d]=(0,sU.U)(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}};var sV=n(11017);let sW={kernelName:f.w3H,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw Error(`Indices should be a vector but received shape
          ${i.shape}`);if(1!==a.shape.length)throw Error(`Segment ids should be a vector but received shape
          ${a.shape}`);if(i.shape[0]!==a.shape[0])throw Error("segmentIds and indices should have same size.");let o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[u,c]=(0,sV.V)(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}},sj={kernelName:f.ZjV,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw Error(`Indices should be a vector but received shape
         ${i.shape}`);if(1!==a.shape.length)throw Error(`Segment ids should be a vector but received shape
         ${a.shape}`);if(i.shape[0]!==a.shape[0])throw Error("segmentIds and indices should have same size.");let o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[u,c]=(0,sV.V)(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}},sH={kernelName:f.D2d,backendName:"cpu",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{sparseIndices:a,sparseValues:o,defaultValue:s}=n,{outputShape:l}=i,{sliceRank:u,numUpdates:c,sliceSize:d,strides:h,outputSize:p}=f.backend_util.calculateShapes(o,a,l),g=r.bufferSync(a);switch(o.dtype){case"bool":{let e=r.bufferSync(o),n=!!r.data.get(s.dataId).values[0];t=(0,sx.N)(g,e,l,p,d,c,u,h,n,!1);break}case"float32":{let e=r.bufferSync(o),n=r.data.get(s.dataId).values[0];t=(0,sx.N)(g,e,l,p,d,c,u,h,n,!1);break}case"int32":{let e=r.bufferSync(o),n=r.data.get(s.dataId).values[0];t=(0,sx.N)(g,e,l,p,d,c,u,h,n,!1);break}case"string":{let e=r.bufferSync(o),n=f.D5U.decodeString(r.data.get(s.dataId).values[0]);t=(0,sx.N)(g,e,l,p,d,c,u,h,n,!1);break}default:throw Error(`Unsupported type ${o.dtype}`)}return r.makeTensorInfo(l,t.dtype,t.values)}},sK={kernelName:f.L8s,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:a,axis:o}=r,s=f.D5U.parseAxisParam(o,i.shape)[0],l=f.backend_util.prepareSplitSize(i,a,s),u=Array(i.shape.length).fill(0),c=i.shape.slice();return l.map(e=>{let t=[...c];t[s]=e;let r=(0,iG.tP)({inputs:{x:i},backend:n,attrs:{begin:u,size:t}});return u[s]+=e,r})}};var sG=n(68747);let sX={kernelName:f.bK0,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{let{x:n}=e;(0,rZ.H)(n,"square");let r=t.data.get(n.dataId).values,i=new Float32Array(r.length);for(let e=0;e<r.length;++e){let t=r[e];i[e]=t*t}return{dataId:t.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},sq=(0,r7.b)((e,t)=>{let n=e-t;return n*n}),sY=(0,i_.j)(f._tC,sq),sQ={kernelName:f._tC,backendName:"cpu",kernelFunc:sY};var sJ=n(66830);let sZ=(0,r2.A)(f.h8e,(e,t)=>isNaN(e)?NaN:e>0?1:t.alpha),s0={kernelName:f.h8e,backendName:"cpu",kernelFunc:sZ};var s1=n(67275);let s2={kernelName:f.jQk,backendName:"cpu",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a}=n,{begin:o,end:s,strides:l,beginMask:u,endMask:c,ellipsisMask:d,newAxisMask:h,shrinkAxisMask:p}=i;(0,rZ.H)(a,"stridedSlice");let{finalShapeSparse:g,finalShape:m,isIdentity:b,sliceDim0:y,isSimpleSlice:v,begin:x,end:w,strides:k}=f.kuN.sliceInfo(a.shape,o,s,l,u,c,d,h,p);if(b)t=ic({inputs:{x:a},backend:r,attrs:{shape:m}});else if(y||v){f.D5U.assert(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);let e=f.kuN.computeOutShape(x,w,k),n=(0,iG.tP)({inputs:{x:a},backend:r,attrs:{begin:x,size:e}});t=ic({inputs:{x:n},backend:r,attrs:{shape:m}}),r.disposeIntermediateTensorInfo(n)}else{let e=r.bufferSync(a),n=(0,s1.t)(g,e,k,x);t=r.makeTensorInfo(m,n.dtype,n.values)}return t}};var s3=n(37913);let s4={kernelName:f._JP,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:a,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=t,h=n.data.get(c.dataId).values,f=n.data.get(d.dataId).values,[p,g]=(0,s3.A)(h,f,i,a,o,s,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",g)]}};var s5=n(64116);let s8={kernelName:f.s1s,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:a,delimiter:o}=t;if("string"!==a.dtype)throw Error("Input must be of datatype string");if(1!==a.shape.length)throw Error(`Input must be a vector, got shape: ${a.shape}`);if(0!==o.shape.length)throw Error(`Delimiter must be a scalar, got shape: ${o.shape}`);let s=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values[0],[u,c,d]=(0,s5.Q)(s,l,i),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};var s6=n(76989);let s7={kernelName:f.XkS,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:a}=t;if("string"!==a.dtype)throw Error("Input must be of datatype string");if(i<=0)throw Error("Number of buckets must be at least 1");let o=n.data.get(a.dataId).values,s=(0,s6.h)(o,i);return n.makeTensorInfo(a.shape,"int32",s)}},s9=(0,r2.A)(f.sEM,e=>Math.tan(e)),le={kernelName:f.sEM,backendName:"cpu",kernelFunc:s9},lt=(0,r2.A)(f.MIZ,e=>Math.tanh(e)),ln={kernelName:f.MIZ,backendName:"cpu",kernelFunc:lt},lr={kernelName:f.SIB,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{tensor:r,indices:i,updates:a}=t,{sliceRank:o,numUpdates:s,sliceSize:l,strides:u,outputSize:c}=f.backend_util.calculateShapes(a,i,r.shape),d=n.bufferSync(i),h=n.bufferSync(a),p=n.bufferSync(r),g=(0,sx.N)(d,h,r.shape,c,l,s,o,u,p,!1);return n.makeTensorInfo(r.shape,g.dtype,g.values)}};var li=n(20868);let la={kernelName:f.n9L,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:a}=r;(0,rZ.H)(i,"tile");let o=(0,li.R)(n.bufferSync(i),a);return n.makeTensorInfo(o.shape,o.dtype,o.values)}};var lo=n(40005);let ls={kernelName:f.cWu,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:a,sorted:o}=r;(0,rZ.H)(i,"topk");let s=n.data.get(i.dataId).values,[l,u]=(0,lo.W)(s,i.shape,i.dtype,a,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}},ll={kernelName:f.wx7,backendName:"cpu",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{image:i,transforms:a}=t,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=n,[c,d,h,p]=i.shape,[g,m]=null!=u?u:[d,h],b=[c,g,m,p],y=f.D5U.computeStrides(i.shape),v=y[0],x=y[1],w=y[2],k=f.D5U.computeStrides(b),E=k[0],I=k[1],S=k[2],T=f.D5U.getTypedArrayFromDType(i.dtype,f.D5U.sizeFromShape(b));T.fill(l);let C=r.data.get(i.dataId).values,N=r.data.get(a.dataId).values;for(let e=0;e<c;++e){let t=1===a.shape[0]?N:N.subarray(8*e,8*e+8);for(let n=0;n<g;++n)for(let r=0;r<m;++r)for(let i=0;i<p;++i){let a;let u=t[6]*r+t[7]*n+1;if(0===u)continue;let c=(t[0]*r+t[1]*n+t[2])/u,f=(t[3]*r+t[4]*n+t[5])/u,p=lu(c,h,s),g=lu(f,d,s);switch(o){case"nearest":a=lc(C,d,h,v,x,w,e,Math.round(g),Math.round(p),i,l);break;case"bilinear":a=function(e,t,n,r,i,a,o,s,l,u,c){let d=Math.floor(s),h=Math.floor(l),f=d+1,p=h+1,g=(p-l)*lc(e,t,n,r,i,a,o,d,h,u,c)+(l-h)*lc(e,t,n,r,i,a,o,d,p,u,c),m=(p-l)*lc(e,t,n,r,i,a,o,f,h,u,c)+(l-h)*lc(e,t,n,r,i,a,o,f,p,u,c);return(f-s)*g+(s-d)*m}(C,d,h,v,x,w,e,g,p,i,l);break;default:throw Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}T[e*E+n*I+r*S+i]=a}return r.makeTensorInfo(b,i.dtype,T)}return{dataId:r.write(T,b,i.dtype),shape:i.shape,dtype:i.dtype}}};function lu(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0){if(t<=1)n=0;else{let e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}}else if(n>t-1){if(t<=1)n=0;else{let e=2*t;(n-=e*Math.trunc(n/e))>=t&&(n=e-n-1)}}return f.D5U.clamp(0,n,t-1)}(e,t);case"wrap":let r;return(r=e)<0?t<=1?r=0:r+=t*(Math.trunc(-r/(t-1))+1):r>t-1&&(t<=1?r=0:r-=t*Math.trunc(r/(t-1))),f.D5U.clamp(0,r,t-1);case"nearest":return f.D5U.clamp(0,e,t-1);default:return e}}function lc(e,t,n,r,i,a,o,s,l,u,c){return 0<=s&&s<t&&0<=l&&l<n?e[o*r+s*i+l*a+u]:c}var ld=n(54430);let lh={kernelName:f.kpP,backendName:"cpu",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:a}=t;(0,rZ.H)(a,"unique");let o=r.data.get(a.dataId).values,{outputValues:s,outputShape:l,indices:u}=(0,ld.S)(o,i,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}},lf={kernelName:f.ToN,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{value:i}=t,{axis:a}=r;a<0&&(a+=i.shape.length);let o=i.shape.length,s=i.shape[a],l=Array(o-1),u=0;for(let e=0;e<o;e++)e!==a&&(l[u++]=i.shape[e]);let c=Array(o).fill(0),d=i.shape.slice();d[a]=1;let h=Array(s);for(let e=0;e<h.length;e++){c[a]=e;let t=(0,iG.tP)({inputs:{x:i},backend:n,attrs:{begin:c,size:d}});h[e]=ic({inputs:{x:t},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(t)}return h}},lp={kernelName:f.Qvg,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:a}=t,{numSegments:o}=r;(0,rZ.H)(i,"unsortedSegmentSum");let s=i.shape.length,l=a.shape.length,u=[],c=[],d=s-l,h=a;for(let e=0;e<d;++e){let t=aV({inputs:{input:h},backend:n,attrs:{dim:e+1}});h=t,c.push(t)}for(let e=0;e<o;++e){let t=f.D5U.createScalarValue(e,"int32"),r=n.makeTensorInfo([],"int32",t),a=(0,a$.Dg)({inputs:{a:r,b:h},backend:n}),o=(0,iZ.pj)({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),s=(0,aT.Jp)({inputs:{a:o,b:i},backend:n}),l=aN({inputs:{x:s},backend:n,attrs:{axis:0,keepDims:!1}});u.push(l),c.push(r),c.push(a),c.push(o),c.push(s),c.push(l)}let p=o4({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}};for(let e of[ig,im.fC,iy,ix,iu.j4,iw,iE,iI,iS,iT,iN,iR,i$,iP,iL,iV,iW,ij,iH,ip,iK,iX,iY,iQ.T0,iJ,iZ.Mq,i0.y2,i2,i3.z,i4,ae,an,ar,ai,aa,ao,as,au,ad,ah,af,ap,ag,am,ay,av,ax,aw,ak,aE,aI,aS,aR,r4,aD,a$.Kx,aU,az.SX,aW,aj.Vu,aY,aJ,aZ,a0.Ao,a3,a4,a5,a6,a9,oe.Ce,ot.V,r5.I,on,i6,oi,oo,ol,r6,ou.zh,oc.m3,oh,of.xM,og,oy,ox,oE,oI,oS,oA,oR.eJ,oD,o$,o_,oF,oO,oP,oM,oL.u0,oB,oV,oH,aT.f$,oK.AF,oX,oY,oJ,oZ.nP,o0,o3,o5,o8,o9,it,se.Iz,sn,si,so,sl,i7.O,aG,sc,ii,io,id,sd,sh,sf,sp,sg,sm,sy,sv.FY,sw,sk,sE,sC,is.BP,sA,sD,s_,iG.C6,oj,sP,sM,sB,sz,sW,sj,sH,sK,sG.cz,sX,sQ,sJ.j,s0,s2,s4,s8,s7,aX.GR,aA,le,ln,lr,la,ls,ll,ik.b,lh,lf,lp,o2])(0,f.wCN)(e);var lg=n(64544);f.C2$.isBrowser()&&(0,f.jqO)("webgl",()=>new lg.QC,2);var lm=n(70943);let lb=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class ly{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=f.backend_util.assertAndGetBroadcastShape(t,n),this.enableShapeUniforms=(0,lm.C9)(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}var lv=n(30688),lx=n(89201);let lw=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class lk{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=f.backend_util.assertAndGetBroadcastShape(t,n);let i=this.outputShape.length;this.enableShapeUniforms=(0,lm.C9)(i);let a="";if(r){if(0===i||1===f.D5U.sizeFromShape(this.outputShape))a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else{let e=(0,lx.kW)(i);if(a=`
          ${e} coords = getOutputCoords();
        `,1===i)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let e=(0,lv.Ky)("coords",i);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${e[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${e[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${e[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${e[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}}}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}function lE(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}let lI={kernelName:f.iJz,backendName:"webgl",kernelFunc:lE};function lS(e){let{inputs:t,backend:n}=e,{real:r,imag:i}=t,a=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(a.dataId),s=lE({inputs:{x:r},backend:n}),l=lE({inputs:{x:i},backend:n});return o.complexTensorInfos={real:s,imag:l},a}let lT={kernelName:f.Zz9,backendName:"webgl",kernelFunc:lS},lC="return (a < 0.) ? b * a : a;",lN=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,lA={kernelName:f.J$2,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:a}=r,o=n.makeTensorInfo([],"float32",f.D5U.createScalarValue(a,"float32")),s=(0,f.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new lk(lN,i.shape,o.shape):new ly(lC,i.shape,o.shape),l=n.runWebGLProgram(s,[i,o],"float32");return n.disposeIntermediateTensorInfo(o),l}},lR="return (a < 0.) ? b * a : a;",lD=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,l$={kernelName:f.o0g,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r,alpha:i}=t,a=(0,f.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new lk(lD,r.shape,i.shape):new ly(lR,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],"float32")}};var l_=n(35626),lF=n(85243);let lO="if (isnan(x)) return x;";function lP({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:a})=>{let o;let{x:s}=i,l=r||s.dtype;if(a.shouldExecuteOnCPU([s])&&null!=n){let e=n(a.texData.get(s.dataId).values,l);return a.makeTensorInfo(s.shape,l,e)}return o=(0,f.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new lF.cc(s.shape,t):new l_.l(s.shape,e),a.runWebGLProgram(o,[s],l)}}function lM({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:a}){return({inputs:o,backend:s})=>{let l;let{a:u,b:c}=o;if(r&&"complex64"===u.dtype){let t=s.texData.get(u.dataId),n=s.texData.get(c.dataId),[r,i]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map(t=>{let[n,r]=t,i={dataId:n.dataId,dtype:n.dtype,shape:u.shape},a={dataId:r.dataId,dtype:r.dtype,shape:c.shape},o=new ly(e,u.shape,c.shape);return s.runWebGLProgram(o,[i,a],(0,f.x8V)(n.dtype,r.dtype))}),a=lS({inputs:{real:r,imag:i},backend:s});return s.disposeIntermediateTensorInfo(r),s.disposeIntermediateTensorInfo(i),a}let d=a||(0,f.x8V)(u.dtype,c.dtype);if(("string"===u.dtype||"string"===c.dtype||s.shouldExecuteOnCPU([u,c]))&&null!=i){let e=s.texData.get(u.dataId).values,t=s.texData.get(c.dataId).values,n="string"===u.dtype?f.backend_util.fromUint8ToStringArray(e):e,r="string"===u.dtype?f.backend_util.fromUint8ToStringArray(t):t,[a,o]=i(u.shape,c.shape,n,r,d),l=s.makeTensorInfo(o,d);return s.texData.get(l.dataId).values=a,l}return l=(0,f.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t?new lk(t,u.shape,c.shape,n):new ly(e,u.shape,c.shape),s.runWebGLProgram(l,[u,c],d)}}function lL(e,t=!1){if("linear"===e)return t?lF.t$:l_.t$;if("relu"===e)return t?lF.RX:l_.RX;if("elu"===e)return t?lF.Cv:l_.Cv;if("relu6"===e)return t?lF.eW:l_.eW;if("prelu"===e)return t?lD:lR;if("leakyrelu"===e)return t?lN:lC;if("sigmoid"===e)return t?lF.Tq:l_.Tq;throw Error(`Activation ${e} has not been implemented for the WebGL backend.`)}class lB{constructor(e,t,n,r=!1,i=!1,a=!1,o=null,s=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=(0,lm.C9)(this.outputShape.length);let u=Math.ceil((r?e[1]:e[2])/2),c=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",f="";o&&(h=s?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:l?`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:`vec4 activation(vec4 x) {
          ${o}
        }`,f="result = activation(result);"),a&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let p="rc.x",g="rc.x";e[0]<t[0]?p=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(g=`imod(rc.x, ${t[0]})`),this.userCode=`
      ${h}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${u}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${p};
        int batchB = ${g};
        for (int i = 0; i < ${u}; i++) {
          vec4 a = getMatrixA(batchA, ${r?"i * 2, rc.y":"rc.y, i * 2"});
          vec4 b = getMatrixB(batchB, ${i?"rc.z, i * 2":"i * 2, rc.z"});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${c[0]} * ${d[0]});
          result += (${c[1]} * ${d[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${a?"result += getBiasAtOutCoords();":""}

        ${f}

        setOutput(result);
      }
    `}}let lU={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class lz{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=f.backend_util.assertAndGetBroadcastShape(t,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}var lV=n(49539);let lW="return a * b;";function lj(e){let t;let{inputs:n,backend:r}=e,{a:i,b:a}=n,o=f.backend_util.upcastType(i.dtype,a.dtype);if("complex64"===i.dtype){let e=r.texData.get(i.dataId),t=r.texData.get(a.dataId),n=new lz(lU.REAL,i.shape,a.shape),o=new lz(lU.IMAG,i.shape,a.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:i.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:i.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:a.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:a.shape}],l=r.runWebGLProgram(n,s,"float32"),u=r.runWebGLProgram(o,s,"float32"),c=lS({inputs:{real:l,imag:u},backend:r});return r.disposeIntermediateTensorInfo(l),r.disposeIntermediateTensorInfo(u),c}if(r.shouldExecuteOnCPU([i,a])){let e=r.texData.get(i.dataId),t=r.texData.get(a.dataId),[n,s]=(0,lV.Th)(i.shape,a.shape,e.values,t.values,o),l=r.makeTensorInfo(s,o);return r.texData.get(l.dataId).values=n,l}return t=(0,f.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new lk(lW,i.shape,a.shape):new ly(lW,i.shape,a.shape),r.runWebGLProgram(t,[i,a],o)}let lH={kernelName:f.wYn,backendName:"webgl",kernelFunc:lj};var lK=n(1811),lG=n(3326);function lX(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:a}=r,o=f.D5U.sizeFromShape(i.shape),s=f.D5U.inferFromImplicitShape(a,o),l=f.D5U.sizeFromShape(s);f.D5U.assert(o===l,()=>`The new shape (${s}) has ${l} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);let u=n.texData.get(i.dataId);return!u.isPacked||(0,lG.oT)(i.shape,s)||null!==u.texture&&(0,lG.oT)(u.shape,s)?(n.incRef(i.dataId),{dataId:i.dataId,shape:s,dtype:i.dtype}):function(e,t,n){let r=[(0,lG.Cp)(e.shape),...(0,lG.W8)(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},a=[(0,lG.Cp)(t),...(0,lG.W8)(t)],o=new lK.v(a,r),s=n.runWebGLProgram(o,[i],e.dtype,[r],!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}(i,s,n)}let lq={kernelName:f.HZH,backendName:"webgl",kernelFunc:lX};class lY{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:i,outSize:a}=e;this.outputShape=[r,a];let o=4*Math.floor(n/4),s=n%4,l="sumValue += dot(values, ones);";if(null!=t){let e=1/t;l=`sumValue += dot(values * ${f.D5U.isInt(e)?e.toPrecision(2):e}, ones);`}let u="";i%n>0&&(u=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${n};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${l}
        }

        int inIdx = inOffset + ${o};
        if (${1===s}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${l}
        } else if (${2===s}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${l}
        } else if (${3===s}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${l}
        }
        setOutput(sumValue);
      }
    `}}class lQ{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:i,outSize:a}=e;this.outputShape=[r,a];let o="0.0",s="";"prod"===t?o="1.0":"min"===t?(o="1.0 / 1e-20",s="min"):"max"===t&&(o="-1.0 / 1e-20",s="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");let u=4*Math.floor(n/4),c=n%4,d=`
      if (${"sum"===t}) {
        sumValue += dot(values, ones);
      } else if (${"prod"===t}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${s}(values, minMaxValue);
        if (${"min"===t} || ${"max"===t}) {
          minMaxValue = ${s}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";"all"===t?(o="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):"any"===t&&(o="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let f="";i%n>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${n};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${1===c}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${2===c}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${3===c}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${l});
      }
    `}}function lJ(e,t,n,r){let i=function(e){let t=[];for(;0===t.length||1!==t[t.length-1].outSize;){let n=t.length?t[t.length-1].outSize:e[1],r=f.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),a=e;for(let o=0;o<i.length;o++){let s,l;let{inSize:u,windowSize:c,outSize:d}=i[o];s="mean"===n?0===o?new lY({windowSize:c,inSize:u,batchSize:e.shape[0],outSize:d},u):new lY({windowSize:c,inSize:u,batchSize:e.shape[0],outSize:d}):new lQ({windowSize:c,inSize:u,batchSize:e.shape[0],outSize:d},n),l=a,a=r.runWebGLProgram(s,[a],t),l.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(l)}return a}class lZ{constructor(e,t){this.variableNames=["A"];let n=Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;let r=(0,lx.kW)(this.rank),i=function(e){let t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=Array(t);for(let t=0;t<e.length;t++)r[e[t]]=n[t];return r.join()}(t);this.userCode=`
    void main() {
      ${r} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}class l0{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let n=Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let r=(0,lx.kW)(this.rank),i=(0,lv.k6)("rc",this.rank),a=Array(this.rank);for(let e=0;e<t.length;e++)a[t[e]]=i[e];let o=`vec2(${a.slice(-2).join()})`,s=`++${i[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${a.join()}), ${o})`;this.userCode=`
    void main() {
      ${r} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${l};
      if(${s}) {
        result[1] = ${l};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${n[this.rank-2]}) {
        result[2] = ${l};
        if(${s}) {
          result[3] = ${l};
        }
      }
      setOutput(result);
    }
    `}}function l1(e,t,n){let r=(0,f.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new l0(e.shape,t):new lZ(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function l2(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:o}=r;return function(e,t,n,r){let i=e.shape.length,a=f.D5U.parseAxisParam(t,e.shape),o=a,s=f.backend_util.getAxesPermutation(o,i),l=null!=s,u=e;l&&(u=l1(e,s,r),o=f.backend_util.getInnerMostAxes(o.length,i)),f.backend_util.assertAxesAreInnerMostDims("sum",o,i);let[c,d]=f.backend_util.computeOutAndReduceShapes(u.shape,o),h=c;n&&(h=f.backend_util.expandShapeToKeepDim(c,a));let p=f.D5U.sizeFromShape(d),g=lX({inputs:{x:u},attrs:{shape:[f.D5U.sizeFromShape(e.shape)/p,p]},backend:r}),m=lJ(g,(0,f.z4k)(e.dtype),"sum",r),b=lX({inputs:{x:m},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(m),l&&r.disposeIntermediateTensorInfo(u),b}(i,a,o,n)}let l3={kernelName:f.GBy,backendName:"webgl",kernelFunc:l2};function l4(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a}=n,{perm:o}=i,s=Array(a.shape.length);for(let e=0;e<s.length;e++)s[e]=a.shape[o[e]];if(r.shouldExecuteOnCPU([a])){let e=r.texData.get(a.dataId).values,n=(0,lV.Fv)(e,a.shape,a.dtype,o,s);t=r.makeTensorInfo(s,a.dtype),r.texData.get(t.dataId).values=n}else t=l1(a,o,r);return t}let l5={kernelName:f.G3Y,backendName:"webgl",kernelFunc:l4};function l8({a:e,b:t,transposeA:n,transposeB:r,backend:i,bias:a=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:l=null}){let u;let c=e.shape.length,d=t.shape.length,h=n?e.shape[c-2]:e.shape[c-1],p=r?t.shape[d-1]:t.shape[d-2],g=n?e.shape[c-1]:e.shape[c-2],m=r?t.shape[d-2]:t.shape[d-1],b=e.shape.slice(0,-2),y=t.shape.slice(0,-2),v=f.D5U.sizeFromShape(b),x=f.D5U.sizeFromShape(y),w=f.Jyw.assertAndGetBroadcastShape(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([g,m]);f.D5U.assert(h===p,()=>`Error in matMul: inner shapes (${h}) and (${p}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`);let k=n?[v,h,g]:[v,g,h],E=r?[x,m,p]:[x,p,m],I=lX({inputs:{x:e},backend:i,attrs:{shape:k}}),S=lX({inputs:{x:t},backend:i,attrs:{shape:E}}),T=[I,S],C=Math.max(v,x),N=n?I.shape[1]:I.shape[2],A=null!=a,R=null!=o,D="leakyrelu"===l,$=null!=l?lL(l,!0):null,_=A||R||D||null!=$;if((1===g||1===m)&&N>1e3&&!1===_){let e=I,t=S;n&&(e=l4({inputs:{x:I},backend:i,attrs:{perm:[0,2,1]}}),T.push(e)),r&&(t=l4({inputs:{x:S},backend:i,attrs:{perm:[0,2,1]}}),T.push(t));let a=1!==m,o=1===m,s=e;a&&(s=lX({inputs:{x:e},backend:i,attrs:{shape:[C,N,1]}}),T.push(s));let l=t;o&&(l=lX({inputs:{x:t},backend:i,attrs:{shape:[C,1,N]}}),T.push(l));let c=lj({inputs:{a:s,b:l},backend:i});u=l2({inputs:{x:c},backend:i,attrs:{axis:1===m?2:1,keepDims:!0}}),T.push(c)}else{let l=(0,f.x8V)(e.dtype,t.dtype),c=new lB(k,E,[C,g,m],n,r,A,$,R,D),d=[I,S];if(null!=a&&d.push(a),R&&d.push(o),D){let e=i.makeTensorInfo([],"float32",f.D5U.createScalarValue(s,"float32"));d.push(e),T.push(e)}u=i.runWebGLProgram(c,d,l)}let F=lX({inputs:{x:u},backend:i,attrs:{shape:w}});for(let e of(T.push(u),T))i.disposeIntermediateTensorInfo(e);return F}let l6={kernelName:f.usg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{a:i,b:a,bias:o,preluActivationWeights:s}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;return l8({a:i,b:a,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:d,activation:c})}},l7="return abs(x);",l9={kernelName:f.SYM,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r}=e,{x:i}=n;if(r.shouldExecuteOnCPU([i])&&"complex64"!==i.dtype){let e=r.texData.get(i.dataId),t=(0,lV.CJ)(e.values);return r.makeTensorInfo(i.shape,i.dtype,t)}return t=(0,f.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new lF.cc(i.shape,l7):new l_.l(i.shape,l7),r.runWebGLProgram(t,[i],i.dtype)}},ue=lP({opSnippet:l_.D1+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`}),ut={kernelName:f.VGw,backendName:"webgl",kernelFunc:ue},un=lP({opSnippet:l_.D1+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`}),ur={kernelName:f.SpW,backendName:"webgl",kernelFunc:un},ui="return a + b;",ua=lM({opSnippet:ui,packedOpSnippet:ui,supportsComplex:!0,cpuKernelImpl:lV.cK}),uo={kernelName:f.mm_,backendName:"webgl",kernelFunc:ua};class us{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((e,t)=>`T${t}`);let n=[];this.variableNames.forEach(e=>{n.push(`float v${e} = get${e}AtOutCoords();`)});let r=this.variableNames.map(e=>`v${e}`).join(" + ");this.userCode=`
      void main() {
        ${n.join("\n        ")}

        float result = ${r};
        setOutput(result);
      }
    `}}class ul{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((e,t)=>`T${t}`);let n=[];this.variableNames.forEach(e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)});let r=this.variableNames.map(e=>`v${e}`).join(" + ");this.userCode=`
      void main() {
        ${n.join("\n        ")}

        vec4 result = ${r};
        setOutput(result);
      }
    `}}let uu={kernelName:f.Xze,backendName:"webgl",kernelFunc:function e(t){let{inputs:n,backend:r}=t;if(1===n.length)return lE({inputs:{x:n[0]},backend:r});if(n.length>(0,f.OBj)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let t=Math.floor(n.length/2),i=e({inputs:n.slice(0,t),backend:r}),a=e({inputs:n.slice(t),backend:r});return e({inputs:[i,a],backend:r})}let i=n.map(e=>e.dtype).reduce((e,t)=>(0,f.x8V)(e,t)),a=n.map(e=>e.shape),o=(0,f.OBj)().getBool("WEBGL_PACK")?new ul(n[0].shape,a):new us(n[0].shape,a);return r.runWebGLProgram(o,n,i)}},uc={kernelName:f.oT6,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a}=n,{axis:o,keepDims:s}=i,l=a.shape.length,u=f.D5U.parseAxisParam(o,a.shape),c=u,d=f.backend_util.getAxesPermutation(c,l),h=a;null!=d&&(h=l4({inputs:{x:a},backend:r,attrs:{perm:d}}),c=f.backend_util.getInnerMostAxes(c.length,l)),f.backend_util.assertAxesAreInnerMostDims("all",c,l);let[p,g]=f.backend_util.computeOutAndReduceShapes(h.shape,c),m=lX({inputs:{x:h},backend:r,attrs:{shape:[-1,f.D5U.sizeFromShape(g)]}}),b=lJ(m,m.dtype,"all",r);return t=s?lX({inputs:{x:b},backend:r,attrs:{shape:f.backend_util.expandShapeToKeepDim(p,u)}}):lX({inputs:{x:b},backend:r,attrs:{shape:p}}),r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(b),null!=d&&r.disposeIntermediateTensorInfo(h),t}},ud={kernelName:f.IKK,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a}=n,{axis:o,keepDims:s}=i,l=a.shape.length,u=f.D5U.parseAxisParam(o,a.shape),c=u,d=f.backend_util.getAxesPermutation(c,l),h=a;null!=d&&(h=l4({inputs:{x:a},backend:r,attrs:{perm:d}}),c=f.backend_util.getInnerMostAxes(c.length,l)),f.backend_util.assertAxesAreInnerMostDims("any",c,l);let[p,g]=f.backend_util.computeOutAndReduceShapes(h.shape,c),m=lX({inputs:{x:h},backend:r,attrs:{shape:[-1,f.D5U.sizeFromShape(g)]}}),b=lJ(m,m.dtype,"any",r);return t=s?lX({inputs:{x:b},backend:r,attrs:{shape:f.backend_util.expandShapeToKeepDim(p,u)}}):lX({inputs:{x:b},backend:r,attrs:{shape:p}}),r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(b),null!=d&&r.disposeIntermediateTensorInfo(h),t}};class uh{constructor(e,t,n){this.variableNames=["A"];let{windowSize:r,batchSize:i,outSize:a}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${r}; i++) {
          int inIdx = ${n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));"};
          float candidate = getA(batch, inIdx);
          if (candidate ${"max"===t?">":"<"} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}class uf{constructor(e,t,n,r){let i,a;this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,f.D5U.assert(e.length>2,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);let o=Math.ceil(e[e.length-1]/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");let s=this.outputShape,l=s.length,u=(0,lx.kW)(l),c=(0,lv.Ky)("coords",l);if(1===o){a=l+1;let e=(0,lx.kW)(a);i=`
        ${e} sourceLocR = ${e}(${c.join()}, 0);
        ++${c[l-1]};
        ${e} sourceLocG = ${e}(${c.join()}, 0);
        ++${c[l-2]};
        ${e} sourceLocA = ${e}(${c.join()}, 0);
        --${c[l-1]};
        ${e} sourceLocB = ${e}(${c.join()}, 0);
        --${c[l-2]};`}else a=l,i=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;let d=["x","y","z","w","u","v"].slice(0,a),h="."+d[a-1],p=d.map(e=>"int "+e),g=(0,lv.Ky)("sourceLocR",a-1).concat("inIdx.r"),m=(0,lv.Ky)("sourceLocG",a-1).concat("inIdx.g"),b=(0,lv.Ky)("sourceLocB",a-1).concat("inIdx.b"),y=(0,lv.Ky)("sourceLocA",a-1).concat("inIdx.a"),v=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${y.join()})));`,x=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${m.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${y.join()}) : 0.)`,w=r?"":`
      float getBestIndicesAChannel(${p.join()}) {
        return getChannel(getBestIndicesA(${d.join()}),
                                          vec2(${d.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${p.join()}) {
        return getChannel(getA(${d.join()}),
                               vec2(${d.slice(-2).join()}));
      }
      ${w}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${s[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${s[l-2]-1};
        ${i}
        ivec4 srcIdx = ivec4(sourceLocR${h}, sourceLocG${h},
          sourceLocB${h}, sourceLocA${h}) * ${t};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${x};

        for (int i = 0; i < ${t}; i++) {
          inIdx = srcIdx;
          ${v}
          vec4 candidate = ${x};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${"max"===n?"greaterThan":"lessThan"}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}function up(e,t,n,r){let i=[n];if(f.backend_util.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,t.shape.length),!(0,f.OBj)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){let n=[],a=e.texData.get(t.dataId),o=null!==a&&a.isPacked,s=t;o&&n.push(s=e.unpackTensor(t));let[l,u]=f.backend_util.computeOutAndReduceShapes(s.shape,i),c=lX({inputs:{x:s},backend:e,attrs:{shape:[-1,f.D5U.sizeFromShape(u)]}});n.push(c);let d=function e(t,n,r,i=null){let a=n.shape[0],o=n.shape[1];null!=i&&(a=i.shape[0],o=i.shape[1]);let s=f.backend_util.computeOptimalWindowSize(o),l=new uh({windowSize:s,inSize:o,batchSize:a,outSize:Math.ceil(o/s)},r,null==i),u=[n];null!=i&&u.push(i);let c=t.runWebGLProgram(l,u,"int32");if(1===c.shape[1])return c;let d=e(t,n,r,c);return t.disposeIntermediateTensorInfo(c),d}(e,c,r);n.push(d);let h=lX({inputs:{x:d},backend:e,attrs:{shape:l}});return n.forEach(t=>e.disposeIntermediateTensorInfo(t)),h}return function e(t,n,r,i=null){let a=null!=i?i.shape:n.shape,o=a[a.length-1],s=new uf(a,f.backend_util.computeOptimalWindowSize(o),r,null==i),l=t.runWebGLProgram(s,null==i?[n]:[n,i],"int32");if(l.shape.length===n.shape.length){let i=e(t,n,r,l);return t.disposeIntermediateTensorInfo(l),i}return l}(e,t,r)}let ug={kernelName:f.sJF,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r,o=f.D5U.parseAxisParam(a,i.shape),s=f.backend_util.getAxesPermutation(o,i.shape.length),l=i,u=[];null!=s&&(u.push(l=l4({inputs:{x:i},backend:n,attrs:{perm:s}})),o=f.backend_util.getInnerMostAxes(o.length,l.shape.length)),f.backend_util.assertAxesAreInnerMostDims("argMax",[o[0]],l.shape.length);let c=up(n,l,o[0],"max");return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}},um={kernelName:f.aJk,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r,o=f.D5U.parseAxisParam(a,i.shape),s=f.backend_util.getAxesPermutation(o,i.shape.length),l=i,u=[];null!=s&&(u.push(l=l4({inputs:{x:i},backend:n,attrs:{perm:s}})),o=f.backend_util.getInnerMostAxes(o.length,l.shape.length)),f.backend_util.assertAxesAreInnerMostDims("argMin",[o[0]],l.shape.length);let c=up(n,l,o[0],"min");return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}},ub=lP({opSnippet:l_.D1+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`}),uy={kernelName:f.M2y,backendName:"webgl",kernelFunc:ub},uv=lP({opSnippet:l_.D1+"return log(x + sqrt(x * x + 1.0));"}),ux={kernelName:f.qw7,backendName:"webgl",kernelFunc:uv},uw=lP({opSnippet:l_.D1+`
  return atan(x);
`}),uk={kernelName:f.jMg,backendName:"webgl",kernelFunc:uw},uE=lM({opSnippet:lb+`
  return atan(a, b);
`,packedOpSnippet:`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+lw+`
  return result;
`}),uI={kernelName:f.QCc,backendName:"webgl",kernelFunc:uE},uS=lP({opSnippet:l_.D1+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`}),uT={kernelName:f.Oyi,backendName:"webgl",kernelFunc:uS};class uC{constructor(e,t,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===t&&n)throw Error("Cannot compute positions for average pool.");let a=e.filterWidth,o=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.top,f=e.padInfo.left;this.outputShape=e.outShape;let p="avg"===t,g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,m=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`,b="0.0";if(p||(b="-1.0 / 1e-20"),n){this.userCode=`
        const ivec2 strides = ivec2(${o}, ${s});
        const ivec2 pads = ivec2(${h}, ${f});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${c};
              wR += ${l}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${r?i?g:m:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let y=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(y="avgValue / max(count, 1.0)");let v=4*Math.floor(a/4),x=a%4,w=`
      if (${p}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${s});
      const ivec2 pads = ivec2(${h}, ${f});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${c};
            wR += ${l}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${v}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${w}
          }

          int xC = xCCorner + ${v};
          if (${1===x}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${w}
          } else if (${2===x}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${w}
          } else if (${3===x}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${w}
          }
        }
        setOutput(${y});
      }
    `}}class uN{constructor(e,t,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===t&&n)throw Error("Cannot compute positions for average pool.");let a=e.filterWidth,o=e.strideDepth,s=e.strideHeight,l=e.strideWidth,u=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterDepth,f=e.effectiveFilterHeight,p=e.effectiveFilterWidth,g=e.padInfo.front,m=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;let y="avg"===t,v="0.0";if(y||(v="-1.0 / 1e-20"),n){this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${s}, ${l});
        const ivec3 pads = ivec3(${g}, ${m}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${f};
                wR += ${c}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${p};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${r?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${f} * ${p} +
                      wR * ${p} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let x=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(x="avgValue / max(count, 1.0)");let w=4*Math.floor(a/4),k=a%4,E=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${s}, ${l});
      const ivec3 pads = ivec3(${g}, ${m}, ${b});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f};
            wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${w}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${E}
            }

            int xC = xCCorner + ${w};
            if (${1===k}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${2===k}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${3===k}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${E}
            }
          }
        }
        setOutput(${x});
      }
    `}}let uA={kernelName:f.JhU,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t;(0,lG.HS)(i,"avgPool");let{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=r;f.D5U.assert(f.backend_util.eitherStridesOrDilationsAreOne(o,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);let u=f.backend_util.computePool2DInfo(i.shape,a,o,1,s,l);if(1===u.filterWidth&&1===u.filterHeight&&f.D5U.arraysEqual(u.inShape,u.outShape))return lE({inputs:{x:i},backend:n});let c=new uC(u,"avg",!1);return n.runWebGLProgram(c,[i],"float32")}},uR={kernelName:f._k9,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r,c=new uN(f.backend_util.computePool3DInfo(i.shape,a,o,[1,1,1],s,l,u),"avg",!1);return n.runWebGLProgram(c,[i],"float32")}};class uD{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=s-1-e.padInfo.top,c=l-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${u}, ${c});
      const float avgMultiplier = float(${1/(t*n)});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${l};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class u${constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=c-1-e.padInfo.front,p=d-1-e.padInfo.top,g=h-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${p}, ${g});
      const float avgMultiplier = float(${1/(t*n*r)});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${c};
            wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${l}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}let u_={kernelName:f.IMb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r,c=new u$(f.backend_util.computePool3DInfo(a.shape,o,s,[1,1,1],l,u));return n.runWebGLProgram(c,[i],a.dtype)}},uF={kernelName:f.ROF,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t;(0,lG.HS)([i,a],"avgPoolGrad");let{filterSize:o,strides:s,pad:l}=r,u=new uD(f.backend_util.computePool2DInfo(a.shape,o,s,1,l));return n.runWebGLProgram(u,[i],a.dtype)}},uO={kernelName:f.XLW,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{a:i,b:a}=t,{transposeA:o,transposeB:s}=r;return l8({a:i,b:a,transposeA:o,transposeB:s,backend:n})}};class uP{constructor(e,t,n,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],f.backend_util.assertAndGetBroadcastShape(e,t),f.backend_util.assertAndGetBroadcastShape(e,n);let o="0.0";null!=r&&(f.backend_util.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let s="1.0";null!=i&&(f.backend_util.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${s};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}class uM{constructor(e,t,n,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],f.backend_util.assertAndGetBroadcastShape(e,t),f.backend_util.assertAndGetBroadcastShape(e,n);let o="vec4(0.0)";null!=r&&(f.backend_util.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=i&&(f.backend_util.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${s};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}}let uL={kernelName:f.sHE,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,mean:i,variance:a,offset:o,scale:s}=e;f.D5U.assert(i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),f.D5U.assert(null==o||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),f.D5U.assert(null==s||i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;null==l&&(l=.001);let u=[r,i,a],c=null;null!=o&&(c=o.shape,u.push(o));let d=null;null!=s&&(d=s.shape,u.push(s));let h=(0,f.OBj)().getBool("WEBGL_PACK_NORMALIZATION")?new uM(r.shape,i.shape,a.shape,c,d,l):new uP(r.shape,i.shape,a.shape,c,d,l);return t.runWebGLProgram(h,u,u[0].dtype)}};class uB{constructor(e){let t;this.variableNames=["source"],this.outputShape=e,this.rank=e.length;let n=(0,lx.kW)(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let r=function(e){if(1===e)return"sourceLoc";if(e<=6)return uU.slice(0,e).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank),i=e.map((e,t)=>`sourceLoc.${uU[t]} = start[${t}] + coords.${uU[t]};`);t=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join("\n")}
      `,this.userCode=`
      void main() {
        ${t}
        setOutput(getSource(${r}));
      }
    `}}let uU=["x","y","z","w","u","v"];class uz{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let t=(0,lx.kW)(this.rank),n=(0,lv.Ky)("coords",this.rank),r=(0,lv.Ky)("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,a=`getChannel(getSource(${r.join()}), ${i})`,o=`
      result.x = ${a};
      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {
        ++${r[this.rank-1]};
        result.y = ${a};
        --${r[this.rank-1]};
      }
    `,s=1===this.rank?"":`
      --${n[this.rank-1]};
      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {
        ++${r[this.rank-2]};
        result.z = ${a};
        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {
          ++${r[this.rank-1]};
          result.w = ${a};
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            ${t}(${e.map((e,t)=>`start[${t}]`).join()});`:e.map((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`).join("\n");this.userCode=`
      void main() {
        ${t} coords = getOutputCoords();
        ${t} sourceLoc;
        ${l}
        vec4 result = vec4(0.);
        ${o}
        ${s}
        setOutput(result);
      }
    `}}function uV(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:a,size:o}=r,[s,l]=f.kuN.parseSliceParams(i,a,o);if(f.kuN.assertParamsValid(i,s,l),0===f.D5U.sizeFromShape(l))return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||"string"===i.dtype){let e=n.texData.get(i.dataId),t=(0,lV.nT)(e.values,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,t)}let{isPacked:u}=n.texData.get(i.dataId),c=f.kuN.isSliceContinous(i.shape,s,l);if(u||!c){let e=(0,f.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new uz(l):new uB(l),t=[s];return n.runWebGLProgram(e,[i],i.dtype,t)}return n.uploadToGPU(i.dataId),function(e,t,n,r){let i=r.texData.get(e.dataId),a=r.makeTensorInfo(n,e.dtype),o=r.texData.get(a.dataId);Object.assign(o,i),o.refCount=1,o.shape=n,o.dtype=e.dtype;let s=f.kuN.computeFlatOffset(t,f.D5U.computeStrides(e.shape));i.slice&&(s+=i.slice.flatOffset),o.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||e.dataId};let l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),a}(i,s,l,n)}let uW={kernelName:f.p2w,backendName:"webgl",kernelFunc:uV},uj={kernelName:f.zws,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,crops:o}=r;f.D5U.assert(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let s=a.reduce((e,t)=>e*t),l=f.backend_util.getReshaped(i.shape,a,s),u=f.backend_util.getPermuted(l.length,a.length),c=f.backend_util.getReshapedPermuted(i.shape,a,s),d=f.backend_util.getSliceBeginCoords(o,a.length),h=f.backend_util.getSliceSize(c,o,a.length),p=[],g=lX({inputs:{x:i},backend:n,attrs:{shape:l}}),m=l4({inputs:{x:g},backend:n,attrs:{perm:u}}),b=lX({inputs:{x:m},backend:n,attrs:{shape:c}}),y=uV({inputs:{x:b},backend:n,attrs:{begin:d,size:h}});return p.push(g),p.push(m),p.push(b),p.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}},uH={kernelName:f.zvY,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:o}=r,s=n.readSync(i.dataId),l=n.readSync(a.dataId),u=(0,lV.qO)(s,l,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,u)}},uK=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,uG=`
  return float(int(a.r) & int(b.r));
`,uX={kernelName:f.hCO,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r}=e,{a:i,b:a}=n,o=(0,f.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=(0,f.OBj)().getNumber("WEBGL_VERSION");if(r.shouldExecuteOnCPU([i,a])||1===s){let e=r.texData.get(i.dataId).values,t=r.texData.get(a.dataId).values,[n,o]=(0,lV.XM)(i.shape,a.shape,e,t,i.dtype),s=r.makeTensorInfo(o,i.dtype);return r.texData.get(s.dataId).values=n,s}return t=o?new lk(uK,i.shape,a.shape,!1):new ly(uG,i.shape,a.shape),r.runWebGLProgram(t,[i,a],i.dtype)}},uq={kernelName:f.eEB,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{s0:r,s1:i}=t,a=n.readSync(r.dataId),o=n.readSync(i.dataId),s=f.backend_util.assertAndGetBroadcastShape(Array.from(a),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},uY=lM({opSnippet:"return float(a != b);",cpuKernelImpl:lV.cZ,dtype:"bool"}),uQ={kernelName:f.yQU,backendName:"webgl",kernelFunc:uY};function uJ(e){let{inputs:t,backend:n}=e,{input:r}=t;return lE({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}let uZ={kernelName:f.xJR,backendName:"webgl",kernelFunc:uJ},u0={kernelName:f.RFZ,backendName:"webgl",kernelFunc:function e(t){let{inputs:n,backend:r,attrs:i}=t,{x:a}=n,{dtype:o}=i;if("complex64"===o){if("complex64"===a.dtype)return lE({inputs:{x:a},backend:r});let t=f.lls(a.shape),n=e({inputs:{x:a},backend:r,attrs:{dtype:"float32"}}),i=lS({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),i}if("complex64"===a.dtype){let t=uJ({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(t),n}if(!f.D5U.hasEncodingLoss(a.dtype,o)){let e=lE({inputs:{x:a},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:o}}if(r.shouldExecuteOnCPU([a])){let e=r.texData.get(a.dataId).values,[t,n,i]=(0,lV.cm)(e,a.shape,a.dtype,o);return r.makeTensorInfo(t,n,i)}if("int32"===o)return function(e,t){let n=new l_.l(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(a,r);if("bool"===o){let e=r.makeTensorInfo([],"bool",f.D5U.getTypedArrayFromDType("bool",1)),t=uY({inputs:{a:a,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw Error(`Error in Cast: failed to cast ${a.dtype} to ${o}`)}},u1="return ceil(x);",u2=lP({opSnippet:u1,packedOpSnippet:u1,cpuKernelImpl:lV.pk}),u3={kernelName:f.gJX,backendName:"webgl",kernelFunc:u2};class u4{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}class u5{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}let u8={kernelName:f.xnO,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a}=n,{clipValueMin:o,clipValueMax:s}=i;return t=(0,f.OBj)().getBool("WEBGL_PACK_CLIP")?new u5(a.shape):new u4(a.shape),r.runWebGLProgram(t,[a],a.dtype,[[o],[s]])}};class u6{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}function u7(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}let u9={kernelName:f.yj2,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t,i=n.texData.get(r.dataId),a=new u6(r.shape),o=[u7(r,i.complexTensorInfos.real),u7(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(a,o,o[0].dtype)}};class ce{constructor(e){this.outputShape=[],this.outputShape=f.backend_util.computeOutShape(e,1),this.variableNames=e.map((e,t)=>`T${t}`);let t=Array(e.length-1);t[0]=e[0][1];for(let n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];let n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let e=1;e<t.length;e++){let r=t[e-1];n.push(`else if (yC < ${t[e]}) setOutput(getT${e}(yR, yC-${r}));`)}let r=t.length,i=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${n.join("\n        ")}
      }
    `}}class ct{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=f.backend_util.computeOutShape(e,t);let n=this.outputShape,r=n.length,i=(0,lx.kW)(r),a=(0,lv.Ky)("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((e,t)=>`T${t}`);let s=Array(e.length-1);s[0]=e[0][t];for(let n=1;n<s.length;n++)s[n]=s[n-1]+e[n][t];let l=o[t],u=o.slice(-2),c=o.join(),d=`if (${l} < ${s[0]}) {
        return getChannel(
            getT0(${c}), vec2(${u.join()}));
        }`;for(let e=1;e<s.length;e++){let t=s[e-1];d+=`
        if (${l} < ${s[e]}  && ${l} >= ${s[e-1]}) {
          return getChannel(
            getT${e}(${cn(o,l,t)}),
            vec2(${cn(u,l,t)}));
        }`}let h=s.length,p=s[s.length-1];d+=`
        return getChannel(
          getT${h}(${cn(o,l,p)}),
          vec2(${cn(u,l,p)}));`,this.userCode=`
      float getValue(${o.map(e=>"int "+e)}) {
        ${d}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[r-1]} = ${a[r-1]} + 1;
        if (${a[r-1]} < ${n[r-1]}) {
          result.g = getValue(${a});
        }

        ${a[r-2]} = ${a[r-2]} + 1;
        if (${a[r-2]} < ${n[r-2]}) {
          result.a = getValue(${a});
        }

        ${a[r-1]} = ${a[r-1]} - 1;
        if (${a[r-2]} < ${n[r-2]} &&
            ${a[r-1]} < ${n[r-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}}function cn(e,t,n){let r=e.indexOf(t);return e.map((e,t)=>t===r?`${e} - ${n}`:e).join()}function cr(e){let{inputs:t,backend:n}=e,{input:r}=t;return lE({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}let ci={kernelName:f.J_u,backendName:"webgl",kernelFunc:cr};function ca(e){let{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,a=f.D5U.parseAxisParam(i,t[0].shape)[0],o=t.map(e=>e.shape);f.backend_util.assertParamsConsistent(o,a);let s=f.backend_util.computeOutShape(t.map(e=>e.shape),a);if(0===f.D5U.sizeFromShape(s))return n.makeTensorInfo(s,t[0].dtype,[]);let l=t.filter(e=>f.D5U.sizeFromShape(e.shape)>0);return 1===l.length?lE({inputs:{x:l[0]},backend:n}):function e(t,n,r){let i=t[0].dtype;if("complex64"===i){let i=t.map(e=>uJ({inputs:{input:e},backend:r})),a=t.map(e=>cr({inputs:{input:e},backend:r})),o=e(i,n,r),s=e(a,n,r),l=lS({inputs:{real:o,imag:s},backend:r});return i.forEach(e=>r.disposeIntermediateTensorInfo(e)),a.forEach(e=>r.disposeIntermediateTensorInfo(e)),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),l}let a=r.shouldExecuteOnCPU(t);if("string"===i&&(a=!0),a){let e=t.map(e=>{let t=f.D5U.sizeFromShape(e.shape.slice(n));return lX({inputs:{x:e},backend:r,attrs:{shape:[-1,t]}})}),a=e.map(e=>({vals:r.readSync(e.dataId),shape:e.shape})),o=f.backend_util.computeOutShape(e.map(e=>e.shape),1),s=1===e[0].shape[0],l=(0,lV.n7)(a,o,i,s),u=f.backend_util.computeOutShape(t.map(e=>e.shape),n),c=r.makeTensorInfo(u,i,l);return e.forEach(e=>r.disposeIntermediateTensorInfo(e)),c}let o=t.filter(e=>f.D5U.sizeFromShape(e.shape)>0),s=(0,f.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(1===o.length){let e=s?new l_.l(t[0].shape,l_.bl):new lF.cc(t[0].shape,l_.bl);return r.runWebGLProgram(e,t,i)}let l=(0,f.OBj)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>l){let t=[];for(let i=0;i<o.length;i+=l){let a=o.slice(i,i+l);t.push(e(a,n,r))}let i=e(t,n,r);for(let e of t)r.disposeIntermediateTensorInfo(e);return i}if(s){let e=new ct(o.map(e=>e.shape),n);return r.runWebGLProgram(e,o,i)}let{tensors2D:u,outShape:c}=function(e,t,n){let r=f.backend_util.computeOutShape(e.map(e=>e.shape),t);return{tensors2D:e.map(e=>lX({inputs:{x:e},attrs:{shape:[-1,f.D5U.sizeFromShape(e.shape.slice(t))]},backend:n})),outShape:r}}(o,n,r),d=new ce(u.map(e=>e.shape)),h=r.runWebGLProgram(d,u,i);u.forEach(e=>r.disposeIntermediateTensorInfo(e));let p=lX({inputs:{x:h},attrs:{shape:c},backend:r});return r.disposeIntermediateTensorInfo(h),p}(l,a,n)}let co={kernelName:f.Eh3,backendName:"webgl",kernelFunc:ca};class cs{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;let a=e.padInfo.top,o=e.padInfo.left,s=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,f=4*Math.floor(e.inChannels/4),p=e.inChannels%4,g="channelsLast"===e.dataFormat,m="",b="";n&&(m=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${n}
        }`:i?`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${n}
        }`:`
          float activation(float x) {
            ${n}
          }
        `,b="result = activation(result);"),t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      const ivec2 strides = ivec2(${s}, ${l});
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${g?3:1}];

        ivec2 xRCCorner =
            ivec2(coords[${g?1:2}], coords[${g?2:3}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${c};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${f}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${1===p}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${f}) *
                    getW(wR, wC, ${f}, d2);
              } else {
                dotProd +=
                    getX(batch, ${f}, xR, xC) *
                    getW(wR, wC, ${f}, d2);
              }

            } else if (${2===p}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${f}, d2),
                getW(wR, wC, ${f} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${f}),
                  getX(batch, xR, xC, ${f} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${f}, xR, xC),
                  getX(batch, ${f} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${3===p}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${f}, d2),
                getW(wR, wC, ${f} + 1, d2),
                getW(wR, wC, ${f} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${f}),
                  getX(batch, xR, xC, ${f} + 1),
                  getX(batch, xR, xC, ${f} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${f}, xR, xC),
                  getX(batch, ${f} + 1, xR, xC),
                  getX(batch, ${f} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${t?"result += getBiasAtOutCoords();":""}
        ${b}
        setOutput(result);
      }
    `}}class cl{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterDepth,d=e.filterHeight,h=e.filterWidth,f=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${a}, ${o});
      const ivec3 pads = ivec3(${t}, ${n}, ${r});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${c}; wF++) {
          int xF = xFCorner + wF * ${s};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${l};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${f}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${1===p}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${f}) *
                  getW(wF, wR, wC, ${f}, d2);
              } else if (${2===p}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${f}),
                  getX(batch, xF, xR, xC, ${f} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${f}, d2),
                  getW(wF, wR, wC, ${f} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${3===p}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${f}),
                  getX(batch, xF, xR, xC, ${f} + 1),
                  getX(batch, xF, xR, xC, ${f} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${f}, d2),
                  getW(wF, wR, wC, ${f} + 1, d2),
                  getW(wF, wR, wC, ${f} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class cu{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=(0,lm.C9)(this.outputShape.length);let a=e.padInfo.left,o=e.strideWidth,s=e.dilationWidth,l=e.filterHeight,u=e.filterWidth,c=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let e=0;e<u;e++)c+=`
           vec4 xTexelC${2*e};
           int xTexelC${2*e}Ready;
           vec4 xTexelC${2*e+1};
           int xTexelC${2*e+1}Ready;
           vec4 xC${e};`;c+=`
     for (int r = 0; r < ${l}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let e=0;e<u;e++)c+=`
           xTexelC${2*e} = vec4(0.0);
           xTexelC${2*e}Ready = 0;
           xTexelC${2*e+1} = vec4(0.0);
           xTexelC${2*e+1}Ready = 0;
           xC${e} = vec4(0.0);`;c+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let t=0;t<(u+1)/2;t++){let n=2*t;if(c+=`
           xC = xCCorner + ${n*s};
           `,1===o){if(n<u&&(a%2==1?(c+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n}Ready == 0) {
                   xTexelC${n} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${n}.zw = vec2(0.0);
                   }
                   xTexelC${n}Ready = 1;
                 }
               `,1===s&&n>0?c+=`
                 xC${n} = vec4(xTexelC${n-2}.zw, xTexelC${n}.xy);
                 `:c+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${n} = vec4(previous.zw, xTexelC${n}.xy);
                   } else {
                     xC${n} = vec4(0.0, 0.0, xTexelC${n}.xy);
                   }
                   `):c+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${n}Ready == 0) {
                   xTexelC${n} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${n}.zw = vec2(0.0);
                   }
                   xTexelC${n}Ready = 1;
                 }

                 xC${n} = xTexelC${n};
                 `,n+1<u)){let e=a%2==0?f.D5U.nearestLargerEven(s):s;s%2==0&&a%2==1||s%2!=0&&a%2!=1?(c+=`
                   xCOffset = xC + imod(pads[1], 2) + ${e};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n+1}Ready == 0) {
                     xTexelC${n+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${n+1}.zw = vec2(0.0);
                     }
                     xTexelC${n+1}Ready = 1;
                   }
                   `,s>1?c+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${n+1} = vec4(previous.zw, xTexelC${n+1}.xy);
                     } else {
                      xC${n+1} = vec4(0.0, 0.0, xTexelC${n+1}.xy);
                     }
                     `:c+=`
                     xC${n+1} = vec4(xTexelC${n}.zw, xTexelC${n+1}.xy);
                     `):1===e?c+=`
                     xC${n+1} = xTexelC${n};
                     `:c+=`
                     xCOffset = xC + ${e};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n+1}Ready == 0) {
                       xTexelC${n+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${n+1}.zw = vec2(0.0);
                       }
                       xTexelC${n+1}Ready = 1;
                     }

                     xC${n+1} = xTexelC${n+1};
                     `}}else n<u&&(a%2==1?(c+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n}Ready == 0) {
                   xTexelC${n} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${n}.zw = vec2(0.0);
                   }
                   xTexelC${n}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${n+1}Ready == 0) {
                   xTexelC${n+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${n+1}.zw = vec2(0.0);
                   }
                   xTexelC${n+1}Ready = 1;
                 }

                 xC${n} = vec4(xTexelC${n}.zw, xTexelC${n+1}.zw);
               `,n+1<u&&(c+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${n+1} = vec4(xTexelC${n+1}.xy, final.xy);
                 `)):(c+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${n}Ready == 0) {
                   xTexelC${n} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${n}.zw = vec2(0.0);
                   }
                   xTexelC${n}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n+1}Ready == 0) {
                   xTexelC${n+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${n+1}.zw = vec2(0.);
                   }
                   xTexelC${n+1}Ready = 1;
                 }

                 xC${n} = vec4(
                   xTexelC${n}.xy, xTexelC${n+1}.xy);
               `,n+1<u&&(c+=`
                   xC${n+1} = vec4(xTexelC${n}.zw, xTexelC${n+1}.zw);
                 `)));n<u&&(c+=`
             wTexel = getW(r, ${n}, d1, d2);
             dotProd += xC${n}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${n}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,n+1<u&&(c+=`
               wTexel = getW(r, ${n+1}, d1, d2);
               dotProd += xC${n+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${n+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}c+=`
     }
   
     }
   
     }
   `;let d="",h="";n&&(d=r?`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${n}
         }`:i?`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${n}
         }`:`vec4 activation(vec4 x) {
           ${n}
         }`,h="result = activation(result);"),t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${d}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${c}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${t?"result += getBiasAtOutCoords();":""}
         ${h}
         setOutput(result);
       }
     `}}var cc=n(73821);class cd{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=(0,lm.C9)(this.outputShape.length);let{dataFormat:n}=t,r=(0,cc.A)(),i="channelsLast"===n,a=i?1:2,o=i?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`,l="";for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)l+=`
          blockIndex = rc.z + ${t};
          pos = rc.y + ${e};

          ${s}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${2*e+t}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${2*e+t}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${l}

        ${r.output} = result;
      }
    `}}function ch(e,t){let n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function cf({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:s=null}){let l;let u=e.shape,c=r.texData.get(e.dataId),d=n.inChannels,h=u[0]*u[1]*u[2],p=n.outChannels,g="channelsLast"===n.dataFormat,m=[];if(null!=a){let e=ch(a.shape,g);null!=e&&(a=lX({inputs:{x:a},backend:r,attrs:{shape:e}}),m.push(a))}if(null!=i){let e=ch(i.shape,g);null!=e&&(i=lX({inputs:{x:i},backend:r,attrs:{shape:e}}),m.push(i))}if(!((1===h||1===p)&&d>1e3)&&c.isPacked&&g&&null!=c.texture&&u[2]%2!=0&&f.D5U.arraysEqual(c.shape.slice(-3),u.slice(-3))){let d=u[0]*u[1]*(u[2]+1),h={dataId:e.dataId,shape:[1,d,n.inChannels],dtype:e.dtype},p=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,f.D5U.assert(lG.oT(c.shape,h.shape),()=>`packed reshape ${c.shape} to ${h.shape} isn't free`);let g=lX({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});m.push(g);let b=l8({a:h,b:g,backend:r,transposeA:!1,transposeB:!1,bias:i,activation:s,preluActivationWeights:a,leakyreluAlpha:o}),y=r.texData.get(b.dataId);f.D5U.assert(y.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=p,y.shape=n.outShape,(l=lE({inputs:{x:b},backend:r})).shape=n.outShape,m.push(b)}else{let u=n.outHeight*n.outWidth,c=lX({inputs:{x:e},backend:r,attrs:{shape:g?[n.batchSize,u,n.inChannels]:[n.batchSize,n.inChannels,u]}}),d=lX({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),h=l8({a:g?c:d,b:g?d:c,transposeA:!g,transposeB:!1,backend:r,bias:i,activation:s,preluActivationWeights:a,leakyreluAlpha:o});l=lX({inputs:{x:h},backend:r,attrs:{shape:n.outShape}}),m.push(c),m.push(d),m.push(h)}for(let e of m)r.disposeIntermediateTensorInfo(e);return l}function cp({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:s=null}){let{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:h,dataFormat:p}=n,g="channelsLast"===p,m=l*u*c,b=h*d,y=[n.batchSize,m,b],v=[];if(null!=a){let e=ch(a.shape,g);null!=e&&(a=lX({inputs:{x:a},backend:r,attrs:{shape:e}}),v.push(a))}if(null!=i){let e=ch(i.shape,g);null!=e&&(i=lX({inputs:{x:i},backend:r,attrs:{shape:e}}),v.push(i))}let x=lX({inputs:{x:t},backend:r,attrs:{shape:[1,m,f.D5U.sizeFromShape(t.shape)/m]}});v.push(x);let w=new cd(y,n),k=[e.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],E=r.runWebGLProgram(w,[e],"float32",k),I=lX({inputs:{x:E},backend:r,attrs:{shape:y}});v.push(E),v.push(I);let S=null!=i,T=null!=a,C="leakyrelu"===s,N=s?lL(s,!0):null,A=new lB(g?I.shape:x.shape,g?x.shape:I.shape,g?[n.batchSize,b,n.outChannels]:[n.batchSize,n.outChannels,b],!0,!1,S,N,T,C),R=g?[I,x]:[x,I];if(i&&R.push(i),T&&R.push(a),C){let e=r.makeTensorInfo([],"float32",f.D5U.createScalarValue(o,"float32"));R.push(e),v.push(e)}let D=r.runWebGLProgram(A,R,"float32"),$=lX({inputs:{x:D},backend:r,attrs:{shape:n.outShape}});for(let e of(v.push(D),v))r.disposeIntermediateTensorInfo(e);return $}let cg={kernelName:f.mhS,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a,filter:o}=n,{strides:s,pad:l,dataFormat:u,dilations:c,dimRoundingMode:d}=i,h=f.backend_util.convertConv2DDataFormat(u),p=f.backend_util.computeConv2DInfo(a.shape,o.shape,s,c,l,d,!1,h);if(1===p.filterHeight&&1===p.filterWidth&&1===p.dilationHeight&&1===p.dilationWidth&&1===p.strideHeight&&1===p.strideWidth&&("SAME"===p.padInfo.type||"VALID"===p.padInfo.type))t=cf({x:a,filter:o,convInfo:p,backend:r});else if(p.strideWidth<=2&&"channelsLast"===h&&(0,f.OBj)().getBool("WEBGL_EXP_CONV")){let e=new cu(p),n=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];t=r.runWebGLProgram(e,[a,o],"float32",n)}else if((0,f.OBj)().getBool("WEBGL_CONV_IM2COL"))t=cp({x:a,filter:o,convInfo:p,backend:r});else{let e=new cs(p);t=r.runWebGLProgram(e,[a,o],"float32")}let g=lX({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),g}};class cm{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a="channelsLast"===e.dataFormat;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${r};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${n} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class cb{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a="channelsLast"===e.dataFormat,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${a?3:1}];

        ivec2 dyCorner = ivec2(coords[${a?1:2}], coords[${a?2:3}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${n}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${n} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class cy{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,a=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${t} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${n} - ${a};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${r} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class cv{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=t-1-e.padInfo.front,l=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${s}, ${l}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${t}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${t} - 1 - wF;

          for (int wR = 0; wR < ${n}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${n} - 1 - wR;

            for (int wC = 0; wC < ${r}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${r} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}let cx={kernelName:f.wUP,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,d=f.backend_util.convertConv2DDataFormat(l),h=new cm(f.backend_util.computeConv2DInfo(i.shape,c,o,1,s,u,!1,d));return n.runWebGLProgram(h,[i,a],"float32")}};class cw{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=(0,lm.C9)(this.outputShape.length);let t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,i=n-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${r}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${n}; wC++) {
            int wCPerm = ${n} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}let ck={kernelName:f.wm,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r,d=f.backend_util.convertConv2DDataFormat(u),h=f.backend_util.computeConv2DInfo(o,a.shape,s,1,l,c,!1,d);if((0,f.OBj)().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===d){let e=[[h.strideHeight,h.strideWidth]],t=new cw(h);return n.runWebGLProgram(t,[i,a],"float32",e)}{let e=new cb(h);return n.runWebGLProgram(e,[i,a],"float32")}}},cE={kernelName:f.x12,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:o,pad:s,dilations:l}=r,u=new cl(f.backend_util.computeConv3DInfo(i.shape,a.shape,o,l,s));return n.runWebGLProgram(u,[i,a],"float32")}},cI={kernelName:f.o2y,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:o,pad:s,filterShape:l}=r,u=new cy(f.backend_util.computeConv3DInfo(i.shape,l,o,1,s));return n.runWebGLProgram(u,[i,a],"float32")}},cS={kernelName:f.ik2,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{pad:o,strides:s,inputShape:l}=r,u=new cv(f.backend_util.computeConv3DInfo(l,a.shape,s,1,o));return n.runWebGLProgram(u,[i,a],"float32")}},cT=lP({opSnippet:lO+`
  return cos(x);
`,packedOpSnippet:`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${lw}
  return result;
`}),cC={kernelName:f.mc4,backendName:"webgl",kernelFunc:cT},cN=lP({opSnippet:`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`}),cA={kernelName:f.TR1,backendName:"webgl",kernelFunc:cN};class cR{constructor(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[a,o,s,l]=e,[u]=t,[c,d]=n;this.outputShape=[u,c,d,l];let[h,f]=[`${o-1}.0`,`${s-1}.0`],[p,g,m]=c>1?[`${(o-1)/(c-1)}`,"(y2-y1) * height_ratio",`y1*${h} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${h}`],[b,y,v]=d>1?[`${(s-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`
      const float height_ratio = float(${p});
      const float width_ratio = float(${b});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${g};
        float width_scale = ${y};

        float in_y = ${m};
        if( in_y < 0.0 || in_y > ${h} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${v};
        if( in_x < 0.0 || in_x > ${f} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${"bilinear"===r?1:0} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}let cD={kernelName:f.VcC,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:a,boxInd:o}=t,{cropSize:s,method:l,extrapolationValue:u}=r,c=new cR(i.shape,a.shape,s,l,u);return n.runWebGLProgram(c,[i,a,o],"float32")}};(l=h||(h={})).Prod="*",l.Sum="+";class c${constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let i=this.outputShape.length,a=this.op===h.Prod?"1.0":"0.0",o=n?a:`getX(${c_(i,"coords",this.op)})`,s=this.outputShape[this.outputShape.length-1],l="",u="";n?(l=r?`end != ${s-1}`:"end != 0",u=r?"end + 1":"end - 1"):(l=r?`end + pow2 < ${s}`:"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${(0,lx.kW)(i)} coords = getOutputCoords();
        int end = ${cF(i,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${l}) {
          int idx = ${u};
          ${cF(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${c_(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function c_(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function cF(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function cO(e,t,n,r,i,a){let o=t.shape.length,s=f.backend_util.getAxesPermutation([r],o),l=t;null!=s&&(l=l4({inputs:{x:t},backend:n,attrs:{perm:s}}));let u=f.backend_util.getInnerMostAxes(1,o)[0];if(u!==o-1)throw Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);let c=l.shape[u],d=lE({inputs:{x:l},backend:n});for(let t=0;t<=Math.ceil(Math.log2(c))-1;t++){let r=new c$(e,l.shape,!1,a),i=[[t]],o=d;d=n.runWebGLProgram(r,[d],d.dtype,i),n.disposeIntermediateTensorInfo(o)}if(i){let t=new c$(e,l.shape,i,a),r=d;d=n.runWebGLProgram(t,[d],d.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=s){let e=l4({inputs:{x:d},backend:n,attrs:{perm:f.backend_util.getUndoAxesPermutation(s)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),e}return d}let cP={kernelName:f.Byc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:o,reverse:s}=r;return cO(h.Prod,i,n,a,o,s)}},cM={kernelName:f.iHb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:o,reverse:s}=r;return cO(h.Sum,i,n,a,o,s)}},cL={kernelName:f.QRR,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:o,binaryOutput:s}=r;if(1===i.shape.length){let e=n.readSync(i.dataId),t=n.readSync(a.dataId),r=(0,lV.qO)(e,t,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,r)}if(2===i.shape.length){let e=n.bufferSync(i),t=n.bufferSync(a),r=(0,lV.cx)(e,t,o,s);return n.makeTensorInfo(r.shape,a.dtype,r.values)}throw Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}};class cB{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${t};
      int offset_h = imod(h, ${t});
      int in_w = w / ${t};
      int offset_w = imod(w, ${t});
      int offset_d = (offset_h * ${t} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}let cU={kernelName:f.T0n,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:a,dataFormat:o}=r,s=i.shape[0],l="NHWC"===o?i.shape[1]:i.shape[2],u="NHWC"===o?i.shape[2]:i.shape[3],c="NHWC"===o?i.shape[3]:i.shape[1],d=l*a,h=u*a,f=c/(a*a),p=new cB("NHWC"===o?[s,d,h,f]:[s,f,d,h],a,o);return n.runWebGLProgram(p,[i],i.dtype)}};class cz{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=(0,lm.C9)(this.outputShape.length);let a=e.filterHeight,o=e.filterWidth,s=e.outChannels/e.inChannels,l="",u="";n&&(l=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${n}
        }`:i?`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${n}
        }`:`
          float activation(float x) {
            ${n}
          }
        `,u="result = activation(result);"),t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${l}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${s};
        int q = d2 - d1 * ${s};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${t?"result += getBiasAtOutCoords();":""}
        ${u}
        setOutput(result);
      }
    `}}class cV{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=(0,lm.C9)(this.outputShape.length);let a=e.outChannels/e.inChannels,o=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let e=0;e<c;e++)d+=`
          vec4 xTexelC${2*e};
          int xTexelC${2*e}Ready;
          vec4 xTexelC${2*e+1};
          int xTexelC${2*e+1}Ready;
          vec4 xC${e};`;d+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let e=0;e<c;e++)d+=`
          xTexelC${2*e} = vec4(0.0);
          xTexelC${2*e}Ready = 0;
          xTexelC${2*e+1} = vec4(0.0);
          xTexelC${2*e+1}Ready = 0;
          xC${e} = vec4(0.0);`;d+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let e=0;e<(c+1)/2;e++){let t=2*e;if(d+=`
          xC = xCCorner + ${t*l};
          `,1===s){if(t<c&&(o%2==1?(d+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {
                  xTexelC${t} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${t}.zw = vec2(0.0);
                  }
                  xTexelC${t}Ready = 1;
                }
              `,1===l&&t>0?d+=`
                xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);
                `:d+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${t} = vec4(previous.zw, xTexelC${t}.xy);
                  } else {
                    xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);
                  }
                  `):d+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {
                  xTexelC${t} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${t}.zw = vec2(0.0);
                  }
                  xTexelC${t}Ready = 1;
                }

                xC${t} = xTexelC${t};
                `,t+1<c)){let e=o%2==0?f.D5U.nearestLargerEven(l):l;l%2==0&&o%2==1||l%2!=0&&o%2!=1?(d+=`
                  xCOffset = xC + imod(pads[1], 2) + ${e};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {
                    xTexelC${t+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${t+1}.zw = vec2(0.0);
                    }
                    xTexelC${t+1}Ready = 1;
                  }
                  `,l>1?d+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${t+1} = vec4(previous.zw, xTexelC${t+1}.xy);
                    } else {
                     xC${t+1} = vec4(0.0, 0.0, xTexelC${t+1}.xy);
                    }
                    `:d+=`
                    xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);
                    `):1===e?d+=`
                    xC${t+1} = xTexelC${t};
                    `:d+=`
                    xCOffset = xC + ${e};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {
                      xTexelC${t+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${t+1}.zw = vec2(0.0);
                      }
                      xTexelC${t+1}Ready = 1;
                    }

                    xC${t+1} = xTexelC${t+1};
                    `}}else t<c&&(o%2==1?(d+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {
                  xTexelC${t} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${t}.zw = vec2(0.0);
                  }
                  xTexelC${t}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {
                  xTexelC${t+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${t+1}.zw = vec2(0.0);
                  }
                  xTexelC${t+1}Ready = 1;
                }

                xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);
              `,t+1<c&&(d+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);
                `)):(d+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {
                  xTexelC${t} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${t}.zw = vec2(0.0);
                  }
                  xTexelC${t}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {
                  xTexelC${t+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${t+1}.zw = vec2(0.);
                  }
                  xTexelC${t+1}Ready = 1;
                }

                xC${t} = vec4(
                  xTexelC${t}.xy, xTexelC${t+1}.xy);
              `,t+1<c&&(d+=`
                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);
                `)));t<c&&(d+=`
            wTexel = getW(r, ${t}, d1, q);
            dotProd += xC${t} * vec4(wTexel.xz, wTexel.xz);
          `,t+1<c&&(d+=`
              wTexel = getW(r, ${t+1}, d1, q);
              dotProd += xC${t+1} * vec4(wTexel.xz, wTexel.xz);
            `))}d+=`
    }
  
      }
    `;let h="",p="";n&&(h=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${n}
        }`:i?`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${n}
        }`:`vec4 activation(vec4 x) {
          ${n}
        }`,p="result = activation(result);"),t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${h}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${d}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${t?"result += getBiasAtOutCoords();":""}
        ${p}
        setOutput(result);
      }
    `}}let cW={kernelName:f.cie,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a,filter:o}=n,{strides:s,pad:l,dilations:u,dimRoundingMode:c}=i,d=u;null==d&&(d=[1,1]),f.D5U.assert(f.backend_util.eitherStridesOrDilationsAreOne(s,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${d}'`);let h=f.backend_util.computeConv2DInfo(a.shape,o.shape,s,d,l,c,!0);t=(0,f.OBj)().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels==1?new cV(h):new cz(h);let p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return r.runWebGLProgram(t,[a,o],"float32",p)}};class cj{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${r};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${n} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class cH{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${n}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${n} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${s}; dm++) {
              int d2 = d1 * ${s} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}let cK={kernelName:f.sL$,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r,d=new cj(f.backend_util.computeConv2DInfo(i.shape,c,o,s,l,u,!0));return n.runWebGLProgram(d,[i,a],"float32")}},cG={kernelName:f.y7R,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r,d=new cH(f.backend_util.computeConv2DInfo(c,a.shape,o,s,l,u,!0));return n.runWebGLProgram(d,[i,a],"float32")}};class cX{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}let cq={kernelName:f.$w,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t,i=[...r.shape,...r.shape],a=f.D5U.sizeFromShape(r.shape),o=lX({inputs:{x:r},backend:n,attrs:{shape:[a]}}),s=new cX(a),l=n.runWebGLProgram(s,[o],o.dtype),u=lX({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}};class cY{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let{inHeight:t,inWidth:n,padInfo:r,strideHeight:i,strideWidth:a,filterHeight:o,filterWidth:s,dilationHeight:l,dilationWidth:u}=e,{top:c,left:d}=r;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${a});
      const ivec2 pads = ivec2(${c}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${l};

          if (hIn >= 0 && hIn < ${t}) {
            for (int w = 0; w < ${s}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${n}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}let cQ={kernelName:f.p4S,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a,filter:o}=n,{strides:s,pad:l,dilations:u}=i,c=f.backend_util.computeDilation2DInfo(a.shape,o.shape,s,l,"NHWC",u),d=new cY(c),h=lX({inputs:{x:t=r.runWebGLProgram(d,[a,o],"float32")},backend:r,attrs:{shape:c.outShape}});return r.disposeIntermediateTensorInfo(t),h}},cJ={kernelName:f.$g6,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,{allDims:a,summedDims:o,idDims:s}=f.backend_util.decodeEinsumEquation(i,t.length);f.backend_util.checkEinsumDimSizes(a.length,s,t);let{path:l,steps:u}=f.backend_util.getEinsumComputePath(o,s),c=u.length,d=null,h=a.length,p=[];for(let e=0;e<c;++e){for(let r of u[e]){let e;let{permutationIndices:i,expandDims:a}=f.backend_util.getEinsumPermutation(h,s[r]);f.backend_util.isIdentityPermutation(i)?e=t[r]:(e=l4({inputs:{x:t[r]},backend:n,attrs:{perm:i}}),p.push(e));let o=e.shape.slice();for(let e=0;e<a.length;++e)o.splice(a[e],0,1);f.D5U.arraysEqual(e.shape,o)||(e=lX({inputs:{x:e},backend:n,attrs:{shape:o}}),p.push(e)),null===d?d=e:(d=lj({inputs:{a:e,b:d},backend:n}),p.push(d))}e<c-1&&(l[e]>=0&&(d=l2({inputs:{x:d},backend:n,attrs:{axis:l[e]-(a.length-h),keepDims:!1}}),p.push(d)),h--)}for(let e of p)e!==d&&n.disposeIntermediateTensorInfo(e);return d}},cZ=lP({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`}),c0={kernelName:f.SX0,backendName:"webgl",kernelFunc:cZ},c1=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,c2={kernelName:f.HEU,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e,{dy:r,y:i}=t,a=(0,f.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new lk(c1,r.shape,i.shape):new ly("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,i.shape);return n.runWebGLProgram(a,[r,i],r.dtype)}},c3=lM({opSnippet:"return float(a == b);",packedOpSnippet:`
  return vec4(equal(a, b));
`,dtype:"bool",cpuKernelImpl:lV.gv}),c4={kernelName:f.hdR,backendName:"webgl",kernelFunc:c3},c5=lP({opSnippet:`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${f.backend_util.ERF_P};
  float a1 = ${f.backend_util.ERF_A1};
  float a2 = ${f.backend_util.ERF_A2};
  float a3 = ${f.backend_util.ERF_A3};
  float a4 = ${f.backend_util.ERF_A4};
  float a5 = ${f.backend_util.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`}),c8={kernelName:f.Omj,backendName:"webgl",kernelFunc:c5},c6=lP({opSnippet:lO+`
  return exp(x);
`,packedOpSnippet:`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cpuKernelImpl:lV.aX,dtype:"float32"}),c7={kernelName:f.NEP,backendName:"webgl",kernelFunc:c6};function c9(e){let{inputs:t,attrs:n,backend:r}=e,{dim:i}=n,{input:a}=t,o=a.shape.length,s=a.shape.slice(),l=i;return i<0&&(f.D5U.assert(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),s.splice(l,0,1),lX({inputs:{x:a},backend:r,attrs:{shape:s}})}let de={kernelName:f.YFo,backendName:"webgl",kernelFunc:c9},dt="return exp(x) - 1.0;",dn=lP({opSnippet:dt,packedOpSnippet:dt,cpuKernelImpl:lV.tx}),dr={kernelName:f.Y0y,backendName:"webgl",kernelFunc:dn};class di{constructor(e,t,n){let r;this.variableNames=["real","imag"];let i=t[1];this.outputShape=t;let a=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=n?`${i}.0`:"1.0";if("real"===e)r="return real * expR - imag * expI;";else if("imag"===e)r="return real * expI + imag * expR;";else throw Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${a};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${r}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}function da(e,t,n){let r=n.texData.get(e.dataId),i=f.D5U.sizeFromShape(e.shape),a=e.shape[e.shape.length-1],o=lX({inputs:{x:e},backend:n,attrs:{shape:[i/a,a]}}),s=o.shape,l=new di("real",s,t),u=new di("imag",s,t),c=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(l,c,"float32"),h=n.runWebGLProgram(u,c,"float32"),p=lS({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);let g=lX({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(p),g}let ds={kernelName:f.vwp,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t;return da(r,!1,n)}};class dl{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}function du(e){let{backend:t,attrs:n}=e,{shape:r,value:i}=n,{dtype:a}=n;if("string"===(a=a||f.D5U.inferDtype(i))){let e=f.D5U.getArrayFromDType(a,f.D5U.sizeFromShape(r));return e.fill(i),t.makeTensorInfo(r,a,e)}{let e=new dl(r,i),n=[[i]];return t.runWebGLProgram(e,[],a,n)}}let dc={kernelName:f.deh,backendName:"webgl",kernelFunc:du};class dd{constructor(e){this.variableNames=["Image"],this.outputShape=[];let t=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${t} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${t}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}let dh={kernelName:f.Uyb,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{let{image:n}=e,r=new dd(n.shape);return t.runWebGLProgram(r,[n],n.dtype)}},df="return floor(x);",dp=lP({opSnippet:df,packedOpSnippet:df,cpuKernelImpl:lV.MZ}),dg={kernelName:f.OR,backendName:"webgl",kernelFunc:dp},dm=lM({opSnippet:`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,packedOpSnippet:`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,dtype:"int32"}),db={kernelName:f.jeX,backendName:"webgl",kernelFunc:dm};var dy=n(77275);class dv{constructor(e){this.variableNames=["A"];let t=(0,cc.A)(),[n,r]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);

        vec4 values = ${t.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}class dx{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let t=(0,cc.A)(),[n,r]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${r}.0, ${n}.0);
            vec4 values = ${t.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${t.output} = result;
      }
    `}}let dw={kernelName:f.eBW,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:i}=e,{pixels:a}=t,{numChannels:o}=i,s="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,l="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,[u,c]=s?[a.videoWidth,a.videoHeight]:[a.width,a.height],d=[c,u],h=[c,u,o];if(l||s){let e=(0,f.OBj)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(null==r||e!==dk)&&(dk=e,r=document.createElement("canvas").getContext("2d",{willReadFrequently:dk})),r.canvas.width=u,r.canvas.height=c,r.drawImage(a,0,0,u,c),a=r.canvas}let p=n.makeTensorInfo(d,"int32");n.texData.get(p.dataId).usage=dy.v2.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),a);let g=(0,f.OBj)().getBool("WEBGL_PACK")?new dx(h):new dv(h),m=n.runWebGLProgram(g,[p],"int32");return n.disposeData(p.dataId),m}},dk=(0,f.OBj)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU"),dE={kernelName:f._V0,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a,filter:o,bias:s,preluActivationWeights:l}=n,{strides:u,pad:c,dataFormat:d,dilations:h,dimRoundingMode:p,activation:g,leakyreluAlpha:m}=i,b=f.backend_util.convertConv2DDataFormat(d),y=f.backend_util.computeConv2DInfo(a.shape,o.shape,u,h,c,p,!1,b),v=[],x=null!=s,w=null!=l,k="leakyrelu"===g,E=()=>{let e=[a,o],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){let t=lX({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return v.push(t),t}return e};if(x&&e.push(t(s,d)),w&&e.push(t(l,d)),k){let t=r.makeTensorInfo([],"float32",f.D5U.createScalarValue(m,"float32"));e.push(t),v.push(t)}return e};if(1===y.filterHeight&&1===y.filterWidth&&1===y.dilationHeight&&1===y.dilationWidth&&1===y.strideHeight&&1===y.strideWidth&&("SAME"===y.padInfo.type||"VALID"===y.padInfo.type))t=cf({x:a,filter:o,convInfo:y,backend:r,bias:s,activation:g,preluActivationWeights:l,leakyreluAlpha:m});else if(y.strideWidth<=2&&"channelsLast"===b&&(0,f.OBj)().getBool("WEBGL_EXP_CONV")){let e=new cu(y,x,g?lL(g,!0):null,w,k),n=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],i=E();t=r.runWebGLProgram(e,i,"float32",n)}else if((0,f.OBj)().getBool("WEBGL_CONV_IM2COL"))t=cp({x:a,filter:o,convInfo:y,backend:r,bias:s,activation:g,preluActivationWeights:l,leakyreluAlpha:m});else{let e=new cs(y,x,g?lL(g,!1):null,w,k),n=E();t=r.runWebGLProgram(e,n,"float32")}let I=lX({inputs:{x:t},backend:r,attrs:{shape:y.outShape}});return v.push(t),v.forEach(e=>r.disposeIntermediateTensorInfo(e)),I}},dI={kernelName:f.luS,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a,filter:o,bias:s,preluActivationWeights:l}=n,{strides:u,pad:c,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:g}=i,m=[],b=d;null==b&&(b=[1,1]),f.D5U.assert(f.backend_util.eitherStridesOrDilationsAreOne(u,b),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${b}'`);let y=f.backend_util.computeConv2DInfo(a.shape,o.shape,u,b,c,h,!0),v=(0,f.OBj)().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels==1,x=p?lL(p,v):null,w=[a,o],k=null!=s,E=null!=l,I="leakyrelu"===p;if(k&&w.push(s),E&&w.push(l),I){let e=r.makeTensorInfo([],"float32",f.D5U.createScalarValue(g,"float32"));w.push(e),m.push(e)}t=v?new cV(y,k,x,E,I):new cz(y,k,x,E,I);let S=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],T=r.runWebGLProgram(t,w,"float32",S);return m.forEach(e=>r.disposeIntermediateTensorInfo(e)),T}};class dS{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;let i=(0,lx.kW)(n.length),a=`
    int index;`;for(let e=0;e<this.sliceDim;e++)a+=`
          index = round(getIndices(coords[0], ${e}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[e]};
          flattenIndex += index * ${this.strides[e]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}let dT={kernelName:f.q1x,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{params:r,indices:i}=t,a=i.shape,o=a[a.length-1],s=f.D5U.sizeFromShape(r.shape),[l,u,c,d]=f.backend_util.prepareAndValidate(r,i),h=lX({inputs:{x:i},backend:n,attrs:{shape:[u,o]}}),p=lX({inputs:{x:r},backend:n,attrs:{shape:[f.D5U.sizeFromShape(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,i])||"string"===r.dtype){let e=n.readSync(i.dataId),t=n.bufferSync(r),a=(0,lV.TD)(e,t,r.dtype,u,o,c,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,a.values)}let g=new dS(o,d,[u,c],r.shape),m=n.runWebGLProgram(g,[p,h],p.dtype),b=lX({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),b}};class dC{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;let n=(0,lx.kW)(this.rank),r=function(e,t){let n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let t=0;t<e.length;t++)2===t?r.push("index"):r.push(`${n[t]}`);return r.join()}(e,0);this.userCode=`
      void main() {
        ${n} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${r}));
      }
    `}}function dN(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,indices:a}=t,{axis:o,batchDims:s}=r,l=f.D5U.parseAxisParam(o,i.shape)[0];if((0,f.OBj)().get("DEBUG")){let e=n.readSync(a.dataId),t=i.shape[l];for(let n=0;n<e.length;++n){let r=e[n];f.D5U.assert(r<=t-1&&r>=0,()=>`GatherV2: the index value ${r} is not in [0, ${t-1}]`)}}let u=f.backend_util.segment_util.collectGatherOpShapeInfo(i,a,l,s),c=f.D5U.sizeFromShape(a.shape),d=[],h=lX({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),p=lX({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(h),d.push(p);let g=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([i,a])||"string"===i.dtype){let e=n.bufferSync(p),t=n.bufferSync(h),r=(0,lV.m$)(t,e,g);return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(u.outputShape,r.dtype,r.values)}let m=new dC(h.shape,g),b=n.runWebGLProgram(m,[h,p],h.dtype);d.push(b);let y=lX({inputs:{x:b},backend:n,attrs:{shape:u.outputShape}});return d.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}let dA={kernelName:f.qi_,backendName:"webgl",kernelFunc:dN},dR=lM({opSnippet:"return float(a > b);",packedOpSnippet:`
  return vec4(greaterThan(a, b));
`,cpuKernelImpl:lV.B_,dtype:"bool"}),dD={kernelName:f.iZT,backendName:"webgl",kernelFunc:dR},d$=lM({opSnippet:"return float(a >= b);",packedOpSnippet:`
  return vec4(greaterThanEqual(a, b));
`,dtype:"bool",cpuKernelImpl:lV.ji}),d_={kernelName:f.Acj,backendName:"webgl",kernelFunc:d$},dF={kernelName:f.Qg5,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t;return da(r,!0,n)}},dO=lP({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),dP={kernelName:f.avt,backendName:"webgl",kernelFunc:dO},dM=lP({opSnippet:"return float(isinf(x));",dtype:"bool"}),dL={kernelName:f.iWB,backendName:"webgl",kernelFunc:dM},dB=lP({opSnippet:"return float(isnan(x));",dtype:"bool"}),dU={kernelName:f.r7n,backendName:"webgl",kernelFunc:dB},dz=lM({opSnippet:"return float(a < b);",packedOpSnippet:`
  return vec4(lessThan(a, b));
`,cpuKernelImpl:lV.kY,dtype:"bool"}),dV={kernelName:f.vtC,backendName:"webgl",kernelFunc:dz},dW=lM({opSnippet:"return float(a <= b);",packedOpSnippet:`
  return vec4(lessThanEqual(a, b));
`,cpuKernelImpl:lV.Rn,dtype:"bool"}),dj={kernelName:f.CAk,backendName:"webgl",kernelFunc:dW},dH={kernelName:f.e7N,backendName:"webgl",kernelFunc:function(e){let{backend:t,attrs:n}=e,{start:r,stop:i,num:a}=n,o=(0,lV.PQ)(r,i,a);return t.makeTensorInfo([o.length],"float32",o)}},dK=lP({opSnippet:lO+`
  return x < 0.0 ? 0./0. : log(x);
`,packedOpSnippet:`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,cpuKernelImpl:lV.Sd}),dG={kernelName:f.ZbH,backendName:"webgl",kernelFunc:dK},dX=lP({opSnippet:lO+`
  return log(1.0 + x);
`}),dq={kernelName:f.kU,backendName:"webgl",kernelFunc:dX},dY=lM({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,dtype:"bool"}),dQ={kernelName:f.PYm,backendName:"webgl",kernelFunc:dY},dJ=lP({opSnippet:"return float(!(x >= 1.0));"}),dZ={kernelName:f.VfG,backendName:"webgl",kernelFunc:dJ},d0=lM({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,dtype:"bool"}),d1={kernelName:f.MZg,backendName:"webgl",kernelFunc:d0};class d2{constructor(e,t,n,r,i){let a;this.variableNames=["x"],this.outputShape=[];let o=e[3]-1;this.outputShape=e;let s=`float(${n}) + float(${r}) * sum`;a=.5===i?`inversesqrt(${s})`:1===i?`1.0/(${s})`:`exp(log(${s}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${t}; j <= ${t}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${a};
        setOutput(val);
      }
    `}}class d3{constructor(e,t,n,r,i){let a;this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let o=e[3]-1;this.outputShape=e;let s=`float(${n}) + float(${r}) * sum`;a=.5===i?`inversesqrt(${s})`:1===i?`1.0/(${s})`:`exp(log(${s}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${t};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${t}; j <= ${t}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${a};
        setOutput(result);
      }
    `}}let d4={kernelName:f.eZ0,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:a,bias:o,alpha:s,beta:l}=r,u=(0,f.OBj)().getBool("WEBGL_PACK_NORMALIZATION")?new d3(i.shape,a,o,s,l):new d2(i.shape,a,o,s,l);return n.runWebGLProgram(u,[i],i.dtype)}};class d5{constructor(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${t})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${t} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${r}) * norm + float(${n});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${r})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}let d8={kernelName:f.Hhh,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:i,y:a,dy:o}=t,{depthRadius:s,bias:l,alpha:u,beta:c}=r,d=new d5(i.shape,s,l,u,c);return n.runWebGLProgram(d,[i,a,o],i.dtype)}};function d6(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a}=n,{reductionIndices:o,keepDims:s}=i,l=a.shape.length,u=f.D5U.parseAxisParam(o,a.shape),c=u,d=f.backend_util.getAxesPermutation(c,l),h=null!=d,p=r.shouldExecuteOnCPU([a]),g=a;if(h){if(p){let e=r.texData.get(g.dataId).values,t=Array(l);for(let e=0;e<t.length;e++)t[e]=a.shape[d[e]];let n=(0,lV.Fv)(e,a.shape,a.dtype,d,t);g=r.makeTensorInfo(t,a.dtype),r.texData.get(g.dataId).values=n}else g=l1(a,d,r);c=f.backend_util.getInnerMostAxes(c.length,l)}f.backend_util.assertAxesAreInnerMostDims("max",c,l);let[m,b]=f.backend_util.computeOutAndReduceShapes(g.shape,c),y=m;if(s&&(y=f.backend_util.expandShapeToKeepDim(m,u)),p){let e=r.texData.get(g.dataId).values,n=(0,lV.$O)(e,f.D5U.sizeFromShape(b),y,a.dtype);t=r.makeTensorInfo(y,a.dtype),r.texData.get(t.dataId).values=n}else t=function(e,t,n,r){let i=f.D5U.sizeFromShape(t),a=f.D5U.sizeFromShape(e.shape),o=lX({inputs:{x:e},attrs:{shape:[a/i,i]},backend:r}),s=lJ(o,e.dtype,"max",r),l=lX({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),l}(g,b,y,r);return h&&r.disposeIntermediateTensorInfo(g),t}let d7={kernelName:f.YoZ,backendName:"webgl",kernelFunc:d6},d9=lM({opSnippet:lb+`
  return max(a, b);
`,packedOpSnippet:`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+lw+`
  return result;
`,cpuKernelImpl:lV.nL}),he={kernelName:f.BMI,backendName:"webgl",kernelFunc:d9},ht={kernelName:f.mTV,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t;(0,lG.HS)(i,"maxPool");let{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=r;f.D5U.assert(f.backend_util.eitherStridesOrDilationsAreOne(o,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);let u=f.backend_util.computePool2DInfo(i.shape,a,o,1,s,l);if(1===u.filterWidth&&1===u.filterHeight&&f.D5U.arraysEqual(u.inShape,u.outShape))return lE({inputs:{x:i},backend:n});let c=new uC(u,"max",!1);return n.runWebGLProgram(c,[i],i.dtype)}},hn={kernelName:f.OAf,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:o,pad:s,dataFormat:l,dimRoundingMode:u}=r,c=new uN(f.backend_util.computePool3DInfo(i.shape,a,o,[1,1,1],s,u,l),"max",!1);return n.runWebGLProgram(c,[i],i.dtype)}};class hr{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,a=e.effectiveFilterWidth,o=i-1-e.padInfo.top,s=a-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${r}) {
          float dyR = float(dyRCorner + wR) / ${t}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${n}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${i*a-1} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class hi{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterDepth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.front,d=l-1-e.padInfo.top,h=u-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${c}, ${d}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${s};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${t}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${l};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${n}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${r}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${s*l*u-1} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${l} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}let ha={kernelName:f.OU7,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r,c=f.backend_util.computePool3DInfo(a.shape,o,s,[1,1,1],l,u),d=new uN(c,"max",!0),h=n.runWebGLProgram(d,[a],a.dtype),p=new hi(c),g=n.runWebGLProgram(p,[i,h],a.dtype);return n.disposeIntermediateTensorInfo(h),g}},ho={kernelName:f.OV7,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a,output:o}=t;(0,lG.HS)([a,o],"maxPoolGrad");let{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=f.backend_util.computePool2DInfo(a.shape,s,l,1,u,c),h=new uC(d,"max",!0),p=n.runWebGLProgram(h,[a],a.dtype),g=new hr(d),m=n.runWebGLProgram(g,[i,p],a.dtype);return n.disposeIntermediateTensorInfo(p),m}},hs={kernelName:f.vFR,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:i,strides:a,pad:o,includeBatchInIndex:s}=t;f.D5U.assert(4===r.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);let l=[1,1];f.D5U.assert(f.backend_util.eitherStridesOrDilationsAreOne(a,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${l}'`);let u=f.backend_util.computePool2DInfo(r.shape,i,a,l,o),[c,d]=function(e,t,n,r){let i=new uC(n,"max",!1),a=r.runWebGLProgram(i,[e],"float32");return i=new uC(n,"max",!0,!0,t),[a,r.runWebGLProgram(i,[e],"float32")]}(r,s,u,n);return[c,d]}},hl={kernelName:f.q2K,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{keepDims:i,axis:a}=t,o=r.shape.length,s=f.D5U.parseAxisParam(a,r.shape),l=s,u=f.backend_util.getAxesPermutation(l,o),c=null!=u,d=n.shouldExecuteOnCPU([r]),h=[],p=r;if(c){if(d){let e=n.texData.get(p.dataId).values,t=Array(o);for(let e=0;e<t.length;e++)t[e]=r.shape[u[e]];let i=(0,lV.Fv)(e,r.shape,r.dtype,u,t);p=n.makeTensorInfo(t,r.dtype),n.texData.get(p.dataId).values=i}else p=l1(r,u,n);h.push(p),l=f.backend_util.getInnerMostAxes(l.length,o)}f.backend_util.assertAxesAreInnerMostDims("sum",l,o);let[g,m]=f.backend_util.computeOutAndReduceShapes(p.shape,l),b=g;i&&(b=f.backend_util.expandShapeToKeepDim(g,s));let y=function(e,t,n,r){let i=f.D5U.sizeFromShape(t),a=f.D5U.sizeFromShape(e.shape),o=lX({inputs:{x:e},attrs:{shape:[a/i,i]},backend:r}),s=lJ(o,"float32","mean",r),l=lX({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),l}(p,m,b,n);for(let e of h)n.disposeIntermediateTensorInfo(e);return y}},hu={kernelName:f.c17,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a}=n,{axis:o,keepDims:s}=i,l=a.shape.length,u=f.D5U.parseAxisParam(o,a.shape),c=u,d=f.backend_util.getAxesPermutation(c,l),h=a;null!=d&&(h=l4({inputs:{x:a},backend:r,attrs:{perm:d}}),c=f.backend_util.getInnerMostAxes(c.length,a.shape.length)),f.backend_util.assertAxesAreInnerMostDims("min",c,l);let[p,g]=f.backend_util.computeOutAndReduceShapes(h.shape,c),m=lX({inputs:{x:h},backend:r,attrs:{shape:[-1,f.D5U.sizeFromShape(g)]}}),b=lJ(m,m.dtype,"min",r);return t=s?lX({inputs:{x:b},backend:r,attrs:{shape:f.backend_util.expandShapeToKeepDim(p,u)}}):lX({inputs:{x:b},backend:r,attrs:{shape:p}}),r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(b),null!=d&&r.disposeIntermediateTensorInfo(h),t}},hc=lM({opSnippet:lb+`
  return min(a, b);
`,packedOpSnippet:`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+lw+`
  return result;
`,cpuKernelImpl:lV.r}),hd={kernelName:f.q8u,backendName:"webgl",kernelFunc:hc};class hh{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,i=(0,lx.kW)(r),a=t.map(e=>e[0]).join(","),o=t.map((t,n)=>t[0]+e[n]).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;if(1===r){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${l};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${l};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${r}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${l};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${s}));
      }
    `}}class hf{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,i=(0,lx.kW)(r),a=t.map(e=>e[0]).join(","),o=t.map((t,n)=>t[0]+e[n]).join(","),s=(0,lv.Ky)("rc",r),l=(0,lv.Ky)("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,d="reflect"===n?0:1,h="";if(1===r){let e=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${e}
        result[0] = getChannel(getX(${l.join()}), ${c});
        ${s[r-1]} += 1;
        if(${u}) {
          ${e}
          result[1] = getChannel(getX(${l.join()}), ${c});
        }
      `}else{let e=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${e}
        result[0] = getChannel(getX(${l.join()}), ${c});
        ${s[r-1]} += 1;
        if(${u}) {
          ${e}
          result[1] = getChannel(getX(${l.join()}), ${c});
        }
        rc = outputLoc;
        ${s[r-2]} += 1;
        if(${s[r-2]} < ${this.outputShape[r-2]}) {
          ${e}
          result[2] = getChannel(getX(${l.join()}), ${c});
          ${s[r-1]} += 1;
          if(${u}) {
            ${e}
            result[3] = getChannel(getX(${l.join()}), ${c});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}let hp={kernelName:f.jQs,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r}=e,{paddings:i,mode:a}=n,o=(0,f.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new hf(r.shape,i,a):new hh(r.shape,i,a);return t.runWebGLProgram(o,[r],r.dtype)}},hg=lM({opSnippet:`if (b == 0.0) return NAN;
  return mod(a, b);`,packedOpSnippet:`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+lw+`
  return result;
`}),hm={kernelName:f.Vbg,backendName:"webgl",kernelFunc:hg};class hb{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${t-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${t-1}));
      }
    `}}let hy=lM({opSnippet:`
if (a == b) {
  return 1.0;
};
return a / b;`,packedOpSnippet:`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,checkOutOfBounds:!0}),hv={kernelName:f.oHH,backendName:"webgl",kernelFunc:hy},hx="return a - b;",hw=lM({opSnippet:hx,packedOpSnippet:hx,supportsComplex:!0,cpuKernelImpl:lV.kI}),hk={kernelName:f.Tr8,backendName:"webgl",kernelFunc:hw};function hE(e){let{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:a}=r,o=f.D5U.parseAxisParam([a],i.shape),s=d6({inputs:{x:i},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=f.backend_util.expandShapeToKeepDim(s.shape,o),u=lX({inputs:{x:s},backend:n,attrs:{shape:l}}),c=hw({inputs:{a:i,b:u},backend:n}),d=c6({inputs:{x:c},backend:n}),h=l2({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),p=lX({inputs:{x:h},backend:n,attrs:{shape:l}}),g=hy({inputs:{a:d,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),g}let hI={kernelName:f.Gcp,backendName:"webgl",kernelFunc:hE},hS={kernelName:f.NZg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:a,seed:o,normalized:s}=r,l=s?i:hE({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),u=new hb(l.shape[0],l.shape[1],a),c=n.runWebGLProgram(u,[l],"int32",[[o]]);return s||n.disposeIntermediateTensorInfo(l),c}},hT=l_.D1+`
  return -x;
`,hC=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,hN={kernelName:f.kuV,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r}=e,{x:i}=n;if(r.shouldExecuteOnCPU([i])){let e=r.texData.get(i.dataId),[t,n]=(0,lV.Bo)(e.values,i.shape,i.dtype);return r.makeTensorInfo(n,i.dtype,t)}return t=(0,f.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new lF.cc(i.shape,hC):new l_.l(i.shape,hT),r.runWebGLProgram(t,[i],i.dtype)}},hA=f.GDt.GP,hR={kernelName:f.uv1,backendName:"webgl",kernelFunc:function(e){f.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r,{selectedIndices:u}=hA(n.readSync(i.dataId),n.readSync(a.dataId),o,s,l);return n.makeTensorInfo([u.length],"int32",new Int32Array(u))}},hD=f.GDt.qP,h$={kernelName:f.cye,backendName:"webgl",kernelFunc:function(e){f.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r,{selectedIndices:c,validOutputs:d}=hD(n.readSync(i.dataId),n.readSync(a.dataId),o,s,l,u);return[n.makeTensorInfo([c.length],"int32",new Int32Array(c)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}},h_=f.GDt.pA,hF={kernelName:f.W0H,backendName:"webgl",kernelFunc:function(e){f.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r,{selectedIndices:c,selectedScores:d}=h_(n.readSync(i.dataId),n.readSync(a.dataId),o,s,l,u);return[n.makeTensorInfo([c.length],"int32",new Int32Array(c)),n.makeTensorInfo([d.length],"float32",new Float32Array(d))]}};class hO{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${r}), float(${n}),
                      float(index == coords.y)));
      }
    `}}let hP={kernelName:f.we_,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:a,depth:o,onValue:s,offValue:l}=r,u=f.D5U.sizeFromShape(i.shape),c=new hO(u,o,s,l),d=lX({inputs:{x:i},backend:n,attrs:{shape:[u]}}),h=n.runWebGLProgram(c,[d],a);n.disposeIntermediateTensorInfo(d);let p=lX({inputs:{x:h},backend:n,attrs:{shape:[...i.shape,o]}});return n.disposeIntermediateTensorInfo(h),p}};function hM(e){let{inputs:t,backend:n}=e,{x:r}=t;if("complex64"!==r.dtype)return du({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n});{let e=uJ({inputs:{input:r},backend:n}),t=hM({inputs:{x:e},backend:n}),i=cr({inputs:{input:r},backend:n}),a=hM({inputs:{x:i},backend:n}),o=lS({inputs:{real:t,imag:a},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),o}}let hL={kernelName:f.RuY,backendName:"webgl",kernelFunc:hM},hB={kernelName:f.qWM,backendName:"webgl",kernelFunc:function e(t){let{inputs:n,backend:r}=t,{x:i}=n;if("string"===i.dtype)throw Error("onesLike is not supported under string dtype");if("complex64"!==i.dtype)return du({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:r});{let t=uJ({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r}),a=cr({inputs:{input:i},backend:r}),o=hM({inputs:{x:a},backend:r}),s=lS({inputs:{real:n,imag:o},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(o),s}}},hU={kernelName:f.QiL,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return c9({inputs:{input:t[0]},backend:n,attrs:{dim:i}});let a=t[0].shape,o=t[0].dtype;t.forEach(e=>{f.D5U.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),f.D5U.assert(o===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let s=[],l=ca({inputs:t.map(e=>{let t=c9({inputs:{input:e},backend:n,attrs:{dim:i}});return s.push(t),t}),backend:n,attrs:{axis:i}});return s.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}};class hz{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,i=(0,lx.kW)(r),a=t.map(e=>e[0]).join(","),o=t.map((t,n)=>t[0]+e[n]).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);if(1===r){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${s}));
        }
      }
    `}}class hV{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,i=(0,lx.kW)(r),a=t.map(e=>e[0]).join(","),o=t.map((t,n)=>t[0]+e[n]).join(","),s=(0,lv.Ky)("rc",r),l=(0,lv.Ky)("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,d=[`${i} rc = outputLoc;`,`${s[r-1]} += 1;
       if(${u}) {
      `,1===r?"":`}
       rc = outputLoc;
       ${s[r-2]} += 1;
       if(${s[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${s[r-1]} += 1;
         if(${u}) {`],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="";for(let e=0,t=1===r?2:4;e<t;e++)f+=`
        ${d[e]}
        if (${h}) {
          result[${e}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${e}] = getChannel(getX(${l.join()}), ${c});
        }
      `;f+=1===r?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}let hW=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:a,constantValue:o}=r;if(0===f.D5U.sizeFromShape(i.shape))return du({backend:n,attrs:{shape:a.map((e,t)=>e[0]+i.shape[t]+e[1]),value:o,dtype:i.dtype}});let s=(0,f.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new hV(i.shape,a,o):new hz(i.shape,a,o),l=[[o]];return n.runWebGLProgram(s,[i],i.dtype,l)},hj={kernelName:f.lyA,backendName:"webgl",kernelFunc:hW},hH=lM({opSnippet:`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,packedOpSnippet:`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+lw+`
  return result;
`}),hK={kernelName:f.pe_,backendName:"webgl",kernelFunc:hH},hG={kernelName:f.DlI,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a}=n,{axis:o,keepDims:s}=i,l=a.shape.length,u=[],c=f.D5U.parseAxisParam(o,a.shape),d=c,h=f.backend_util.getAxesPermutation(d,l),p=a;if(null!=h&&(p=l4({inputs:{x:a},backend:r,attrs:{perm:h}}),d=f.backend_util.getInnerMostAxes(d.length,l),u.push(p)),f.backend_util.assertAxesAreInnerMostDims("prod",d,l),r.shouldExecuteOnCPU([p])){let e=r.texData.get(p.dataId).values,{outVals:n,outShape:i,outDtype:a}=(0,lV.Tg)(p.shape,p.dtype,e,d);t=r.makeTensorInfo(i,a,n)}else{let[e,n]=f.backend_util.computeOutAndReduceShapes(p.shape,d),i=lX({inputs:{x:p},backend:r,attrs:{shape:[-1,f.D5U.sizeFromShape(n)]}}),o=lJ(i,(0,f.z4k)(a.dtype),"prod",r);t=lX({inputs:{x:o},backend:r,attrs:{shape:e}}),u.push(i),u.push(o)}if(s){u.push(t);let e=f.backend_util.expandShapeToKeepDim(t.shape,c);t=lX({inputs:{x:t},backend:r,attrs:{shape:e}})}return u.forEach(e=>r.disposeIntermediateTensorInfo(e)),t}},hX={kernelName:f.dDz,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:a,indices:o}=t,{outputRaggedRank:s}=r,l=i.map(e=>n.readSync(e.dataId)),u=i.map(e=>e.shape),c=n.readSync(a.dataId),d=n.readSync(o.dataId),[h,f,p]=(0,lV.Qs)(l,u,c,a.shape,a.dtype,d,o.shape,s),g=h.map(e=>n.makeTensorInfo([e.length],"int32",e)),m=n.makeTensorInfo(p,a.dtype,f);return g.concat([m])}},hq={kernelName:f.CQl,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:a}=t,o=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(a.dataId),[u,c]=(0,lV.M8)(o,r.shape,r.dtype,s,i.shape,l,a.shape);return[n.makeTensorInfo([u.length],"int32",u),n.makeTensorInfo([c.length],r.dtype,c)]}},hY={kernelName:f.BiW,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{shape:i,values:a,defaultValue:o,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,u=n.readSync(i.dataId),c=n.readSync(a.dataId),d=n.readSync(o.dataId),h=s.map(e=>n.readSync(e.dataId)),f=s.map(e=>e.shape),[p,g]=(0,lV.fy)(u,i.shape,c,a.shape,a.dtype,d,o.shape,h,f,l);return n.makeTensorInfo(p,a.dtype,g)}},hQ=e=>{let{backend:t,attrs:n}=e,{start:r,stop:i,step:a,dtype:o}=n,s=(0,lV.hO)(r,i,a,o);return t.makeTensorInfo([s.length],o,s)},hJ={kernelName:f.e6w,backendName:"webgl",kernelFunc:hQ},hZ=lP({opSnippet:"return 1.0 / x;"}),h0={kernelName:f.$HU,backendName:"webgl",kernelFunc:hZ},h1=lP({opSnippet:l_.D1+`
  return (x < 0.0) ? 0.0 : x;
`,packedOpSnippet:`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`}),h2={kernelName:f.qkr,backendName:"webgl",kernelFunc:h1},h3=lP({opSnippet:l_.D1+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,packedOpSnippet:`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`}),h4={kernelName:f.SbG,backendName:"webgl",kernelFunc:h3};class h5{constructor(e,t,n,r,i){let a;this.variableNames=["A"],this.outputShape=[];let[o,s,l,u]=e;this.outputShape=[o,t,n,u];let c=[r&&t>1?s-1:s,r&&n>1?l-1:l],d=[r&&t>1?t-1:t,r&&n>1?n-1:n];a=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${a};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}class h8{constructor(e,t,n,r,i){let a;this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[o,s,l,u]=e;this.outputShape=[o,t,n,u];let c=[r&&t>1?s-1:s,r&&n>1?l-1:l],d=[r&&t>1?t-1:t,r&&n>1?n-1:n];a=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${a};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${n-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}let h6={kernelName:f._Yw,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:o,size:s}=r,[l,u]=s,c=(0,f.OBj)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new h8(i.shape,l,u,a,o):new h5(i.shape,l,u,a,o);return n.runWebGLProgram(c,[i],"float32")}};class h7{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,i]=t,[,a,o]=e,s=[n&&a>1?r-1:r,n&&o>1?i-1:i],l=[n&&a>1?a-1:a,n&&o>1?o-1:o],u=s[0]/l[0],c=s[1]/l[1],d=1/u,h=1/c,f=2*Math.ceil(d)+2,p=2*Math.ceil(h)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${c});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${f});
        const int winWidth = int(${p});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}let h9={kernelName:f.zbQ,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:o}=r,s=new h7(a.shape,i.shape,o);return n.runWebGLProgram(s,[a],a.dtype)}};class fe{constructor(e,t,n,r,i){let a;this.variableNames=["A"],this.outputShape=[];let[o,s,l,u]=e;this.outputShape=[o,t,n,u];let c=[r&&t>1?s-1:s,r&&n>1?l-1:l],d=[r&&t>1?t-1:t,r&&n>1?n-1:n];a=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${a};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}class ft{constructor(e,t,n,r,i){let a;this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[o,s,l,u]=e;this.outputShape=[o,t,n,u];let c=[r&&t>1?s-1:s,r&&n>1?l-1:l],d=[r&&t>1?t-1:t,r&&n>1?n-1:n];a=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${a};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${n-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}let fn={kernelName:f.dpD,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:o,size:s}=r,[l,u]=s,c=(0,f.OBj)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ft(i.shape,l,u,a,o):new fe(i.shape,l,u,a,o);return n.runWebGLProgram(c,[i],i.dtype)}};class fr{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,i]=t,[,a,o]=e,s=[n&&a>1?r-1:r,n&&o>1?i-1:i],l=[n&&a>1?a-1:a,n&&o>1?o-1:o],u=s[0]/l[0],c=s[1]/l[1],d=1/u,h=1/c,f=2*Math.ceil(d)+2,p=2*Math.ceil(h)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${c});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${f});
        const int winWidth = int(${p});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${s[0]}) *
                (float(dyR) / float(${l[0]}));

            float sourceFracCol =
                float(${s[1]}) *
                  (float(dyC) / float(${l[1]}));

            int sourceNearestRow = int(min(
                float(int(${r}) - 1),
                ${n} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${n} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}let fi={kernelName:f.Hmb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:o}=r,s=new fr(a.shape,i.shape,o);return n.runWebGLProgram(s,[a],a.dtype)}};class fa{constructor(e,t){this.variableNames=["x"];let n=e.length;if(n>4)throw Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}let r=n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`,i=e.map((e,t)=>r(t)).join(","),a=(0,lx.kW)(n);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}class fo{constructor(e,t){var n,r,i;this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let a=e.length;if(a>4)throw Error(`WebGL backend: Reverse of rank-${a} tensor is not yet supported`);this.outputShape=e;let o=(0,lv.Ky)("rc",a),s=`${o[a-1]} + 1 < ${this.outputShape[a-1]}`,l=`${o[a-2]} + 1 < ${this.outputShape[a-2]}`,u=(0,lx.kW)(a);function c(n){let r=e.map((r,i)=>-1!==t.indexOf(i)&&1!==e[i]?`${e[i]} - ${n[i]} - 1`:`${n[i]}`),i=r.join(","),a=r.slice(-2).join(",");return`getChannel(getX(${i}), vec2(${a}))`}1===a?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${u} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${c(o.slice())};
          if(${s}){
            result.g = ${(n=o.slice())[a-1]="("+n[a-1]+" + 1)",c(n)};
          }
          if(${l}) {
            result.b = ${(r=o.slice())[a-2]="("+r[a-2]+" + 1)",c(r)};
            if(${s}) {
              result.a = ${(i=o.slice())[a-1]="("+i[a-1]+" + 1)",i[a-2]="("+i[a-2]+" + 1)",c(i)};
            }
          }
          setOutput(result);
        }
    `}}let fs={kernelName:f.mKl,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:a}=r,o=i.shape.length,s=f.D5U.parseAxisParam(a,i.shape);if(0===o)return lE({inputs:{x:i},backend:n});let l=(0,f.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fo(i.shape,s):new fa(i.shape,s);return n.runWebGLProgram(l,[i],i.dtype)}};class fl{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let n=e[1],r=e[2];this.outputShape=e;let i="";i="number"==typeof t?`float outputValue = ${t.toFixed(2)};`:`
        vec3 fill = vec3(${t.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}let fu={kernelName:f.b9H,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:i,fillValue:a,center:o}=t,s=new fl(r.shape,a),[l,u]=f.backend_util.getImageCenter(o,r.shape[1],r.shape[2]);return n.runWebGLProgram(s,[r],r.dtype,[[l,u,Math.sin(i),Math.cos(i)]])}},fc=lP({opSnippet:`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`}),fd={kernelName:f.e07,backendName:"webgl",kernelFunc:fc},fh=lP({opSnippet:"return inversesqrt(x);",cpuKernelImpl:lV.St}),ff={kernelName:f.bV0,backendName:"webgl",kernelFunc:fh};class fp{constructor(e,t,n,r,i,a,o=!0,s=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;let l=(0,lx.kW)(i.length),u=(0,lx.kW)(a.length),c="";1===n?c="i":2===n&&(c="i, j");let d=`getIndices(${c})`,h="";1===r?h="i":2===r&&(h="i, coords[1]");let f=`getUpdates(${h})`,p="";s&&(p="coords[0], coords[1]");let g=`getDefaultValue(${p})`;this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${t}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${t>1?"strides[j]":"strides"};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${f};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}}class fg{constructor(e,t,n,r,i,a,o=!0,s=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;let l=(0,lx.kW)(i.length),u=(0,lx.kW)(a.length),c="";1===n?c="i":2===n&&(c="i, j");let d=`getIndices(${c})`,h="";1===r?h="i":2===r&&(h="i, coords[1]");let f=`getUpdates(${h})`,p="";s&&(p="coords[0], coords[1]");let g=`getDefaultValue(${p})`;this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${t}; j+=2) {
              ivec4 index = round(${d});
              flattenedIndex += index.xz * ${t>1?"strides[j]":"strides"};
              if (j + 1 < ${t}) {
                flattenedIndex += index.yw * ${t>1?"strides[j + 1]":"strides"};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${f};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}}let fm={kernelName:f.xQA,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{indices:a,updates:o}=n,{shape:s}=i,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:h}=f.backend_util.calculateShapes(o,a,s),p=[h/c,c];if(0===h)return r.makeTensorInfo(s,a.dtype);let g=lX({inputs:{x:a},backend:r,attrs:{shape:[u,l]}}),m=lX({inputs:{x:o},backend:r,attrs:{shape:[u,c]}}),b=r.makeTensorInfo([],"float32",new Float32Array([0]));t=(0,f.OBj)().getBool("WEBGL_PACK")?new fg(u,l,g.shape.length,m.shape.length,d,p):new fp(u,l,g.shape.length,m.shape.length,d,p);let y=r.runWebGLProgram(t,[m,g,b],m.dtype),v=lX({inputs:{x:y},backend:r,attrs:{shape:s}});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(b),v}};class fb{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];let i=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,a=2===(0,f.OBj)().getNumber("WEBGL_VERSION")?"while (left < right) {":i;this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${"left"===r?"<":"<="} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}let fy={kernelName:f.nr8,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:a}=t,{side:o}=r,s=new fb(i.shape[0],i.shape[1],a.shape[1],o),l=[[i.shape[1]]];return n.runWebGLProgram(s,[i,a],"int32",l)}};class fv{constructor(e,t,n){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)i="resRC",r="resRC";else{let n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],o=[];for(let r=0;r<t.length;r++)o.push(`${n[r]}`),r<e&&a.push(`${n[r]}`);r=a.join(),i=o.join()}let a=(0,lx.kW)(n);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${r});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}let fx={kernelName:f.PhF,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{condition:r,t:i,e:a}=t,o=new fv(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(o,[r,i,a],(0,f.x8V)(i.dtype,a.dtype))}},fw=lP({opSnippet:`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${f.backend_util.SELU_SCALEALPHA};
  float scale = ${f.backend_util.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`}),fk={kernelName:f.oFR,backendName:"webgl",kernelFunc:fw},fE=lP({opSnippet:lO+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,packedOpSnippet:`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cpuKernelImpl:lV.UN}),fI={kernelName:f.a5O,backendName:"webgl",kernelFunc:fE},fS=lP({opSnippet:`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`}),fT={kernelName:f.i5y,backendName:"webgl",kernelFunc:fS},fC=lP({opSnippet:lO+`
  return sin(x);
`,packedOpSnippet:`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${lw}
  return result;
`}),fN={kernelName:f.RQH,backendName:"webgl",kernelFunc:fC},fA=lP({opSnippet:`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`}),fR={kernelName:f.wYB,backendName:"webgl",kernelFunc:fA},fD=lP({opSnippet:`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`}),f$={kernelName:f.MRv,backendName:"webgl",kernelFunc:fD},f_={kernelName:f.TQc,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,paddings:o}=r;f.D5U.assert(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let s=a.reduce((e,t)=>e*t),l=[[0,0]];l.push(...o);for(let e=1+a.length;e<i.shape.length;++e)l.push([0,0]);let u=[],c=hW({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),d=f.backend_util.getReshaped(c.shape,a,s,!1),h=f.backend_util.getPermuted(d.length,a.length,!1),p=f.backend_util.getReshapedPermuted(c.shape,a,s,!1),g=lX({inputs:{x:c},backend:n,attrs:{shape:d}}),m=l4({inputs:{x:g},backend:n,attrs:{perm:h}}),b=lX({inputs:{x:m},backend:n,attrs:{shape:p}});return u.push(c),u.push(g),u.push(m),u.forEach(e=>n.disposeIntermediateTensorInfo(e)),b}},fF={kernelName:f.O3z,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:a,defaultValue:o}=t;if(1!==a.shape.length)throw Error(`Dense shape must be a vector, saw:
         ${a.shape}`);if(2!==r.shape.length)throw Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(1!==i.shape.length)throw Error(`Values must be a vector, saw:
         ${i.shape}`);if(0!==o.shape.length)throw Error(`Default value must be a scalar, saw:
        ${o.shape}`);let s=n.readSync(r.dataId),l=n.readSync(i.dataId),u=n.readSync(a.dataId),c=n.readSync(o.dataId)[0],[d,h,f,p,g]=(0,lV.X8)(s,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],i.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(e=>Number(e)))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}},fO={kernelName:f.nhH,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:a}=t;if(2!==r.shape.length)throw Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==i.shape.length)throw Error(`Input shape should be a vector but received shape ${i.shape}`);if(1!==a.shape.length)throw Error(`Target shape should be a vector but received shape ${a.shape}`);let o=Array.from(n.readSync(i.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(a.dataId)),[u,c,d]=(0,lV.LS)(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}},fP={kernelName:f.w3H,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw Error(`Indices should be a vector but received shape
              ${i.shape}`);if(1!==a.shape.length)throw Error(`Segment ids should be a vector but received shape
              ${a.shape}`);let o=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(a.dataId),[u,c]=(0,lV.AR)(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}},fM={kernelName:f.ZjV,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw Error(`Indices should be a vector but received shape
             ${i.shape}`);if(1!==a.shape.length)throw Error(`Segment ids should be a vector but received shape
             ${a.shape}`);let o=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(a.dataId),[u,c]=(0,lV.AR)(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}},fL={kernelName:f.D2d,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:a,defaultValue:o}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:h}=f.backend_util.calculateShapes(a,i,s);if("string"===a.dtype){let e=n.bufferSync(i),t=n.bufferSync(a),r=f.D5U.decodeString(n.readSync(o.dataId)[0]),p=(0,lV.Y1)(e,t,s,h,c,u,l,d,r,!1);return n.makeTensorInfo(s,p.dtype,p.values)}let p=new fp(u,l,i.shape.length,a.shape.length,d,[h,1],!1),g=n.runWebGLProgram(p,[a,i,o],a.dtype),m=lX({inputs:{x:g},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(g),m}},fB={kernelName:f.L8s,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:a,axis:o}=r,s=f.D5U.parseAxisParam(o,i.shape)[0],l=f.backend_util.prepareSplitSize(i,a,s),u=Array(i.shape.length).fill(0),c=i.shape.slice();return l.map(e=>{let t=[...c];t[s]=e;let r=uV({inputs:{x:i},backend:n,attrs:{begin:u,size:t}});return u[s]+=e,r})}},fU="return sqrt(x);",fz=lP({opSnippet:fU,packedOpSnippet:fU,cpuKernelImpl:lV.Bk}),fV={kernelName:f.FKq,backendName:"webgl",kernelFunc:fz},fW=lP({opSnippet:"return x * x;"}),fj={kernelName:f.bK0,backendName:"webgl",kernelFunc:fW},fH="return (a - b) * (a - b);",fK=lM({opSnippet:fH,packedOpSnippet:fH}),fG={kernelName:f._tC,backendName:"webgl",kernelFunc:fK},fX={kernelName:f.e0R,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t;if("string"!==i.dtype)throw Error("Input must be of datatype string");let a=n.readSync(i.dataId),o=f.backend_util.fromUint8ToStringArray(a),s=(0,lV.F1)(o,"string",r);return n.makeTensorInfo(i.shape,"string",s)}},fq={kernelName:f.h8e,backendName:"webgl",kernelFunc:function({inputs:e,attrs:t,backend:n}){let{x:r}=e,i=l_.D1+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,a=new l_.l(r.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}};class fY{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;let r=n.length,i=(0,lx.kW)(n.length),a=(0,lx.kW)(n.length),o="";if(1===r)o="coords * strides + begin";else{let e=0;o=n.map((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${t});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}let fQ={kernelName:f.jQk,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r,attrs:i}=e,{x:a}=n,{begin:o,end:s,strides:l,beginMask:u,endMask:c,ellipsisMask:d,newAxisMask:h,shrinkAxisMask:p}=i,{finalShapeSparse:g,finalShape:m,isIdentity:b,sliceDim0:y,isSimpleSlice:v,begin:x,end:w,strides:k}=f.kuN.sliceInfo(a.shape,o,s,l,u,c,d,h,p);if(b)t=lX({inputs:{x:a},backend:r,attrs:{shape:m}});else if(y||v){f.D5U.assert(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);let e=f.kuN.computeOutShape(x,w,k),n=uV({inputs:{x:a},backend:r,attrs:{begin:x,size:e}});t=lX({inputs:{x:n},backend:r,attrs:{shape:m}}),r.disposeIntermediateTensorInfo(n)}else if(r.shouldExecuteOnCPU([a])){let e=r.readSync(a.dataId),n=(0,f.f3b)(a.shape,a.dtype,e),i=(0,lV.$u)(g,n,k,x);t=r.makeTensorInfo(m,a.dtype,i.values)}else{let e=new fY(x,k,g);t=r.runWebGLProgram(e,[a],a.dtype)}let E=lX({inputs:{x:t},backend:r,attrs:{shape:m}});return r.disposeIntermediateTensorInfo(t),E}},fJ={kernelName:f._JP,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:a,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=t,h=n.readSync(c.dataId),f=n.readSync(d.dataId),[p,g]=(0,lV.$j)(h,f,i,a,o,s,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",g)]}},fZ={kernelName:f.s1s,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:a,delimiter:o}=t;if("string"!==a.dtype)throw Error("Input must be of datatype string");if(1!==a.shape.length)throw Error(`Input must be a vector, got shape: ${a.shape}`);if(0!==o.shape.length)throw Error(`Delimiter must be a scalar, got shape: ${o.shape}`);let s=n.readSync(a.dataId),l=n.readSync(o.dataId)[0],[u,c,d]=(0,lV.A0)(s,l,i),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}},f0={kernelName:f.XkS,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:a}=t;if("string"!==a.dtype)throw Error("Input must be of datatype string");if(i<=0)throw Error("Number of buckets must be at least 1");let o=n.readSync(a.dataId),s=(0,lV._9)(o,i);return n.makeTensorInfo(a.shape,"int32",s)}},f1=lP({opSnippet:"return tan(x);"}),f2={kernelName:f.sEM,backendName:"webgl",kernelFunc:f1},f3=lP({opSnippet:`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`}),f4={kernelName:f.MIZ,backendName:"webgl",kernelFunc:f3},f5={kernelName:f.SIB,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{tensor:i,indices:a,updates:o}=t,{}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=f.backend_util.calculateShapes(o,a,i.shape),h=[d/u,u];if(0===d)return n.makeTensorInfo(i.shape,a.dtype);let p=lX({inputs:{x:a},backend:n,attrs:{shape:[l,s]}}),g=lX({inputs:{x:o},backend:n,attrs:{shape:[l,u]}}),m=lX({inputs:{x:i},backend:n,attrs:{shape:h}}),b=new fp(l,s,p.shape.length,g.shape.length,c,h,!1,!0),y=n.runWebGLProgram(b,[g,p,m],m.dtype),v=lX({inputs:{x:y},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}};class f8{constructor(e,t){this.variableNames=["A"];let n=Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;let r=(0,lx.kW)(this.rank),i=function(e){let t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let t=0;t<e.length;t++)r.push(`imod(${n[t]}, ${e[t]})`);return r.join()}(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function f6(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:a}=r;if("string"===i.dtype||i.shape.length>5){let e=n.readSync(i.dataId),t="string"===i.dtype?e.map(e=>f.D5U.decodeString(e)):e,r=(0,f.f3b)(i.shape,i.dtype,t),o=(0,lV.KX)(r,a);return n.makeTensorInfo(o.shape,o.dtype,o.values)}let o=new f8(i.shape,a);return n.runWebGLProgram(o,[i],i.dtype)}let f7={kernelName:f.n9L,backendName:"webgl",kernelFunc:f6};class f9{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class pe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}function pt(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function pn(e){let t=1;for(;t<e;)t*=2;return t}let pr={kernelName:f.cWu,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:a,sorted:o}=r,s=(0,f.OBj)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=(0,f.OBj)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=i.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([i])||c<s||a>l){let e=n.readSync(i.dataId),[t,r]=(0,lV.oC)(e,u,i.dtype,a,o);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===a)return u[u.length-1]=0,[n.makeTensorInfo(u,i.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(1===c)return[i,du({attrs:{shape:u,dtype:"int32",value:0},backend:n})];let d=n.texData.get(i.dataId),h=null!==d&&d.isPacked,p=h?n.unpackTensor(i):i,g=f.D5U.sizeFromShape(u)/c,m=lX({inputs:{x:p},attrs:{shape:[g,c]},backend:n});h&&pt(n,p);let b=pn(a),y=pn(c),v=null,x=()=>null===v?[m,m]:[m,v],w=(e,t,r)=>{let i=x(),a=new f9(r),o=[[c],[null===v?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=v;v=n.runWebGLProgram(a,i,"int32",o),pt(n,s)};for(let e=1;e<b;e*=2){let t=2*e;for(let n=e;n>=1;n/=2)w(t,n,[g,y])}for(let e=y;e>b;e/=2){let t=x(),r=new pe([g,e/2]),i=[[c],[null===v?1:0],[b]],a=v;v=n.runWebGLProgram(r,t,"int32",i),pt(n,a);let o=b/2,s=2*o;for(let e=o;e>=1;e/=2)w(s,e,v.shape)}let k=v;v=uV({inputs:{x:v},backend:n,attrs:{begin:0,size:[g,a]}}),pt(n,k);let E=dN({inputs:{x:m,indices:v},backend:n,attrs:{axis:1,batchDims:1}});pt(n,m);let I=u.slice(0,-1);I.push(a),k=v,v=lX({inputs:{x:v},attrs:{shape:I},backend:n}),pt(n,k);let S=E;return E=lX({inputs:{x:E},attrs:{shape:I},backend:n}),pt(n,S),[E,v]}};class pi{constructor(e,t,n,r,i,a){let o;switch(this.variableNames=["Image","Transforms"],this.outputShape=a,r){case"constant":default:o=1;break;case"reflect":o=2;break;case"wrap":o=3;break;case"nearest":o=4}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${o} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${o} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${o} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${t}));
                float mapY = mapCoord(inY, float(${e}));

                if (${"nearest"===n?1:2} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}let pa={kernelName:f.wx7,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{image:i,transforms:a}=t,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=r,[c,d,h,f]=i.shape,[p,g]=null!=u?u:[d,h],m=new pi(d,h,o,s,l,[c,p,g,f]);return n.runWebGLProgram(m,[i,a],"float32")}},po={kernelName:f.kpP,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:a}=t;(0,lG.HS)(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let o=r.readSync(a.dataId),{outputValues:s,outputShape:l,indices:u}=(0,lV.CV)(o,i,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}},ps={kernelName:f.ToN,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{value:i}=t,{axis:a}=r;a<0&&(a+=i.shape.length);let o=i.shape.length,s=i.shape[a],l=Array(o-1),u=0;for(let e=0;e<o;e++)e!==a&&(l[u++]=i.shape[e]);let c=[],d=Array(o).fill(0),h=i.shape.slice();h[a]=1;let f=Array(s);for(let e=0;e<f.length;e++){d[a]=e;let t=uV({inputs:{x:i},backend:n,attrs:{begin:d,size:h}}),r=lX({inputs:{x:t},backend:n,attrs:{shape:l}});f[e]=r,c.push(t)}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}};class pl{constructor(e,t){this.variableNames=["x","segmentIds"];let n=e.windowSize,r=e.batchSize,i=e.inSize,a=e.numSegments,o=a*Math.ceil(i/n);this.outputShape=[r,o];let s=4*Math.floor(n/4),l=n%4,u=`
        sumValue += dot(values, segFilter);
    `,c="";i%n>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let d="";i%n>0&&(d=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${d}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${n}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${s}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${u}
        }

        int inIdx = inOffset + ${s};
        if (${1===l}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${u}
        } else if (${2===l}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${u}
        } else if (${3===l}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${u}
        }
        setOutput(sumValue);
      }
    `}}for(let e of[l6,l9,ut,ur,uo,uu,uc,ud,ug,um,uy,ux,uk,uI,uT,uA,uR,u_,uF,uO,uL,uj,uH,uX,uq,u0,u3,u8,lT,u9,co,cg,cx,ck,cE,cI,cS,cC,cA,cD,cP,cM,cL,cU,cW,cK,cG,cq,cQ,cJ,c0,c2,c4,c8,c7,de,dr,ds,dc,dh,dg,db,dw,dE,dI,dT,dA,dD,d_,lI,dF,ci,dP,dL,dU,lA,dV,dj,dH,dG,dq,dQ,dZ,d1,d4,d8,d7,he,ht,hn,ha,ho,hs,hl,hu,hd,hp,hm,hS,lH,hN,hR,h$,hF,uQ,hP,hB,hU,hj,hK,l$,hG,hX,hq,hY,hJ,uZ,hv,h0,h2,h4,lq,h6,h9,fn,fi,fs,fu,fd,ff,fm,fy,fx,fk,fI,fT,fN,fR,uW,hI,f$,f_,fF,fO,fP,fM,fL,fB,fV,fj,fG,fX,fq,fQ,fJ,fZ,f0,hk,l3,f2,f4,f5,f7,pr,pa,l5,po,ps,{kernelName:f.Qvg,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:a}=t,{numSegments:o}=r,s=i.shape.length,l=[],u=0,c=f.backend_util.getAxesPermutation([u],s),d=i;null!=c&&(d=l4({inputs:{x:i},backend:n,attrs:{perm:c}}),l.push(d),u=f.backend_util.getInnerMostAxes(1,s)[0]);let h=f.backend_util.segment_util.computeOutShape(d.shape,u,o),p=f.D5U.sizeFromShape([d.shape[u]]),g=lX({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});l.push(g);let m=(0,f.z4k)(i.dtype),b=(e,t,r,i,a)=>{let o=e.shape[0],s=e.shape[1],u=f.backend_util.segment_util.segOpComputeOptimalWindowSize(s,a),c=new pl({windowSize:u,inSize:s,batchSize:o,numSegments:a},t),d=n.compileAndRun(c,[e,r],i);if(l.push(d),d.shape[1]===a)return d;let h=hQ({backend:n,attrs:{start:0,stop:a,step:1,dtype:"float32"}}),p=f6({inputs:{x:h},backend:n,attrs:{reps:[s/u]}});return l.push(h),l.push(p),b(d,t,p,i,a)},y=lX({inputs:{x:b(g,"unsortedSegmentSum",a,m,o)},backend:n,attrs:{shape:h}}),v=y;return null!=c&&(l.push(y),v=l4({inputs:{x:v},backend:n,attrs:{perm:f.backend_util.getUndoAxesPermutation(c)}})),l.forEach(e=>n.disposeIntermediateTensorInfo(e)),v}},hL])(0,f.wCN)(e);f.jTM,rC.i},398:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},a={};function o(e,t){var n,r,o;return t?(e>>>=0,(o=0<=e&&e<256)&&(r=a[e]))?r:(n=l(e,(0|e)<0?-1:0,!0),o&&(a[e]=n),n):(e|=0,(o=-128<=e&&e<128)&&(r=i[e]))?r:(n=l(e,e<0?-1:0,!1),o&&(i[e]=n),n)}function s(e,t){if(isNaN(e))return t?b:m;if(t){if(e<0)return b;if(e>=f)return k}else{if(e<=-p)return E;if(e+1>=p)return w}return e<0?s(-e,t).neg():l(e%h|0,e/h|0,t)}function l(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=l;var u=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var r,i=s(u(n,8)),a=m,o=0;o<e.length;o+=8){var l=Math.min(8,e.length-o),d=parseInt(e.substring(o,o+l),n);if(l<8){var h=s(u(n,l));a=a.mul(h).add(s(d))}else a=(a=a.mul(i)).add(s(d))}return a.unsigned=t,a}function d(e,t){return"number"==typeof e?s(e,t):"string"==typeof e?c(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=c,n.fromValue=d;var h=4294967296,f=18446744073709552e3,p=0x7fffffffffffffff,g=o(16777216),m=o(0);n.ZERO=m;var b=o(0,!0);n.UZERO=b;var y=o(1);n.ONE=y;var v=o(1,!0);n.UONE=v;var x=o(-1);n.NEG_ONE=x;var w=l(-1,2147483647,!1);n.MAX_VALUE=w;var k=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var E=l(0,-2147483648,!1);n.MIN_VALUE=E;var I=n.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(!this.eq(E))return"-"+this.neg().toString(e);var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}for(var i=s(u(e,6),this.unsigned),a=this,o="";;){var l=a.div(i),c=(a.sub(l.mul(i)).toInt()>>>0).toString(e);if((a=l).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return(1&this.low)==1},I.isEven=function(){return(1&this.low)==0},I.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return 0>this.comp(e)},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return 0>=this.comp(e)},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(y)},I.neg=I.negate,I.add=function(e){r(e)||(e=d(e));var t,n,i=this.high>>>16,a=65535&this.high,o=this.low>>>16,s=65535&this.low,u=e.high>>>16,c=65535&e.high,h=e.low>>>16,f=65535&e.low,p=0,g=0;return t=0+((n=0+(s+f))>>>16),n&=65535,t+=o+h,g+=t>>>16,t&=65535,g+=a+c,p+=g>>>16,g&=65535,p+=i+u,l(t<<16|n,(p&=65535)<<16|g,this.unsigned)},I.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return m;if(r(e)||(e=d(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(E))return e.isOdd()?E:m;if(e.eq(E))return this.isOdd()?E:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return s(this.toNumber()*e.toNumber(),this.unsigned);var n,i,a=this.high>>>16,o=65535&this.high,u=this.low>>>16,c=65535&this.low,h=e.high>>>16,f=65535&e.high,p=e.low>>>16,b=65535&e.low,y=0,v=0;return n=0+((i=0+c*b)>>>16),i&=65535,n+=u*b,v+=n>>>16,n&=65535,n+=c*p,v+=n>>>16,n&=65535,v+=o*b,y+=v>>>16,v&=65535,v+=u*p,y+=v>>>16,v&=65535,v+=c*f,y+=v>>>16,v&=65535,y+=a*b+o*p+u*f+c*h,l(n<<16|i,(y&=65535)<<16|v,this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");if(t){var n,i,a;return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?b:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return v;a=b}else{if(this.eq(E))return e.eq(y)||e.eq(x)?E:e.eq(E)?y:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?y:x:(i=this.sub(e.mul(n)),a=n.add(i.div(e)));if(e.eq(E))return this.unsigned?b:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=m}for(i=this;i.gte(e);){for(var o=Math.ceil(Math.log(n=Math.max(1,Math.floor(i.toNumber()/e.toNumber())))/Math.LN2),c=o<=48?1:u(2,o-48),h=s(n),f=h.mul(e);f.isNegative()||f.gt(i);)n-=c,f=(h=s(n,this.unsigned)).mul(e);h.isZero()&&(h=y),a=a.add(h),i=i.sub(f)}return a},I.div=I.divide,I.modulo=function(e){return(r(e)||(e=d(e)),t)?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return l(~this.low,~this.high,this.unsigned)},I.and=function(e){return r(e)||(e=d(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return r(e)||(e=d(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return r(e)||(e=d(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return(r(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return(r(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):32===e?l(t,0,this.unsigned):l(t>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},33145:function(e,t,n){"use strict";n.d(t,{default:function(){return i.a}});var r=n(48461),i=n.n(r)},40257:function(e,t,n){"use strict";var r,i;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(44227)},65878:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return v}});let r=n(60917),i=n(52140),a=n(57437),o=i._(n(2265)),s=r._(n(54887)),l=r._(n(38293)),u=n(55346),c=n(90128),d=n(62589);n(31765);let h=n(25523),f=r._(n(5084)),p={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/lol/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function g(e,t,n,r,i,a,o){let s=null==e?void 0:e.src;e&&e["data-loaded-src"]!==s&&(e["data-loaded-src"]=s,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&i(!0),null==n?void 0:n.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let r=!1,i=!1;n.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>r,isPropagationStopped:()=>i,persist:()=>{},preventDefault:()=>{r=!0,t.preventDefault()},stopPropagation:()=>{i=!0,t.stopPropagation()}})}(null==r?void 0:r.current)&&r.current(e)}}))}function m(e){return o.use?{fetchPriority:e}:{fetchpriority:e}}"undefined"==typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let b=(0,o.forwardRef)((e,t)=>{let{src:n,srcSet:r,sizes:i,height:s,width:l,decoding:u,className:c,style:d,fetchPriority:h,placeholder:f,loading:p,unoptimized:b,fill:y,onLoadRef:v,onLoadingCompleteRef:x,setBlurComplete:w,setShowAltText:k,sizesInput:E,onLoad:I,onError:S,...T}=e;return(0,a.jsx)("img",{...T,...m(h),loading:p,width:l,height:s,decoding:u,"data-nimg":y?"fill":"1",className:c,style:d,sizes:i,srcSet:r,src:n,ref:(0,o.useCallback)(e=>{t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),e&&(S&&(e.src=e.src),e.complete&&g(e,f,v,x,w,b,E))},[n,f,v,x,w,S,b,E,t]),onLoad:e=>{g(e.currentTarget,f,v,x,w,b,E)},onError:e=>{k(!0),"empty"!==f&&w(!0),S&&S(e)}})});function y(e){let{isAppRouter:t,imgAttributes:n}=e,r={as:"image",imageSrcSet:n.srcSet,imageSizes:n.sizes,crossOrigin:n.crossOrigin,referrerPolicy:n.referrerPolicy,...m(n.fetchPriority)};return t&&s.default.preload?(s.default.preload(n.src,r),null):(0,a.jsx)(l.default,{children:(0,a.jsx)("link",{rel:"preload",href:n.srcSet?void 0:n.src,...r},"__nimg-"+n.src+n.srcSet+n.sizes)})}let v=(0,o.forwardRef)((e,t)=>{let n=(0,o.useContext)(h.RouterContext),r=(0,o.useContext)(d.ImageConfigContext),i=(0,o.useMemo)(()=>{let e=p||r||c.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),n=e.deviceSizes.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:n}},[r]),{onLoad:s,onLoadingComplete:l}=e,g=(0,o.useRef)(s);(0,o.useEffect)(()=>{g.current=s},[s]);let m=(0,o.useRef)(l);(0,o.useEffect)(()=>{m.current=l},[l]);let[v,x]=(0,o.useState)(!1),[w,k]=(0,o.useState)(!1),{props:E,meta:I}=(0,u.getImgProps)(e,{defaultLoader:f.default,imgConf:i,blurComplete:v,showAltText:w});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b,{...E,unoptimized:I.unoptimized,placeholder:I.placeholder,fill:I.fill,onLoadRef:g,onLoadingCompleteRef:m,setBlurComplete:x,setShowAltText:k,sizesInput:e.sizes,ref:t}),I.priority?(0,a.jsx)(y,{isAppRouter:!n,imgAttributes:E}):null]})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},96434:function(e){!function(){var t={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return(n+r)*3/4-r},t.toByteArray=function(e){var t,n,a=l(e),o=a[0],s=a[1],u=new i((o+s)*3/4-s),c=0,d=s>0?o-4:o;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,u[c++]=255&t),1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],o=0,s=r-i;o<s;o+=16383)a.push(function(e,t,r){for(var i,a=[],o=t;o<r;o+=3)a.push(n[(i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}(e,o,o+16383>s?s:o+16383));return 1===i?a.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===i&&a.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),a.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,s=a.length;o<s;++o)n[o]=a[o],r[a.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},72:function(e,t,n){"use strict";var r=n(675),i=n(783),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!s.isEncoding(t))throw TypeError("Unknown encoding: "+t);var n=0|f(e,t),r=o(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return d(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(A(e,ArrayBuffer)||e&&A(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(A(e,SharedArrayBuffer)||e&&A(e.buffer,SharedArrayBuffer)))return function(e,t,n){var r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),s.prototype),r}(e,t,n);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return s.from(r,t,n);var i=function(e){if(s.isBuffer(e)){var t,n=0|h(e.length),r=o(n);return 0===r.length||e.copy(r,0,0,n),r}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?o(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),o(e<0?0:0|h(e))}function d(e){for(var t=e.length<0?0:0|h(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||A(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return S(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return C(e).length;default:if(i)return r?-1:S(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){var i,a,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=R[e[a]];return i}(this,t,n);case"utf8":case"utf-8":return y(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return i=t,a=n,0===i&&a===this.length?r.fromByteArray(this):r.fromByteArray(this.slice(i,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}(this,t,n);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){var a;if(0===e.length)return -1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),(a=n=+n)!=a&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return -1;n=e.length-1}else if(n<0){if(!i)return -1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){var a,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;o=2,s/=2,l/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=n;a<s;a++)if(u(e,a)===u(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*o}else -1!==c&&(a-=a-c),c=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){for(var d=!0,h=0;h<l;h++)if(u(e,a+h)!==u(t,h)){d=!1;break}if(d)return a}return -1}function y(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,l,u=e[i],c=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:(192&(a=e[i+1]))==128&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:a=e[i+1],o=e[i+2],(192&a)==128&&(192&o)==128&&(l=(15&u)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],(192&a)==128&&(192&o)==128&&(192&s)==128&&(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}function v(e,t,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function x(e,t,n,r,i,a){if(!s.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw RangeError('"value" argument is out of bounds');if(n+r>e.length)throw RangeError("Index out of range")}function w(e,t,n,r,i,a){if(n+r>e.length||n<0)throw RangeError("Index out of range")}function k(e,t,n,r,a){return t=+t,n>>>=0,a||w(e,t,n,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,n,r,23,4),n+4}function E(e,t,n,r,a){return t=+t,n>>>=0,a||w(e,t,n,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,n,r,52,8),n+8}t.Buffer=s,t.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,n){return(u(e),e<=0)?o(e):void 0!==t?"string"==typeof n?o(e).fill(t,n):o(e).fill(t):o(e)},s.allocUnsafe=function(e){return c(e)},s.allocUnsafeSlow=function(e){return c(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(A(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),A(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);if(void 0===t)for(n=0,t=0;n<e.length;++n)t+=e[n].length;var n,r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(A(a,Uint8Array)&&(a=s.from(a)),!s.isBuffer(a))throw TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?y(this,0,e):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(s.prototype[a]=s.prototype.inspect),s.prototype.compare=function(e,t,n,r,i){if(A(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return -1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,o=n-t,l=Math.min(a,o),u=this.slice(r,i),c=e.slice(t,n),d=0;d<l;++d)if(u[d]!==c[d]){a=u[d],o=c[d];break}return a<o?-1:o<a?1:0},s.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,a,o,s,l,u,c,d,h,f,p,g,m=this.length-t;if((void 0===n||n>m)&&(n=m),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var b=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(s!=s)break;e[n+o]=s}return o}(this,e,t,n);case"utf8":case"utf-8":return l=t,u=n,N(S(e,this.length-l),this,l,u);case"ascii":return c=t,d=n,N(T(e),this,c,d);case"latin1":case"binary":return i=this,a=e,o=t,s=n,N(T(a),i,o,s);case"base64":return h=t,f=n,N(C(e),this,h,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p=t,g=n,N(function(e,t){for(var n,r,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i.push(n%256),i.push(r);return i}(e,this.length-p),this,p,g);default:if(b)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),b=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,s.prototype),r},s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return(e>>>=0,t||v(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),i.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),i.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),i.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),i.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;x(this,e,t,n,i,0)}var a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;x(this,e,t,n,i,0)}var a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);x(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);x(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,n){return k(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return k(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return E(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return E(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var a=i-1;a>=0;--a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){var i,a=e.charCodeAt(0);("utf8"===r&&a<128||"latin1"===r)&&(e=a)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var o=s.isBuffer(e)?e:s.from(e,r),l=o.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%l]}return this};var I=/[^+/0-9A-Za-z-_]/g;function S(e,t){t=t||1/0;for(var n,r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319||o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return a}function T(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function C(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(I,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function N(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length)&&!(i>=e.length);++i)t[i+n]=e[i];return i}function A(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var R=function(){for(var e="0123456789abcdef",t=Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()},783:function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,a=f&(1<<-c)-1,f>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+d],d+=h,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),a-=u}return(f?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,d=c>>1,h=23===i?5960464477539062e-23:0,f=r?0:a-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+d>=1?t+=h/l:t+=h*Math.pow(2,1-d),t*l>=2&&(o++,l/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*l-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[n+f]=255&o,f+=p,o/=256,u-=8);e[n+f-p]|=128*g}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}},o=!0;try{t[e](a,a.exports,r),o=!1}finally{o&&delete n[e]}return a.exports}r.ab="//";var i=r(72);e.exports=i}()},44227:function(e){!function(){var t={229:function(e){var t,n,r,i=e.exports={};function a(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var l=[],u=!1,c=-1;function d(){u&&r&&(u=!1,r.length?l=r.concat(l):c=-1,l.length&&h())}function h(){if(!u){var e=s(d);u=!0;for(var t=l.length;t;){for(r=l,l=[];++c<t;)r&&r[c].run();c=-1,t=l.length}r=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}},o=!0;try{t[e](a,a.exports,r),o=!1}finally{o&&delete n[e]}return a.exports}r.ab="//";var i=r(229);e.exports=i}()},91436:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AmpStateContext",{enumerable:!0,get:function(){return r}});let r=n(60917)._(n(2265)).default.createContext({})},23964:function(e,t){"use strict";function n(e){let{ampFirst:t=!1,hybrid:n=!1,hasQuery:r=!1}=void 0===e?{}:e;return t||n&&r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return n}})},55346:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return s}}),n(31765);let r=n(96496),i=n(90128);function a(e){return void 0!==e.default}function o(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function s(e,t){var n;let s,l,u,{src:c,sizes:d,unoptimized:h=!1,priority:f=!1,loading:p,className:g,quality:m,width:b,height:y,fill:v=!1,style:x,overrideSrc:w,onLoad:k,onLoadingComplete:E,placeholder:I="empty",blurDataURL:S,fetchPriority:T,decoding:C="async",layout:N,objectFit:A,objectPosition:R,lazyBoundary:D,lazyRoot:$,..._}=e,{imgConf:F,showAltText:O,blurComplete:P,defaultLoader:M}=t,L=F||i.imageConfigDefault;if("allSizes"in L)s=L;else{let e=[...L.deviceSizes,...L.imageSizes].sort((e,t)=>e-t),t=L.deviceSizes.sort((e,t)=>e-t);s={...L,allSizes:e,deviceSizes:t}}if(void 0===M)throw Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config");let B=_.loader||M;delete _.loader,delete _.srcSet;let U="__next_img_default"in B;if(U){if("custom"===s.loader)throw Error('Image with src "'+c+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let e=B;B=t=>{let{config:n,...r}=t;return e(r)}}if(N){"fill"===N&&(v=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[N];e&&(x={...x,...e});let t={responsive:"100vw",fill:"100vw"}[N];t&&!d&&(d=t)}let z="",V=o(b),W=o(y);if("object"==typeof(n=c)&&(a(n)||void 0!==n.src)){let e=a(c)?c.default:c;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e));if(l=e.blurWidth,u=e.blurHeight,S=S||e.blurDataURL,z=e.src,!v){if(V||W){if(V&&!W){let t=V/e.width;W=Math.round(e.height*t)}else if(!V&&W){let t=W/e.height;V=Math.round(e.width*t)}}else V=e.width,W=e.height}}let j=!f&&("lazy"===p||void 0===p);(!(c="string"==typeof c?c:z)||c.startsWith("data:")||c.startsWith("blob:"))&&(h=!0,j=!1),s.unoptimized&&(h=!0),U&&c.endsWith(".svg")&&!s.dangerouslyAllowSVG&&(h=!0),f&&(T="high");let H=o(m),K=Object.assign(v?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:A,objectPosition:R}:{},O?{}:{color:"transparent"},x),G=P||"empty"===I?null:"blur"===I?'url("data:image/svg+xml;charset=utf-8,'+(0,r.getImageBlurSvg)({widthInt:V,heightInt:W,blurWidth:l,blurHeight:u,blurDataURL:S||"",objectFit:K.objectFit})+'")':'url("'+I+'")',X=G?{backgroundSize:K.objectFit||"cover",backgroundPosition:K.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:G}:{},q=function(e){let{config:t,src:n,unoptimized:r,width:i,quality:a,sizes:o,loader:s}=e;if(r)return{src:n,srcSet:void 0,sizes:void 0};let{widths:l,kind:u}=function(e,t,n){let{deviceSizes:r,allSizes:i}=e;if(n){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let r;r=e.exec(n);r)t.push(parseInt(r[2]));if(t.length){let e=.01*Math.min(...t);return{widths:i.filter(t=>t>=r[0]*e),kind:"w"}}return{widths:i,kind:"w"}}return"number"!=typeof t?{widths:r,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>i.find(t=>t>=e)||i[i.length-1]))],kind:"x"}}(t,i,o),c=l.length-1;return{sizes:o||"w"!==u?o:"100vw",srcSet:l.map((e,r)=>s({config:t,src:n,quality:a,width:e})+" "+("w"===u?e:r+1)+u).join(", "),src:s({config:t,src:n,quality:a,width:l[c]})}}({config:s,src:c,unoptimized:h,width:V,quality:H,sizes:d,loader:B});return{props:{..._,loading:j?"lazy":p,fetchPriority:T,width:V,height:W,decoding:C,className:g,style:{...K,...X},sizes:q.sizes,srcSet:q.srcSet,src:w||q.src},meta:{unoptimized:h,priority:f,placeholder:I,fill:v}}}},38293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return g},defaultHead:function(){return d}});let r=n(60917),i=n(52140),a=n(57437),o=i._(n(2265)),s=r._(n(17421)),l=n(91436),u=n(48701),c=n(23964);function d(e){void 0===e&&(e=!1);let t=[(0,a.jsx)("meta",{charSet:"utf-8"})];return e||t.push((0,a.jsx)("meta",{name:"viewport",content:"width=device-width"})),t}function h(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===o.default.Fragment?e.concat(o.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}n(31765);let f=["name","httpEquiv","charSet","itemProp"];function p(e,t){let{inAmpMode:n}=t;return e.reduce(h,[]).reverse().concat(d(n).reverse()).filter(function(){let e=new Set,t=new Set,n=new Set,r={};return i=>{let a=!0,o=!1;if(i.key&&"number"!=typeof i.key&&i.key.indexOf("$")>0){o=!0;let t=i.key.slice(i.key.indexOf("$")+1);e.has(t)?a=!1:e.add(t)}switch(i.type){case"title":case"base":t.has(i.type)?a=!1:t.add(i.type);break;case"meta":for(let e=0,t=f.length;e<t;e++){let t=f[e];if(i.props.hasOwnProperty(t)){if("charSet"===t)n.has(t)?a=!1:n.add(t);else{let e=i.props[t],n=r[t]||new Set;("name"!==t||!o)&&n.has(e)?a=!1:(n.add(e),r[t]=n)}}}}return a}}()).reverse().map((e,t)=>{let r=e.key||t;if(!n&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,o.default.cloneElement(e,t)}return o.default.cloneElement(e,{key:r})})}let g=function(e){let{children:t}=e,n=(0,o.useContext)(l.AmpStateContext),r=(0,o.useContext)(u.HeadManagerContext);return(0,a.jsx)(s.default,{reduceComponentsToState:p,headManager:r,inAmpMode:(0,c.isInAmpMode)(n),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},96496:function(e,t){"use strict";function n(e){let{widthInt:t,heightInt:n,blurWidth:r,blurHeight:i,blurDataURL:a,objectFit:o}=e,s=r?40*r:t,l=i?40*i:n,u=s&&l?"viewBox='0 0 "+s+" "+l+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+u+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(u?"none":"contain"===o?"xMidYMid":"cover"===o?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+a+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return n}})},62589:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ImageConfigContext",{enumerable:!0,get:function(){return a}});let r=n(60917)._(n(2265)),i=n(90128),a=r.default.createContext(i.imageConfigDefault)},90128:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{VALID_LOADERS:function(){return n},imageConfigDefault:function(){return r}});let n=["default","imgix","cloudinary","akamai","custom"],r={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",localPatterns:void 0,remotePatterns:[],unoptimized:!1}},48461:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return l},getImageProps:function(){return s}});let r=n(60917),i=n(55346),a=n(65878),o=r._(n(5084));function s(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/lol/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let l=a.Image},5084:function(e,t){"use strict";function n(e){let{config:t,src:n,width:r,quality:i}=e;return t.path+"?url="+encodeURIComponent(n)+"&w="+r+"&q="+(i||75)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}}),n.__next_img_default=!0;let r=n},25523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return r}});let r=n(60917)._(n(2265)).default.createContext(null)},17421:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let r=n(2265),i="undefined"==typeof window,a=i?()=>{}:r.useLayoutEffect,o=i?()=>{}:r.useEffect;function s(e){let{headManager:t,reduceComponentsToState:n}=e;function s(){if(t&&t.mountedInstances){let i=r.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(n(i,e))}}if(i){var l;null==t||null==(l=t.mountedInstances)||l.add(e.children),s()}return a(()=>{var n;return null==t||null==(n=t.mountedInstances)||n.add(e.children),()=>{var n;null==t||null==(n=t.mountedInstances)||n.delete(e.children)}}),a(()=>(t&&(t._pendingUpdate=s),()=>{t&&(t._pendingUpdate=s)})),o(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},59900:function(e,t,n){var r=n(54170),i=n(56085),a=n(96543),o=n(51871),s=n(55794),l=n(71849),u=n(13957);u.alea=r,u.xor128=i,u.xorwow=a,u.xorshift7=o,u.xor4096=s,u.tychei=l,e.exports=u},54170:function(e,t,n){var r;!function(e,i,a){function o(e){var t,n=this,r=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));t=r>>>0,r-=t,r*=t,t=r>>>0,r-=t,t+=4294967296*r}return(t>>>0)*23283064365386963e-26});n.next=function(){var e=2091639*n.s0+23283064365386963e-26*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1)}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new o(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+(2097152*i()|0)*11102230246251565e-32},i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?void 0!==(r=(function(){return l}).call(t,n,t,i))&&(i.exports=r):this.alea=l}(0,e=n.nmd(e),n.amdD)},71849:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/2097152;while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?void 0!==(r=(function(){return l}).call(t,n,t,i))&&(i.exports=r):this.tychei=l}(0,e=n.nmd(e),n.amdD)},56085:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/2097152;while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?void 0!==(r=(function(){return l}).call(t,n,t,i))&&(i.exports=r):this.xor128=l}(0,e=n.nmd(e),n.amdD)},55794:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,a=t.i;return t.w=r=r+1640531527|0,n=i[a+34&127],e=i[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,i,a,o,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,a=-32;a<l;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(o=o+1640531527|0,i=0==(n=s[127&a]^=r+o)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,a=512;a>0;--a)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=o,e.X=s,e.i=i}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/2097152;while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?void 0!==(r=(function(){return l}).call(t,n,t,i))&&(i.exports=r):this.xor4096=l}(0,e=n.nmd(e),n.amdD)},51871:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],e^=e>>>7,n=e^e<<24^((e=r[i+1&7])^e>>>10)^((e=r[i+3&7])^e>>>3)^((e=r[i+4&7])^e<<7),e=r[i+7&7],e^=e<<13,n^=e^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(n=0,t=""+t;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/2097152;while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?void 0!==(r=(function(){return l}).call(t,n,t,i))&&(i.exports=r):this.xorshift7=l}(0,e=n.nmd(e),n.amdD)},96543:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^(e^e<<1))|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/2097152;while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?void 0!==(r=(function(){return l}).call(t,n,t,i))&&(i.exports=r):this.xorwow=l}(0,e=n.nmd(e),n.amdD)},13957:function(e,t,n){var r;!function(i,a,o){var s,l=o.pow(256,6),u=o.pow(2,52),c=2*u;function d(e,t,n){var r=[],d=p(function e(t,n){var r,i=[],a=typeof t;if(n&&"object"==a)for(r in t)try{i.push(e(t[r],n-1))}catch(e){}return i.length?i:"string"==a?t:t+"\0"}((t=!0==t?{entropy:!0}:t||{}).entropy?[e,g(a)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(256):(e=new Uint8Array(256),(i.crypto||i.msCrypto).getRandomValues(e)),g(e)}catch(e){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,g(a)]}}():e,3),r),m=new h(r),b=function(){for(var e=m.g(6),t=l,n=0;e<u;)e=(e+n)*256,t*=256,n=m.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|m.g(4)},b.quick=function(){return m.g(4)/4294967296},b.double=b,p(g(m.S),a),(t.pass||n||function(e,t,n,r){return(r&&(r.S&&f(r,m),e.state=function(){return f(m,{})}),n)?(o.random=e,t):e})(b,d,"global"in t?t.global:this==o,t.state)}function h(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);i<256;)o[i]=i++;for(i=0;i<256;i++)o[i]=o[a=255&a+e[i%n]+(t=o[i])],o[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,o=r.S;e--;)t=o[i=255&i+1],n=256*n+o[255&(o[i]=o[a=255&a+t])+(o[a]=t)];return r.i=i,r.j=a,n})(256)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){for(var n,r=e+"",i=0;i<r.length;)t[255&i]=255&(n^=19*t[255&i])+r.charCodeAt(i++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(p(o.random(),a),e.exports){e.exports=d;try{s=n(75042)}catch(e){}}else void 0!==(r=(function(){return d}).call(t,n,t,e))&&(e.exports=r)}("undefined"!=typeof self?self:this,[],Math)},455:function(e,t,n){"use strict";n.d(t,{VS:function(){return r},Yv:function(){return a},Yx:function(){return i},sK:function(){return o}});var r=e=>{let t={top:{originY:1},bottom:{originY:0},left:{originX:1},right:{originX:0},"top-start":{originX:0,originY:1},"top-end":{originX:1,originY:1},"bottom-start":{originX:0,originY:0},"bottom-end":{originX:1,originY:0},"right-start":{originX:0,originY:0},"right-end":{originX:0,originY:1},"left-start":{originX:1,originY:0},"left-end":{originX:1,originY:1}};return(null==t?void 0:t[e])||{}},i=e=>({top:"top",bottom:"bottom",left:"left",right:"right","top-start":"top start","top-end":"top end","bottom-start":"bottom start","bottom-end":"bottom end","left-start":"left top","left-end":"left bottom","right-start":"right top","right-end":"right bottom"})[e],a=(e,t)=>{if(t.includes("-")){let[n]=t.split("-");if(n.includes(e))return!1}return!0},o=(e,t)=>{if(t.includes("-")){let[,n]=t.split("-");return"".concat(e,"-").concat(n)}return e}},51257:function(e,t,n){"use strict";n.d(t,{A:function(){return N}});var[r,i]=(0,n(40280).k)({name:"ButtonGroupContext",strict:!1}),a=n(2646),o=n(97765),s=n(2265),l=n(43096),u=n(62319),c=n(5376),d=n(88160),h=n(27246),f=n(41351),p=n(26543),g=n(18373),m=(0,p.tv)({base:["z-0","group","relative","inline-flex","items-center","justify-center","box-border","appearance-none","outline-none","select-none","whitespace-nowrap","min-w-max","font-normal","subpixel-antialiased","overflow-hidden","tap-highlight-transparent","data-[pressed=true]:scale-[0.97]",...g.Dh],variants:{variant:{solid:"",bordered:"border-medium bg-transparent",light:"bg-transparent",flat:"",faded:"border-medium",shadow:"",ghost:"border-medium bg-transparent"},size:{sm:"px-3 min-w-16 h-8 text-tiny gap-2 rounded-small",md:"px-4 min-w-20 h-10 text-small gap-2 rounded-medium",lg:"px-6 min-w-24 h-12 text-medium gap-3 rounded-large"},color:{default:"",primary:"",secondary:"",success:"",warning:"",danger:""},radius:{none:"rounded-none",sm:"rounded-small",md:"rounded-medium",lg:"rounded-large",full:"rounded-full"},fullWidth:{true:"w-full"},isDisabled:{true:"opacity-disabled pointer-events-none"},isInGroup:{true:"[&:not(:first-child):not(:last-child)]:rounded-none"},isIconOnly:{true:"px-0 !gap-0",false:"[&>svg]:max-w-[theme(spacing.8)]"},disableAnimation:{true:"!transition-none data-[pressed=true]:scale-100",false:"transition-transform-colors-opacity motion-reduce:transition-none"}},defaultVariants:{size:"md",variant:"solid",color:"default",fullWidth:!1,isDisabled:!1,isInGroup:!1},compoundVariants:[{variant:"solid",color:"default",class:f.J.solid.default},{variant:"solid",color:"primary",class:f.J.solid.primary},{variant:"solid",color:"secondary",class:f.J.solid.secondary},{variant:"solid",color:"success",class:f.J.solid.success},{variant:"solid",color:"warning",class:f.J.solid.warning},{variant:"solid",color:"danger",class:f.J.solid.danger},{variant:"shadow",color:"default",class:f.J.shadow.default},{variant:"shadow",color:"primary",class:f.J.shadow.primary},{variant:"shadow",color:"secondary",class:f.J.shadow.secondary},{variant:"shadow",color:"success",class:f.J.shadow.success},{variant:"shadow",color:"warning",class:f.J.shadow.warning},{variant:"shadow",color:"danger",class:f.J.shadow.danger},{variant:"bordered",color:"default",class:f.J.bordered.default},{variant:"bordered",color:"primary",class:f.J.bordered.primary},{variant:"bordered",color:"secondary",class:f.J.bordered.secondary},{variant:"bordered",color:"success",class:f.J.bordered.success},{variant:"bordered",color:"warning",class:f.J.bordered.warning},{variant:"bordered",color:"danger",class:f.J.bordered.danger},{variant:"flat",color:"default",class:f.J.flat.default},{variant:"flat",color:"primary",class:f.J.flat.primary},{variant:"flat",color:"secondary",class:f.J.flat.secondary},{variant:"flat",color:"success",class:f.J.flat.success},{variant:"flat",color:"warning",class:f.J.flat.warning},{variant:"flat",color:"danger",class:f.J.flat.danger},{variant:"faded",color:"default",class:f.J.faded.default},{variant:"faded",color:"primary",class:f.J.faded.primary},{variant:"faded",color:"secondary",class:f.J.faded.secondary},{variant:"faded",color:"success",class:f.J.faded.success},{variant:"faded",color:"warning",class:f.J.faded.warning},{variant:"faded",color:"danger",class:f.J.faded.danger},{variant:"light",color:"default",class:[f.J.light.default,"data-[hover=true]:bg-default/40"]},{variant:"light",color:"primary",class:[f.J.light.primary,"data-[hover=true]:bg-primary/20"]},{variant:"light",color:"secondary",class:[f.J.light.secondary,"data-[hover=true]:bg-secondary/20"]},{variant:"light",color:"success",class:[f.J.light.success,"data-[hover=true]:bg-success/20"]},{variant:"light",color:"warning",class:[f.J.light.warning,"data-[hover=true]:bg-warning/20"]},{variant:"light",color:"danger",class:[f.J.light.danger,"data-[hover=true]:bg-danger/20"]},{variant:"ghost",color:"default",class:[f.J.ghost.default,"data-[hover=true]:!bg-default"]},{variant:"ghost",color:"primary",class:[f.J.ghost.primary,"data-[hover=true]:!bg-primary data-[hover=true]:!text-primary-foreground"]},{variant:"ghost",color:"secondary",class:[f.J.ghost.secondary,"data-[hover=true]:!bg-secondary data-[hover=true]:!text-secondary-foreground"]},{variant:"ghost",color:"success",class:[f.J.ghost.success,"data-[hover=true]:!bg-success data-[hover=true]:!text-success-foreground"]},{variant:"ghost",color:"warning",class:[f.J.ghost.warning,"data-[hover=true]:!bg-warning data-[hover=true]:!text-warning-foreground"]},{variant:"ghost",color:"danger",class:[f.J.ghost.danger,"data-[hover=true]:!bg-danger !text-danger-foreground"]},{isInGroup:!0,class:"rounded-none first:rounded-s-medium last:rounded-e-medium"},{isInGroup:!0,size:"sm",class:"rounded-none first:rounded-s-small last:rounded-e-small"},{isInGroup:!0,size:"md",class:"rounded-none first:rounded-s-medium last:rounded-e-medium"},{isInGroup:!0,size:"lg",class:"rounded-none first:rounded-s-large last:rounded-e-large"},{isInGroup:!0,isRounded:!0,class:"rounded-none first:rounded-s-full last:rounded-e-full"},{isInGroup:!0,radius:"none",class:"rounded-none first:rounded-s-none last:rounded-e-none"},{isInGroup:!0,radius:"sm",class:"rounded-none first:rounded-s-small last:rounded-e-small"},{isInGroup:!0,radius:"md",class:"rounded-none first:rounded-s-medium last:rounded-e-medium"},{isInGroup:!0,radius:"lg",class:"rounded-none first:rounded-s-large last:rounded-e-large"},{isInGroup:!0,radius:"full",class:"rounded-none first:rounded-s-full last:rounded-e-full"},{isInGroup:!0,variant:["ghost","bordered"],color:"default",className:g.Zs.default},{isInGroup:!0,variant:["ghost","bordered"],color:"primary",className:g.Zs.primary},{isInGroup:!0,variant:["ghost","bordered"],color:"secondary",className:g.Zs.secondary},{isInGroup:!0,variant:["ghost","bordered"],color:"success",className:g.Zs.success},{isInGroup:!0,variant:["ghost","bordered"],color:"warning",className:g.Zs.warning},{isInGroup:!0,variant:["ghost","bordered"],color:"danger",className:g.Zs.danger},{isIconOnly:!0,size:"sm",class:"min-w-8 w-8 h-8"},{isIconOnly:!0,size:"md",class:"min-w-10 w-10 h-10"},{isIconOnly:!0,size:"lg",class:"min-w-12 w-12 h-12"},{variant:["solid","faded","flat","bordered","shadow"],class:"data-[hover=true]:opacity-hover"}]});(0,p.tv)({base:"inline-flex items-center justify-center h-auto",variants:{fullWidth:{true:"w-full"}},defaultVariants:{fullWidth:!1}});var b=n(5393),y=n(11323),v=n(62577),x=n(72243),w=(0,p.tv)({slots:{base:"relative inline-flex flex-col gap-2 items-center justify-center",wrapper:"relative flex",circle1:["absolute","w-full","h-full","rounded-full","animate-spinner-ease-spin","border-2","border-solid","border-t-transparent","border-l-transparent","border-r-transparent"],circle2:["absolute","w-full","h-full","rounded-full","opacity-75","animate-spinner-linear-spin","border-2","border-dotted","border-t-transparent","border-l-transparent","border-r-transparent"],label:"text-foreground dark:text-foreground-dark font-regular"},variants:{size:{sm:{wrapper:"w-5 h-5",circle1:"border-2",circle2:"border-2",label:"text-small"},md:{wrapper:"w-8 h-8",circle1:"border-3",circle2:"border-3",label:"text-medium"},lg:{wrapper:"w-10 h-10",circle1:"border-3",circle2:"border-3",label:"text-large"}},color:{current:{circle1:"border-b-current",circle2:"border-b-current"},white:{circle1:"border-b-white",circle2:"border-b-white"},default:{circle1:"border-b-default",circle2:"border-b-default"},primary:{circle1:"border-b-primary",circle2:"border-b-primary"},secondary:{circle1:"border-b-secondary",circle2:"border-b-secondary"},success:{circle1:"border-b-success",circle2:"border-b-success"},warning:{circle1:"border-b-warning",circle2:"border-b-warning"},danger:{circle1:"border-b-danger",circle2:"border-b-danger"}},labelColor:{foreground:{label:"text-foreground"},primary:{label:"text-primary"},secondary:{label:"text-secondary"},success:{label:"text-success"},warning:{label:"text-warning"},danger:{label:"text-danger"}}},defaultVariants:{size:"md",color:"primary",labelColor:"foreground"}}),k=n(68658),E=n(46763),I=n(57437),S=(0,x.Gp)((e,t)=>{let{slots:n,classNames:r,label:i,getSpinnerProps:a}=function(e){let[t,n]=(0,x.oe)(e,w.variantKeys),{children:r,className:i,classNames:a,label:o,...l}=t,u=(0,s.useMemo)(()=>w({...n}),[(0,k.Xx)(n)]),c=(0,E.W)(null==a?void 0:a.base,i),d=o||r,h=(0,s.useMemo)(()=>d&&"string"==typeof d?d:l["aria-label"]?"":"Loading",[r,d,l["aria-label"]]),f=(0,s.useCallback)(()=>({"aria-label":h,className:u.base({class:c}),...l}),[h,u,c,l]);return{label:d,slots:u,classNames:a,getSpinnerProps:f}}({...e});return(0,I.jsxs)("div",{ref:t,...a(),children:[(0,I.jsxs)("div",{className:n.wrapper({class:null==r?void 0:r.wrapper}),children:[(0,I.jsx)("i",{className:n.circle1({class:null==r?void 0:r.circle1})}),(0,I.jsx)("i",{className:n.circle2({class:null==r?void 0:r.circle2})})]}),i&&(0,I.jsx)("span",{className:n.label({class:null==r?void 0:r.label}),children:i})]})});S.displayName="NextUI.Spinner";var T=n(31594),C=(0,x.Gp)((e,t)=>{let{Component:n,domRef:r,children:f,styles:p,spinnerSize:g,spinner:x=(0,I.jsx)(S,{color:"current",size:g}),spinnerPlacement:w,startContent:k,endContent:E,isLoading:C,disableRipple:N,getButtonProps:A,getRippleProps:R,isIconOnly:D}=function(e){var t,n,r,f,p,g,x,w,k;let E=i(),I=(0,a.w)(),S=!!E,{ref:T,as:C,children:N,startContent:A,endContent:R,autoFocus:D,className:$,spinner:_,isLoading:F=!1,disableRipple:O=!1,fullWidth:P=null!=(t=null==E?void 0:E.fullWidth)&&t,radius:M=null==E?void 0:E.radius,size:L=null!=(n=null==E?void 0:E.size)?n:"md",color:B=null!=(r=null==E?void 0:E.color)?r:"default",variant:U=null!=(f=null==E?void 0:E.variant)?f:"solid",disableAnimation:z=null!=(g=null!=(p=null==E?void 0:E.disableAnimation)?p:null==I?void 0:I.disableAnimation)&&g,isDisabled:V=null!=(x=null==E?void 0:E.isDisabled)&&x,isIconOnly:W=null!=(w=null==E?void 0:E.isIconOnly)&&w,spinnerPlacement:j="start",onPress:H,onClick:K,...G}=e,X=C||"button",q="string"==typeof X,Y=(0,d.gy)(T),Q=null!=(k=O||(null==I?void 0:I.disableRipple))?k:z,{isFocusVisible:J,isFocused:Z,focusProps:ee}=(0,l.F)({autoFocus:D}),et=V||F,en=(0,s.useMemo)(()=>m({size:L,color:B,variant:U,radius:M,fullWidth:P,isDisabled:et,isInGroup:S,disableAnimation:z,isIconOnly:W,className:$}),[L,B,U,M,P,et,S,W,z,$]),{onClick:er,onClear:ei,ripples:ea}=(0,v.i)(),eo=(0,s.useCallback)(e=>{Q||et||z||!Y.current||er(e)},[Q,et,z,Y,er]),{buttonProps:es,isPressed:el}=(0,b.j)({elementType:C,isDisabled:et,onPress:H,onClick:(0,u.t)(K,eo),...G},Y),{isHovered:eu,hoverProps:ec}=(0,y.X)({isDisabled:et}),ed=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"data-disabled":(0,o.PB)(et),"data-focus":(0,o.PB)(Z),"data-pressed":(0,o.PB)(el),"data-focus-visible":(0,o.PB)(J),"data-hover":(0,o.PB)(eu),"data-loading":(0,o.PB)(F),...(0,c.d)(es,ee,ec,(0,h.z)(G,{enabled:q}),(0,h.z)(e))}},[F,et,Z,el,q,J,eu,es,ee,ec,G]),eh=e=>(0,s.isValidElement)(e)?(0,s.cloneElement)(e,{"aria-hidden":!0,focusable:!1,tabIndex:-1}):null,ef=eh(A);return{Component:X,children:N,domRef:Y,spinner:_,styles:en,startContent:ef,endContent:eh(R),isLoading:F,spinnerPlacement:j,spinnerSize:(0,s.useMemo)(()=>({sm:"sm",md:"sm",lg:"md"})[L],[L]),disableRipple:Q,getButtonProps:ed,getRippleProps:(0,s.useCallback)(()=>({ripples:ea,onClear:ei}),[ea,ei]),isIconOnly:W}}({...e,ref:t});return(0,I.jsxs)(n,{ref:r,className:p,...A(),children:[k,C&&"start"===w&&x,C&&D?null:f,C&&"end"===w&&x,E,!N&&(0,I.jsx)(T.L,{...R()})]})});C.displayName="NextUI.Button";var N=C},4922:function(e,t,n){"use strict";n.d(t,{w:function(){return I}});var r=n(53921),i=n(26543),a=n(18373),o=(0,i.tv)({slots:{base:["flex","flex-col","relative","overflow-hidden","h-auto","outline-none","text-foreground","box-border","bg-content1",...a.Dh],header:["flex","p-3","z-10","w-full","justify-start","items-center","shrink-0","overflow-inherit","color-inherit","subpixel-antialiased"],body:["relative","flex","flex-1","w-full","p-3","flex-auto","flex-col","place-content-inherit","align-items-inherit","h-auto","break-words","text-left","overflow-y-auto","subpixel-antialiased"],footer:["p-3","h-auto","flex","w-full","items-center","overflow-hidden","color-inherit","subpixel-antialiased"]},variants:{shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},radius:{none:{base:"rounded-none",header:"rounded-none",footer:"rounded-none"},sm:{base:"rounded-small",header:"rounded-t-small",footer:"rounded-b-small"},md:{base:"rounded-medium",header:"rounded-t-medium",footer:"rounded-b-medium"},lg:{base:"rounded-large",header:"rounded-t-large",footer:"rounded-b-large"}},fullWidth:{true:{base:"w-full"}},isHoverable:{true:{base:"data-[hover=true]:bg-content2 dark:data-[hover=true]:bg-content2"}},isPressable:{true:{base:"cursor-pointer"}},isBlurred:{true:{base:["bg-background/80","dark:bg-background/20","backdrop-blur-md","backdrop-saturate-150"]}},isFooterBlurred:{true:{footer:["bg-background/10","backdrop-blur","backdrop-saturate-150"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:"",false:{base:"transition-transform-background motion-reduce:transition-none"}}},compoundVariants:[{isPressable:!0,class:"data-[pressed=true]:scale-[0.97] tap-highlight-transparent"}],defaultVariants:{radius:"lg",shadow:"md",fullWidth:!1,isHoverable:!1,isPressable:!1,isDisabled:!1,isFooterBlurred:!1}}),s=n(2265),l=n(62319),u=n(5376),c=n(43096),d=n(11323),h=n(5393),f=n(2646),p=n(72243),g=n(46763),m=n(68658),b=n(97765),y=n(27246),v=n(88160),x=n(62577),w=n(31594),k=n(57437),E=(0,p.Gp)((e,t)=>{let{children:n,context:i,Component:a,isPressable:E,disableAnimation:I,disableRipple:S,getCardProps:T,getRippleProps:C}=function(e){var t,n,r,i;let a=(0,f.w)(),[w,k]=(0,p.oe)(e,o.variantKeys),{ref:E,as:I,children:S,onClick:T,onPress:C,autoFocus:N,className:A,classNames:R,allowTextSelectionOnPress:D=!0,...$}=w,_=(0,v.gy)(E),F=I||(e.isPressable?"button":"div"),O="string"==typeof F,P=null!=(n=null!=(t=e.disableAnimation)?t:null==a?void 0:a.disableAnimation)&&n,M=null!=(i=null!=(r=e.disableRipple)?r:null==a?void 0:a.disableRipple)&&i,L=(0,g.W)(null==R?void 0:R.base,A),{onClick:B,onClear:U,ripples:z}=(0,x.i)(),V=e=>{P||M||!_.current||B(e)},{buttonProps:W,isPressed:j}=(0,h.j)({onPress:C,elementType:I,isDisabled:!e.isPressable,onClick:(0,l.t)(T,V),allowTextSelectionOnPress:D,...$},_),{hoverProps:H,isHovered:K}=(0,d.X)({isDisabled:!e.isHoverable,...$}),{isFocusVisible:G,isFocused:X,focusProps:q}=(0,c.F)({autoFocus:N}),Y=(0,s.useMemo)(()=>o({...k,disableAnimation:P}),[(0,m.Xx)(k),P]),Q=(0,s.useMemo)(()=>({slots:Y,classNames:R,disableAnimation:P,isDisabled:e.isDisabled,isFooterBlurred:e.isFooterBlurred,fullWidth:e.fullWidth}),[Y,R,e.isDisabled,e.isFooterBlurred,P,e.fullWidth]),J=(0,s.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:_,className:Y.base({class:L}),tabIndex:e.isPressable?0:-1,"data-hover":(0,b.PB)(K),"data-pressed":(0,b.PB)(j),"data-focus":(0,b.PB)(X),"data-focus-visible":(0,b.PB)(G),"data-disabled":(0,b.PB)(e.isDisabled),...(0,u.d)(e.isPressable?{...W,...q,role:"button"}:{},e.isHoverable?H:{},(0,y.z)($,{enabled:O}),(0,y.z)(t))}},[_,Y,L,O,e.isPressable,e.isHoverable,e.isDisabled,K,j,G,W,q,H,$]),Z=(0,s.useCallback)(()=>({ripples:z,onClear:U}),[z,U]);return{context:Q,domRef:_,Component:F,classNames:R,children:S,isHovered:K,isPressed:j,disableAnimation:P,isPressable:e.isPressable,isHoverable:e.isHoverable,disableRipple:M,handleClick:V,isFocusVisible:G,getCardProps:J,getRippleProps:Z}}({...e,ref:t});return(0,k.jsxs)(a,{...T(),children:[(0,k.jsx)(r.k,{value:i,children:n}),E&&!I&&!S&&(0,k.jsx)(w.L,{...C()})]})});E.displayName="NextUI.Card";var I=E},49365:function(e,t,n){"use strict";n.d(t,{u:function(){return u}});var r=n(53921),i=n(72243),a=n(88160),o=n(46763),s=n(57437),l=(0,i.Gp)((e,t)=>{var n;let{as:i,className:l,children:u,...c}=e,d=(0,a.gy)(t),{slots:h,classNames:f}=(0,r.R)(),p=(0,o.W)(null==f?void 0:f.header,l);return(0,s.jsx)(i||"div",{ref:d,className:null==(n=h.header)?void 0:n.call(h,{class:p}),...c,children:u})});l.displayName="NextUI.CardHeader";var u=l},65349:function(e,t,n){"use strict";n.d(t,{i:function(){return u}});var r=n(53921),i=n(72243),a=n(88160),o=n(46763),s=n(57437),l=(0,i.Gp)((e,t)=>{var n;let{as:i,className:l,children:u,...c}=e,d=(0,a.gy)(t),{slots:h,classNames:f}=(0,r.R)(),p=(0,o.W)(null==f?void 0:f.footer,l);return(0,s.jsx)(i||"div",{ref:d,className:null==(n=h.footer)?void 0:n.call(h,{class:p}),...c,children:u})});l.displayName="NextUI.CardFooter";var u=l},53921:function(e,t,n){"use strict";n.d(t,{R:function(){return i},k:function(){return r}});var[r,i]=(0,n(40280).k)({name:"CardContext",strict:!0,errorMessage:"useCardContext: `context` is undefined. Seems you forgot to wrap component within <Card />"})},15348:function(e,t,n){"use strict";n.d(t,{S:function(){return p}});var r=n(26645),i=n(72243),a=n(51885),o=n(2265),s=(e,t)=>{var n;let r=[];return[null==(n=o.Children.map(e,e=>(0,o.isValidElement)(e)&&e.type===t?(r.push(e),null):e))?void 0:n.filter(Boolean),r.length>=0?r:void 0]},l=n(5393),u=n(51257),c=n(5376),d=n(57437),h=(0,i.Gp)((e,t)=>{let{triggerRef:n,getTriggerProps:r}=(0,a.l)(),{children:i,...h}=e,f=(0,o.useMemo)(()=>"string"==typeof i?(0,d.jsx)("p",{children:i}):o.Children.only(i),[i]),{onPress:p,isDisabled:g,...m}=(0,o.useMemo)(()=>r((0,c.d)(h,f.props),f.ref),[r,f.props,h,f.ref]),[,b]=s(i,u.A),{buttonProps:y}=(0,l.j)({onPress:p,isDisabled:g},n),v=(0,o.useMemo)(()=>(null==b?void 0:b[0])!==void 0,[b]);return(0,o.cloneElement)(f,(0,c.d)(m,v?{onPress:p,isDisabled:g}:y))});h.displayName="NextUI.PopoverTrigger";var f=(0,i.Gp)((e,t)=>{let{getMenuTriggerProps:n}=(0,r.t)(),{children:i,...a}=e;return(0,d.jsx)(h,{...n(a),children:i})});f.displayName="NextUI.DropdownTrigger";var p=f},33649:function(e,t,n){"use strict";n.d(t,{F:function(){return t0}});var r=n(26645),i=n(2646),a=n(2265),o=n(45614),s={};s={"ar-AE":{longPressMessage:`\u{627}\u{636}\u{63A}\u{637} \u{645}\u{637}\u{648}\u{644}\u{627}\u{64B} \u{623}\u{648} \u{627}\u{636}\u{63A}\u{637} \u{639}\u{644}\u{649} Alt + \u{627}\u{644}\u{633}\u{647}\u{645} \u{644}\u{623}\u{633}\u{641}\u{644} \u{644}\u{641}\u{62A}\u{62D} \u{627}\u{644}\u{642}\u{627}\u{626}\u{645}\u{629}`},"bg-BG":{longPressMessage:`\u{41D}\u{430}\u{442}\u{438}\u{441}\u{43D}\u{435}\u{442}\u{435} \u{43F}\u{440}\u{43E}\u{434}\u{44A}\u{43B}\u{436}\u{438}\u{442}\u{435}\u{43B}\u{43D}\u{43E} \u{438}\u{43B}\u{438} \u{43D}\u{430}\u{442}\u{438}\u{441}\u{43D}\u{435}\u{442}\u{435} Alt+ \u{441}\u{442}\u{440}\u{435}\u{43B}\u{43A}\u{430} \u{43D}\u{430}\u{434}\u{43E}\u{43B}\u{443}, \u{437}\u{430} \u{434}\u{430} \u{43E}\u{442}\u{432}\u{43E}\u{440}\u{438}\u{442}\u{435} \u{43C}\u{435}\u{43D}\u{44E}\u{442}\u{43E}`},"cs-CZ":{longPressMessage:`Dlouh\xfdm stiskem nebo stisknut\xedm kl\xe1ves Alt + \u{161}ipka dol\u{16F} otev\u{159}ete nab\xeddku`},"da-DK":{longPressMessage:`Langt tryk eller tryk p\xe5 Alt + pil ned for at \xe5bne menuen`},"de-DE":{longPressMessage:`Dr\xfccken Sie lange oder dr\xfccken Sie Alt + Nach-unten, um das Men\xfc zu \xf6ffnen`},"el-GR":{longPressMessage:`\u{3A0}\u{3B9}\u{3AD}\u{3C3}\u{3C4}\u{3B5} \u{3C0}\u{3B1}\u{3C1}\u{3B1}\u{3C4}\u{3B5}\u{3C4}\u{3B1}\u{3BC}\u{3AD}\u{3BD}\u{3B1} \u{3AE} \u{3C0}\u{3B1}\u{3C4}\u{3AE}\u{3C3}\u{3C4}\u{3B5} Alt + \u{3BA}\u{3AC}\u{3C4}\u{3C9} \u{3B2}\u{3AD}\u{3BB}\u{3BF}\u{3C2} \u{3B3}\u{3B9}\u{3B1} \u{3BD}\u{3B1} \u{3B1}\u{3BD}\u{3BF}\u{3AF}\u{3BE}\u{3B5}\u{3C4}\u{3B5} \u{3C4}\u{3BF} \u{3BC}\u{3B5}\u{3BD}\u{3BF}\u{3CD}`},"en-US":{longPressMessage:"Long press or press Alt + ArrowDown to open menu"},"es-ES":{longPressMessage:`Mantenga pulsado o pulse Alt + flecha abajo para abrir el men\xfa`},"et-EE":{longPressMessage:`Men\xfc\xfc avamiseks vajutage pikalt v\xf5i vajutage klahve Alt + allanool`},"fi-FI":{longPressMessage:`Avaa valikko painamalla pohjassa tai n\xe4pp\xe4inyhdistelm\xe4ll\xe4 Alt + Alanuoli`},"fr-FR":{longPressMessage:`Appuyez de mani\xe8re prolong\xe9e ou appuyez sur Alt\xa0+\xa0Fl\xe8che vers le bas pour ouvrir le menu.`},"he-IL":{longPressMessage:`\u{5DC}\u{5D7}\u{5E5} \u{5DC}\u{5D7}\u{5D9}\u{5E6}\u{5D4} \u{5D0}\u{5E8}\u{5D5}\u{5DB}\u{5D4} \u{5D0}\u{5D5} \u{5D4}\u{5E7}\u{5E9} Alt + ArrowDown \u{5DB}\u{5D3}\u{5D9} \u{5DC}\u{5E4}\u{5EA}\u{5D5}\u{5D7} \u{5D0}\u{5EA} \u{5D4}\u{5EA}\u{5E4}\u{5E8}\u{5D9}\u{5D8}`},"hr-HR":{longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dolje za otvaranje izbornika"},"hu-HU":{longPressMessage:`Nyomja meg hosszan, vagy nyomja meg az Alt + lefele ny\xedl gombot a men\xfc megnyit\xe1s\xe1hoz`},"it-IT":{longPressMessage:`Premere a lungo o premere Alt + Freccia gi\xf9 per aprire il menu`},"ja-JP":{longPressMessage:`\u{9577}\u{62BC}\u{3057}\u{307E}\u{305F}\u{306F} Alt+\u{4E0B}\u{77E2}\u{5370}\u{30AD}\u{30FC}\u{3067}\u{30E1}\u{30CB}\u{30E5}\u{30FC}\u{3092}\u{958B}\u{304F}`},"ko-KR":{longPressMessage:`\u{AE38}\u{AC8C} \u{B204}\u{B974}\u{AC70}\u{B098} Alt + \u{C544}\u{B798}\u{CABD} \u{D654}\u{C0B4}\u{D45C}\u{B97C} \u{B20C}\u{B7EC} \u{BA54}\u{B274} \u{C5F4}\u{AE30}`},"lt-LT":{longPressMessage:`Nor\u{117}dami atidaryti meniu, nuspaud\u{119} palaikykite arba paspauskite \u{201E}Alt + ArrowDown\u{201C}.`},"lv-LV":{longPressMessage:`Lai atv\u{113}rtu izv\u{113}lni, turiet nospiestu vai nospiediet tausti\u{146}u kombin\u{101}ciju Alt + lejupv\u{113}rst\u{101} bulti\u{146}a`},"nb-NO":{longPressMessage:`Langt trykk eller trykk Alt + PilNed for \xe5 \xe5pne menyen`},"nl-NL":{longPressMessage:"Druk lang op Alt + pijl-omlaag of druk op Alt om het menu te openen"},"pl-PL":{longPressMessage:`Naci\u{15B}nij i przytrzymaj lub naci\u{15B}nij klawisze Alt + Strza\u{142}ka w d\xf3\u{142}, aby otworzy\u{107} menu`},"pt-BR":{longPressMessage:"Pressione e segure ou pressione Alt + Seta para baixo para abrir o menu"},"pt-PT":{longPressMessage:"Prima continuamente ou prima Alt + Seta Para Baixo para abrir o menu"},"ro-RO":{longPressMessage:`Ap\u{103}sa\u{21B}i lung sau ap\u{103}sa\u{21B}i pe Alt + s\u{103}geat\u{103} \xeen jos pentru a deschide meniul`},"ru-RU":{longPressMessage:`\u{41D}\u{430}\u{436}\u{43C}\u{438}\u{442}\u{435} \u{438} \u{443}\u{434}\u{435}\u{440}\u{436}\u{438}\u{432}\u{430}\u{439}\u{442}\u{435} \u{438}\u{43B}\u{438} \u{43D}\u{430}\u{436}\u{43C}\u{438}\u{442}\u{435} Alt + \u{421}\u{442}\u{440}\u{435}\u{43B}\u{43A}\u{430} \u{432}\u{43D}\u{438}\u{437}, \u{447}\u{442}\u{43E}\u{431}\u{44B} \u{43E}\u{442}\u{43A}\u{440}\u{44B}\u{442}\u{44C} \u{43C}\u{435}\u{43D}\u{44E}`},"sk-SK":{longPressMessage:`Ponuku otvor\xedte dlh\xfdm stla\u{10D}en\xedm alebo stla\u{10D}en\xedm kl\xe1vesu Alt + kl\xe1vesu so \u{161}\xedpkou nadol`},"sl-SI":{longPressMessage:`Za odprtje menija pritisnite in dr\u{17E}ite gumb ali pritisnite Alt+pu\u{161}\u{10D}ica navzdol`},"sr-SP":{longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dole da otvorite meni"},"sv-SE":{longPressMessage:`H\xe5ll nedtryckt eller tryck p\xe5 Alt + pil ned\xe5t f\xf6r att \xf6ppna menyn`},"tr-TR":{longPressMessage:`Men\xfcy\xfc a\xe7mak i\xe7in uzun bas\u{131}n veya Alt + A\u{15F}a\u{11F}\u{131} Ok tu\u{15F}una bas\u{131}n`},"uk-UA":{longPressMessage:`\u{414}\u{43E}\u{432}\u{433}\u{43E} \u{430}\u{431}\u{43E} \u{437}\u{432}\u{438}\u{447}\u{430}\u{439}\u{43D}\u{43E} \u{43D}\u{430}\u{442}\u{438}\u{441}\u{43D}\u{456}\u{442}\u{44C} \u{43A}\u{43E}\u{43C}\u{431}\u{456}\u{43D}\u{430}\u{446}\u{456}\u{44E} \u{43A}\u{43B}\u{430}\u{432}\u{456}\u{448} Alt \u{456} \u{441}\u{442}\u{440}\u{456}\u{43B}\u{43A}\u{430} \u{432}\u{43D}\u{438}\u{437}, \u{449}\u{43E}\u{431} \u{432}\u{456}\u{434}\u{43A}\u{440}\u{438}\u{442}\u{438} \u{43C}\u{435}\u{43D}\u{44E}`},"zh-CN":{longPressMessage:`\u{957F}\u{6309}\u{6216}\u{6309} Alt + \u{5411}\u{4E0B}\u{65B9}\u{5411}\u{952E}\u{4EE5}\u{6253}\u{5F00}\u{83DC}\u{5355}`},"zh-TW":{longPressMessage:`\u{9577}\u{6309}\u{6216}\u{6309} Alt+\u{5411}\u{4E0B}\u{9375}\u{4EE5}\u{958B}\u{555F}\u{529F}\u{80FD}\u{8868}`}};var l=n(6981),u=n(73106);function c(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent))}function d(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function h(e){let t=null;return()=>(null==t&&(t=e()),t)}let f=h(function(){return d(/^Mac/i)}),p=h(function(){return d(/^iPhone/i)}),g=h(function(){return d(/^iPad/i)||f()&&navigator.maxTouchPoints>1}),m=h(function(){return p()||g()});h(function(){return f()||m()});let b=h(function(){return c(/AppleWebKit/i)&&!y()}),y=h(function(){return c(/Chrome/i)}),v=h(function(){return c(/Android/i)}),x=h(function(){return c(/Firefox/i)}),w=e=>{var t;return null!==(t=null==e?void 0:e.ownerDocument)&&void 0!==t?t:document},k=e=>e&&"window"in e&&e.window===e?e:w(e).defaultView||window,E=new Map,I=new Set;function S(){if("undefined"==typeof window)return;function e(e){return"propertyName"in e}let t=n=>{if(!e(n)||!n.target)return;let r=E.get(n.target);if(r&&(r.delete(n.propertyName),0===r.size&&(n.target.removeEventListener("transitioncancel",t),E.delete(n.target)),0===E.size)){for(let e of I)e();I.clear()}};document.body.addEventListener("transitionrun",n=>{if(!e(n)||!n.target)return;let r=E.get(n.target);r||(r=new Set,E.set(n.target,r),n.target.addEventListener("transitioncancel",t,{once:!0})),r.add(n.propertyName)}),document.body.addEventListener("transitionend",t)}"undefined"!=typeof document&&("loading"!==document.readyState?S():document.addEventListener("DOMContentLoaded",S));let T="default",C="",N=new WeakMap;function A(e){if(m()){if("default"===T){let t=w(e);C=t.documentElement.style.webkitUserSelect,t.documentElement.style.webkitUserSelect="none"}T="disabled"}else(e instanceof HTMLElement||e instanceof SVGElement)&&(N.set(e,e.style.userSelect),e.style.userSelect="none")}function R(e){if(m())"disabled"===T&&(T="restoring",setTimeout(()=>{var t;t=()=>{if("restoring"===T){let t=w(e);"none"===t.documentElement.style.webkitUserSelect&&(t.documentElement.style.webkitUserSelect=C||""),C="",T="default"}},requestAnimationFrame(()=>{0===E.size?t():I.add(t)})},300));else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&N.has(e)){let t=N.get(e);"none"===e.style.userSelect&&(e.style.userSelect=t),""===e.getAttribute("style")&&e.removeAttribute("style"),N.delete(e)}}let D=a.createContext({register:()=>{}});D.displayName="PressResponderContext";var $=n(95691),_=n(25134),F=n(11455);function O(...e){return(...t)=>{for(let n of e)"function"==typeof n&&n(...t)}}var P=n(61994);function M(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let r=e[n];for(let e in r){let n=t[e],i=r[e];"function"==typeof n&&"function"==typeof i&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&90>=e.charCodeAt(2)?t[e]=O(n,i):("className"===e||"UNSAFE_className"===e)&&"string"==typeof n&&"string"==typeof i?t[e]=(0,P.Z)(n,i):"id"===e&&n&&i?t.id=(0,l.ur)(n,i):t[e]=void 0!==i?i:n}}return t}var L=n(26929);function B(){let e=(0,a.useRef)(new Map),t=(0,a.useCallback)((t,n,r,i)=>{let a=(null==i?void 0:i.once)?(...t)=>{e.current.delete(r),r(...t)}:r;e.current.set(r,{type:n,eventTarget:t,fn:a,options:i}),t.addEventListener(n,r,i)},[]),n=(0,a.useCallback)((t,n,r,i)=>{var a;let o=(null===(a=e.current.get(r))||void 0===a?void 0:a.fn)||r;t.removeEventListener(n,o,i),e.current.delete(r)},[]),r=(0,a.useCallback)(()=>{e.current.forEach((e,t)=>{n(e.eventTarget,e.type,t,e.options)})},[n]);return(0,a.useEffect)(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function U(e){let t=(0,a.useRef)(null);return(0,L.b)(()=>{t.current=e},[e]),(0,a.useCallback)((...e)=>{let n=t.current;return null==n?void 0:n(...e)},[])}function z(e){if(function(){if(null==V){V=!1;try{document.createElement("div").focus({get preventScroll(){return V=!0,!0}})}catch{}}return V}())e.focus({preventScroll:!0});else{let t=function(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}(e);e.focus(),function(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}(t)}}let V=null;function W(e,t,n=!0){var r,i;let{metaKey:a,ctrlKey:o,altKey:s,shiftKey:l}=t;x()&&(null===(i=window.event)||void 0===i?void 0:null===(r=i.type)||void 0===r?void 0:r.startsWith("key"))&&"_blank"===e.target&&(f()?a=!0:o=!0);let u=b()&&f()&&!g()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:a,ctrlKey:o,altKey:s,shiftKey:l}):new MouseEvent("click",{metaKey:a,ctrlKey:o,altKey:s,shiftKey:l,bubbles:!0,cancelable:!0});W.isOpening=n,z(e),e.dispatchEvent(u),W.isOpening=!1}function j(e){return 0===e.mozInputSource&&!!e.isTrusted||(v()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}W.isOpening=!1;var H=new WeakMap;class K{continuePropagation(){(0,F._)(this,H,!1)}get shouldStopPropagation(){return(0,$._)(this,H)}constructor(e,t,n,r){var i;(0,_._)(this,H,{writable:!0,value:void 0}),(0,F._)(this,H,!0);let a=null!==(i=null==r?void 0:r.target)&&void 0!==i?i:n.currentTarget,o=null==a?void 0:a.getBoundingClientRect(),s,l=0,u,c=null;null!=n.clientX&&null!=n.clientY&&(u=n.clientX,c=n.clientY),o&&(null!=u&&null!=c?(s=u-o.left,l=c-o.top):(s=o.width/2,l=o.height/2)),this.type=e,this.pointerType=t,this.target=n.currentTarget,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.x=s,this.y=l}}let G=Symbol("linkClicked");function X(e){return"A"===e.tagName&&e.hasAttribute("href")}function q(e,t){let{key:n,code:r}=e,i=t.getAttribute("role");return("Enter"===n||" "===n||"Spacebar"===n||"Space"===r)&&!(t instanceof k(t).HTMLInputElement&&!ei(t,n)||t instanceof k(t).HTMLTextAreaElement||t.isContentEditable)&&!(("link"===i||!i&&X(t))&&"Enter"!==n)}function Y(e,t){let n=e.changedTouches;for(let e=0;e<n.length;e++){let r=n[e];if(r.identifier===t)return r}return null}function Q(e,t){let n=0,r=0;return t.targetTouches&&1===t.targetTouches.length&&(n=t.targetTouches[0].clientX,r=t.targetTouches[0].clientY),{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:n,clientY:r}}function J(e,t){let n=t.clientX,r=t.clientY;return{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:n,clientY:r}}function Z(e,t){let n,r,i=t.getBoundingClientRect(),a=(n=0,r=0,void 0!==e.width?n=e.width/2:void 0!==e.radiusX&&(n=e.radiusX),void 0!==e.height?r=e.height/2:void 0!==e.radiusY&&(r=e.radiusY),{top:e.clientY-r,right:e.clientX+n,bottom:e.clientY+r,left:e.clientX-n});return!(i.left>a.right)&&!(a.left>i.right)&&!(i.top>a.bottom)&&!(a.top>i.bottom)}function ee(e){return!(e instanceof HTMLElement)||!e.hasAttribute("draggable")}function et(e){return!(e instanceof HTMLInputElement)&&(e instanceof HTMLButtonElement?"submit"!==e.type&&"reset"!==e.type:!X(e))}function en(e,t){return e instanceof HTMLInputElement?!ei(e,t):et(e)}let er=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function ei(e,t){return"checkbox"===e.type||"radio"===e.type?" "===t:er.has(e.type)}let ea=0,eo=new Map,es=new WeakMap;var el=n(26543),eu=n(18373),ec=(0,el.tv)({base:["w-full","p-1","min-w-[200px]"]});(0,el.tv)({slots:{base:["flex","group","gap-2","items-center","justify-between","relative","px-2","py-1.5","w-full","h-full","box-border","rounded-small","outline-none","cursor-pointer","tap-highlight-transparent","data-[pressed=true]:opacity-70",...eu.Dh,"data-[focus-visible=true]:dark:ring-offset-background-content1"],wrapper:"w-full flex flex-col items-start justify-center",title:"flex-1 text-small font-normal truncate",description:["w-full","text-tiny","text-foreground-500","group-hover:text-current"],selectedIcon:["text-inherit","w-3","h-3","flex-shrink-0"],shortcut:["px-1","py-0.5","rounded","font-sans","text-foreground-500","text-tiny","border-small","border-default-300","group-hover:border-current"]},variants:{variant:{solid:{base:""},bordered:{base:"border-medium border-transparent bg-transparent"},light:{base:"bg-transparent"},faded:{base:"border-small border-transparent hover:border-default data-[hover=true]:bg-default-100"},flat:{base:""},shadow:{base:"data-[hover=true]:shadow-lg"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{},false:{}}},defaultVariants:{variant:"solid",color:"default"},compoundVariants:[{variant:"solid",color:"default",class:{base:"data-[hover=true]:bg-default data-[hover=true]:text-default-foreground"}},{variant:"solid",color:"primary",class:{base:"data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground"}},{variant:"solid",color:"secondary",class:{base:"data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground"}},{variant:"solid",color:"success",class:{base:"data-[hover=true]:bg-success data-[hover=true]:text-success-foreground"}},{variant:"solid",color:"warning",class:{base:"data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground"}},{variant:"solid",color:"danger",class:{base:"data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground"}},{variant:"shadow",color:"default",class:{base:"data-[hover=true]:shadow-default/50 data-[hover=true]:bg-default data-[hover=true]:text-default-foreground"}},{variant:"shadow",color:"primary",class:{base:"data-[hover=true]:shadow-primary/30 data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground"}},{variant:"shadow",color:"secondary",class:{base:"data-[hover=true]:shadow-secondary/30 data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground"}},{variant:"shadow",color:"success",class:{base:"data-[hover=true]:shadow-success/30 data-[hover=true]:bg-success data-[hover=true]:text-success-foreground"}},{variant:"shadow",color:"warning",class:{base:"data-[hover=true]:shadow-warning/30 data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground"}},{variant:"shadow",color:"danger",class:{base:"data-[hover=true]:shadow-danger/30 data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground"}},{variant:"bordered",color:"default",class:{base:"data-[hover=true]:border-default"}},{variant:"bordered",color:"primary",class:{base:"data-[hover=true]:border-primary data-[hover=true]:text-primary"}},{variant:"bordered",color:"secondary",class:{base:"data-[hover=true]:border-secondary data-[hover=true]:text-secondary"}},{variant:"bordered",color:"success",class:{base:"data-[hover=true]:border-success data-[hover=true]:text-success"}},{variant:"bordered",color:"warning",class:{base:"data-[hover=true]:border-warning data-[hover=true]:text-warning"}},{variant:"bordered",color:"danger",class:{base:"data-[hover=true]:border-danger data-[hover=true]:text-danger"}},{variant:"flat",color:"default",class:{base:"data-[hover=true]:bg-default/40 data-[hover=true]:text-default-foreground"}},{variant:"flat",color:"primary",class:{base:"data-[hover=true]:bg-primary/20 data-[hover=true]:text-primary"}},{variant:"flat",color:"secondary",class:{base:"data-[hover=true]:bg-secondary/20 data-[hover=true]:text-secondary"}},{variant:"flat",color:"success",class:{base:"data-[hover=true]:bg-success/20 data-[hover=true]:text-success "}},{variant:"flat",color:"warning",class:{base:"data-[hover=true]:bg-warning/20 data-[hover=true]:text-warning"}},{variant:"flat",color:"danger",class:{base:"data-[hover=true]:bg-danger/20 data-[hover=true]:text-danger"}},{variant:"faded",color:"default",class:{base:"data-[hover=true]:text-default-foreground"}},{variant:"faded",color:"primary",class:{base:"data-[hover=true]:text-primary"}},{variant:"faded",color:"secondary",class:{base:"data-[hover=true]:text-secondary"}},{variant:"faded",color:"success",class:{base:"data-[hover=true]:text-success"}},{variant:"faded",color:"warning",class:{base:"data-[hover=true]:text-warning"}},{variant:"faded",color:"danger",class:{base:"data-[hover=true]:text-danger"}},{variant:"light",color:"default",class:{base:"data-[hover=true]:text-default-500"}},{variant:"light",color:"primary",class:{base:"data-[hover=true]:text-primary"}},{variant:"light",color:"secondary",class:{base:"data-[hover=true]:text-secondary"}},{variant:"light",color:"success",class:{base:"data-[hover=true]:text-success"}},{variant:"light",color:"warning",class:{base:"data-[hover=true]:text-warning"}},{variant:"light",color:"danger",class:{base:"data-[hover=true]:text-danger"}}]}),(0,el.tv)({slots:{base:"relative mb-2",heading:"pl-1 text-tiny text-foreground-500",group:"data-[has-title=true]:pt-1",divider:"mt-2"}}),(0,el.tv)({base:"w-full flex flex-col gap-0.5 p-1"});var ed=n(46763),eh=n(97765);function ef(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>(function(e,t){if(null!=e){if((0,eh.mf)(e)){e(t);return}try{e.current=t}catch(n){throw Error("Cannot assign value '".concat(t,"' to ref '").concat(e,"'"))}}})(t,e))}}var ep=(e,t,n)=>{let r=null==t?void 0:t.current;if(!r||!r.contains(e)){let e=document.querySelectorAll("body > span[data-focus-scope-start]"),t=[];if(e.forEach(e=>{t.push(e.nextElementSibling)}),1===t.length)return n.close(),!1}return!r||!r.contains(e)},eg=n(5376),em=(e,t)=>{if(e){let n=Array.isArray(e.children)?e.children:[...(null==e?void 0:e.items)||[]];if(n&&n.length)return n.find(e=>{if(e.key===t)return e})||{}}return null},eb=(e,t,n)=>{let r=n||em(e,t);return r&&r.props&&"closeOnSelect"in r.props?r.props.closeOnSelect:null==e?void 0:e.closeOnSelect},ey=n(51885);let ev=e=>{var t;return null!==(t=null==e?void 0:e.ownerDocument)&&void 0!==t?t:document},ex=e=>e&&"window"in e&&e.window===e?e:ev(e).defaultView||window,ew=new Map,ek=new Set;function eE(){if("undefined"==typeof window)return;function e(e){return"propertyName"in e}let t=n=>{if(!e(n)||!n.target)return;let r=ew.get(n.target);if(r&&(r.delete(n.propertyName),0===r.size&&(n.target.removeEventListener("transitioncancel",t),ew.delete(n.target)),0===ew.size)){for(let e of ek)e();ek.clear()}};document.body.addEventListener("transitionrun",n=>{if(!e(n)||!n.target)return;let r=ew.get(n.target);r||(r=new Set,ew.set(n.target,r),n.target.addEventListener("transitioncancel",t,{once:!0})),r.add(n.propertyName)}),document.body.addEventListener("transitionend",t)}function eI(e){if(function(){if(null==eS){eS=!1;try{document.createElement("div").focus({get preventScroll(){return eS=!0,!0}})}catch{}}return eS}())e.focus({preventScroll:!0});else{let t=function(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}(e);e.focus(),function(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}(t)}}"undefined"!=typeof document&&("loading"!==document.readyState?eE():document.addEventListener("DOMContentLoaded",eE));let eS=null;function eT(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent))}function eC(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function eN(e){let t=null;return()=>(null==t&&(t=e()),t)}let eA=eN(function(){return eC(/^Mac/i)}),eR=eN(function(){return eC(/^iPhone/i)}),eD=eN(function(){return eC(/^iPad/i)||eA()&&navigator.maxTouchPoints>1}),e$=eN(function(){return eR()||eD()});eN(function(){return eA()||e$()});let e_=eN(function(){return eT(/AppleWebKit/i)&&!eF()}),eF=eN(function(){return eT(/Chrome/i)}),eO=eN(function(){return eT(/Android/i)});eN(function(){return eT(/Firefox/i)});let eP=null,eM=new Set,eL=new Map,eB=!1,eU=!1;function ez(e,t){for(let n of eM)n(e,t)}function eV(e){eB=!0,e.metaKey||!eA()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key||(eP="keyboard",ez("keyboard",e))}function eW(e){eP="pointer",("mousedown"===e.type||"pointerdown"===e.type)&&(eB=!0,ez("pointer",e))}function ej(e){(0===e.mozInputSource&&e.isTrusted||(eO()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType))&&(eB=!0,eP="virtual")}function eH(e){e.target!==window&&e.target!==document&&(eB||eU||(eP="virtual",ez("virtual",e)),eB=!1,eU=!1)}function eK(){eB=!1,eU=!0}function eG(e){if("undefined"==typeof window||eL.get(ex(e)))return;let t=ex(e),n=ev(e),r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){eB=!0,r.apply(this,arguments)},n.addEventListener("keydown",eV,!0),n.addEventListener("keyup",eV,!0),n.addEventListener("click",ej,!0),t.addEventListener("focus",eH,!0),t.addEventListener("blur",eK,!1),"undefined"!=typeof PointerEvent?(n.addEventListener("pointerdown",eW,!0),n.addEventListener("pointermove",eW,!0),n.addEventListener("pointerup",eW,!0)):(n.addEventListener("mousedown",eW,!0),n.addEventListener("mousemove",eW,!0),n.addEventListener("mouseup",eW,!0)),t.addEventListener("beforeunload",()=>{eX(e)},{once:!0}),eL.set(t,{focus:r})}let eX=(e,t)=>{let n=ex(e),r=ev(e);t&&r.removeEventListener("DOMContentLoaded",t),eL.has(n)&&(n.HTMLElement.prototype.focus=eL.get(n).focus,r.removeEventListener("keydown",eV,!0),r.removeEventListener("keyup",eV,!0),r.removeEventListener("click",ej,!0),n.removeEventListener("focus",eH,!0),n.removeEventListener("blur",eK,!1),"undefined"!=typeof PointerEvent?(r.removeEventListener("pointerdown",eW,!0),r.removeEventListener("pointermove",eW,!0),r.removeEventListener("pointerup",eW,!0)):(r.removeEventListener("mousedown",eW,!0),r.removeEventListener("mousemove",eW,!0),r.removeEventListener("mouseup",eW,!0)),eL.delete(n))};"undefined"!=typeof document&&function(e){let t;let n=ev(void 0);"loading"!==n.readyState?eG(void 0):(t=()=>{eG(void 0)},n.addEventListener("DOMContentLoaded",t)),()=>eX(e,t)}();var eq=n(66933);let eY=a.createContext(null),eQ="react-aria-focus-scope-restore",eJ=null;function eZ(e){let t,n,{children:r,contain:i,restoreFocus:o,autoFocus:s}=e,l=(0,a.useRef)(null),u=(0,a.useRef)(null),c=(0,a.useRef)([]),{parentNode:d}=(0,a.useContext)(eY)||{},h=(0,a.useMemo)(()=>new ta({scopeRef:c}),[c]);(0,eq.b)(()=>{let e=d||to.root;if(to.getTreeNode(e.scopeRef)&&eJ&&!e6(eJ,e.scopeRef)){let t=to.getTreeNode(eJ);t&&(e=t)}e.addChild(h),to.addNode(h)},[h,d]),(0,eq.b)(()=>{let e=to.getTreeNode(c);e&&(e.contain=!!i)},[i]),(0,eq.b)(()=>{var e;let t=null===(e=l.current)||void 0===e?void 0:e.nextSibling,n=[],r=e=>e.stopPropagation();for(;t&&t!==u.current;)n.push(t),t.addEventListener(eQ,r),t=t.nextSibling;return c.current=n,()=>{for(let e of n)e.removeEventListener(eQ,r)}},[r]),(0,eq.b)(()=>{if(o||i)return;let e=c.current,t=ev(e?e[0]:void 0),n=e=>{let t=e.target;e5(t,c.current)?eJ=c:e8(t)||(eJ=null)};return t.addEventListener("focusin",n,!1),null==e||e.forEach(e=>e.addEventListener("focusin",n,!1)),()=>{t.removeEventListener("focusin",n,!1),null==e||e.forEach(e=>e.removeEventListener("focusin",n,!1))}},[c,o,i]),t=(0,a.useRef)(void 0),n=(0,a.useRef)(void 0),(0,eq.b)(()=>{let e=c.current;if(!i){n.current&&(cancelAnimationFrame(n.current),n.current=void 0);return}let r=ev(e?e[0]:void 0),a=e=>{if("Tab"!==e.key||e.altKey||e.ctrlKey||e.metaKey||!e4(c)||e.isComposing)return;let t=r.activeElement,n=c.current;if(!n||!e5(t,n))return;let i=tr(e3(n),{tabbable:!0},n);if(!t)return;i.currentNode=t;let a=e.shiftKey?i.previousNode():i.nextNode();a||(i.currentNode=e.shiftKey?n[n.length-1].nextElementSibling:n[0].previousElementSibling,a=e.shiftKey?i.previousNode():i.nextNode()),e.preventDefault(),a&&e7(a,!0)},o=e=>{(!eJ||e6(eJ,c))&&e5(e.target,c.current)?(eJ=c,t.current=e.target):e4(c)&&!e8(e.target,c)?t.current?t.current.focus():eJ&&eJ.current&&te(eJ.current):e4(c)&&(t.current=e.target)},s=e=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{if(r.activeElement&&e4(c)&&!e8(r.activeElement,c)){if(eJ=c,r.body.contains(e.target)){var n;t.current=e.target,null===(n=t.current)||void 0===n||n.focus()}else eJ.current&&te(eJ.current)}})};return r.addEventListener("keydown",a,!1),r.addEventListener("focusin",o,!1),null==e||e.forEach(e=>e.addEventListener("focusin",o,!1)),null==e||e.forEach(e=>e.addEventListener("focusout",s,!1)),()=>{r.removeEventListener("keydown",a,!1),r.removeEventListener("focusin",o,!1),null==e||e.forEach(e=>e.removeEventListener("focusin",o,!1)),null==e||e.forEach(e=>e.removeEventListener("focusout",s,!1))}},[c,i]),(0,eq.b)(()=>()=>{n.current&&cancelAnimationFrame(n.current)},[n]),function(e,t,n){let r=(0,a.useRef)("undefined"!=typeof document?ev(e.current?e.current[0]:void 0).activeElement:null);(0,eq.b)(()=>{let r=e.current,i=ev(r?r[0]:void 0);if(!t||n)return;let a=()=>{(!eJ||e6(eJ,e))&&e5(i.activeElement,e.current)&&(eJ=e)};return i.addEventListener("focusin",a,!1),null==r||r.forEach(e=>e.addEventListener("focusin",a,!1)),()=>{i.removeEventListener("focusin",a,!1),null==r||r.forEach(e=>e.removeEventListener("focusin",a,!1))}},[e,n]),(0,eq.b)(()=>{let r=ev(e.current?e.current[0]:void 0);if(!t)return;let i=t=>{if("Tab"!==t.key||t.altKey||t.ctrlKey||t.metaKey||!e4(e)||t.isComposing)return;let n=r.activeElement;if(!e8(n,e)||!tt(e))return;let i=to.getTreeNode(e);if(!i)return;let a=i.nodeToRestore,o=tr(r.body,{tabbable:!0});o.currentNode=n;let s=t.shiftKey?o.previousNode():o.nextNode();if(a&&r.body.contains(a)&&a!==r.body||(a=void 0,i.nodeToRestore=void 0),(!s||!e8(s,e))&&a){o.currentNode=a;do s=t.shiftKey?o.previousNode():o.nextNode();while(e8(s,e));(t.preventDefault(),t.stopPropagation(),s)?e7(s,!0):e8(a)?e7(a,!0):n.blur()}};return n||r.addEventListener("keydown",i,!0),()=>{n||r.removeEventListener("keydown",i,!0)}},[e,t,n]),(0,eq.b)(()=>{var n;let i=ev(e.current?e.current[0]:void 0);if(!t)return;let a=to.getTreeNode(e);if(a)return a.nodeToRestore=null!==(n=r.current)&&void 0!==n?n:void 0,()=>{let n=to.getTreeNode(e);if(!n)return;let r=n.nodeToRestore;if(t&&r&&(i.activeElement&&e8(i.activeElement,e)||i.activeElement===i.body&&tt(e))){let t=to.clone();requestAnimationFrame(()=>{if(i.activeElement===i.body){let n=t.getTreeNode(e);for(;n;){if(n.nodeToRestore&&n.nodeToRestore.isConnected){tn(n.nodeToRestore);return}n=n.parent}for(n=t.getTreeNode(e);n;){if(n.scopeRef&&n.scopeRef.current&&to.getTreeNode(n.scopeRef)){tn(e9(n.scopeRef.current,!0));return}n=n.parent}}})}}},[e,t])}(c,o,i),function(e,t){let n=a.useRef(t);(0,a.useEffect)(()=>{n.current&&(eJ=e,!e5(ev(e.current?e.current[0]:void 0).activeElement,eJ.current)&&e.current&&te(e.current)),n.current=!1},[e])}(c,s),(0,a.useEffect)(()=>{let e=ev(c.current?c.current[0]:void 0).activeElement,t=null;if(e5(e,c.current)){for(let n of to.traverse())n.scopeRef&&e5(e,n.scopeRef.current)&&(t=n);t===to.getTreeNode(c)&&(eJ=t.scopeRef)}},[c]),(0,eq.b)(()=>()=>{var e,t,n;let r=null!==(n=null===(t=to.getTreeNode(c))||void 0===t?void 0:null===(e=t.parent)||void 0===e?void 0:e.scopeRef)&&void 0!==n?n:null;(c===eJ||e6(c,eJ))&&(!r||to.getTreeNode(r))&&(eJ=r),to.removeTreeNode(c)},[c]);let f=(0,a.useMemo)(()=>({focusNext(e={}){let t=c.current,{from:n,tabbable:r,wrap:i,accept:a}=e,o=n||ev(t[0]).activeElement,s=t[0].previousElementSibling,l=tr(e3(t),{tabbable:r,accept:a},t);l.currentNode=e5(o,t)?o:s;let u=l.nextNode();return!u&&i&&(l.currentNode=s,u=l.nextNode()),u&&e7(u,!0),u},focusPrevious(e={}){let t=c.current,{from:n,tabbable:r,wrap:i,accept:a}=e,o=n||ev(t[0]).activeElement,s=t[t.length-1].nextElementSibling,l=tr(e3(t),{tabbable:r,accept:a},t);l.currentNode=e5(o,t)?o:s;let u=l.previousNode();return!u&&i&&(l.currentNode=s,u=l.previousNode()),u&&e7(u,!0),u},focusFirst(e={}){let t=c.current,{tabbable:n,accept:r}=e,i=tr(e3(t),{tabbable:n,accept:r},t);i.currentNode=t[0].previousElementSibling;let a=i.nextNode();return a&&e7(a,!0),a},focusLast(e={}){let t=c.current,{tabbable:n,accept:r}=e,i=tr(e3(t),{tabbable:n,accept:r},t);i.currentNode=t[t.length-1].nextElementSibling;let a=i.previousNode();return a&&e7(a,!0),a}}),[]),p=(0,a.useMemo)(()=>({focusManager:f,parentNode:h}),[h,f]);return a.createElement(eY.Provider,{value:p},a.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:l}),r,a.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:u}))}let e0=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],e1=e0.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";e0.push('[tabindex]:not([tabindex="-1"]):not([disabled])');let e2=e0.join(':not([hidden]):not([tabindex="-1"]),');function e3(e){return e[0].parentElement}function e4(e){let t=to.getTreeNode(eJ);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function e5(e,t){return!!e&&!!t&&t.some(t=>t.contains(e))}function e8(e,t=null){if(e instanceof Element&&e.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:n}of to.traverse(to.getTreeNode(t)))if(n&&e5(e,n.current))return!0;return!1}function e6(e,t){var n;let r=null===(n=to.getTreeNode(t))||void 0===n?void 0:n.parent;for(;r;){if(r.scopeRef===e)return!0;r=r.parent}return!1}function e7(e,t=!1){if(null==e||t){if(null!=e)try{e.focus()}catch{}}else try{!function(e){let t=ev(e);if("virtual"===eP){var n;let r=t.activeElement;n=()=>{t.activeElement===r&&e.isConnected&&eI(e)},requestAnimationFrame(()=>{0===ew.size?n():ek.add(n)})}else eI(e)}(e)}catch{}}function e9(e,t=!0){let n=e[0].previousElementSibling,r=e3(e),i=tr(r,{tabbable:t},e);i.currentNode=n;let a=i.nextNode();return t&&!a&&((i=tr(r=e3(e),{tabbable:!1},e)).currentNode=n,a=i.nextNode()),a}function te(e,t=!0){e7(e9(e,t))}function tt(e){let t=to.getTreeNode(eJ);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return(null==t?void 0:t.scopeRef)===e}function tn(e){e.dispatchEvent(new CustomEvent(eQ,{bubbles:!0,cancelable:!0}))&&e7(e)}function tr(e,t,n){let r=(null==t?void 0:t.tabbable)?e2:e1,i=ev(e).createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(e){var i;return(null==t?void 0:null===(i=t.from)||void 0===i?void 0:i.contains(e))?NodeFilter.FILTER_REJECT:e.matches(r)&&function e(t,n){return"#comment"!==t.nodeName&&function(e){let t=ex(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:n,visibility:r}=e.style,i="none"!==n&&"hidden"!==r&&"collapse"!==r;if(i){let{getComputedStyle:t}=e.ownerDocument.defaultView,{display:n,visibility:r}=t(e);i="none"!==n&&"hidden"!==r&&"collapse"!==r}return i}(t)&&!t.hasAttribute("hidden")&&!t.hasAttribute("data-react-aria-prevent-focus")&&("DETAILS"!==t.nodeName||!n||"SUMMARY"===n.nodeName||t.hasAttribute("open"))&&(!t.parentElement||e(t.parentElement,t))}(e)&&(!n||e5(e,n))&&(!(null==t?void 0:t.accept)||t.accept(e))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return(null==t?void 0:t.from)&&(i.currentNode=t.from),i}class ti{get size(){return this.fastMap.size}getTreeNode(e){return this.fastMap.get(e)}addTreeNode(e,t,n){let r=this.fastMap.get(null!=t?t:null);if(!r)return;let i=new ta({scopeRef:e});r.addChild(i),i.parent=r,this.fastMap.set(e,i),n&&(i.nodeToRestore=n)}addNode(e){this.fastMap.set(e.scopeRef,e)}removeTreeNode(e){if(null===e)return;let t=this.fastMap.get(e);if(!t)return;let n=t.parent;for(let e of this.traverse())e!==t&&t.nodeToRestore&&e.nodeToRestore&&t.scopeRef&&t.scopeRef.current&&e5(e.nodeToRestore,t.scopeRef.current)&&(e.nodeToRestore=t.nodeToRestore);let r=t.children;n&&(n.removeChild(t),r.size>0&&r.forEach(e=>n&&n.addChild(e))),this.fastMap.delete(t.scopeRef)}*traverse(e=this.root){if(null!=e.scopeRef&&(yield e),e.children.size>0)for(let t of e.children)yield*this.traverse(t)}clone(){var e,t;let n=new ti;for(let r of this.traverse())n.addTreeNode(r.scopeRef,null!==(t=null===(e=r.parent)||void 0===e?void 0:e.scopeRef)&&void 0!==t?t:null,r.nodeToRestore);return n}constructor(){this.fastMap=new Map,this.root=new ta({scopeRef:null}),this.fastMap.set(null,this.root)}}class ta{addChild(e){this.children.add(e),e.parent=this}removeChild(e){this.children.delete(e),e.parent=void 0}constructor(e){this.children=new Set,this.contain=!1,this.scopeRef=e.scopeRef}}let to=new ti;var ts=n(54690);function tl(e,t){if(e.button>0)return!1;if(e.target){let t=e.target.ownerDocument;if(!t||!t.documentElement.contains(e.target)||e.target.closest("[data-react-aria-top-layer]"))return!1}return t.current&&!t.current.contains(e.target)}var tu=n(10679);let tc=[];function td(e,t=-1/0,n=1/0){return Math.min(Math.max(e,t),n)}let th={top:"top",bottom:"top",left:"left",right:"left"},tf={top:"bottom",bottom:"top",left:"right",right:"left"},tp={top:"left",left:"top"},tg={top:"height",left:"width"},tm={width:"totalWidth",height:"totalHeight"},tb={},ty="undefined"!=typeof document&&window.visualViewport;function tv(e){let t=0,n=0,r=0,i=0,a=0,o=0,s={},l=(null==ty?void 0:ty.scale)>1;if("BODY"===e.tagName){var u,c;let l=document.documentElement;r=l.clientWidth,i=l.clientHeight,t=null!==(u=null==ty?void 0:ty.width)&&void 0!==u?u:r,n=null!==(c=null==ty?void 0:ty.height)&&void 0!==c?c:i,s.top=l.scrollTop||e.scrollTop,s.left=l.scrollLeft||e.scrollLeft,ty&&(a=ty.offsetTop,o=ty.offsetLeft)}else({width:t,height:n,top:a,left:o}=tI(e)),s.top=e.scrollTop,s.left=e.scrollLeft,r=t,i=n;return e_()&&("BODY"===e.tagName||"HTML"===e.tagName)&&l&&(s.top=0,s.left=0,a=ty.pageTop,o=ty.pageLeft),{width:t,height:n,totalWidth:r,totalHeight:i,scroll:s,top:a,left:o}}function tx(e,t,n,r,i,a,o){let s=i.scroll[e],l=r[tg[e]],u=r.scroll[th[e]]+a,c=l+r.scroll[th[e]]-a,d=t-s+o[e]-r[th[e]],h=t-s+n+o[e]-r[th[e]];return d<u?u-d:h>c?Math.max(c-h,u-d):0}function tw(e){if(tb[e])return tb[e];let[t,n]=e.split(" "),r=th[t]||"right",i=tp[r];th[n]||(n="center");let a=tg[r],o=tg[i];return tb[e]={placement:t,crossPlacement:n,axis:r,crossAxis:i,size:a,crossSize:o},tb[e]}function tk(e,t,n,r,i,a,o,s,l,u){let{placement:c,crossPlacement:d,axis:h,crossAxis:f,size:p,crossSize:g}=r,m={};m[f]=e[f],"center"===d?m[f]+=(e[g]-n[g])/2:d!==f&&(m[f]+=e[g]-n[g]),m[f]+=a;let b=e[f]-n[g]+l+u,y=e[f]+e[g]-l-u;if(m[f]=td(m[f],b,y),c===h){let n=s?o[p]:t[tm[p]];m[tf[h]]=Math.floor(n-e[h]+i)}else m[h]=Math.floor(e[h]+e[p]+i);return m}function tE(e,t,n,r,i,a){let{placement:o,axis:s,size:l}=a;return o===s?Math.max(0,n[s]-e[s]-e.scroll[s]+t[s]-r[s]-r[tf[s]]-i):Math.max(0,e[l]+e[s]+e.scroll[s]-t[s]-n[s]-n[l]-r[s]-r[tf[s]]-i)}function tI(e){let{top:t,left:n,width:r,height:i}=e.getBoundingClientRect(),{scrollTop:a,scrollLeft:o,clientTop:s,clientLeft:l}=document.documentElement;return{top:t+a-s,left:n+o-l,width:r,height:i}}function tS(e,t){let n,r=window.getComputedStyle(e);if("fixed"===r.position){let{top:t,left:r,width:i,height:a}=e.getBoundingClientRect();n={top:t,left:r,width:i,height:a}}else{n=tI(e);let r=tI(t),i=window.getComputedStyle(t);r.top+=(parseInt(i.borderTopWidth,10)||0)-t.scrollTop,r.left+=(parseInt(i.borderLeftWidth,10)||0)-t.scrollLeft,n.top-=r.top,n.left-=r.left}return n.top-=parseInt(r.marginTop,10)||0,n.left-=parseInt(r.marginLeft,10)||0,n}function tT(e){let t=window.getComputedStyle(e);return"none"!==t.transform||/transform|perspective/.test(t.willChange)||"none"!==t.filter||"paint"===t.contain||"backdropFilter"in t&&"none"!==t.backdropFilter||"WebkitBackdropFilter"in t&&"none"!==t.WebkitBackdropFilter}let tC=new WeakMap;var tN=n(25311);let tA="undefined"!=typeof document&&window.visualViewport;var tR=n(455),tD=new WeakMap,t$=[],t_=n(41681),tF=n(88160),tO=n(43096),tP=n(8153);let tM=new WeakMap,tL=[];var tB=n(72243),tU=n(41351),tz=(0,el.tv)({slots:{base:["z-0","relative","bg-transparent","before:content-['']","before:hidden","before:z-[-1]","before:absolute","before:rotate-45","before:w-2.5","before:h-2.5","before:rounded-sm","data-[arrow=true]:before:block","data-[placement=top]:before:-bottom-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=top]:before:left-1/2","data-[placement=top]:before:-translate-x-1/2","data-[placement=top-start]:before:-bottom-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=top-start]:before:left-3","data-[placement=top-end]:before:-bottom-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=top-end]:before:right-3","data-[placement=bottom]:before:-top-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=bottom]:before:left-1/2","data-[placement=bottom]:before:-translate-x-1/2","data-[placement=bottom-start]:before:-top-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=bottom-start]:before:left-3","data-[placement=bottom-end]:before:-top-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=bottom-end]:before:right-3","data-[placement=left]:before:-right-[calc(theme(spacing.5)/4_-_2px)]","data-[placement=left]:before:top-1/2","data-[placement=left]:before:-translate-y-1/2","data-[placement=left-start]:before:-right-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=left-start]:before:top-1/4","data-[placement=left-end]:before:-right-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=left-end]:before:bottom-1/4","data-[placement=right]:before:-left-[calc(theme(spacing.5)/4_-_2px)]","data-[placement=right]:before:top-1/2","data-[placement=right]:before:-translate-y-1/2","data-[placement=right-start]:before:-left-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=right-start]:before:top-1/4","data-[placement=right-end]:before:-left-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=right-end]:before:bottom-1/4",...eu.Dh],content:["z-10","px-2.5","py-1","w-full","inline-flex","flex-col","items-center","justify-center","box-border","subpixel-antialiased","outline-none","box-border"],trigger:["z-10"],backdrop:["hidden"],arrow:[]},variants:{size:{sm:{content:"text-tiny"},md:{content:"text-small"},lg:{content:"text-medium"}},color:{default:{base:"before:bg-content1 before:shadow-small",content:"bg-content1"},foreground:{base:"before:bg-foreground",content:tU.J.solid.foreground},primary:{base:"before:bg-primary",content:tU.J.solid.primary},secondary:{base:"before:bg-secondary",content:tU.J.solid.secondary},success:{base:"before:bg-success",content:tU.J.solid.success},warning:{base:"before:bg-warning",content:tU.J.solid.warning},danger:{base:"before:bg-danger",content:tU.J.solid.danger}},radius:{none:{content:"rounded-none"},sm:{content:"rounded-small"},md:{content:"rounded-medium"},lg:{content:"rounded-large"},full:{content:"rounded-full"}},shadow:{sm:{content:"shadow-small"},md:{content:"shadow-medium"},lg:{content:"shadow-large"}},backdrop:{transparent:{},opaque:{backdrop:"bg-overlay/50 backdrop-opacity-disabled"},blur:{backdrop:"backdrop-blur-sm backdrop-saturate-150 bg-overlay/30"}},triggerScaleOnOpen:{true:{trigger:["aria-expanded:scale-[0.97]","aria-expanded:opacity-70","subpixel-antialiased"]},false:{}},disableAnimation:{true:{base:"animate-none"}},isTriggerDisabled:{true:{trigger:"opacity-disabled pointer-events-none"},false:{}}},defaultVariants:{color:"default",radius:"lg",size:"md",shadow:"md",backdrop:"transparent",triggerScaleOnOpen:!0},compoundVariants:[{backdrop:["opaque","blur"],class:{backdrop:"block w-full h-full fixed inset-0 -z-30"}}]}),tV=n(68658);let tW=(0,a.createContext)({}),tj=a.createContext({register:()=>{}});function tH({children:e}){let t=(0,a.useMemo)(()=>({register:()=>{}}),[]);return a.createElement(tj.Provider,{value:t},e)}tj.displayName="PressResponderContext";var tK=n(54887),tG=n(87365);let tX=a.createContext(null);function tq(e){var t;let n=(0,tG.Av)(),{portalContainer:r=n?null:document.body,isExiting:i}=e,[o,s]=(0,a.useState)(!1),l=(0,a.useMemo)(()=>({contain:o,setContain:s}),[o,s]),{getContainer:u}=null!==(t=(0,a.useContext)(tW))&&void 0!==t?t:{};if(!e.portalContainer&&u&&(r=u()),!r)return null;let c=e.children;return e.disableFocusManagement||(c=a.createElement(eZ,{restoreFocus:!0,contain:o&&!i},c)),c=a.createElement(tX.Provider,{value:l},a.createElement(tH,null,c)),tK.createPortal(c,r)}var tY=n(48614),tQ=n(57437),tJ=(0,tB.Gp)((e,t)=>{let{children:n,...r}=e,s=function(e){var t,n,r;let s=(0,i.w)(),[l,u]=(0,tB.oe)(e,tz.variantKeys),{as:c,ref:d,children:h,state:f,triggerRef:p,scrollRef:g,defaultOpen:m,onOpenChange:b,isOpen:y,isNonModal:v=!0,shouldFlip:x=!0,containerPadding:w=12,shouldBlockScroll:k=!1,isDismissable:E=!0,shouldCloseOnBlur:I,portalContainer:S,updatePositionDeps:T,dialogProps:C,placement:N="top",triggerType:A="dialog",showArrow:R=!1,offset:D=7,crossOffset:$=0,boundaryElement:_,isKeyboardDismissDisabled:F,shouldCloseOnInteractOutside:O,motionProps:P,className:M,classNames:L,onClose:B,...U}=l,z=(0,tF.gy)(d),V=(0,a.useRef)(null),W=(0,a.useRef)(!1),j=p||V,H=null!=(n=null!=(t=e.disableAnimation)?t:null==s?void 0:s.disableAnimation)&&n,K=function(e){let[t,n]=(0,o.z)(e.isOpen,e.defaultOpen||!1,e.onOpenChange),r=(0,a.useCallback)(()=>{n(!0)},[n]),i=(0,a.useCallback)(()=>{n(!1)},[n]),s=(0,a.useCallback)(()=>{n(!t)},[n,t]);return{isOpen:t,setOpen:n,open:r,close:i,toggle:s}}({isOpen:y,defaultOpen:m,onOpenChange:e=>{null==b||b(e),e||null==B||B()}}),G=f||K,{popoverProps:X,underlayProps:q,placement:Y}=function(e,t){let{triggerRef:n,popoverRef:r,showArrow:i,offset:o=7,crossOffset:s=0,scrollRef:l,shouldFlip:u,boundaryElement:c,isDismissable:d=!0,shouldCloseOnBlur:h=!0,placement:f="top",containerPadding:p,shouldCloseOnInteractOutside:g,isNonModal:m,isKeyboardDismissDisabled:b,updatePositionDeps:y=[],...v}=e,x=null==m||m,{overlayProps:w,underlayProps:k}=function(e,t){let{onClose:n,shouldCloseOnBlur:r,isOpen:i,isDismissable:o=!1,isKeyboardDismissDisabled:s=!1,shouldCloseOnInteractOutside:l}=e;(0,a.useEffect)(()=>(i&&tc.push(t),()=>{let e=tc.indexOf(t);e>=0&&tc.splice(e,1)}),[i,t]);let u=()=>{tc[tc.length-1]===t&&n&&n()};!function(e){let{ref:t,onInteractOutside:n,isDisabled:r,onInteractOutsideStart:i}=e,o=(0,a.useRef)({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),s=(0,ts.i)(e=>{n&&tl(e,t)&&(i&&i(e),o.current.isPointerDown=!0)}),l=(0,ts.i)(e=>{n&&n(e)});(0,a.useEffect)(()=>{let e=o.current;if(r)return;let n=ev(t.current);if("undefined"!=typeof PointerEvent){let r=n=>{e.isPointerDown&&tl(n,t)&&l(n),e.isPointerDown=!1};return n.addEventListener("pointerdown",s,!0),n.addEventListener("pointerup",r,!0),()=>{n.removeEventListener("pointerdown",s,!0),n.removeEventListener("pointerup",r,!0)}}{let r=n=>{e.ignoreEmulatedMouseEvents?e.ignoreEmulatedMouseEvents=!1:e.isPointerDown&&tl(n,t)&&l(n),e.isPointerDown=!1},i=n=>{e.ignoreEmulatedMouseEvents=!0,e.isPointerDown&&tl(n,t)&&l(n),e.isPointerDown=!1};return n.addEventListener("mousedown",s,!0),n.addEventListener("mouseup",r,!0),n.addEventListener("touchstart",s,!0),n.addEventListener("touchend",i,!0),()=>{n.removeEventListener("mousedown",s,!0),n.removeEventListener("mouseup",r,!0),n.removeEventListener("touchstart",s,!0),n.removeEventListener("touchend",i,!0)}}},[t,r,s,l])}({ref:t,onInteractOutside:o&&i?e=>{(!l||l(e.target))&&(tc[tc.length-1]===t&&(e.stopPropagation(),e.preventDefault()),u())}:null,onInteractOutsideStart:e=>{(!l||l(e.target))&&tc[tc.length-1]===t&&(e.stopPropagation(),e.preventDefault())}});let{focusWithinProps:c}=(0,tu.L)({isDisabled:!r,onBlurWithin:e=>{!(!e.relatedTarget||e8(e.relatedTarget,eJ))&&(!l||l(e.relatedTarget))&&n()}});return{overlayProps:{onKeyDown:e=>{"Escape"!==e.key||s||e.nativeEvent.isComposing||(e.stopPropagation(),e.preventDefault(),u())},...c},underlayProps:{onPointerDown:e=>{e.target===e.currentTarget&&e.preventDefault()}}}}({isOpen:t.isOpen,onClose:t.close,shouldCloseOnBlur:h,isDismissable:d,isKeyboardDismissDisabled:b,shouldCloseOnInteractOutside:g||(e=>ep(e,n,t))},r),{overlayProps:E,arrowProps:I,placement:S,updatePosition:T}=function(e){let{direction:t}=(0,tN.j)(),{arrowSize:n=0,targetRef:r,overlayRef:i,scrollRef:o=i,placement:s="bottom",containerPadding:l=12,shouldFlip:u=!0,boundaryElement:c="undefined"!=typeof document?document.body:null,offset:d=0,crossOffset:h=0,shouldUpdatePosition:f=!0,isOpen:p=!0,onClose:g,maxHeight:m,arrowBoundaryOffset:b=0}=e,[y,v]=(0,a.useState)({position:{},arrowOffsetLeft:void 0,arrowOffsetTop:void 0,maxHeight:void 0,placement:void 0}),x=[f,s,i.current,r.current,o.current,l,u,c,d,h,p,t,m,b,n],w=(0,a.useRef)(null==tA?void 0:tA.scale);(0,a.useEffect)(()=>{p&&(w.current=null==tA?void 0:tA.scale)},[p]);let k=(0,a.useCallback)(()=>{var e,a;if(!1===f||!p||!i.current||!r.current||!o.current||!c||(null==tA?void 0:tA.scale)!==w.current)return;let g=i.current;!m&&i.current&&(g.style.top="0px",g.style.bottom="",g.style.maxHeight=(null!==(a=null===(e=window.visualViewport)||void 0===e?void 0:e.height)&&void 0!==a?a:window.innerHeight)+"px");let y=function(e){let t,{placement:n,targetNode:r,overlayNode:i,scrollNode:a,padding:o,shouldFlip:s,boundaryElement:l,offset:u,crossOffset:c,maxHeight:d,arrowSize:h=0,arrowBoundaryOffset:f=0}=e,p=i instanceof HTMLElement?function(e){let t=e.offsetParent;if(t&&t===document.body&&"static"===window.getComputedStyle(t).position&&!tT(t)&&(t=document.documentElement),null==t)for(t=e.parentElement;t&&!tT(t);)t=t.parentElement;return t||document.documentElement}(i):document.documentElement,g=p===document.documentElement,m=window.getComputedStyle(p).position,b=g?tI(r):tS(r,p);if(!g){let{marginTop:e,marginLeft:t}=window.getComputedStyle(r);b.top+=parseInt(e,10)||0,b.left+=parseInt(t,10)||0}let y=tI(i),v={top:parseInt((t=window.getComputedStyle(i)).marginTop,10)||0,bottom:parseInt(t.marginBottom,10)||0,left:parseInt(t.marginLeft,10)||0,right:parseInt(t.marginRight,10)||0};y.width+=v.left+v.right,y.height+=v.top+v.bottom;let x={top:a.scrollTop,left:a.scrollLeft,width:a.scrollWidth,height:a.scrollHeight},w=tv(l),k=tv(p),E="BODY"===l.tagName?tI(p):tS(p,l);return"HTML"===p.tagName&&"BODY"===l.tagName&&(k.scroll.top=0,k.scroll.left=0),function(e,t,n,r,i,a,o,s,l,u,c,d,h,f,p,g){let m=tw(e),{size:b,crossAxis:y,crossSize:v,placement:x,crossPlacement:w}=m,k=tk(t,s,n,m,c,d,u,h,p,g),E=c,I=tE(s,u,t,i,a+c,m);if(o&&r[b]>I){let e=tw(`${tf[x]} ${w}`),r=tk(t,s,n,e,c,d,u,h,p,g);tE(s,u,t,i,a+c,e)>I&&(m=e,k=r,E=c)}let S="bottom";"top"===m.axis?"top"===m.placement?S="top":"bottom"===m.placement&&(S="bottom"):"top"===m.crossAxis&&("top"===m.crossPlacement?S="bottom":"bottom"===m.crossPlacement&&(S="top"));let T=tx(y,k[y],n[v],s,l,a,u);k[y]+=T;let C=function(e,t,n,r,i,a,o,s){let l=r?n.height:t[tm.height],u=null!=e.top?n.top+e.top:n.top+(l-e.bottom-o),c="top"!==s?Math.max(0,t.height+t.top+t.scroll.top-u-(i.top+i.bottom+a)):Math.max(0,u+o-(t.top+t.scroll.top)-(i.top+i.bottom+a));return Math.min(t.height-2*a,c)}(k,s,u,h,i,a,n.height,S);f&&f<C&&(C=f),n.height=Math.min(n.height,C),T=tx(y,(k=tk(t,s,n,m,E,d,u,h,p,g))[y],n[v],s,l,a,u),k[y]+=T;let N={},A=t[y]+.5*t[v]-k[y],R=p/2+g,D=n[v]-p/2-g,$=td(A,t[y]-k[y]+p/2,t[y]+t[v]-k[y]-p/2);return N[y]=td($,R,D),{position:k,maxHeight:C,arrowOffsetLeft:N.left,arrowOffsetTop:N.top,placement:m.placement}}(n,b,y,x,v,o,s,w,k,E,u,c,!!m&&"static"!==m,d,h,f)}({placement:"rtl"===t?s.replace("start","right").replace("end","left"):s.replace("start","left").replace("end","right"),overlayNode:i.current,targetNode:r.current,scrollNode:o.current,padding:l,shouldFlip:u,boundaryElement:c,offset:d,crossOffset:h,maxHeight:m,arrowSize:n,arrowBoundaryOffset:b});g.style.top="",g.style.bottom="",Object.keys(y.position).forEach(e=>g.style[e]=y.position[e]+"px"),g.style.maxHeight=null!=y.maxHeight?y.maxHeight+"px":void 0,v(y)},x);(0,eq.b)(k,x),(0,eq.b)(()=>(window.addEventListener("resize",k,!1),()=>{window.removeEventListener("resize",k,!1)}),[k]),function(e){let{ref:t,box:n,onResize:r}=e;(0,a.useEffect)(()=>{let e=null==t?void 0:t.current;if(e){if(!(void 0!==window.ResizeObserver))return window.addEventListener("resize",r,!1),()=>{window.removeEventListener("resize",r,!1)};{let t=new window.ResizeObserver(e=>{e.length&&r()});return t.observe(e,{box:n}),()=>{e&&t.unobserve(e)}}}},[r,t,n])}({ref:i,onResize:k});let E=(0,a.useRef)(!1);(0,eq.b)(()=>{let e;let t=()=>{E.current=!0,clearTimeout(e),e=setTimeout(()=>{E.current=!1},500),k()},n=()=>{E.current&&t()};return null==tA||tA.addEventListener("resize",t),null==tA||tA.addEventListener("scroll",n),()=>{null==tA||tA.removeEventListener("resize",t),null==tA||tA.removeEventListener("scroll",n)}},[k]);let I=(0,a.useCallback)(()=>{E.current||g()},[g,E]);return!function(e){let{triggerRef:t,isOpen:n,onClose:r}=e;(0,a.useEffect)(()=>{if(!n||null===r)return;let e=e=>{let n=e.target;if(!t.current||n instanceof Node&&!n.contains(t.current))return;let i=r||tC.get(t.current);i&&i()};return window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("scroll",e,!0)}},[n,r,t])}({triggerRef:r,isOpen:p,onClose:g&&I}),{overlayProps:{style:{position:"absolute",zIndex:1e5,...y.position,maxHeight:y.maxHeight}},placement:y.placement,arrowProps:{"aria-hidden":"true",role:"presentation",style:{left:y.arrowOffsetLeft,top:y.arrowOffsetTop}},updatePosition:k}}({...v,shouldFlip:u,crossOffset:s,targetRef:n,overlayRef:r,isOpen:t.isOpen,scrollRef:l,boundaryElement:c,containerPadding:p,placement:(0,tR.Yx)(f),offset:i?o+3:o,onClose:x?t.close:()=>{}});return(0,t_.G)(()=>{y.length&&T()},y),(0,a.useEffect)(()=>{if(t.isOpen&&!x&&r.current)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,n=new Set(e),r=new Set,i=e=>{for(let t of e.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))n.add(t);let t=e=>{let t=e.parentElement;if(n.has(e)||r.has(t)&&"row"!==t.getAttribute("role"))return NodeFilter.FILTER_REJECT;for(let t of n)if(e.contains(t))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:t}),o=t(e);if(o===NodeFilter.FILTER_ACCEPT&&a(e),o!==NodeFilter.FILTER_REJECT){let e=i.nextNode();for(;null!=e;)a(e),e=i.nextNode()}},a=e=>{var t;let n=null!=(t=tD.get(e))?t:0;("true"!==e.getAttribute("aria-hidden")||0!==n)&&(0===n&&e.setAttribute("aria-hidden","true"),r.add(e),tD.set(e,n+1))};t$.length&&t$[t$.length-1].disconnect(),i(t);let o=new MutationObserver(e=>{for(let t of e)if("childList"===t.type&&0!==t.addedNodes.length&&![...n,...r].some(e=>e.contains(t.target))){for(let e of t.removedNodes)e instanceof Element&&(n.delete(e),r.delete(e));for(let e of t.addedNodes)(e instanceof HTMLElement||e instanceof SVGElement)&&("true"===e.dataset.liveAnnouncer||"true"===e.dataset.reactAriaTopLayer)?n.add(e):e instanceof Element&&i(e)}});o.observe(t,{childList:!0,subtree:!0});let s={observe(){o.observe(t,{childList:!0,subtree:!0})},disconnect(){o.disconnect()}};return t$.push(s),()=>{for(let e of(o.disconnect(),r)){let t=tD.get(e);null!=t&&(1===t?(e.removeAttribute("aria-hidden"),tD.delete(e)):tD.set(e,t-1))}s===t$[t$.length-1]?(t$.pop(),t$.length&&t$[t$.length-1].observe()):t$.splice(t$.indexOf(s),1)}}([r.current])},[x,t.isOpen,r]),{popoverProps:(0,eg.d)(w,E),arrowProps:I,underlayProps:k,placement:S}}({triggerRef:j,isNonModal:v,popoverRef:z,placement:N,offset:D,scrollRef:g,isDismissable:E,shouldCloseOnBlur:I,boundaryElement:_,crossOffset:$,shouldFlip:x,containerPadding:w,updatePositionDeps:T,isKeyboardDismissDisabled:F,shouldCloseOnInteractOutside:O},G),{triggerProps:Q}=function(e,t,n){let r,{type:i}=e,{isOpen:o}=t;(0,a.useEffect)(()=>{n&&n.current&&tC.set(n.current,t.close)}),"menu"===i?r=!0:"listbox"===i&&(r="listbox");let s=(0,tP.Me)();return{triggerProps:{"aria-haspopup":r,"aria-expanded":o,"aria-controls":o?s:null,onPress:t.toggle},overlayProps:{id:s}}}({type:A},G,j),{isFocusVisible:J,isFocused:Z,focusProps:ee}=(0,tO.F)(),et=(0,a.useMemo)(()=>tz({...u}),[(0,tV.Xx)(u)]),en=(0,ed.W)(null==L?void 0:L.base,M),er=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"data-slot":"content","data-open":(0,eh.PB)(G.isOpen),"data-arrow":(0,eh.PB)(R),"data-placement":(0,tR.sK)(Y,N),className:et.content({class:(0,ed.W)(null==L?void 0:L.content,e.className)})}},[et,G.isOpen,R,Y,N,L]),ei=(0,a.useMemo)(()=>(0,tR.Yv)(Y,N)&&Y||N,[Y,N]),ea=(0,a.useCallback)(t=>{var n;let r;return"touch"===t.pointerType&&((null==e?void 0:e.backdrop)==="blur"||(null==e?void 0:e.backdrop)==="opaque")?r=setTimeout(()=>{W.current=!0},100):W.current=!0,null==(n=Q.onPress)||n.call(Q,t),()=>{clearTimeout(r)}},[null==Q?void 0:Q.onPress]),eo=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{isDisabled:n,...r}=e;return{"data-slot":"trigger",...(0,eg.d)({"aria-haspopup":"dialog"},Q,r),onPress:ea,isDisabled:n,className:et.trigger({class:(0,ed.W)(null==L?void 0:L.trigger,e.className),isTriggerDisabled:n}),ref:function(...e){return 1===e.length?e[0]:t=>{for(let n of e)"function"==typeof n?n(t):null!=n&&(n.current=t)}}(t,j)}},[G,Q,ea,j]),es=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"data-slot":"backdrop",className:et.backdrop({class:null==L?void 0:L.backdrop}),onClick:e=>{if(!W.current){e.preventDefault();return}G.close(),W.current=!1},...q,...e}},[et,G.isOpen,L,q]);return(0,a.useEffect)(()=>{if(G.isOpen&&(null==z?void 0:z.current))return function(e,t=document.body){let n=new Set(e),r=new Set,i=e=>{for(let t of e.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))n.add(t);let t=e=>{if(n.has(e)||r.has(e.parentElement)&&"row"!==e.parentElement.getAttribute("role"))return NodeFilter.FILTER_REJECT;for(let t of n)if(e.contains(t))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:t}),o=t(e);if(o===NodeFilter.FILTER_ACCEPT&&a(e),o!==NodeFilter.FILTER_REJECT){let e=i.nextNode();for(;null!=e;)a(e),e=i.nextNode()}},a=e=>{var t;let n=null!==(t=tM.get(e))&&void 0!==t?t:0;("true"!==e.getAttribute("aria-hidden")||0!==n)&&(0===n&&e.setAttribute("aria-hidden","true"),r.add(e),tM.set(e,n+1))};tL.length&&tL[tL.length-1].disconnect(),i(t);let o=new MutationObserver(e=>{for(let t of e)if("childList"===t.type&&0!==t.addedNodes.length&&![...n,...r].some(e=>e.contains(t.target))){for(let e of t.removedNodes)e instanceof Element&&(n.delete(e),r.delete(e));for(let e of t.addedNodes)(e instanceof HTMLElement||e instanceof SVGElement)&&("true"===e.dataset.liveAnnouncer||"true"===e.dataset.reactAriaTopLayer)?n.add(e):e instanceof Element&&i(e)}});o.observe(t,{childList:!0,subtree:!0});let s={observe(){o.observe(t,{childList:!0,subtree:!0})},disconnect(){o.disconnect()}};return tL.push(s),()=>{for(let e of(o.disconnect(),r)){let t=tM.get(e);1===t?(e.removeAttribute("aria-hidden"),tM.delete(e)):tM.set(e,t-1)}s===tL[tL.length-1]?(tL.pop(),tL.length&&tL[tL.length-1].observe()):tL.splice(tL.indexOf(s),1)}}([null==z?void 0:z.current])},[G.isOpen,z]),{state:G,Component:c||"div",children:h,classNames:L,showArrow:R,triggerRef:j,placement:ei,isNonModal:v,popoverRef:z,portalContainer:S,isOpen:G.isOpen,onClose:G.close,disableAnimation:H,shouldBlockScroll:k,backdrop:null!=(r=e.backdrop)?r:"transparent",motionProps:P,getBackdropProps:es,getPopoverProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:z,...(0,eg.d)(X,U,e),style:(0,eg.d)(X.style,U.style,e.style)}},getTriggerProps:eo,getDialogProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"data-slot":"base","data-open":(0,eh.PB)(G.isOpen),"data-focus":(0,eh.PB)(Z),"data-arrow":(0,eh.PB)(R),"data-focus-visible":(0,eh.PB)(J),"data-placement":(0,tR.sK)(Y,N),...(0,eg.d)(ee,C,e),className:et.base({class:(0,ed.W)(en)}),style:{outline:"none"}}},getContentProps:er}}({...r,ref:t}),[l,u]=a.Children.toArray(n),c=(0,tQ.jsx)(tq,{portalContainer:s.portalContainer,children:u});return(0,tQ.jsxs)(ey.H,{value:s,children:[l,s.disableAnimation&&s.isOpen?c:(0,tQ.jsx)(tY.M,{children:s.isOpen?c:null})]})});tJ.displayName="NextUI.Popover";var tZ=e=>{let{children:t,...n}=e,c=function(e){var t;let n=(0,i.w)(),{as:r,triggerRef:c,isOpen:d,defaultOpen:h,onOpenChange:p,isDisabled:g,type:m="menu",trigger:b="press",placement:y="bottom",closeOnSelect:x=!0,shouldBlockScroll:E=!0,classNames:I,disableAnimation:S=null!=(t=null==n?void 0:n.disableAnimation)&&t,onClose:T,className:C,...N}=e,$=(0,a.useRef)(null),_=c||$,F=(0,a.useRef)(null),P=(0,a.useRef)(null),V=function(e){let t=function(e){let[t,n]=(0,o.z)(e.isOpen,e.defaultOpen||!1,e.onOpenChange),r=(0,a.useCallback)(()=>{n(!0)},[n]),i=(0,a.useCallback)(()=>{n(!1)},[n]),s=(0,a.useCallback)(()=>{n(!t)},[n,t]);return{isOpen:t,setOpen:n,open:r,close:i,toggle:s}}(e),[n,r]=(0,a.useState)(null),[i,s]=(0,a.useState)([]),l=()=>{s([]),t.close()};return{focusStrategy:n,...t,open(e=null){r(e),t.open()},toggle(e=null){r(e),t.toggle()},close(){l()},expandedKeysStack:i,openSubmenu:(e,t)=>{s(n=>t>n.length?n:[...n.slice(0,t),e])},closeSubmenu:(e,t)=>{s(n=>n[t]===e?n.slice(0,t):n)}}}({trigger:b,isOpen:d,defaultOpen:h,onOpenChange:e=>{null==p||p(e),e||null==T||T()}}),{menuTriggerProps:H,menuProps:er}=function(e,t,n){var r;let{type:i="menu",isDisabled:o,trigger:c="press"}=e,d=(0,l.Me)(),{triggerProps:h,overlayProps:p}=function(e,t,n){let r,{type:i}=e,{isOpen:o}=t;(0,a.useEffect)(()=>{n&&n.current&&es.set(n.current,t.close)}),"menu"===i?r=!0:"listbox"===i&&(r="listbox");let s=(0,l.Me)();return{triggerProps:{"aria-haspopup":r,"aria-expanded":o,"aria-controls":o?s:void 0,onPress:t.toggle},overlayProps:{id:s}}}({type:i},t,n),{longPressProps:g}=function(e){let{isDisabled:t,onLongPressStart:n,onLongPressEnd:r,onLongPress:i,threshold:o=500,accessibilityDescription:s}=e,l=(0,a.useRef)(void 0),{addGlobalListener:u,removeGlobalListener:c}=B(),{pressProps:d}=function(e){let{onPress:t,onPressChange:n,onPressStart:r,onPressEnd:i,onPressUp:o,isDisabled:s,isPressed:l,preventFocusOnPress:u,shouldCancelOnPointerExit:c,allowTextSelectionOnPress:d,ref:h,...p}=function(e){var t;let n=(0,a.useContext)(D);if(n){let{register:t,...r}=n;e=M(r,e),t()}return t=e.ref,(0,L.b)(()=>{if(n&&n.ref&&t)return n.ref.current=t.current,()=>{n.ref&&(n.ref.current=null)}}),e}(e),[g,m]=(0,a.useState)(!1),b=(0,a.useRef)({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:y,removeAllGlobalListeners:x}=B(),E=U((e,t)=>{let i=b.current;if(s||i.didFirePressStart)return!1;let a=!0;if(i.isTriggeringEvent=!0,r){let n=new K("pressstart",t,e);r(n),a=n.shouldStopPropagation}return n&&n(!0),i.isTriggeringEvent=!1,i.didFirePressStart=!0,m(!0),a}),I=U((e,r,a=!0)=>{let o=b.current;if(!o.didFirePressStart)return!1;o.ignoreClickAfterPress=!0,o.didFirePressStart=!1,o.isTriggeringEvent=!0;let l=!0;if(i){let t=new K("pressend",r,e);i(t),l=t.shouldStopPropagation}if(n&&n(!1),m(!1),t&&a&&!s){let n=new K("press",r,e);t(n),l&&(l=n.shouldStopPropagation)}return o.isTriggeringEvent=!1,l}),S=U((e,t)=>{let n=b.current;if(s)return!1;if(o){n.isTriggeringEvent=!0;let r=new K("pressup",t,e);return o(r),n.isTriggeringEvent=!1,r.shouldStopPropagation}return!0}),T=U(e=>{let t=b.current;t.isPressed&&t.target&&(t.isOverTarget&&null!=t.pointerType&&I(J(t.target,e),t.pointerType,!1),t.isPressed=!1,t.isOverTarget=!1,t.activePointerId=null,t.pointerType=null,x(),d||R(t.target))}),C=U(e=>{c&&T(e)}),N=(0,a.useMemo)(()=>{let e=b.current,t={onKeyDown(t){if(q(t.nativeEvent,t.currentTarget)&&t.currentTarget.contains(t.target)){var r;en(t.target,t.key)&&t.preventDefault();let i=!0;if(!e.isPressed&&!t.repeat){e.target=t.currentTarget,e.isPressed=!0,i=E(t,"keyboard");let r=t.currentTarget;y(w(t.currentTarget),"keyup",O(t=>{q(t,r)&&!t.repeat&&r.contains(t.target)&&e.target&&S(J(e.target,t),"keyboard")},n),!0)}i&&t.stopPropagation(),t.metaKey&&f()&&(null===(r=e.metaKeyEvents)||void 0===r||r.set(t.key,t.nativeEvent))}else"Meta"===t.key&&(e.metaKeyEvents=new Map)},onClick(t){if((!t||t.currentTarget.contains(t.target))&&t&&0===t.button&&!e.isTriggeringEvent&&!W.isOpening){let n=!0;if(s&&t.preventDefault(),!e.ignoreClickAfterPress&&!e.ignoreEmulatedMouseEvents&&!e.isPressed&&("virtual"===e.pointerType||j(t.nativeEvent))){s||u||z(t.currentTarget);let e=E(t,"virtual"),r=S(t,"virtual"),i=I(t,"virtual");n=e&&r&&i}e.ignoreEmulatedMouseEvents=!1,e.ignoreClickAfterPress=!1,n&&t.stopPropagation()}}},n=t=>{var n,r,i;if(e.isPressed&&e.target&&q(t,e.target)){en(t.target,t.key)&&t.preventDefault();let n=t.target;I(J(e.target,t),"keyboard",e.target.contains(n)),x(),"Enter"!==t.key&&X(e.target)&&e.target.contains(n)&&!t[G]&&(t[G]=!0,W(e.target,t,!1)),e.isPressed=!1,null===(r=e.metaKeyEvents)||void 0===r||r.delete(t.key)}else if("Meta"===t.key&&(null===(n=e.metaKeyEvents)||void 0===n?void 0:n.size)){let t=e.metaKeyEvents;for(let n of(e.metaKeyEvents=void 0,t.values()))null===(i=e.target)||void 0===i||i.dispatchEvent(new KeyboardEvent("keyup",n))}};if("undefined"!=typeof PointerEvent){t.onPointerDown=t=>{var i;if(0!==t.button||!t.currentTarget.contains(t.target))return;if(i=t.nativeEvent,!v()&&0===i.width&&0===i.height||1===i.width&&1===i.height&&0===i.pressure&&0===i.detail&&"mouse"===i.pointerType){e.pointerType="virtual";return}ee(t.currentTarget)&&t.preventDefault(),e.pointerType=t.pointerType;let o=!0;e.isPressed||(e.isPressed=!0,e.isOverTarget=!0,e.activePointerId=t.pointerId,e.target=t.currentTarget,s||u||z(t.currentTarget),d||A(e.target),o=E(t,e.pointerType),y(w(t.currentTarget),"pointermove",n,!1),y(w(t.currentTarget),"pointerup",r,!1),y(w(t.currentTarget),"pointercancel",a,!1)),o&&t.stopPropagation()},t.onMouseDown=e=>{e.currentTarget.contains(e.target)&&0===e.button&&(ee(e.currentTarget)&&e.preventDefault(),e.stopPropagation())},t.onPointerUp=t=>{t.currentTarget.contains(t.target)&&"virtual"!==e.pointerType&&0===t.button&&Z(t,t.currentTarget)&&S(t,e.pointerType||t.pointerType)};let n=t=>{t.pointerId===e.activePointerId&&(e.target&&Z(t,e.target)?e.isOverTarget||null==e.pointerType||(e.isOverTarget=!0,E(J(e.target,t),e.pointerType)):e.target&&e.isOverTarget&&null!=e.pointerType&&(e.isOverTarget=!1,I(J(e.target,t),e.pointerType,!1),C(t)))},r=t=>{t.pointerId===e.activePointerId&&e.isPressed&&0===t.button&&e.target&&(Z(t,e.target)&&null!=e.pointerType?I(J(e.target,t),e.pointerType):e.isOverTarget&&null!=e.pointerType&&I(J(e.target,t),e.pointerType,!1),e.isPressed=!1,e.isOverTarget=!1,e.activePointerId=null,e.pointerType=null,x(),d||R(e.target),"ontouchend"in e.target&&"mouse"!==t.pointerType&&y(e.target,"touchend",i,{once:!0}))},i=e=>{et(e.currentTarget)&&e.preventDefault()},a=e=>{T(e)};t.onDragStart=e=>{e.currentTarget.contains(e.target)&&T(e)}}else{t.onMouseDown=t=>{if(0===t.button&&t.currentTarget.contains(t.target)){if(ee(t.currentTarget)&&t.preventDefault(),e.ignoreEmulatedMouseEvents){t.stopPropagation();return}e.isPressed=!0,e.isOverTarget=!0,e.target=t.currentTarget,e.pointerType=j(t.nativeEvent)?"virtual":"mouse",s||u||z(t.currentTarget),E(t,e.pointerType)&&t.stopPropagation(),y(w(t.currentTarget),"mouseup",n,!1)}},t.onMouseEnter=t=>{if(!t.currentTarget.contains(t.target))return;let n=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&null!=e.pointerType&&(e.isOverTarget=!0,n=E(t,e.pointerType)),n&&t.stopPropagation()},t.onMouseLeave=t=>{if(!t.currentTarget.contains(t.target))return;let n=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&null!=e.pointerType&&(e.isOverTarget=!1,n=I(t,e.pointerType,!1),C(t)),n&&t.stopPropagation()},t.onMouseUp=t=>{t.currentTarget.contains(t.target)&&!e.ignoreEmulatedMouseEvents&&0===t.button&&S(t,e.pointerType||"mouse")};let n=t=>{if(0===t.button){if(e.isPressed=!1,x(),e.ignoreEmulatedMouseEvents){e.ignoreEmulatedMouseEvents=!1;return}e.target&&Z(t,e.target)&&null!=e.pointerType?I(J(e.target,t),e.pointerType):e.target&&e.isOverTarget&&null!=e.pointerType&&I(J(e.target,t),e.pointerType,!1),e.isOverTarget=!1}};t.onTouchStart=t=>{if(!t.currentTarget.contains(t.target))return;let n=function(e){let{targetTouches:t}=e;return t.length>0?t[0]:null}(t.nativeEvent);n&&(e.activePointerId=n.identifier,e.ignoreEmulatedMouseEvents=!0,e.isOverTarget=!0,e.isPressed=!0,e.target=t.currentTarget,e.pointerType="touch",s||u||z(t.currentTarget),d||A(e.target),E(Q(e.target,t),e.pointerType)&&t.stopPropagation(),y(k(t.currentTarget),"scroll",r,!0))},t.onTouchMove=t=>{if(!t.currentTarget.contains(t.target))return;if(!e.isPressed){t.stopPropagation();return}let n=Y(t.nativeEvent,e.activePointerId),r=!0;n&&Z(n,t.currentTarget)?e.isOverTarget||null==e.pointerType||(e.isOverTarget=!0,r=E(Q(e.target,t),e.pointerType)):e.isOverTarget&&null!=e.pointerType&&(e.isOverTarget=!1,r=I(Q(e.target,t),e.pointerType,!1),C(Q(e.target,t))),r&&t.stopPropagation()},t.onTouchEnd=t=>{if(!t.currentTarget.contains(t.target))return;if(!e.isPressed){t.stopPropagation();return}let n=Y(t.nativeEvent,e.activePointerId),r=!0;n&&Z(n,t.currentTarget)&&null!=e.pointerType?(S(Q(e.target,t),e.pointerType),r=I(Q(e.target,t),e.pointerType)):e.isOverTarget&&null!=e.pointerType&&(r=I(Q(e.target,t),e.pointerType,!1)),r&&t.stopPropagation(),e.isPressed=!1,e.activePointerId=null,e.isOverTarget=!1,e.ignoreEmulatedMouseEvents=!0,e.target&&!d&&R(e.target),x()},t.onTouchCancel=t=>{t.currentTarget.contains(t.target)&&(t.stopPropagation(),e.isPressed&&T(Q(e.target,t)))};let r=t=>{e.isPressed&&t.target.contains(e.target)&&T({currentTarget:e.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};t.onDragStart=e=>{e.currentTarget.contains(e.target)&&T(e)}}return t},[y,s,u,x,d,T,C,I,E,S]);return(0,a.useEffect)(()=>()=>{var e;d||R(null!==(e=b.current.target)&&void 0!==e?e:void 0)},[d]),{isPressed:l||g,pressProps:M(p,N)}}({isDisabled:t,onPressStart(e){if(e.continuePropagation(),("mouse"===e.pointerType||"touch"===e.pointerType)&&(n&&n({...e,type:"longpressstart"}),l.current=setTimeout(()=>{e.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),i&&i({...e,type:"longpress"}),l.current=void 0},o),"touch"===e.pointerType)){let t=e=>{e.preventDefault()};u(e.target,"contextmenu",t,{once:!0}),u(window,"pointerup",()=>{setTimeout(()=>{c(e.target,"contextmenu",t)},30)},{once:!0})}},onPressEnd(e){l.current&&clearTimeout(l.current),r&&("mouse"===e.pointerType||"touch"===e.pointerType)&&r({...e,type:"longpressend"})}});return{longPressProps:M(d,function(e){let[t,n]=(0,a.useState)();return(0,L.b)(()=>{if(!e)return;let t=eo.get(e);if(t)n(t.element.id);else{let r=`react-aria-description-${ea++}`;n(r);let i=document.createElement("div");i.id=r,i.style.display="none",i.textContent=e,document.body.appendChild(i),t={refCount:0,element:i},eo.set(e,t)}return t.refCount++,()=>{t&&0==--t.refCount&&(t.element.remove(),eo.delete(e))}},[e]),{"aria-describedby":e?t:void 0}}(i&&!t?s:void 0))}}({isDisabled:o||"longPress"!==c,accessibilityDescription:(0,u.q)((r=s)&&r.__esModule?r.default:r,"@react-aria/menu").format("longPressMessage"),onLongPressStart(){t.close()},onLongPress(){t.open("first")}});return delete h.onPress,{menuTriggerProps:{...h,..."press"===c?{onPressStart(e){"touch"===e.pointerType||"keyboard"===e.pointerType||o||t.open("virtual"===e.pointerType?"first":null)},onPress(e){"touch"!==e.pointerType||o||t.toggle()}}:g,id:d,onKeyDown:e=>{if(!o&&("longPress"!==c||e.altKey)&&n&&n.current)switch(e.key){case"Enter":case" ":if("longPress"===c)return;case"ArrowDown":"continuePropagation"in e||e.stopPropagation(),e.preventDefault(),t.toggle("first");break;case"ArrowUp":"continuePropagation"in e||e.stopPropagation(),e.preventDefault(),t.toggle("last");break;default:"continuePropagation"in e&&e.continuePropagation()}}},menuProps:{...p,"aria-labelledby":d,autoFocus:t.focusStrategy||!0,onClose:t.close}}}({type:m,trigger:b,isDisabled:g},V,_),ei=(0,a.useMemo)(()=>ec({className:C}),[C]),el=e=>{(void 0===e||e)&&x&&V.close()};return{Component:r||"div",menuRef:F,menuProps:er,classNames:ei,closeOnSelect:x,onClose:V.close,autoFocus:V.focusStrategy||!0,disableAnimation:S,getPopoverProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,eg.d)(N,e);return{state:V,placement:y,ref:P,disableAnimation:S,shouldBlockScroll:E,scrollRef:F,triggerRef:_,...t,classNames:{...I,...e.classNames,content:(0,ed.W)(ei,null==I?void 0:I.content,e.className)},shouldCloseOnInteractOutside:(null==t?void 0:t.shouldCloseOnInteractOutside)?t.shouldCloseOnInteractOutside:e=>ep(e,$,V)}},getMenuProps:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{ref:ef(t,F),menuProps:er,closeOnSelect:x,...(0,eg.d)(e,{onAction:(t,n)=>{el(eb(e,t,n))},onClose:V.close})}},getMenuTriggerProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{onPress:n,onPressStart:r,...i}=H;return{...(0,eg.d)(i,{isDisabled:g},e),ref:ef(t,$)}}}}(n),[d,h]=a.Children.toArray(t);return(0,tQ.jsx)(r.K,{value:c,children:(0,tQ.jsxs)(tJ,{...c.getPopoverProps(),children:[d,h]})})};tZ.displayName="NextUI.Dropdown";var t0=tZ},72164:function(e,t,n){"use strict";n.d(t,{a:function(){return ig}});var r,i,a,o,s,l,u,c=n(26645),d=n(51885),h=n(2265),f=n(72243),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function g(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}"function"==typeof SuppressedError&&SuppressedError;var m="right-scroll-bar-position",b="width-before-scroll-bar";function y(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var v="undefined"!=typeof window?h.useLayoutEffect:h.useEffect,x=new WeakMap,w=(void 0===r&&(r={}),(void 0===i&&(i=function(e){return e}),a=[],o=!1,s={read:function(){if(o)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:null},useMedium:function(e){var t=i(e,o);return a.push(t),function(){a=a.filter(function(e){return e!==t})}},assignSyncMedium:function(e){for(o=!0;a.length;){var t=a;a=[],t.forEach(e)}a={push:function(t){return e(t)},filter:function(){return a}}},assignMedium:function(e){o=!0;var t=[];if(a.length){var n=a;a=[],n.forEach(e),t=a}var r=function(){var n=t;t=[],n.forEach(e)},i=function(){return Promise.resolve().then(r)};i(),a={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),a}}}}).options=p({async:!0,ssr:!1},r),s),k=function(){},E=h.forwardRef(function(e,t){var n,r,i,a,o=h.useRef(null),s=h.useState({onScrollCapture:k,onWheelCapture:k,onTouchMoveCapture:k}),l=s[0],u=s[1],c=e.forwardProps,d=e.children,f=e.className,m=e.removeScrollBar,b=e.enabled,E=e.shards,I=e.sideCar,S=e.noIsolation,T=e.inert,C=e.allowPinchZoom,N=e.as,A=e.gapMode,R=g(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=(n=[o,t],r=function(e){return n.forEach(function(t){return y(t,e)})},(i=(0,h.useState)(function(){return{value:null,callback:r,facade:{get current(){return i.value},set current(value){var e=i.value;e!==value&&(i.value=value,i.callback(value,e))}}}})[0]).callback=r,a=i.facade,v(function(){var e=x.get(a);if(e){var t=new Set(e),r=new Set(n),i=a.current;t.forEach(function(e){r.has(e)||y(e,null)}),r.forEach(function(e){t.has(e)||y(e,i)})}x.set(a,n)},[n]),a),$=p(p({},R),l);return h.createElement(h.Fragment,null,b&&h.createElement(I,{sideCar:w,removeScrollBar:m,shards:E,noIsolation:S,inert:T,setCallbacks:u,allowPinchZoom:!!C,lockRef:o,gapMode:A}),c?h.cloneElement(h.Children.only(d),p(p({},$),{ref:D})):h.createElement(void 0===N?"div":N,p({},$,{className:f,ref:D}),d))});E.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},E.classNames={fullWidth:b,zeroRight:m};var I=function(e){var t=e.sideCar,n=g(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw Error("Sidecar medium not found");return h.createElement(r,p({},n))};I.isSideCarExport=!0;var S=function(){var e=0,t=null;return{add:function(r){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=u||n.nc;return t&&e.setAttribute("nonce",t),e}())){var i,a;(i=t).styleSheet?i.styleSheet.cssText=r:i.appendChild(document.createTextNode(r)),a=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(a)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},T=function(){var e=S();return function(t,n){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},C=function(){var e=T();return function(t){return e(t.styles,t.dynamic),null}},N={left:0,top:0,right:0,gap:0},A=function(e){return parseInt(e||"",10)||0},R=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[A(n),A(r),A(i)]},D=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return N;var t=R(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},$=C(),_="data-scroll-locked",F=function(e,t,n,r){var i=e.left,a=e.top,o=e.right,s=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(s,"px ").concat(r,";\n  }\n  body[").concat(_,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(o,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(m," {\n    right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(b," {\n    margin-right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(m," .").concat(m," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(b," .").concat(b," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(_,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(s,"px;\n  }\n")},O=function(){var e=parseInt(document.body.getAttribute(_)||"0",10);return isFinite(e)?e:0},P=function(){h.useEffect(function(){return document.body.setAttribute(_,(O()+1).toString()),function(){var e=O()-1;e<=0?document.body.removeAttribute(_):document.body.setAttribute(_,e.toString())}},[])},M=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=void 0===r?"margin":r;P();var a=h.useMemo(function(){return D(i)},[i]);return h.createElement($,{styles:F(a,!t,i,n?"":"!important")})},L=!1;if("undefined"!=typeof window)try{var B=Object.defineProperty({},"passive",{get:function(){return L=!0,!0}});window.addEventListener("test",B,B),window.removeEventListener("test",B,B)}catch(e){L=!1}var U=!!L&&{passive:!1},z=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&"TEXTAREA"!==e.tagName&&"visible"===n[t])},V=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),W(e,r)){var i=j(e,r);if(i[1]>i[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},W=function(e,t){return"v"===e?z(t,"overflowY"):z(t,"overflowX")},j=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},H=function(e,t,n,r,i){var a,o=(a=window.getComputedStyle(t).direction,"h"===e&&"rtl"===a?-1:1),s=o*r,l=n.target,u=t.contains(l),c=!1,d=s>0,h=0,f=0;do{var p=j(e,l),g=p[0],m=p[1]-p[2]-o*g;(g||m)&&W(e,l)&&(h+=m,f+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!u&&l!==document.body||u&&(t.contains(l)||t===l));return d&&(i&&1>Math.abs(h)||!i&&s>h)?c=!0:!d&&(i&&1>Math.abs(f)||!i&&-s>f)&&(c=!0),c},K=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},G=function(e){return[e.deltaX,e.deltaY]},X=function(e){return e&&"current"in e?e.current:e},q=0,Y=[],Q=(l=function(e){var t=h.useRef([]),n=h.useRef([0,0]),r=h.useRef(),i=h.useState(q++)[0],a=h.useState(C)[0],o=h.useRef(e);h.useEffect(function(){o.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=(function(e,t,n){if(n||2==arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))})([e.lockRef.current],(e.shards||[]).map(X),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var s=h.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!o.current.allowPinchZoom;var i,a=K(e),s=n.current,l="deltaX"in e?e.deltaX:s[0]-a[0],u="deltaY"in e?e.deltaY:s[1]-a[1],c=e.target,d=Math.abs(l)>Math.abs(u)?"h":"v";if("touches"in e&&"h"===d&&"range"===c.type)return!1;var h=V(d,c);if(!h)return!0;if(h?i=d:(i="v"===d?"h":"v",h=V(d,c)),!h)return!1;if(!r.current&&"changedTouches"in e&&(l||u)&&(r.current=i),!i)return!0;var f=r.current||i;return H(f,t,e,"h"===f?l:u,!0)},[]),l=h.useCallback(function(e){if(Y.length&&Y[Y.length-1]===a){var n="deltaY"in e?G(e):K(e),r=t.current.filter(function(t){var r;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(r=t.delta)[0]===n[0]&&r[1]===n[1]})[0];if(r&&r.should){e.cancelable&&e.preventDefault();return}if(!r){var i=(o.current.shards||[]).map(X).filter(Boolean).filter(function(t){return t.contains(e.target)});(i.length>0?s(e,i[0]):!o.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),u=h.useCallback(function(e,n,r,i){var a={name:e,delta:n,target:r,should:i,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(r)};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),c=h.useCallback(function(e){n.current=K(e),r.current=void 0},[]),d=h.useCallback(function(t){u(t.type,G(t),t.target,s(t,e.lockRef.current))},[]),f=h.useCallback(function(t){u(t.type,K(t),t.target,s(t,e.lockRef.current))},[]);h.useEffect(function(){return Y.push(a),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,U),document.addEventListener("touchmove",l,U),document.addEventListener("touchstart",c,U),function(){Y=Y.filter(function(e){return e!==a}),document.removeEventListener("wheel",l,U),document.removeEventListener("touchmove",l,U),document.removeEventListener("touchstart",c,U)}},[]);var p=e.removeScrollBar,g=e.inert;return h.createElement(h.Fragment,null,g?h.createElement(a,{styles:"\n  .block-interactivity-".concat(i," {pointer-events: none;}\n  .allow-interactivity-").concat(i," {pointer-events: all;}\n")}):null,p?h.createElement(M,{gapMode:e.gapMode}):null)},w.useMedium(l),I),J=h.forwardRef(function(e,t){return h.createElement(E,p({},e,{ref:t,sideCar:Q}))});J.classNames=E.classNames;var Z={};Z={"ar-AE":{dismiss:`\u{62A}\u{62C}\u{627}\u{647}\u{644}`},"bg-BG":{dismiss:`\u{41E}\u{442}\u{445}\u{432}\u{44A}\u{440}\u{43B}\u{44F}\u{43D}\u{435}`},"cs-CZ":{dismiss:"Odstranit"},"da-DK":{dismiss:"Luk"},"de-DE":{dismiss:`Schlie\xdfen`},"el-GR":{dismiss:`\u{391}\u{3C0}\u{3CC}\u{3C1}\u{3C1}\u{3B9}\u{3C8}\u{3B7}`},"en-US":{dismiss:"Dismiss"},"es-ES":{dismiss:"Descartar"},"et-EE":{dismiss:`L\xf5peta`},"fi-FI":{dismiss:`Hylk\xe4\xe4`},"fr-FR":{dismiss:"Rejeter"},"he-IL":{dismiss:`\u{5D4}\u{5EA}\u{5E2}\u{5DC}\u{5DD}`},"hr-HR":{dismiss:"Odbaci"},"hu-HU":{dismiss:`Elutas\xedt\xe1s`},"it-IT":{dismiss:"Ignora"},"ja-JP":{dismiss:`\u{9589}\u{3058}\u{308B}`},"ko-KR":{dismiss:`\u{BB34}\u{C2DC}`},"lt-LT":{dismiss:"Atmesti"},"lv-LV":{dismiss:`Ner\u{101}d\u{12B}t`},"nb-NO":{dismiss:"Lukk"},"nl-NL":{dismiss:"Negeren"},"pl-PL":{dismiss:"Zignoruj"},"pt-BR":{dismiss:"Descartar"},"pt-PT":{dismiss:"Dispensar"},"ro-RO":{dismiss:"Revocare"},"ru-RU":{dismiss:`\u{41F}\u{440}\u{43E}\u{43F}\u{443}\u{441}\u{442}\u{438}\u{442}\u{44C}`},"sk-SK":{dismiss:`Zru\u{161}i\u{165}`},"sl-SI":{dismiss:"Opusti"},"sr-SP":{dismiss:"Odbaci"},"sv-SE":{dismiss:"Avvisa"},"tr-TR":{dismiss:"Kapat"},"uk-UA":{dismiss:`\u{421}\u{43A}\u{430}\u{441}\u{443}\u{432}\u{430}\u{442}\u{438}`},"zh-CN":{dismiss:`\u{53D6}\u{6D88}`},"zh-TW":{dismiss:`\u{95DC}\u{9589}`}};var ee=n(8153),et=n(73106),en=n(61994),er=n(10679);let ei={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"};function ea(e){let{children:t,elementType:n="div",isFocusable:r,style:i,...a}=e,{visuallyHiddenProps:o}=function(e={}){let{style:t,isFocusable:n}=e,[r,i]=(0,h.useState)(!1),{focusWithinProps:a}=(0,er.L)({isDisabled:!n,onFocusWithinChange:e=>i(e)}),o=(0,h.useMemo)(()=>r?t:t?{...ei,...t}:ei,[r]);return{visuallyHiddenProps:{...a,style:o}}}(e);return h.createElement(n,function(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let r=e[n];for(let e in r){let n=t[e],i=r[e];"function"==typeof n&&"function"==typeof i&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&90>=e.charCodeAt(2)?t[e]=function(...e){return(...t)=>{for(let n of e)"function"==typeof n&&n(...t)}}(n,i):("className"===e||"UNSAFE_className"===e)&&"string"==typeof n&&"string"==typeof i?t[e]=(0,en.Z)(n,i):"id"===e&&n&&i?t.id=(0,ee.ur)(n,i):t[e]=void 0!==i?i:n}}return t}(a,o),t)}function eo(e){var t;let{onDismiss:n,...r}=e,i=function(e,t){let{id:n,"aria-label":r,"aria-labelledby":i}=e;return n=(0,ee.Me)(n),i&&r?i=[...new Set([n,...i.trim().split(/\s+/)])].join(" "):i&&(i=i.trim().split(/\s+/).join(" ")),r||i||!t||(r=t),{id:n,"aria-label":r,"aria-labelledby":i}}(r,(0,et.q)((t=Z)&&t.__esModule?t.default:t,"@react-aria/overlays").format("dismiss"));return h.createElement(ea,null,h.createElement("button",{...i,tabIndex:-1,onClick:()=>{n&&n()},style:{width:1,height:1}}))}var es=[.36,.66,.4,1],el={scaleSpringOpacity:{initial:{opacity:0,transform:"scale(0.8)"},enter:{opacity:1,transform:"scale(1)",transition:{type:"spring",bounce:0,duration:.3}},exit:{opacity:0,transform:"scale(0.96)",transition:{type:"easeOut",bounce:0,duration:.15}}},fade:{enter:{opacity:1,transition:{duration:.4,ease:es}},exit:{opacity:0,transition:{duration:.3,ease:es}}}},eu=n(50278),ec=n(88689),ed=n(67259),eh=n(455);let ef="undefined"!=typeof document?h.useLayoutEffect:()=>{};function ep(e){let t=(0,h.useRef)(null);return ef(()=>{t.current=e},[e]),(0,h.useCallback)((...e)=>{let n=t.current;return null==n?void 0:n(...e)},[])}var eg=n(87365);let em=!!("undefined"!=typeof window&&window.document&&window.document.createElement),eb=new Map,ey=new Set(["id"]),ev=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),ex=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),ew=/^(data-.*)$/,ek=e=>{var t;return null!==(t=null==e?void 0:e.ownerDocument)&&void 0!==t?t:document},eE=e=>e&&"window"in e&&e.window===e?e:ek(e).defaultView||window,eI=new Map,eS=new Set;function eT(){if("undefined"==typeof window)return;function e(e){return"propertyName"in e}let t=n=>{if(!e(n)||!n.target)return;let r=eI.get(n.target);if(r&&(r.delete(n.propertyName),0===r.size&&(n.target.removeEventListener("transitioncancel",t),eI.delete(n.target)),0===eI.size)){for(let e of eS)e();eS.clear()}};document.body.addEventListener("transitionrun",n=>{if(!e(n)||!n.target)return;let r=eI.get(n.target);r||(r=new Set,eI.set(n.target,r),n.target.addEventListener("transitioncancel",t,{once:!0})),r.add(n.propertyName)}),document.body.addEventListener("transitionend",t)}function eC(e){if(function(){if(null==eN){eN=!1;try{document.createElement("div").focus({get preventScroll(){return eN=!0,!0}})}catch{}}return eN}())e.focus({preventScroll:!0});else{let t=function(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}(e);e.focus(),function(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}(t)}}"undefined"!=typeof document&&("loading"!==document.readyState?eT():document.addEventListener("DOMContentLoaded",eT));let eN=null;function eA(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent))}function eR(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function eD(e){let t=null;return()=>(null==t&&(t=e()),t)}let e$=eD(function(){return eR(/^Mac/i)}),e_=eD(function(){return eR(/^iPhone/i)}),eF=eD(function(){return eR(/^iPad/i)||e$()&&navigator.maxTouchPoints>1}),eO=eD(function(){return e_()||eF()});eD(function(){return e$()||eO()}),eD(function(){return eA(/AppleWebKit/i)&&!eP()});let eP=eD(function(){return eA(/Chrome/i)}),eM=eD(function(){return eA(/Android/i)});eD(function(){return eA(/Firefox/i)});let eL=null,eB=new Set,eU=new Map,ez=!1,eV=!1;function eW(e,t){for(let n of eB)n(e,t)}function ej(e){ez=!0,e.metaKey||!e$()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key||(eL="keyboard",eW("keyboard",e))}function eH(e){eL="pointer",("mousedown"===e.type||"pointerdown"===e.type)&&(ez=!0,eW("pointer",e))}function eK(e){(0===e.mozInputSource&&e.isTrusted||(eM()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType))&&(ez=!0,eL="virtual")}function eG(e){e.target!==window&&e.target!==document&&(ez||eV||(eL="virtual",eW("virtual",e)),ez=!1,eV=!1)}function eX(){ez=!1,eV=!0}function eq(e){if("undefined"==typeof window||eU.get(eE(e)))return;let t=eE(e),n=ek(e),r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){ez=!0,r.apply(this,arguments)},n.addEventListener("keydown",ej,!0),n.addEventListener("keyup",ej,!0),n.addEventListener("click",eK,!0),t.addEventListener("focus",eG,!0),t.addEventListener("blur",eX,!1),"undefined"!=typeof PointerEvent?(n.addEventListener("pointerdown",eH,!0),n.addEventListener("pointermove",eH,!0),n.addEventListener("pointerup",eH,!0)):(n.addEventListener("mousedown",eH,!0),n.addEventListener("mousemove",eH,!0),n.addEventListener("mouseup",eH,!0)),t.addEventListener("beforeunload",()=>{eY(e)},{once:!0}),eU.set(t,{focus:r})}let eY=(e,t)=>{let n=eE(e),r=ek(e);t&&r.removeEventListener("DOMContentLoaded",t),eU.has(n)&&(n.HTMLElement.prototype.focus=eU.get(n).focus,r.removeEventListener("keydown",ej,!0),r.removeEventListener("keyup",ej,!0),r.removeEventListener("click",eK,!0),n.removeEventListener("focus",eG,!0),n.removeEventListener("blur",eX,!1),"undefined"!=typeof PointerEvent?(r.removeEventListener("pointerdown",eH,!0),r.removeEventListener("pointermove",eH,!0),r.removeEventListener("pointerup",eH,!0)):(r.removeEventListener("mousedown",eH,!0),r.removeEventListener("mousemove",eH,!0),r.removeEventListener("mouseup",eH,!0)),eU.delete(n))};function eQ(e){let t=ek(e);if("virtual"===eL){var n;let r=t.activeElement;n=()=>{t.activeElement===r&&e.isConnected&&eC(e)},requestAnimationFrame(()=>{0===eI.size?n():eS.add(n)})}else eC(e)}"undefined"!=typeof document&&function(e){let t;let n=ek(void 0);"loading"!==n.readyState?eq(void 0):(t=()=>{eq(void 0)},n.addEventListener("DOMContentLoaded",t)),()=>eY(e,t)}();var eJ=n(54887);let eZ=h.createContext(null);var e0=n(57437),e1=(0,f.Gp)((e,t)=>{let{as:n,children:r,className:i,...a}=e,{Component:o,isOpen:s,placement:l,backdrop:u,motionProps:c,disableAnimation:f,shouldBlockScroll:p,getPopoverProps:g,getDialogProps:m,getBackdropProps:b,getContentProps:y,isNonModal:v,onClose:x}=(0,d.l)(),w=(0,h.useRef)(null),{dialogProps:k,titleProps:E}=function(e,t){let n,r,{role:i="dialog"}=e,a=function(e=[]){let t=function(e){let[t,n]=(0,h.useState)(void 0),r=(0,h.useRef)(null),i=(0,eg.gP)(t),a=(0,h.useCallback)(e=>{r.current=e},[]);return em&&(eb.has(i)&&!eb.get(i).includes(a)?eb.set(i,[...eb.get(i),a]):eb.set(i,[a])),ef(()=>()=>{eb.delete(i)},[i]),(0,h.useEffect)(()=>{let e=r.current;e&&(r.current=null,n(e))}),i}(),[n,r]=function(e){let[t,n]=(0,h.useState)(e),r=(0,h.useRef)(null),i=ep(()=>{if(!r.current)return;let e=r.current.next();if(e.done){r.current=null;return}t===e.value?i():n(e.value)});ef(()=>{r.current&&i()});let a=ep(e=>{r.current=e(t),i()});return[t,a]}(t),i=(0,h.useCallback)(()=>{r(function*(){yield t,yield document.getElementById(t)?t:void 0})},[t,r]);return ef(i,[t,i,...e]),n}();a=e["aria-label"]?void 0:a;let o=(0,h.useRef)(!1);return(0,h.useEffect)(()=>{if(t.current&&!t.current.contains(document.activeElement)){eQ(t.current);let e=setTimeout(()=>{document.activeElement===t.current&&(o.current=!0,t.current&&(t.current.blur(),eQ(t.current)),o.current=!1)},500);return()=>{clearTimeout(e)}}},[t]),ef(()=>{null==r||r(!0)},[r=null==(n=(0,h.useContext)(eZ))?void 0:n.setContain]),{dialogProps:{...function(e,t={}){let{labelable:n,isLink:r,propNames:i}=t,a={};for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(ey.has(t)||n&&ev.has(t)||r&&ex.has(t)||(null==i?void 0:i.has(t))||ew.test(t))&&(a[t]=e[t]);return a}(e,{labelable:!0}),role:i,tabIndex:-1,"aria-labelledby":e["aria-labelledby"]||a,onBlur:e=>{o.current&&e.stopPropagation()}},titleProps:{id:a}}}({},w),I=m({ref:w,...k,...a}),S=(0,e0.jsxs)(e0.Fragment,{children:[!v&&(0,e0.jsx)(eo,{onDismiss:x}),(0,e0.jsx)(n||o||"div",{...I,children:(0,e0.jsx)("div",{...y({className:i}),children:"function"==typeof r?r(E):r})}),(0,e0.jsx)(eo,{onDismiss:x})]}),T=(0,h.useMemo)(()=>"transparent"===u?null:f?(0,e0.jsx)("div",{...b()}):(0,e0.jsx)(eu.X,{features:ec.H,children:(0,e0.jsx)(ed.m.div,{animate:"enter",exit:"exit",initial:"exit",variants:el.fade,...b()})}),[u,f,b]),C=(0,e0.jsx)(J,{enabled:p&&s,removeScrollBar:!1,children:f?S:(0,e0.jsx)(eu.X,{features:ec.H,children:(0,e0.jsx)(ed.m.div,{animate:"enter",exit:"exit",initial:"initial",style:{...(0,eh.VS)("center"===l?"top":l)},variants:el.scaleSpringOpacity,...c,children:S})})});return(0,e0.jsxs)("div",{...g(),children:[T,C]})});e1.displayName="NextUI.PopoverContent";var e2=n(51375),e3=n(92326),e4=n(67200);let e5=h.createContext(null),e8=null;function e6(e){let t,n,{children:r,contain:i,restoreFocus:a,autoFocus:o}=e,s=(0,h.useRef)(null),l=(0,h.useRef)(null),u=(0,h.useRef)([]),{parentNode:c}=(0,h.useContext)(e5)||{},d=(0,h.useMemo)(()=>new tc({scopeRef:u}),[u]);(0,e4.b)(()=>{let e=c||td.root;if(td.getTreeNode(e.scopeRef)&&e8&&!ta(e8,e.scopeRef)){let t=td.getTreeNode(e8);t&&(e=t)}e.addChild(d),td.addNode(d)},[d,c]),(0,e4.b)(()=>{let e=td.getTreeNode(u);e&&(e.contain=!!i)},[i]),(0,e4.b)(()=>{var e;let t=null===(e=s.current)||void 0===e?void 0:e.nextSibling,n=[];for(;t&&t!==l.current;)n.push(t),t=t.nextSibling;u.current=n},[r]),(0,e4.b)(()=>{if(a||i)return;let e=u.current,t=(0,e3.r)(e?e[0]:void 0),n=e=>{let t=e.target;tr(t,u.current)?e8=u:ti(t)||(e8=null)};return t.addEventListener("focusin",n,!1),null==e||e.forEach(e=>e.addEventListener("focusin",n,!1)),()=>{t.removeEventListener("focusin",n,!1),null==e||e.forEach(e=>e.removeEventListener("focusin",n,!1))}},[u,a,i]),t=(0,h.useRef)(),n=(0,h.useRef)(),(0,e4.b)(()=>{let e=u.current;if(!i){n.current&&(cancelAnimationFrame(n.current),n.current=void 0);return}let r=(0,e3.r)(e?e[0]:void 0),a=e=>{if("Tab"!==e.key||e.altKey||e.ctrlKey||e.metaKey||!tn(u)||e.isComposing)return;let t=r.activeElement,n=u.current;if(!n||!tr(t,n))return;let i=tl(tt(n),{tabbable:!0},n);if(!t)return;i.currentNode=t;let a=e.shiftKey?i.previousNode():i.nextNode();a||(i.currentNode=e.shiftKey?n[n.length-1].nextElementSibling:n[0].previousElementSibling,a=e.shiftKey?i.previousNode():i.nextNode()),e.preventDefault(),a&&to(a,!0)},o=e=>{(!e8||ta(e8,u))&&tr(e.target,u.current)?(e8=u,t.current=e.target):tn(u)&&!ti(e.target,u)?t.current?t.current.focus():e8&&e8.current&&ts(e8.current):tn(u)&&(t.current=e.target)},s=e=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{if(r.activeElement&&tn(u)&&!ti(r.activeElement,u)){if(e8=u,r.body.contains(e.target)){var n;t.current=e.target,null===(n=t.current)||void 0===n||n.focus()}else e8.current&&ts(e8.current)}})};return r.addEventListener("keydown",a,!1),r.addEventListener("focusin",o,!1),null==e||e.forEach(e=>e.addEventListener("focusin",o,!1)),null==e||e.forEach(e=>e.addEventListener("focusout",s,!1)),()=>{r.removeEventListener("keydown",a,!1),r.removeEventListener("focusin",o,!1),null==e||e.forEach(e=>e.removeEventListener("focusin",o,!1)),null==e||e.forEach(e=>e.removeEventListener("focusout",s,!1))}},[u,i]),(0,e4.b)(()=>()=>{n.current&&cancelAnimationFrame(n.current)},[n]),function(e,t,n){let r=(0,h.useRef)("undefined"!=typeof document?(0,e3.r)(e.current?e.current[0]:void 0).activeElement:null);(0,e4.b)(()=>{let r=e.current,i=(0,e3.r)(r?r[0]:void 0);if(!t||n)return;let a=()=>{(!e8||ta(e8,e))&&tr(i.activeElement,e.current)&&(e8=e)};return i.addEventListener("focusin",a,!1),null==r||r.forEach(e=>e.addEventListener("focusin",a,!1)),()=>{i.removeEventListener("focusin",a,!1),null==r||r.forEach(e=>e.removeEventListener("focusin",a,!1))}},[e,n]),(0,e4.b)(()=>{let r=(0,e3.r)(e.current?e.current[0]:void 0);if(!t)return;let i=t=>{if("Tab"!==t.key||t.altKey||t.ctrlKey||t.metaKey||!tn(e)||t.isComposing)return;let n=r.activeElement;if(!tr(n,e.current))return;let i=td.getTreeNode(e);if(!i)return;let a=i.nodeToRestore,o=tl(r.body,{tabbable:!0});o.currentNode=n;let s=t.shiftKey?o.previousNode():o.nextNode();if(a&&r.body.contains(a)&&a!==r.body||(a=void 0,i.nodeToRestore=void 0),(!s||!tr(s,e.current))&&a){o.currentNode=a;do s=t.shiftKey?o.previousNode():o.nextNode();while(tr(s,e.current));(t.preventDefault(),t.stopPropagation(),s)?to(s,!0):ti(a)?to(a,!0):n.blur()}};return n||r.addEventListener("keydown",i,!0),()=>{n||r.removeEventListener("keydown",i,!0)}},[e,t,n]),(0,e4.b)(()=>{var n;let i=(0,e3.r)(e.current?e.current[0]:void 0);if(!t)return;let a=td.getTreeNode(e);if(a)return a.nodeToRestore=null!==(n=r.current)&&void 0!==n?n:void 0,()=>{let n=td.getTreeNode(e);if(!n)return;let r=n.nodeToRestore;if(t&&r&&(tr(i.activeElement,e.current)||i.activeElement===i.body&&function(e){let t=td.getTreeNode(e8);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return(null==t?void 0:t.scopeRef)===e}(e))){let t=td.clone();requestAnimationFrame(()=>{if(i.activeElement===i.body){let n=t.getTreeNode(e);for(;n;){if(n.nodeToRestore&&n.nodeToRestore.isConnected){to(n.nodeToRestore);return}n=n.parent}for(n=t.getTreeNode(e);n;){if(n.scopeRef&&n.scopeRef.current&&td.getTreeNode(n.scopeRef)){ts(n.scopeRef.current,!0);return}n=n.parent}}})}}},[e,t])}(u,a,i),function(e,t){let n=h.useRef(t);(0,h.useEffect)(()=>{n.current&&(e8=e,!tr((0,e3.r)(e.current?e.current[0]:void 0).activeElement,e8.current)&&e.current&&ts(e.current)),n.current=!1},[e])}(u,o),(0,h.useEffect)(()=>{let e=(0,e3.r)(u.current?u.current[0]:void 0).activeElement,t=null;if(tr(e,u.current)){for(let n of td.traverse())n.scopeRef&&tr(e,n.scopeRef.current)&&(t=n);t===td.getTreeNode(u)&&(e8=t.scopeRef)}},[u]),(0,e4.b)(()=>()=>{var e,t,n;let r=null!==(n=null===(t=td.getTreeNode(u))||void 0===t?void 0:null===(e=t.parent)||void 0===e?void 0:e.scopeRef)&&void 0!==n?n:null;(u===e8||ta(u,e8))&&(!r||td.getTreeNode(r))&&(e8=r),td.removeTreeNode(u)},[u]);let f=(0,h.useMemo)(()=>({focusNext(e={}){let t=u.current,{from:n,tabbable:r,wrap:i,accept:a}=e,o=n||(0,e3.r)(t[0]).activeElement,s=t[0].previousElementSibling,l=tl(tt(t),{tabbable:r,accept:a},t);l.currentNode=tr(o,t)?o:s;let c=l.nextNode();return!c&&i&&(l.currentNode=s,c=l.nextNode()),c&&to(c,!0),c},focusPrevious(e={}){let t=u.current,{from:n,tabbable:r,wrap:i,accept:a}=e,o=n||(0,e3.r)(t[0]).activeElement,s=t[t.length-1].nextElementSibling,l=tl(tt(t),{tabbable:r,accept:a},t);l.currentNode=tr(o,t)?o:s;let c=l.previousNode();return!c&&i&&(l.currentNode=s,c=l.previousNode()),c&&to(c,!0),c},focusFirst(e={}){let t=u.current,{tabbable:n,accept:r}=e,i=tl(tt(t),{tabbable:n,accept:r},t);i.currentNode=t[0].previousElementSibling;let a=i.nextNode();return a&&to(a,!0),a},focusLast(e={}){let t=u.current,{tabbable:n,accept:r}=e,i=tl(tt(t),{tabbable:n,accept:r},t);i.currentNode=t[t.length-1].nextElementSibling;let a=i.previousNode();return a&&to(a,!0),a}}),[]),p=(0,h.useMemo)(()=>({focusManager:f,parentNode:d}),[d,f]);return h.createElement(e5.Provider,{value:p},h.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:s}),r,h.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:l}))}let e7=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],e9=e7.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";e7.push('[tabindex]:not([tabindex="-1"]):not([disabled])');let te=e7.join(':not([hidden]):not([tabindex="-1"]),');function tt(e){return e[0].parentElement}function tn(e){let t=td.getTreeNode(e8);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function tr(e,t){return!!e&&!!t&&t.some(t=>t.contains(e))}function ti(e,t=null){if(e instanceof Element&&e.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:n}of td.traverse(td.getTreeNode(t)))if(n&&tr(e,n.current))return!0;return!1}function ta(e,t){var n;let r=null===(n=td.getTreeNode(t))||void 0===n?void 0:n.parent;for(;r;){if(r.scopeRef===e)return!0;r=r.parent}return!1}function to(e,t=!1){if(null==e||t){if(null!=e)try{e.focus()}catch(e){}}else try{(0,e2.e)(e)}catch(e){}}function ts(e,t=!0){let n=e[0].previousElementSibling,r=tt(e),i=tl(r,{tabbable:t},e);i.currentNode=n;let a=i.nextNode();t&&!a&&((i=tl(r=tt(e),{tabbable:!1},e)).currentNode=n,a=i.nextNode()),to(a)}function tl(e,t,n){let r=(null==t?void 0:t.tabbable)?te:e9,i=(0,e3.r)(e).createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(e){var i;return(null==t?void 0:null===(i=t.from)||void 0===i?void 0:i.contains(e))?NodeFilter.FILTER_REJECT:e.matches(r)&&function e(t,n){return"#comment"!==t.nodeName&&function(e){let t=(0,e3.k)(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:n,visibility:r}=e.style,i="none"!==n&&"hidden"!==r&&"collapse"!==r;if(i){let{getComputedStyle:t}=e.ownerDocument.defaultView,{display:n,visibility:r}=t(e);i="none"!==n&&"hidden"!==r&&"collapse"!==r}return i}(t)&&!t.hasAttribute("hidden")&&!t.hasAttribute("data-react-aria-prevent-focus")&&("DETAILS"!==t.nodeName||!n||"SUMMARY"===n.nodeName||t.hasAttribute("open"))&&(!t.parentElement||e(t.parentElement,t))}(e)&&(!n||tr(e,n))&&(!(null==t?void 0:t.accept)||t.accept(e))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return(null==t?void 0:t.from)&&(i.currentNode=t.from),i}class tu{get size(){return this.fastMap.size}getTreeNode(e){return this.fastMap.get(e)}addTreeNode(e,t,n){let r=this.fastMap.get(null!=t?t:null);if(!r)return;let i=new tc({scopeRef:e});r.addChild(i),i.parent=r,this.fastMap.set(e,i),n&&(i.nodeToRestore=n)}addNode(e){this.fastMap.set(e.scopeRef,e)}removeTreeNode(e){if(null===e)return;let t=this.fastMap.get(e);if(!t)return;let n=t.parent;for(let e of this.traverse())e!==t&&t.nodeToRestore&&e.nodeToRestore&&t.scopeRef&&t.scopeRef.current&&tr(e.nodeToRestore,t.scopeRef.current)&&(e.nodeToRestore=t.nodeToRestore);let r=t.children;n&&(n.removeChild(t),r.size>0&&r.forEach(e=>n&&n.addChild(e))),this.fastMap.delete(t.scopeRef)}*traverse(e=this.root){if(null!=e.scopeRef&&(yield e),e.children.size>0)for(let t of e.children)yield*this.traverse(t)}clone(){var e,t;let n=new tu;for(let r of this.traverse())n.addTreeNode(r.scopeRef,null!==(t=null===(e=r.parent)||void 0===e?void 0:e.scopeRef)&&void 0!==t?t:null,r.nodeToRestore);return n}constructor(){this.fastMap=new Map,this.root=new tc({scopeRef:null}),this.fastMap.set(null,this.root)}}class tc{addChild(e){this.children.add(e),e.parent=this}removeChild(e){this.children.delete(e),e.parent=void 0}constructor(e){this.children=new Set,this.contain=!1,this.scopeRef=e.scopeRef}}let td=new tu;function th(e){let{isSelected:t,disableAnimation:n,...r}=e;return(0,e0.jsx)("svg",{"aria-hidden":"true","data-selected":t,role:"presentation",viewBox:"0 0 17 18",...r,children:(0,e0.jsx)("polyline",{fill:"none",points:"1 9 7 14 15 4",stroke:"currentColor",strokeDasharray:22,strokeDashoffset:t?44:66,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,style:n?{}:{transition:"stroke-dashoffset 200ms ease"}})})}var tf=n(26543),tp=n(18373),tg=(0,tf.tv)({slots:{base:"w-full relative flex flex-col gap-1 p-1",list:"w-full flex flex-col gap-0.5 outline-none",emptyContent:["h-10","px-2","py-1.5","w-full","h-full","text-foreground-400","text-start"]}}),tm=(0,tf.tv)({slots:{base:["flex","group","gap-2","items-center","justify-between","relative","px-2","py-1.5","w-full","h-full","box-border","rounded-small","subpixel-antialiased","outline-none","cursor-pointer","tap-highlight-transparent",...tp.Dh,"data-[focus-visible=true]:dark:ring-offset-background-content1"],wrapper:"w-full flex flex-col items-start justify-center",title:"flex-1 text-small font-normal",description:["w-full","text-tiny","text-foreground-500","group-hover:text-current"],selectedIcon:["text-inherit","w-3","h-3","flex-shrink-0"],shortcut:["px-1","py-0.5","rounded","font-sans","text-foreground-500","text-tiny","border-small","border-default-300","group-hover:border-current"]},variants:{variant:{solid:{base:""},bordered:{base:"border-medium border-transparent bg-transparent"},light:{base:"bg-transparent"},faded:{base:["border-small border-transparent hover:border-default data-[hover=true]:bg-default-100","data-[selectable=true]:focus:border-default data-[selectable=true]:focus:bg-default-100"]},flat:{base:""},shadow:{base:"data-[hover=true]:shadow-lg"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},showDivider:{true:{base:["mb-1.5","after:content-['']","after:absolute","after:-bottom-1","after:left-0","after:right-0","after:h-divider","after:bg-divider"]},false:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{},false:{base:"data-[hover=true]:transition-colors"}}},defaultVariants:{variant:"solid",color:"default",showDivider:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:["data-[hover=true]:bg-default","data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:bg-default","data-[selectable=true]:focus:text-default-foreground"]}},{variant:"solid",color:"primary",class:{base:["data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground","data-[selectable=true]:focus:bg-primary data-[selectable=true]:focus:text-primary-foreground"]}},{variant:"solid",color:"secondary",class:{base:["data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground","data-[selectable=true]:focus:bg-secondary data-[selectable=true]:focus:text-secondary-foreground"]}},{variant:"solid",color:"success",class:{base:["data-[hover=true]:bg-success data-[hover=true]:text-success-foreground","data-[selectable=true]:focus:bg-success data-[selectable=true]:focus:text-success-foreground"]}},{variant:"solid",color:"warning",class:{base:["data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground","data-[selectable=true]:focus:bg-warning data-[selectable=true]:focus:text-warning-foreground"]}},{variant:"solid",color:"danger",class:{base:["data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground","data-[selectable=true]:focus:bg-danger data-[selectable=true]:focus:text-danger-foreground"]}},{variant:"shadow",color:"default",class:{base:["data-[hover=true]:shadow-default/50 data-[hover=true]:bg-default data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:shadow-default/50 data-[selectable=true]:focus:bg-default data-[selectable=true]:focus:text-default-foreground"]}},{variant:"shadow",color:"primary",class:{base:["data-[hover=true]:shadow-primary/30 data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground","data-[selectable=true]:focus:shadow-primary/30 data-[selectable=true]:focus:bg-primary data-[selectable=true]:focus:text-primary-foreground"]}},{variant:"shadow",color:"secondary",class:{base:["data-[hover=true]:shadow-secondary/30 data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground","data-[selectable=true]:focus:shadow-secondary/30 data-[selectable=true]:focus:bg-secondary data-[selectable=true]:focus:text-secondary-foreground"]}},{variant:"shadow",color:"success",class:{base:["data-[hover=true]:shadow-success/30 data-[hover=true]:bg-success data-[hover=true]:text-success-foreground","data-[selectable=true]:focus:shadow-success/30 data-[selectable=true]:focus:bg-success data-[selectable=true]:focus:text-success-foreground"]}},{variant:"shadow",color:"warning",class:{base:["data-[hover=true]:shadow-warning/30 data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground","data-[selectable=true]:focus:shadow-warning/30 data-[selectable=true]:focus:bg-warning data-[selectable=true]:focus:text-warning-foreground"]}},{variant:"shadow",color:"danger",class:{base:["data-[hover=true]:shadow-danger/30 data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground","data-[selectable=true]:focus:shadow-danger/30 data-[selectable=true]:focus:bg-danger data-[selectable=true]:focus:text-danger-foreground"]}},{variant:"bordered",color:"default",class:{base:["data-[hover=true]:border-default","data-[selectable=true]:focus:border-default"]}},{variant:"bordered",color:"primary",class:{base:["data-[hover=true]:border-primary data-[hover=true]:text-primary","data-[selectable=true]:focus:border-primary data-[selectable=true]:focus:text-primary"]}},{variant:"bordered",color:"secondary",class:{base:["data-[hover=true]:border-secondary data-[hover=true]:text-secondary","data-[selectable=true]:focus:border-secondary data-[selectable=true]:focus:text-secondary"]}},{variant:"bordered",color:"success",class:{base:["data-[hover=true]:border-success data-[hover=true]:text-success","data-[selectable=true]:focus:border-success data-[selectable=true]:focus:text-success"]}},{variant:"bordered",color:"warning",class:{base:["data-[hover=true]:border-warning data-[hover=true]:text-warning","data-[selectable=true]:focus:border-warning data-[selectable=true]:focus:text-warning"]}},{variant:"bordered",color:"danger",class:{base:["data-[hover=true]:border-danger data-[hover=true]:text-danger","data-[selectable=true]:focus:border-danger data-[selectable=true]:focus:text-danger"]}},{variant:"flat",color:"default",class:{base:["data-[hover=true]:bg-default/40","data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:bg-default/40","data-[selectable=true]:focus:text-default-foreground"]}},{variant:"flat",color:"primary",class:{base:["data-[hover=true]:bg-primary/20 data-[hover=true]:text-primary","data-[selectable=true]:focus:bg-primary/20 data-[selectable=true]:focus:text-primary"]}},{variant:"flat",color:"secondary",class:{base:["data-[hover=true]:bg-secondary/20 data-[hover=true]:text-secondary","data-[selectable=true]:focus:bg-secondary/20 data-[selectable=true]:focus:text-secondary"]}},{variant:"flat",color:"success",class:{base:["data-[hover=true]:bg-success/20 data-[hover=true]:text-success","data-[selectable=true]:focus:bg-success/20 data-[selectable=true]:focus:text-success"]}},{variant:"flat",color:"warning",class:{base:["data-[hover=true]:bg-warning/20 data-[hover=true]:text-warning","data-[selectable=true]:focus:bg-warning/20 data-[selectable=true]:focus:text-warning"]}},{variant:"flat",color:"danger",class:{base:["data-[hover=true]:bg-danger/20 data-[hover=true]:text-danger","data-[selectable=true]:focus:bg-danger/20 data-[selectable=true]:focus:text-danger"]}},{variant:"faded",color:"default",class:{base:["data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:text-default-foreground"]}},{variant:"faded",color:"primary",class:{base:["data-[hover=true]:text-primary","data-[selectable=true]:focus:text-primary"]}},{variant:"faded",color:"secondary",class:{base:["data-[hover=true]:text-secondary","data-[selectable=true]:focus:text-secondary"]}},{variant:"faded",color:"success",class:{base:["data-[hover=true]:text-success","data-[selectable=true]:focus:text-success"]}},{variant:"faded",color:"warning",class:{base:["data-[hover=true]:text-warning","data-[selectable=true]:focus:text-warning"]}},{variant:"faded",color:"danger",class:{base:["data-[hover=true]:text-danger","data-[selectable=true]:focus:text-danger"]}},{variant:"light",color:"default",class:{base:["data-[hover=true]:text-default-500","data-[selectable=true]:focus:text-default-500"]}},{variant:"light",color:"primary",class:{base:["data-[hover=true]:text-primary","data-[selectable=true]:focus:text-primary"]}},{variant:"light",color:"secondary",class:{base:["data-[hover=true]:text-secondary","data-[selectable=true]:focus:text-secondary"]}},{variant:"light",color:"success",class:{base:["data-[hover=true]:text-success","data-[selectable=true]:focus:text-success"]}},{variant:"light",color:"warning",class:{base:["data-[hover=true]:text-warning","data-[selectable=true]:focus:text-warning"]}},{variant:"light",color:"danger",class:{base:["data-[hover=true]:text-danger","data-[selectable=true]:focus:text-danger"]}}]}),tb=(0,tf.tv)({slots:{base:"relative mb-2",heading:"pl-1 text-tiny text-foreground-500",group:"data-[has-title=true]:pt-1",divider:"mt-2"}}),ty=n(2646),tv=n(43096),tx=n(68658),tw=n(46763),tk=n(97765),tE=n(94508),tI=n(5376);function tS(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent))}function tT(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function tC(e){let t=null;return()=>(null==t&&(t=e()),t)}let tN=tC(function(){return tT(/^Mac/i)}),tA=tC(function(){return tT(/^iPhone/i)}),tR=tC(function(){return tT(/^iPad/i)||tN()&&navigator.maxTouchPoints>1}),tD=tC(function(){return tA()||tR()}),t$=tC(function(){return tN()||tD()}),t_=tC(function(){return tS(/AppleWebKit/i)&&!tF()}),tF=tC(function(){return tS(/Chrome/i)}),tO=tC(function(){return tS(/Android/i)}),tP=tC(function(){return tS(/Firefox/i)});function tM(e){return t$()?e.altKey:e.ctrlKey}function tL(e){return tN()?e.metaKey:e.ctrlKey}let tB=e=>{var t;return null!==(t=null==e?void 0:e.ownerDocument)&&void 0!==t?t:document},tU=e=>e&&"window"in e&&e.window===e?e:tB(e).defaultView||window,tz=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],tV=tz.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";tz.push('[tabindex]:not([tabindex="-1"]):not([disabled])');let tW=tz.join(':not([hidden]):not([tabindex="-1"]),');class tj{get size(){return this.fastMap.size}getTreeNode(e){return this.fastMap.get(e)}addTreeNode(e,t,n){let r=this.fastMap.get(null!=t?t:null);if(!r)return;let i=new tH({scopeRef:e});r.addChild(i),i.parent=r,this.fastMap.set(e,i),n&&(i.nodeToRestore=n)}addNode(e){this.fastMap.set(e.scopeRef,e)}removeTreeNode(e){if(null===e)return;let t=this.fastMap.get(e);if(!t)return;let n=t.parent;for(let e of this.traverse())e!==t&&t.nodeToRestore&&e.nodeToRestore&&t.scopeRef&&t.scopeRef.current&&function(e,t){return!!e&&!!t&&t.some(t=>t.contains(e))}(e.nodeToRestore,t.scopeRef.current)&&(e.nodeToRestore=t.nodeToRestore);let r=t.children;n&&(n.removeChild(t),r.size>0&&r.forEach(e=>n&&n.addChild(e))),this.fastMap.delete(t.scopeRef)}*traverse(e=this.root){if(null!=e.scopeRef&&(yield e),e.children.size>0)for(let t of e.children)yield*this.traverse(t)}clone(){var e,t;let n=new tj;for(let r of this.traverse())n.addTreeNode(r.scopeRef,null!==(t=null===(e=r.parent)||void 0===e?void 0:e.scopeRef)&&void 0!==t?t:null,r.nodeToRestore);return n}constructor(){this.fastMap=new Map,this.root=new tH({scopeRef:null}),this.fastMap.set(null,this.root)}}class tH{addChild(e){this.children.add(e),e.parent=this}removeChild(e){this.children.delete(e),e.parent=void 0}constructor(e){this.children=new Set,this.contain=!1,this.scopeRef=e.scopeRef}}new tj;let tK=new Map,tG=new Set;function tX(){if("undefined"==typeof window)return;function e(e){return"propertyName"in e}let t=n=>{if(!e(n)||!n.target)return;let r=tK.get(n.target);if(r&&(r.delete(n.propertyName),0===r.size&&(n.target.removeEventListener("transitioncancel",t),tK.delete(n.target)),0===tK.size)){for(let e of tG)e();tG.clear()}};document.body.addEventListener("transitionrun",n=>{if(!e(n)||!n.target)return;let r=tK.get(n.target);r||(r=new Set,tK.set(n.target,r),n.target.addEventListener("transitioncancel",t,{once:!0})),r.add(n.propertyName)}),document.body.addEventListener("transitionend",t)}function tq(e){if(function(){if(null==tY){tY=!1;try{document.createElement("div").focus({get preventScroll(){return tY=!0,!0}})}catch{}}return tY}())e.focus({preventScroll:!0});else{let t=function(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}(e);e.focus(),function(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}(t)}}"undefined"!=typeof document&&("loading"!==document.readyState?tX():document.addEventListener("DOMContentLoaded",tX));let tY=null;function tQ(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent))}function tJ(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function tZ(e){let t=null;return()=>(null==t&&(t=e()),t)}let t0=tZ(function(){return tJ(/^Mac/i)}),t1=tZ(function(){return tJ(/^iPhone/i)}),t2=tZ(function(){return tJ(/^iPad/i)||t0()&&navigator.maxTouchPoints>1}),t3=tZ(function(){return t1()||t2()});tZ(function(){return t0()||t3()}),tZ(function(){return tQ(/AppleWebKit/i)&&!t4()});let t4=tZ(function(){return tQ(/Chrome/i)}),t5=tZ(function(){return tQ(/Android/i)});tZ(function(){return tQ(/Firefox/i)});let t8=null,t6=new Set,t7=new Map,t9=!1,ne=!1;function nt(e,t){for(let n of t6)n(e,t)}function nn(e){t9=!0,e.metaKey||!t0()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key||(t8="keyboard",nt("keyboard",e))}function nr(e){t8="pointer",("mousedown"===e.type||"pointerdown"===e.type)&&(t9=!0,nt("pointer",e))}function ni(e){(0===e.mozInputSource&&e.isTrusted||(t5()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType))&&(t9=!0,t8="virtual")}function na(e){e.target!==window&&e.target!==document&&(t9||ne||(t8="virtual",nt("virtual",e)),t9=!1,ne=!1)}function no(){t9=!1,ne=!0}function ns(e){if("undefined"==typeof window||t7.get(tU(e)))return;let t=tU(e),n=tB(e),r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){t9=!0,r.apply(this,arguments)},n.addEventListener("keydown",nn,!0),n.addEventListener("keyup",nn,!0),n.addEventListener("click",ni,!0),t.addEventListener("focus",na,!0),t.addEventListener("blur",no,!1),"undefined"!=typeof PointerEvent?(n.addEventListener("pointerdown",nr,!0),n.addEventListener("pointermove",nr,!0),n.addEventListener("pointerup",nr,!0)):(n.addEventListener("mousedown",nr,!0),n.addEventListener("mousemove",nr,!0),n.addEventListener("mouseup",nr,!0)),t.addEventListener("beforeunload",()=>{nl(e)},{once:!0}),t7.set(t,{focus:r})}let nl=(e,t)=>{let n=tU(e),r=tB(e);t&&r.removeEventListener("DOMContentLoaded",t),t7.has(n)&&(n.HTMLElement.prototype.focus=t7.get(n).focus,r.removeEventListener("keydown",nn,!0),r.removeEventListener("keyup",nn,!0),r.removeEventListener("click",ni,!0),n.removeEventListener("focus",na,!0),n.removeEventListener("blur",no,!1),"undefined"!=typeof PointerEvent?(r.removeEventListener("pointerdown",nr,!0),r.removeEventListener("pointermove",nr,!0),r.removeEventListener("pointerup",nr,!0)):(r.removeEventListener("mousedown",nr,!0),r.removeEventListener("mousemove",nr,!0),r.removeEventListener("mouseup",nr,!0)),t7.delete(n))};function nu(e){let t=tB(e);if("virtual"===t8){var n;let r=t.activeElement;n=()=>{t.activeElement===r&&e.isConnected&&tq(e)},requestAnimationFrame(()=>{0===tK.size?n():tG.add(n)})}else tq(e)}function nc(e){if(function(){if(null==nd){nd=!1;try{document.createElement("div").focus({get preventScroll(){return nd=!0,!0}})}catch{}}return nd}())e.focus({preventScroll:!0});else{let t=function(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}(e);e.focus(),function(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}(t)}}"undefined"!=typeof document&&function(e){let t;let n=tB(void 0);"loading"!==n.readyState?ns(void 0):(t=()=>{ns(void 0)},n.addEventListener("DOMContentLoaded",t)),()=>nl(e,t)}();let nd=null,nh=(0,h.createContext)({isNative:!0,open:function(e,t){!function(e,t){if(e instanceof HTMLAnchorElement)t(e);else if(e.hasAttribute("data-href")){let n=document.createElement("a");n.href=e.getAttribute("data-href"),e.hasAttribute("data-target")&&(n.target=e.getAttribute("data-target")),e.hasAttribute("data-rel")&&(n.rel=e.getAttribute("data-rel")),e.hasAttribute("data-download")&&(n.download=e.getAttribute("data-download")),e.hasAttribute("data-ping")&&(n.ping=e.getAttribute("data-ping")),e.hasAttribute("data-referrer-policy")&&(n.referrerPolicy=e.getAttribute("data-referrer-policy")),e.appendChild(n),t(n),e.removeChild(n)}}(e,e=>np(e,t))},useHref:e=>e});function nf(){return(0,h.useContext)(nh)}function np(e,t,n=!0){var r,i;let{metaKey:a,ctrlKey:o,altKey:s,shiftKey:l}=t;tP()&&(null===(i=window.event)||void 0===i?void 0:null===(r=i.type)||void 0===r?void 0:r.startsWith("key"))&&"_blank"===e.target&&(tN()?a=!0:o=!0);let u=t_()&&tN()&&!tR()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:a,ctrlKey:o,altKey:s,shiftKey:l}):new MouseEvent("click",{metaKey:a,ctrlKey:o,altKey:s,shiftKey:l,bubbles:!0,cancelable:!0});np.isOpening=n,nc(e),e.dispatchEvent(u),np.isOpening=!1}np.isOpening=!1;let ng="undefined"!=typeof document?h.useLayoutEffect:()=>{};function nm(e){let t=(0,h.useRef)(null);return ng(()=>{t.current=e},[e]),(0,h.useCallback)((...e)=>{let n=t.current;return null==n?void 0:n(...e)},[])}function nb(e,t){if(!e)return!1;let n=window.getComputedStyle(e),r=/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY);return r&&t&&(r=e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth),r}function ny(e,t){let n=nv(e,t,"left"),r=nv(e,t,"top"),i=t.offsetWidth,a=t.offsetHeight,o=e.scrollLeft,s=e.scrollTop,{borderTopWidth:l,borderLeftWidth:u}=getComputedStyle(e),c=e.scrollLeft+parseInt(u,10),d=e.scrollTop+parseInt(l,10),h=c+e.clientWidth,f=d+e.clientHeight;n<=o?o=n-parseInt(u,10):n+i>h&&(o+=n+i-h),r<=d?s=r-parseInt(l,10):r+a>f&&(s+=r+a-f),e.scrollLeft=o,e.scrollTop=s}function nv(e,t,n){let r="left"===n?"offsetLeft":"offsetTop",i=0;for(;t.offsetParent&&(i+=t[r],t.offsetParent!==e);){if(t.offsetParent.contains(e)){i-=e[r];break}t=t.offsetParent}return i}function nx(e,t){if(e&&document.contains(e)){let o=document.scrollingElement||document.documentElement;if("hidden"===window.getComputedStyle(o).overflow)for(let t of function(e,t){let n=[];for(;e&&e!==document.documentElement;)nb(e,void 0)&&n.push(e),e=e.parentElement;return n}(e))ny(t,e);else{var n,r,i,a;let{left:o,top:s}=e.getBoundingClientRect();null==e||null===(n=e.scrollIntoView)||void 0===n||n.call(e,{block:"nearest"});let{left:l,top:u}=e.getBoundingClientRect();(Math.abs(o-l)>1||Math.abs(s-u)>1)&&(null==t||null===(i=t.containingElement)||void 0===i||null===(r=i.scrollIntoView)||void 0===r||r.call(i,{block:"center",inline:"center"}),null===(a=e.scrollIntoView)||void 0===a||a.call(e,{block:"nearest"}))}}}function nw(...e){return(...t)=>{for(let n of e)"function"==typeof n&&n(...t)}}"undefined"!=typeof window&&window.document&&window.document.createElement;let nk=new Map;function nE(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let r=e[n];for(let e in r){let n=t[e],i=r[e];"function"==typeof n&&"function"==typeof i&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&90>=e.charCodeAt(2)?t[e]=nw(n,i):("className"===e||"UNSAFE_className"===e)&&"string"==typeof n&&"string"==typeof i?t[e]=(0,en.Z)(n,i):"id"===e&&n&&i?t.id=function(e,t){if(e===t)return e;let n=nk.get(e);if(n)return n.forEach(e=>e(t)),t;let r=nk.get(t);return r?(r.forEach(t=>t(e)),e):t}(n,i):t[e]=void 0!==i?i:n}}return t}function nI(e){return 0===e.mozInputSource&&!!e.isTrusted||(tO()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}let nS=e=>{var t;return null!==(t=null==e?void 0:e.ownerDocument)&&void 0!==t?t:document},nT=e=>e&&"window"in e&&e.window===e?e:nS(e).defaultView||window,nC=null,nN=new Set,nA=new Map,nR=!1,nD=!1;function n$(e,t){for(let n of nN)n(e,t)}function n_(e){nR=!0,e.metaKey||!tN()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key||(nC="keyboard",n$("keyboard",e))}function nF(e){nC="pointer",("mousedown"===e.type||"pointerdown"===e.type)&&(nR=!0,n$("pointer",e))}function nO(e){nI(e)&&(nR=!0,nC="virtual")}function nP(e){e.target!==window&&e.target!==document&&(nR||nD||(nC="virtual",n$("virtual",e)),nR=!1,nD=!1)}function nM(){nR=!1,nD=!0}function nL(e){if("undefined"==typeof window||nA.get(nT(e)))return;let t=nT(e),n=nS(e),r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){nR=!0,r.apply(this,arguments)},n.addEventListener("keydown",n_,!0),n.addEventListener("keyup",n_,!0),n.addEventListener("click",nO,!0),t.addEventListener("focus",nP,!0),t.addEventListener("blur",nM,!1),"undefined"!=typeof PointerEvent?(n.addEventListener("pointerdown",nF,!0),n.addEventListener("pointermove",nF,!0),n.addEventListener("pointerup",nF,!0)):(n.addEventListener("mousedown",nF,!0),n.addEventListener("mousemove",nF,!0),n.addEventListener("mouseup",nF,!0)),t.addEventListener("beforeunload",()=>{nB(e)},{once:!0}),nA.set(t,{focus:r})}let nB=(e,t)=>{let n=nT(e),r=nS(e);t&&r.removeEventListener("DOMContentLoaded",t),nA.has(n)&&(n.HTMLElement.prototype.focus=nA.get(n).focus,r.removeEventListener("keydown",n_,!0),r.removeEventListener("keyup",n_,!0),r.removeEventListener("click",nO,!0),n.removeEventListener("focus",nP,!0),n.removeEventListener("blur",nM,!1),"undefined"!=typeof PointerEvent?(r.removeEventListener("pointerdown",nF,!0),r.removeEventListener("pointermove",nF,!0),r.removeEventListener("pointerup",nF,!0)):(r.removeEventListener("mousedown",nF,!0),r.removeEventListener("mousemove",nF,!0),r.removeEventListener("mouseup",nF,!0)),nA.delete(n))};"undefined"!=typeof document&&function(e){let t;let n=nS(void 0);"loading"!==n.readyState?nL(void 0):(t=()=>{nL(void 0)},n.addEventListener("DOMContentLoaded",t)),()=>nB(e,t)}();let nU=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),nz=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]),nV=Symbol.for("react-aria.i18n.locale");function nW(){let e="undefined"!=typeof window&&window[nV]||"undefined"!=typeof navigator&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:!function(e){if(Intl.Locale){let t=new Intl.Locale(e).maximize(),n="function"==typeof t.getTextInfo?t.getTextInfo():t.textInfo;if(n)return"rtl"===n.direction;if(t.script)return nU.has(t.script)}let t=e.split("-")[0];return nz.has(t)}(e)?"ltr":"rtl"}}let nj=nW(),nH=new Set;function nK(){for(let e of(nj=nW(),nH))e(nj)}let nG=h.createContext(null);function nX(){let e=function(){let e=(0,eg.Av)(),[t,n]=(0,h.useState)(nj);return((0,h.useEffect)(()=>(0===nH.size&&window.addEventListener("languagechange",nK),nH.add(n),()=>{nH.delete(n),0===nH.size&&window.removeEventListener("languagechange",nK)}),[]),e)?{locale:"en-US",direction:"ltr"}:t}();return(0,h.useContext)(nG)||e}class nq{isDisabled(e){var t;return"all"===this.disabledBehavior&&((null===(t=e.props)||void 0===t?void 0:t.isDisabled)||this.disabledKeys.has(e.key))}getNextKey(e){for(e=this.collection.getKeyAfter(e);null!=e;){let t=this.collection.getItem(e);if("item"===t.type&&!this.isDisabled(t))return e;e=this.collection.getKeyAfter(e)}return null}getPreviousKey(e){for(e=this.collection.getKeyBefore(e);null!=e;){let t=this.collection.getItem(e);if("item"===t.type&&!this.isDisabled(t))return e;e=this.collection.getKeyBefore(e)}return null}findKey(e,t,n){let r=this.getItem(e);if(!r)return null;let i=r.getBoundingClientRect();do e=t(e),r=this.getItem(e);while(r&&n(i,r.getBoundingClientRect()));return e}isSameRow(e,t){return e.top===t.top||e.left!==t.left}isSameColumn(e,t){return e.left===t.left||e.top!==t.top}getKeyBelow(e){return"grid"===this.layout&&"vertical"===this.orientation?this.findKey(e,e=>this.getNextKey(e),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return"grid"===this.layout&&"vertical"===this.orientation?this.findKey(e,e=>this.getPreviousKey(e),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,t){return t?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){return"grid"===this.layout?"vertical"===this.orientation?this.getNextColumn(e,"rtl"===this.direction):this.findKey(e,e=>this.getNextColumn(e,"rtl"===this.direction),this.isSameColumn):"horizontal"===this.orientation?this.getNextColumn(e,"rtl"===this.direction):null}getKeyLeftOf(e){return"grid"===this.layout?"vertical"===this.orientation?this.getNextColumn(e,"ltr"===this.direction):this.findKey(e,e=>this.getNextColumn(e,"ltr"===this.direction),this.isSameColumn):"horizontal"===this.orientation?this.getNextColumn(e,"ltr"===this.direction):null}getFirstKey(){let e=this.collection.getFirstKey();for(;null!=e;){let t=this.collection.getItem(e);if((null==t?void 0:t.type)==="item"&&!this.isDisabled(t))return e;e=this.collection.getKeyAfter(e)}return null}getLastKey(){let e=this.collection.getLastKey();for(;null!=e;){let t=this.collection.getItem(e);if("item"===t.type&&!this.isDisabled(t))return e;e=this.collection.getKeyBefore(e)}return null}getItem(e){return null!==e?this.ref.current.querySelector(`[data-key="${CSS.escape(e.toString())}"]`):null}getKeyPageAbove(e){let t=this.ref.current,n=this.getItem(e);if(!n)return null;if(!nb(t))return this.getFirstKey();let r=t.getBoundingClientRect(),i=n.getBoundingClientRect();if("horizontal"===this.orientation){let a=r.x-t.scrollLeft,o=Math.max(0,i.x-a+i.width-r.width);for(;n&&i.x-a>o;)i=null==(n=null==(e=this.getKeyAbove(e))?null:this.getItem(e))?void 0:n.getBoundingClientRect()}else{let a=r.y-t.scrollTop,o=Math.max(0,i.y-a+i.height-r.height);for(;n&&i.y-a>o;)i=null==(n=null==(e=this.getKeyAbove(e))?null:this.getItem(e))?void 0:n.getBoundingClientRect()}return null!=e?e:this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,n=this.getItem(e);if(!n)return null;if(!nb(t))return this.getLastKey();let r=t.getBoundingClientRect(),i=n.getBoundingClientRect();if("horizontal"===this.orientation){let a=r.x-t.scrollLeft,o=Math.min(t.scrollWidth,i.x-a-i.width+r.width);for(;n&&i.x-a<o;)i=null==(n=null==(e=this.getKeyBelow(e))?null:this.getItem(e))?void 0:n.getBoundingClientRect()}else{let a=r.y-t.scrollTop,o=Math.min(t.scrollHeight,i.y-a-i.height+r.height);for(;n&&i.y-a<o;)i=null==(n=null==(e=this.getKeyBelow(e))?null:this.getItem(e))?void 0:n.getBoundingClientRect()}return null!=e?e:this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let n=this.collection,r=t||this.getFirstKey();for(;null!=r;){let t=n.getItem(r),i=t.textValue.slice(0,e.length);if(t.textValue&&0===this.collator.compare(i,e))return r;r=this.getKeyBelow(r)}return null}constructor(...e){if(1===e.length){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.collator=t.collator,this.disabledKeys=t.disabledKeys||new Set,this.disabledBehavior=t.disabledBehavior||"all",this.orientation=t.orientation,this.direction=t.direction,this.layout=t.layout||"stack"}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all";"stack"===this.layout&&"vertical"===this.orientation&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}let nY=new Map;var nQ=new WeakMap;let nJ=null;function nZ(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent))}function n0(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function n1(){return n0(/^Mac/i)}let n2=(0,h.createContext)({isNative:!0,open:function(e,t){!function(e,t){if(e instanceof HTMLAnchorElement)t(e);else if(e.hasAttribute("data-href")){let n=document.createElement("a");n.href=e.getAttribute("data-href"),e.hasAttribute("data-target")&&(n.target=e.getAttribute("data-target")),e.hasAttribute("data-rel")&&(n.rel=e.getAttribute("data-rel")),e.hasAttribute("data-download")&&(n.download=e.getAttribute("data-download")),e.hasAttribute("data-ping")&&(n.ping=e.getAttribute("data-ping")),e.hasAttribute("data-referrer-policy")&&(n.referrerPolicy=e.getAttribute("data-referrer-policy")),e.appendChild(n),t(n),e.removeChild(n)}}(e,e=>n4(e,t))},useHref:e=>e});function n3(){return(0,h.useContext)(n2)}function n4(e,t,n=!0){var r,i;let{metaKey:a,ctrlKey:o,altKey:s,shiftKey:l}=t;nZ(/Firefox/i)&&(null===(i=window.event)||void 0===i?void 0:null===(r=i.type)||void 0===r?void 0:r.startsWith("key"))&&"_blank"===e.target&&(n1()?a=!0:o=!0);let u=nZ(/AppleWebKit/i)&&!nZ(/Chrome/i)&&n1()&&!(n0(/^iPad/i)||n1()&&navigator.maxTouchPoints>1)?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:a,ctrlKey:o,altKey:s,shiftKey:l}):new MouseEvent("click",{metaKey:a,ctrlKey:o,altKey:s,shiftKey:l,bubbles:!0,cancelable:!0});n4.isOpening=n,function(e){if(function(){if(null==nJ){nJ=!1;try{document.createElement("div").focus({get preventScroll(){return nJ=!0,!0}})}catch(e){}}return nJ}())e.focus({preventScroll:!0});else{let t=function(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}(e);e.focus(),function(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}(t)}}(e),e.dispatchEvent(u),n4.isOpening=!1}n4.isOpening=!1;var n5=n(27326),n8=n(62319);let n6=new WeakMap;var n7=n(8015),n9=n(11323),re=n(77427),rt=n(51440),rn=n(11834);let rr=null,ri=new Set,ra=new Map,ro=!1,rs=!1;function rl(e,t){for(let n of ri)n(e,t)}function ru(e){ro=!0,e.metaKey||!(0,re.V5)()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key||(rr="keyboard",rl("keyboard",e))}function rc(e){rr="pointer",("mousedown"===e.type||"pointerdown"===e.type)&&(ro=!0,rl("pointer",e))}function rd(e){(0,rt.Z)(e)&&(ro=!0,rr="virtual")}function rh(e){e.target!==window&&e.target!==document&&(ro||rs||(rr="virtual",rl("virtual",e)),ro=!1,rs=!1)}function rf(){ro=!1,rs=!0}function rp(e){if("undefined"==typeof window||ra.get((0,rn.k)(e)))return;let t=(0,rn.k)(e),n=(0,rn.r)(e),r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){ro=!0,r.apply(this,arguments)},n.addEventListener("keydown",ru,!0),n.addEventListener("keyup",ru,!0),n.addEventListener("click",rd,!0),t.addEventListener("focus",rh,!0),t.addEventListener("blur",rf,!1),"undefined"!=typeof PointerEvent?(n.addEventListener("pointerdown",rc,!0),n.addEventListener("pointermove",rc,!0),n.addEventListener("pointerup",rc,!0)):(n.addEventListener("mousedown",rc,!0),n.addEventListener("mousemove",rc,!0),n.addEventListener("mouseup",rc,!0)),t.addEventListener("beforeunload",()=>{rg(e)},{once:!0}),ra.set(t,{focus:r})}let rg=(e,t)=>{let n=(0,rn.k)(e),r=(0,rn.r)(e);t&&r.removeEventListener("DOMContentLoaded",t),ra.has(n)&&(n.HTMLElement.prototype.focus=ra.get(n).focus,r.removeEventListener("keydown",ru,!0),r.removeEventListener("keyup",ru,!0),r.removeEventListener("click",rd,!0),n.removeEventListener("focus",rh,!0),n.removeEventListener("blur",rf,!1),"undefined"!=typeof PointerEvent?(r.removeEventListener("pointerdown",rc,!0),r.removeEventListener("pointermove",rc,!0),r.removeEventListener("pointerup",rc,!0)):(r.removeEventListener("mousedown",rc,!0),r.removeEventListener("mousemove",rc,!0),r.removeEventListener("mouseup",rc,!0)),ra.delete(n))};function rm(e){if(!e)return;let t=!0;return n=>{e({...n,preventDefault(){n.preventDefault()},isDefaultPrevented:()=>n.isDefaultPrevented(),stopPropagation(){console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.")},continuePropagation(){t=!1}}),t&&n.stopPropagation()}}"undefined"!=typeof document&&function(e){let t;let n=(0,rn.r)(void 0);"loading"!==n.readyState?rp(void 0):(t=()=>{rp(void 0)},n.addEventListener("DOMContentLoaded",t)),()=>rg(e,t)}();var rb=n(40780),ry=n(77274);class rv{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=e}}let rx=new Map,rw=new Set;function rk(){if("undefined"==typeof window)return;function e(e){return"propertyName"in e}let t=n=>{if(!e(n)||!n.target)return;let r=rx.get(n.target);if(r&&(r.delete(n.propertyName),0===r.size&&(n.target.removeEventListener("transitioncancel",t),rx.delete(n.target)),0===rx.size)){for(let e of rw)e();rw.clear()}};document.body.addEventListener("transitionrun",n=>{if(!e(n)||!n.target)return;let r=rx.get(n.target);r||(r=new Set,rx.set(n.target,r),n.target.addEventListener("transitioncancel",t,{once:!0})),r.add(n.propertyName)}),document.body.addEventListener("transitionend",t)}"undefined"!=typeof document&&("loading"!==document.readyState?rk():document.addEventListener("DOMContentLoaded",rk));let rE="default",rI="",rS=new WeakMap;function rT(e){if(tD()){if("default"===rE){let t=nS(e);rI=t.documentElement.style.webkitUserSelect,t.documentElement.style.webkitUserSelect="none"}rE="disabled"}else(e instanceof HTMLElement||e instanceof SVGElement)&&(rS.set(e,e.style.userSelect),e.style.userSelect="none")}function rC(e){if(tD())"disabled"===rE&&(rE="restoring",setTimeout(()=>{var t;t=()=>{if("restoring"===rE){let t=nS(e);"none"===t.documentElement.style.webkitUserSelect&&(t.documentElement.style.webkitUserSelect=rI||""),rI="",rE="default"}},requestAnimationFrame(()=>{0===rx.size?t():rw.add(t)})},300));else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&rS.has(e)){let t=rS.get(e);"none"===e.style.userSelect&&(e.style.userSelect=t),""===e.getAttribute("style")&&e.removeAttribute("style"),rS.delete(e)}}let rN=h.createContext({register:()=>{}});rN.displayName="PressResponderContext";var rA=n(95691),rR=n(25134),rD=n(11455);function r$(){let e=(0,h.useRef)(new Map),t=(0,h.useCallback)((t,n,r,i)=>{let a=(null==i?void 0:i.once)?(...t)=>{e.current.delete(r),r(...t)}:r;e.current.set(r,{type:n,eventTarget:t,fn:a,options:i}),t.addEventListener(n,r,i)},[]),n=(0,h.useCallback)((t,n,r,i)=>{var a;let o=(null===(a=e.current.get(r))||void 0===a?void 0:a.fn)||r;t.removeEventListener(n,o,i),e.current.delete(r)},[]),r=(0,h.useCallback)(()=>{e.current.forEach((e,t)=>{n(e.eventTarget,e.type,t,e.options)})},[n]);return(0,h.useEffect)(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}var r_=new WeakMap;class rF{continuePropagation(){(0,rD._)(this,r_,!1)}get shouldStopPropagation(){return(0,rA._)(this,r_)}constructor(e,t,n,r){var i;(0,rR._)(this,r_,{writable:!0,value:void 0}),(0,rD._)(this,r_,!0);let a=null!==(i=null==r?void 0:r.target)&&void 0!==i?i:n.currentTarget,o=null==a?void 0:a.getBoundingClientRect(),s,l=0,u,c=null;null!=n.clientX&&null!=n.clientY&&(u=n.clientX,c=n.clientY),o&&(null!=u&&null!=c?(s=u-o.left,l=c-o.top):(s=o.width/2,l=o.height/2)),this.type=e,this.pointerType=t,this.target=n.currentTarget,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.x=s,this.y=l}}let rO=Symbol("linkClicked");function rP(e){let{onPress:t,onPressChange:n,onPressStart:r,onPressEnd:i,onPressUp:a,isDisabled:o,isPressed:s,preventFocusOnPress:l,shouldCancelOnPointerExit:u,allowTextSelectionOnPress:c,ref:d,...f}=function(e){var t;let n=(0,h.useContext)(rN);if(n){let{register:t,...r}=n;e=nE(r,e),t()}return t=e.ref,ng(()=>{if(n&&n.ref&&t)return n.ref.current=t.current,()=>{n.ref&&(n.ref.current=null)}}),e}(e),[p,g]=(0,h.useState)(!1),m=(0,h.useRef)({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:b,removeAllGlobalListeners:y}=r$(),v=nm((e,t)=>{let i=m.current;if(o||i.didFirePressStart)return!1;let a=!0;if(i.isTriggeringEvent=!0,r){let n=new rF("pressstart",t,e);r(n),a=n.shouldStopPropagation}return n&&n(!0),i.isTriggeringEvent=!1,i.didFirePressStart=!0,g(!0),a}),x=nm((e,r,a=!0)=>{let s=m.current;if(!s.didFirePressStart)return!1;s.ignoreClickAfterPress=!0,s.didFirePressStart=!1,s.isTriggeringEvent=!0;let l=!0;if(i){let t=new rF("pressend",r,e);i(t),l=t.shouldStopPropagation}if(n&&n(!1),g(!1),t&&a&&!o){let n=new rF("press",r,e);t(n),l&&(l=n.shouldStopPropagation)}return s.isTriggeringEvent=!1,l}),w=nm((e,t)=>{let n=m.current;if(o)return!1;if(a){n.isTriggeringEvent=!0;let r=new rF("pressup",t,e);return a(r),n.isTriggeringEvent=!1,r.shouldStopPropagation}return!0}),k=nm(e=>{let t=m.current;t.isPressed&&t.target&&(t.isOverTarget&&null!=t.pointerType&&x(rz(t.target,e),t.pointerType,!1),t.isPressed=!1,t.isOverTarget=!1,t.activePointerId=null,t.pointerType=null,y(),c||rC(t.target))}),E=nm(e=>{u&&k(e)}),I=(0,h.useMemo)(()=>{let e=m.current,t={onKeyDown(t){if(rL(t.nativeEvent,t.currentTarget)&&t.currentTarget.contains(t.target)){var r;rH(t.target,t.key)&&t.preventDefault();let i=!0;if(!e.isPressed&&!t.repeat){e.target=t.currentTarget,e.isPressed=!0,i=v(t,"keyboard");let r=t.currentTarget;b(nS(t.currentTarget),"keyup",nw(t=>{rL(t,r)&&!t.repeat&&r.contains(t.target)&&e.target&&w(rz(e.target,t),"keyboard")},n),!0)}i&&t.stopPropagation(),t.metaKey&&tN()&&(null===(r=e.metaKeyEvents)||void 0===r||r.set(t.key,t.nativeEvent))}else"Meta"===t.key&&(e.metaKeyEvents=new Map)},onClick(t){if((!t||t.currentTarget.contains(t.target))&&t&&0===t.button&&!e.isTriggeringEvent&&!np.isOpening){let n=!0;if(o&&t.preventDefault(),!e.ignoreClickAfterPress&&!e.ignoreEmulatedMouseEvents&&!e.isPressed&&("virtual"===e.pointerType||nI(t.nativeEvent))){o||l||nc(t.currentTarget);let e=v(t,"virtual"),r=w(t,"virtual"),i=x(t,"virtual");n=e&&r&&i}e.ignoreEmulatedMouseEvents=!1,e.ignoreClickAfterPress=!1,n&&t.stopPropagation()}}},n=t=>{var n,r,i;if(e.isPressed&&e.target&&rL(t,e.target)){rH(t.target,t.key)&&t.preventDefault();let n=t.target;x(rz(e.target,t),"keyboard",e.target.contains(n)),y(),"Enter"!==t.key&&rM(e.target)&&e.target.contains(n)&&!t[rO]&&(t[rO]=!0,np(e.target,t,!1)),e.isPressed=!1,null===(r=e.metaKeyEvents)||void 0===r||r.delete(t.key)}else if("Meta"===t.key&&(null===(n=e.metaKeyEvents)||void 0===n?void 0:n.size)){let t=e.metaKeyEvents;for(let n of(e.metaKeyEvents=void 0,t.values()))null===(i=e.target)||void 0===i||i.dispatchEvent(new KeyboardEvent("keyup",n))}};if("undefined"!=typeof PointerEvent){t.onPointerDown=t=>{var i;if(0!==t.button||!t.currentTarget.contains(t.target))return;if(i=t.nativeEvent,!tO()&&0===i.width&&0===i.height||1===i.width&&1===i.height&&0===i.pressure&&0===i.detail&&"mouse"===i.pointerType){e.pointerType="virtual";return}rW(t.currentTarget)&&t.preventDefault(),e.pointerType=t.pointerType;let s=!0;e.isPressed||(e.isPressed=!0,e.isOverTarget=!0,e.activePointerId=t.pointerId,e.target=t.currentTarget,o||l||nc(t.currentTarget),c||rT(e.target),s=v(t,e.pointerType),b(nS(t.currentTarget),"pointermove",n,!1),b(nS(t.currentTarget),"pointerup",r,!1),b(nS(t.currentTarget),"pointercancel",a,!1)),s&&t.stopPropagation()},t.onMouseDown=e=>{e.currentTarget.contains(e.target)&&0===e.button&&(rW(e.currentTarget)&&e.preventDefault(),e.stopPropagation())},t.onPointerUp=t=>{t.currentTarget.contains(t.target)&&"virtual"!==e.pointerType&&0===t.button&&rV(t,t.currentTarget)&&w(t,e.pointerType||t.pointerType)};let n=t=>{t.pointerId===e.activePointerId&&(e.target&&rV(t,e.target)?e.isOverTarget||null==e.pointerType||(e.isOverTarget=!0,v(rz(e.target,t),e.pointerType)):e.target&&e.isOverTarget&&null!=e.pointerType&&(e.isOverTarget=!1,x(rz(e.target,t),e.pointerType,!1),E(t)))},r=t=>{t.pointerId===e.activePointerId&&e.isPressed&&0===t.button&&e.target&&(rV(t,e.target)&&null!=e.pointerType?x(rz(e.target,t),e.pointerType):e.isOverTarget&&null!=e.pointerType&&x(rz(e.target,t),e.pointerType,!1),e.isPressed=!1,e.isOverTarget=!1,e.activePointerId=null,e.pointerType=null,y(),c||rC(e.target),"ontouchend"in e.target&&"mouse"!==t.pointerType&&b(e.target,"touchend",i,{once:!0}))},i=e=>{rj(e.currentTarget)&&e.preventDefault()},a=e=>{k(e)};t.onDragStart=e=>{e.currentTarget.contains(e.target)&&k(e)}}else{t.onMouseDown=t=>{if(0===t.button&&t.currentTarget.contains(t.target)){if(rW(t.currentTarget)&&t.preventDefault(),e.ignoreEmulatedMouseEvents){t.stopPropagation();return}e.isPressed=!0,e.isOverTarget=!0,e.target=t.currentTarget,e.pointerType=nI(t.nativeEvent)?"virtual":"mouse",o||l||nc(t.currentTarget),v(t,e.pointerType)&&t.stopPropagation(),b(nS(t.currentTarget),"mouseup",n,!1)}},t.onMouseEnter=t=>{if(!t.currentTarget.contains(t.target))return;let n=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&null!=e.pointerType&&(e.isOverTarget=!0,n=v(t,e.pointerType)),n&&t.stopPropagation()},t.onMouseLeave=t=>{if(!t.currentTarget.contains(t.target))return;let n=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&null!=e.pointerType&&(e.isOverTarget=!1,n=x(t,e.pointerType,!1),E(t)),n&&t.stopPropagation()},t.onMouseUp=t=>{t.currentTarget.contains(t.target)&&!e.ignoreEmulatedMouseEvents&&0===t.button&&w(t,e.pointerType||"mouse")};let n=t=>{if(0===t.button){if(e.isPressed=!1,y(),e.ignoreEmulatedMouseEvents){e.ignoreEmulatedMouseEvents=!1;return}e.target&&rV(t,e.target)&&null!=e.pointerType?x(rz(e.target,t),e.pointerType):e.target&&e.isOverTarget&&null!=e.pointerType&&x(rz(e.target,t),e.pointerType,!1),e.isOverTarget=!1}};t.onTouchStart=t=>{if(!t.currentTarget.contains(t.target))return;let n=function(e){let{targetTouches:t}=e;return t.length>0?t[0]:null}(t.nativeEvent);n&&(e.activePointerId=n.identifier,e.ignoreEmulatedMouseEvents=!0,e.isOverTarget=!0,e.isPressed=!0,e.target=t.currentTarget,e.pointerType="touch",o||l||nc(t.currentTarget),c||rT(e.target),v(rU(e.target,t),e.pointerType)&&t.stopPropagation(),b(nT(t.currentTarget),"scroll",r,!0))},t.onTouchMove=t=>{if(!t.currentTarget.contains(t.target))return;if(!e.isPressed){t.stopPropagation();return}let n=rB(t.nativeEvent,e.activePointerId),r=!0;n&&rV(n,t.currentTarget)?e.isOverTarget||null==e.pointerType||(e.isOverTarget=!0,r=v(rU(e.target,t),e.pointerType)):e.isOverTarget&&null!=e.pointerType&&(e.isOverTarget=!1,r=x(rU(e.target,t),e.pointerType,!1),E(rU(e.target,t))),r&&t.stopPropagation()},t.onTouchEnd=t=>{if(!t.currentTarget.contains(t.target))return;if(!e.isPressed){t.stopPropagation();return}let n=rB(t.nativeEvent,e.activePointerId),r=!0;n&&rV(n,t.currentTarget)&&null!=e.pointerType?(w(rU(e.target,t),e.pointerType),r=x(rU(e.target,t),e.pointerType)):e.isOverTarget&&null!=e.pointerType&&(r=x(rU(e.target,t),e.pointerType,!1)),r&&t.stopPropagation(),e.isPressed=!1,e.activePointerId=null,e.isOverTarget=!1,e.ignoreEmulatedMouseEvents=!0,e.target&&!c&&rC(e.target),y()},t.onTouchCancel=t=>{t.currentTarget.contains(t.target)&&(t.stopPropagation(),e.isPressed&&k(rU(e.target,t)))};let r=t=>{e.isPressed&&t.target.contains(e.target)&&k({currentTarget:e.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};t.onDragStart=e=>{e.currentTarget.contains(e.target)&&k(e)}}return t},[b,o,l,y,c,k,E,x,v,w]);return(0,h.useEffect)(()=>()=>{var e;c||rC(null!==(e=m.current.target)&&void 0!==e?e:void 0)},[c]),{isPressed:s||p,pressProps:nE(f,I)}}function rM(e){return"A"===e.tagName&&e.hasAttribute("href")}function rL(e,t){let{key:n,code:r}=e,i=t.getAttribute("role");return("Enter"===n||" "===n||"Spacebar"===n||"Space"===r)&&!(t instanceof nT(t).HTMLInputElement&&!rG(t,n)||t instanceof nT(t).HTMLTextAreaElement||t.isContentEditable)&&!(("link"===i||!i&&rM(t))&&"Enter"!==n)}function rB(e,t){let n=e.changedTouches;for(let e=0;e<n.length;e++){let r=n[e];if(r.identifier===t)return r}return null}function rU(e,t){let n=0,r=0;return t.targetTouches&&1===t.targetTouches.length&&(n=t.targetTouches[0].clientX,r=t.targetTouches[0].clientY),{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:n,clientY:r}}function rz(e,t){let n=t.clientX,r=t.clientY;return{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:n,clientY:r}}function rV(e,t){let n,r,i=t.getBoundingClientRect(),a=(n=0,r=0,void 0!==e.width?n=e.width/2:void 0!==e.radiusX&&(n=e.radiusX),void 0!==e.height?r=e.height/2:void 0!==e.radiusY&&(r=e.radiusY),{top:e.clientY-r,right:e.clientX+n,bottom:e.clientY+r,left:e.clientX-n});return!(i.left>a.right)&&!(a.left>i.right)&&!(i.top>a.bottom)&&!(a.top>i.bottom)}function rW(e){return!(e instanceof HTMLElement)||!e.hasAttribute("draggable")}function rj(e){return!(e instanceof HTMLInputElement)&&(e instanceof HTMLButtonElement?"submit"!==e.type&&"reset"!==e.type:!rM(e))}function rH(e,t){return e instanceof HTMLInputElement?!rG(e,t):rj(e)}let rK=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function rG(e,t){return"checkbox"===e.type||"radio"===e.type?" "===t:rK.has(e.type)}let rX=0,rq=new Map;function rY(){let e=window.event;return(null==e?void 0:e.key)==="Enter"}function rQ(){let e=window.event;return(null==e?void 0:e.key)===" "||(null==e?void 0:e.code)==="Space"}let rJ={prefix:String(Math.round(1e10*Math.random())),current:0},rZ=(h.createContext(rJ),h.createContext(!1));function r0(){return!1}function r1(){return!0}function r2(e){return()=>{}}"undefined"!=typeof window&&window.document&&window.document.createElement,new WeakMap,h.useId;var r3=n(27246),r4=(0,f.Gp)((e,t)=>{let{Component:n,slots:r,classNames:i,rendered:a,shortcut:o,description:s,isSelectable:l,isSelected:u,isDisabled:c,selectedIcon:d,startContent:p,endContent:g,disableAnimation:m,hideSelectedIcon:b,getItemProps:y,getLabelProps:v,getDescriptionProps:x,getKeyboardShortcutProps:w,getSelectedIconProps:k}=function(e){var t,n;let r=(0,ty.w)(),[i,a]=(0,f.oe)(e,tm.variantKeys),{as:o,item:s,state:l,shortcut:u,description:c,startContent:d,endContent:p,isVirtualized:g,selectedIcon:m,className:b,classNames:y,onAction:v,autoFocus:x,onClick:w,onPress:k,onPressStart:E,onPressUp:I,onPressEnd:S,onPressChange:T,hideSelectedIcon:C=!1,isReadOnly:N=!1,closeOnSelect:A,onClose:R,...D}=i,$=null!=(n=null!=(t=e.disableAnimation)?t:null==r?void 0:r.disableAnimation)&&n,_=(0,h.useRef)(null),F=o||((null==D?void 0:D.href)?"a":"li"),O="string"==typeof F,{rendered:P,key:M}=s,L=l.disabledKeys.has(M)||e.isDisabled,B="none"!==l.selectionManager.selectionMode,U=!("function"==typeof h.useSyncExternalStore?h.useSyncExternalStore(r2,r0,r1):(0,h.useContext)(rZ))&&"undefined"!=typeof window&&window.screen.width<=700,{isFocusVisible:z,focusProps:V}=(0,tv.F)({autoFocus:x}),{isHovered:W,isPressed:j,isFocused:H,isSelected:K,menuItemProps:G,labelProps:X,descriptionProps:q,keyboardShortcutProps:Y}=function(e,t,n){var r,i,a,o;let s;let{key:l,closeOnSelect:u,isVirtualized:c,"aria-haspopup":d,onPressStart:f,onPressUp:p,onPress:g,onPressChange:m,onPressEnd:b,onHoverStart:y,onHoverChange:v,onHoverEnd:x,onKeyDown:w,onKeyUp:k,onFocus:E,onFocusChange:I,onBlur:S,onClick:T}=e,C=!!d,N=null!=(r=e.isDisabled)?r:t.selectionManager.isDisabled(l),A=null!=(i=e.isSelected)?i:t.selectionManager.isSelected(l),R=nQ.get(t),D=t.collection.getItem(l),$=e.onClose||R.onClose,_=n3(),F=t=>{var n;!C&&((null==(n=null==D?void 0:D.props)?void 0:n.onAction)&&D.props.onAction(),e.onAction?e.onAction(l,D):R.onAction&&R.onAction(l,D),t.target instanceof HTMLAnchorElement&&_.open(t.target,t,D.props.href,D.props.routerOptions))},O="menuitem";C||("single"===t.selectionManager.selectionMode?O="menuitemradio":"multiple"!==t.selectionManager.selectionMode||(O="menuitemcheckbox"));let P=(0,n5.mp)(),M=(0,n5.mp)(),L=(0,n5.mp)(),B={"aria-disabled":N||void 0,role:O,"aria-label":e["aria-label"],"aria-labelledby":P,"aria-describedby":[M,L].filter(Boolean).join(" ")||void 0,"aria-controls":e["aria-controls"],"aria-haspopup":d,"aria-expanded":e["aria-expanded"]};"none"===t.selectionManager.selectionMode||C||(B["aria-checked"]=A),c&&(B["aria-posinset"]=null==D?void 0:D.index,B["aria-setsize"]=function(e){let t=n6.get(e);if(null!=t)return t;t=0;let n=r=>{for(let i of r)"section"===i.type?n("function"==typeof e.getChildren?e.getChildren(i.key):i.childNodes):t++};return n(e),n6.set(e,t),t}(t.collection));let{itemProps:U,isFocused:z}=function(e){let{selectionManager:t,key:n,ref:r,shouldSelectOnPressUp:i,shouldUseVirtualFocus:a,focus:o,isDisabled:s,onAction:l,allowsDifferentPressOrigin:u,linkBehavior:c="action"}=e,d=nf(),f=e=>{if("keyboard"===e.pointerType&&tM(e))t.toggleSelection(n);else{if("none"===t.selectionMode)return;if(t.isLink(n)){if("selection"===c){let i=t.getItemProps(n);d.open(r.current,e,i.href,i.routerOptions),t.setSelectedKeys(t.selectedKeys);return}if("override"===c||"none"===c)return}"single"===t.selectionMode?t.isSelected(n)&&!t.disallowEmptySelection?t.toggleSelection(n):t.replaceSelection(n):e&&e.shiftKey?t.extendSelection(n):"toggle"===t.selectionBehavior||e&&(tL(e)||"touch"===e.pointerType||"virtual"===e.pointerType)?t.toggleSelection(n):t.replaceSelection(n)}};(0,h.useEffect)(()=>{n===t.focusedKey&&t.isFocused&&!a&&(o?o():document.activeElement!==r.current&&nu(r.current))},[r,n,t.focusedKey,t.childFocusStrategy,t.isFocused,a]),s=s||t.isDisabled(n);let p={};a||s?s&&(p.onMouseDown=e=>{e.preventDefault()}):p={tabIndex:n===t.focusedKey?0:-1,onFocus(e){e.target===r.current&&t.setFocusedKey(n)}};let g=t.isLink(n)&&"override"===c,m=t.isLink(n)&&"selection"!==c&&"none"!==c,b=!s&&t.canSelectItem(n)&&!g,y=(l||m)&&!s,v=y&&("replace"===t.selectionBehavior?!b:!b||t.isEmpty),x=y&&b&&"replace"===t.selectionBehavior,w=v||x,k=(0,h.useRef)(null),E=w&&b,I=(0,h.useRef)(!1),S=(0,h.useRef)(!1),T=e=>{if(l&&l(),m){let i=t.getItemProps(n);d.open(r.current,e,i.href,i.routerOptions)}},C={};i?(C.onPressStart=e=>{k.current=e.pointerType,I.current=E,"keyboard"===e.pointerType&&(!w||rQ())&&f(e)},u?(C.onPressUp=v?null:e=>{"keyboard"!==e.pointerType&&b&&f(e)},C.onPress=v?T:null):C.onPress=e=>{v||x&&"mouse"!==e.pointerType?("keyboard"!==e.pointerType||rY())&&T(e):"keyboard"!==e.pointerType&&b&&f(e)}):(C.onPressStart=e=>{k.current=e.pointerType,I.current=E,S.current=v,b&&("mouse"===e.pointerType&&!v||"keyboard"===e.pointerType&&(!y||rQ()))&&f(e)},C.onPress=e=>{("touch"===e.pointerType||"pen"===e.pointerType||"virtual"===e.pointerType||"keyboard"===e.pointerType&&w&&rY()||"mouse"===e.pointerType&&S.current)&&(w?T(e):b&&f(e))}),p["data-key"]=n,C.preventFocusOnPress=a;let{pressProps:N,isPressed:A}=rP(C),R=x?e=>{"mouse"===k.current&&(e.stopPropagation(),e.preventDefault(),T(e))}:void 0,{longPressProps:D}=function(e){let{isDisabled:t,onLongPressStart:n,onLongPressEnd:r,onLongPress:i,threshold:a=500,accessibilityDescription:o}=e,s=(0,h.useRef)(void 0),{addGlobalListener:l,removeGlobalListener:u}=r$(),{pressProps:c}=rP({isDisabled:t,onPressStart(e){if(e.continuePropagation(),("mouse"===e.pointerType||"touch"===e.pointerType)&&(n&&n({...e,type:"longpressstart"}),s.current=setTimeout(()=>{e.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),i&&i({...e,type:"longpress"}),s.current=void 0},a),"touch"===e.pointerType)){let t=e=>{e.preventDefault()};l(e.target,"contextmenu",t,{once:!0}),l(window,"pointerup",()=>{setTimeout(()=>{u(e.target,"contextmenu",t)},30)},{once:!0})}},onPressEnd(e){s.current&&clearTimeout(s.current),r&&("mouse"===e.pointerType||"touch"===e.pointerType)&&r({...e,type:"longpressend"})}});return{longPressProps:nE(c,function(e){let[t,n]=(0,h.useState)();return ng(()=>{if(!e)return;let t=rq.get(e);if(t)n(t.element.id);else{let r=`react-aria-description-${rX++}`;n(r);let i=document.createElement("div");i.id=r,i.style.display="none",i.textContent=e,document.body.appendChild(i),t={refCount:0,element:i},rq.set(e,t)}return t.refCount++,()=>{t&&0==--t.refCount&&(t.element.remove(),rq.delete(e))}},[e]),{"aria-describedby":e?t:void 0}}(i&&!t?o:void 0))}}({isDisabled:!E,onLongPress(e){"touch"===e.pointerType&&(f(e),t.setSelectionBehavior("toggle"))}});return{itemProps:nE(p,b||v?N:{},E?D:{},{onDoubleClick:R,onDragStartCapture:e=>{"touch"===k.current&&I.current&&e.preventDefault()},onClick:t.isLink(n)?e=>{np.isOpening||e.preventDefault()}:void 0}),isPressed:A,isSelected:t.isSelected(n),isFocused:t.isFocused&&t.focusedKey===n,isDisabled:s,allowsSelection:b,hasAction:w}}({selectionManager:t.selectionManager,key:l,ref:n,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,linkBehavior:"none"}),{pressProps:V,isPressed:W}=(0,n7.r)({onPressStart:e=>{"keyboard"===e.pointerType&&F(e),null==f||f(e)},onPress:g,onPressUp:e=>{"keyboard"!==e.pointerType&&(setTimeout(()=>{F(e)}),!C&&$&&(null!=u?u:"multiple"!==t.selectionManager.selectionMode||t.selectionManager.isLink(l))&&setTimeout(()=>{null==$||$()})),null==p||p(e)},onPressChange:m,onPressEnd:b,isDisabled:N}),{isHovered:j,hoverProps:H}=(0,n9.X)({isDisabled:N,onHoverStart(e){"pointer"!==rr||(t.selectionManager.setFocused(!0),t.selectionManager.setFocusedKey(l)),null==y||y(e)},onHoverChange:v,onHoverEnd:x}),{keyboardProps:K}={keyboardProps:(a={onKeyDown:e=>{if(e.repeat){e.continuePropagation();return}switch(e.key){case" ":N||"none"!==t.selectionManager.selectionMode||C||!1===u||!$||$();break;case"Enter":N||!1===u||C||!$||$();break;default:C||e.continuePropagation(),null==w||w(e)}},onKeyUp:k}).isDisabled?{}:{onKeyDown:rm(a.onKeyDown),onKeyUp:rm(a.onKeyUp)}},{focusProps:G}=function(e){let t,n,{isDisabled:r,onFocus:i,onBlur:a,onFocusChange:o}=e,s=(0,h.useCallback)(e=>{if(e.target===e.currentTarget)return a&&a(e),o&&o(!1),!0},[a,o]),l=(t=(0,h.useRef)({isFocused:!1,observer:null}),(0,rb.b)(()=>{let e=t.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}},[]),n=(0,ry.i)(e=>{null==s||s(e)}),(0,h.useCallback)(e=>{if(e.target instanceof HTMLButtonElement||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=e.target;r.addEventListener("focusout",e=>{t.current.isFocused=!1,r.disabled&&n(new rv("blur",e)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)},{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&r.disabled){var e;null===(e=t.current.observer)||void 0===e||e.disconnect();let n=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:n})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:n}))}}),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[n])),u=(0,h.useCallback)(e=>{let t=(0,rn.r)(e.target);e.target===e.currentTarget&&t.activeElement===e.target&&(i&&i(e),o&&o(!0),l(e))},[o,i,l]);return{focusProps:{onFocus:!r&&(i||o||a)?u:void 0,onBlur:!r&&(a||o)?s:void 0}}}({onBlur:S,onFocus:E,onFocusChange:I}),X=(0,tE.z)(D.props);delete X.id;let q=(o=D.props,s=n3(),{href:(null==o?void 0:o.href)?s.useHref(null==o?void 0:o.href):void 0,target:null==o?void 0:o.target,rel:null==o?void 0:o.rel,download:null==o?void 0:o.download,ping:null==o?void 0:o.ping,referrerPolicy:null==o?void 0:o.referrerPolicy});return{menuItemProps:{...B,...(0,tI.d)(X,q,C?{onFocus:U.onFocus}:U,V,H,K,G,{onClick:(0,n8.t)(T,V.onClick)}),tabIndex:null!=U.tabIndex?-1:void 0},labelProps:{id:P},descriptionProps:{id:M},keyboardShortcutProps:{id:L},isHovered:j,isFocused:z,isSelected:A,isPressed:W,isDisabled:N}}({key:M,onClose:R,isDisabled:L,onPress:k,onClick:w,onPressStart:E,onPressUp:I,onPressEnd:S,onPressChange:T,"aria-label":i["aria-label"],closeOnSelect:A,isVirtualized:g,onAction:v},l,_),Q=G,J=(0,h.useMemo)(()=>tm({...a,isDisabled:L,disableAnimation:$}),[(0,tx.Xx)(a),L,$]),Z=(0,tw.W)(null==y?void 0:y.base,b);N&&(Q=(0,tx.Os)(Q));let ee=(0,h.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"aria-hidden":(0,tk.PB)(!0),"data-disabled":(0,tk.PB)(L),className:J.selectedIcon({class:null==y?void 0:y.selectedIcon}),...e}},[L,J,y]);return{Component:F,domRef:_,slots:J,classNames:y,isSelectable:B,isSelected:K,isDisabled:L,rendered:P,shortcut:u,description:c,startContent:d,endContent:p,selectedIcon:m,disableAnimation:$,getItemProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:_,...(0,tI.d)(N?{}:V,(0,r3.z)(D,{enabled:O}),Q,e),"data-focus":(0,tk.PB)(H),"data-selectable":(0,tk.PB)(B),"data-hover":(0,tk.PB)(U?W||j:W),"data-disabled":(0,tk.PB)(L),"data-selected":(0,tk.PB)(K),"data-pressed":(0,tk.PB)(j),"data-focus-visible":(0,tk.PB)(z),className:J.base({class:(0,tw.W)(Z,e.className)})}},getLabelProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...(0,tI.d)(X,e),className:J.title({class:null==y?void 0:y.title})}},hideSelectedIcon:C,getDescriptionProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...(0,tI.d)(q,e),className:J.description({class:null==y?void 0:y.description})}},getKeyboardShortcutProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...(0,tI.d)(Y,e),className:J.shortcut({class:null==y?void 0:y.shortcut})}},getSelectedIconProps:ee}}(e),E=(0,h.useMemo)(()=>{let e=(0,e0.jsx)(th,{disableAnimation:m,isSelected:u});return"function"==typeof d?d({icon:e,isSelected:u,isDisabled:c}):d||e},[d,u,c,m]);return(0,e0.jsxs)(n,{...y(),children:[p,s?(0,e0.jsxs)("div",{className:r.wrapper({class:null==i?void 0:i.wrapper}),children:[(0,e0.jsx)("span",{...v(),children:a}),(0,e0.jsx)("span",{...x(),children:s})]}):(0,e0.jsx)("span",{...v(),children:a}),o&&(0,e0.jsx)("kbd",{...w(),children:o}),l&&!b&&(0,e0.jsx)("span",{...k(),children:E}),g]})});r4.displayName="NextUI.MenuItem";var r5=n(6981),r8=(0,tf.tv)({base:"shrink-0 bg-divider border-none",variants:{orientation:{horizontal:"w-full h-divider",vertical:"h-full w-divider"}},defaultVariants:{orientation:"horizontal"}}),r6=(0,f.Gp)((e,t)=>{let{Component:n,getDividerProps:r}=function(e){var t;let n,r;let{as:i,className:a,orientation:o,...s}=e,l=i||"hr";"hr"===l&&"vertical"===o&&(l="div");let{separatorProps:u}=(t={elementType:"string"==typeof l?l:"hr",orientation:o},r=(0,r3.z)(t,{enabled:"string"==typeof t.elementType}),("vertical"===t.orientation&&(n="vertical"),"hr"!==t.elementType)?{separatorProps:{...r,role:"separator","aria-orientation":n}}:{separatorProps:r}),c=(0,h.useMemo)(()=>r8({orientation:o,className:a}),[o,a]);return{Component:l,getDividerProps:(0,h.useCallback)((e={})=>({className:c,role:"separator","data-orientation":o,...u,...s,...e}),[c,o,u,s])}}({...e});return(0,e0.jsx)(n,{ref:t,...r()})});r6.displayName="NextUI.Divider";var r7=(0,f.Gp)((e,t)=>{let{item:n,state:r,as:i,variant:a,color:o,disableAnimation:s,onAction:l,closeOnSelect:u,className:c,classNames:d,showDivider:f=!1,hideSelectedIcon:p,dividerProps:g={},itemClasses:m,title:b,...y}=e,v=(0,h.useMemo)(()=>tb(),[]),x=(0,tw.W)(null==d?void 0:d.base,c),w=(0,tw.W)(null==d?void 0:d.divider,null==g?void 0:g.className),{itemProps:k,headingProps:E,groupProps:I}=function(e){let{heading:t,"aria-label":n}=e,r=(0,r5.Me)();return{itemProps:{role:"presentation"},headingProps:t?{id:r,role:"presentation"}:{},groupProps:{role:"group","aria-label":n,"aria-labelledby":t?r:void 0}}}({heading:n.rendered,"aria-label":n["aria-label"]});return(0,e0.jsxs)(i||"li",{"data-slot":"base",...(0,tI.d)(k,y),className:v.base({class:x}),children:[n.rendered&&(0,e0.jsx)("span",{...E,className:v.heading({class:null==d?void 0:d.heading}),"data-slot":"heading",children:n.rendered}),(0,e0.jsxs)("ul",{...I,className:v.group({class:null==d?void 0:d.group}),"data-has-title":!!n.rendered,"data-slot":"group",children:[[...n.childNodes].map(e=>{let{key:t,props:n}=e,i=(0,e0.jsx)(r4,{classNames:m,closeOnSelect:u,color:o,disableAnimation:s,hideSelectedIcon:p,item:e,state:r,variant:a,onAction:l,...n},t);return e.wrapper&&(i=e.wrapper(i)),i}),f&&(0,e0.jsx)(r6,{as:"li",className:v.divider({class:w}),...g})]})]})});r7.displayName="NextUI.MenuSection";class r9{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let t=this.keyMap.get(e);return t?t.prevKey:null}getKeyAfter(e){let t=this.keyMap.get(e);return t?t.nextKey:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){let t=[...this.getKeys()];return this.getItem(t[e])}constructor(e,{expandedKeys:t}={}){let n;this.keyMap=new Map,this.iterable=e,t=t||new Set;let r=e=>{if(this.keyMap.set(e.key,e),e.childNodes&&("section"===e.type||t.has(e.key)))for(let t of e.childNodes)r(t)};for(let t of e)r(t);let i=0;for(let[e,t]of this.keyMap)n?(n.nextKey=e,t.prevKey=n.key):(this.firstKey=e,t.prevKey=void 0),"item"===t.type&&(t.index=i++),(n=t).nextKey=void 0;this.lastKey=null==n?void 0:n.key}}class ie extends Set{constructor(e,t,n){super(e),e instanceof ie?(this.anchorKey=null!=t?t:e.anchorKey,this.currentKey=null!=n?n:e.currentKey):(this.anchorKey=null!=t?t:null,this.currentKey=null!=n?n:null)}}var it=n(45614);function ir(e,t){return e?"all"===e?"all":new ie(e):t}function ii(e,t,n){if(t.parentKey===n.parentKey)return t.index-n.index;let r=[...ia(e,t),t],i=[...ia(e,n),n],a=r.slice(0,i.length).findIndex((e,t)=>e!==i[t]);return -1!==a?(t=r[a],n=i[a],t.index-n.index):r.findIndex(e=>e===n)>=0?1:(i.findIndex(e=>e===t),-1)}function ia(e,t){let n=[],r=t;for(;(null==r?void 0:r.parentKey)!=null;)(r=e.getItem(r.parentKey))&&n.unshift(r);return n}class io{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(null==e||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return"all"===this.state.selectedKeys?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){if("none"===this.state.selectionMode)return!1;let t=this.getKey(e);return null!=t&&("all"===this.state.selectedKeys?this.canSelectItem(t):this.state.selectedKeys.has(t))}get isEmpty(){return"all"!==this.state.selectedKeys&&0===this.state.selectedKeys.size}get isSelectAll(){if(this.isEmpty)return!1;if("all"===this.state.selectedKeys)return!0;if(null!=this._isSelectAll)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(e=>t.has(e)),this._isSelectAll}get firstSelectedKey(){var e;let t=null;for(let e of this.state.selectedKeys){let n=this.collection.getItem(e);(!t||n&&0>ii(this.collection,n,t))&&(t=n)}return null!==(e=null==t?void 0:t.key)&&void 0!==e?e:null}get lastSelectedKey(){var e;let t=null;for(let e of this.state.selectedKeys){let n=this.collection.getItem(e);(!t||n&&ii(this.collection,n,t)>0)&&(t=n)}return null!==(e=null==t?void 0:t.key)&&void 0!==e?e:null}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){let t;if("none"===this.selectionMode)return;if("single"===this.selectionMode){this.replaceSelection(e);return}let n=this.getKey(e);if(null!=n){if("all"===this.state.selectedKeys)t=new ie([n],n,n);else{var r,i;let e=this.state.selectedKeys,a=null!==(r=e.anchorKey)&&void 0!==r?r:n;for(let r of(t=new ie(e,a,n),this.getKeyRange(a,null!==(i=e.currentKey)&&void 0!==i?i:n)))t.delete(r);for(let e of this.getKeyRange(n,a))this.canSelectItem(e)&&t.add(e)}this.state.setSelectedKeys(t)}}getKeyRange(e,t){let n=this.collection.getItem(e),r=this.collection.getItem(t);return n&&r?0>=ii(this.collection,n,r)?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){var n;if(null===(n=this.layoutDelegate)||void 0===n?void 0:n.getKeyRange)return this.layoutDelegate.getKeyRange(e,t);let r=[],i=e;for(;null!=i;){let e=this.collection.getItem(i);if(e&&("item"===e.type||"cell"===e.type&&this.allowsCellSelection)&&r.push(i),i===t)return r;i=this.collection.getKeyAfter(i)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||"cell"===t.type&&this.allowsCellSelection)return e;for(;t&&"item"!==t.type&&null!=t.parentKey;)t=this.collection.getItem(t.parentKey);return t&&"item"===t.type?t.key:null}toggleSelection(e){if("none"===this.selectionMode)return;if("single"===this.selectionMode&&!this.isSelected(e)){this.replaceSelection(e);return}let t=this.getKey(e);if(null==t)return;let n=new ie("all"===this.state.selectedKeys?this.getSelectAllKeys():this.state.selectedKeys);n.has(t)?n.delete(t):this.canSelectItem(t)&&(n.add(t),n.anchorKey=t,n.currentKey=t),this.disallowEmptySelection&&0===n.size||this.state.setSelectedKeys(n)}replaceSelection(e){if("none"===this.selectionMode)return;let t=this.getKey(e);if(null==t)return;let n=this.canSelectItem(t)?new ie([t],t,t):new ie;this.state.setSelectedKeys(n)}setSelectedKeys(e){if("none"===this.selectionMode)return;let t=new ie;for(let n of e){let e=this.getKey(n);if(null!=e&&(t.add(e),"single"===this.selectionMode))break}this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=n=>{for(;null!=n;){if(this.canSelectItem(n)){var r,i,a;let o=this.collection.getItem(n);(null==o?void 0:o.type)==="item"&&e.push(n),(null==o?void 0:o.hasChildNodes)&&(this.allowsCellSelection||"item"!==o.type)&&t(null!==(i=null===(r=function(e,t){let n=0;for(let t of e){if(0===n)return t;n++}}("function"==typeof(a=this.collection).getChildren?a.getChildren(o.key):o.childNodes,0))||void 0===r?void 0:r.key)&&void 0!==i?i:null)}n=this.collection.getKeyAfter(n)}};return t(this.collection.getFirstKey()),e}selectAll(){this.isSelectAll||"multiple"!==this.selectionMode||this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&("all"===this.state.selectedKeys||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new ie)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){"none"!==this.selectionMode&&("single"===this.selectionMode?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):"toggle"===this.selectionBehavior||t&&("touch"===t.pointerType||"virtual"===t.pointerType)?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;for(let n of t)if(!e.has(n))return!1;return!0}canSelectItem(e){var t;if("none"===this.state.selectionMode||this.state.disabledKeys.has(e))return!1;let n=this.collection.getItem(e);return!!n&&(null==n||null===(t=n.props)||void 0===t||!t.isDisabled)&&("cell"!==n.type||!!this.allowsCellSelection)}isDisabled(e){var t,n;return"all"===this.state.disabledBehavior&&(this.state.disabledKeys.has(e)||!!(null===(n=this.collection.getItem(e))||void 0===n?void 0:null===(t=n.props)||void 0===t?void 0:t.isDisabled))}isLink(e){var t,n;return!!(null===(n=this.collection.getItem(e))||void 0===n?void 0:null===(t=n.props)||void 0===t?void 0:t.href)}getItemProps(e){var t;return null===(t=this.collection.getItem(e))||void 0===t?void 0:t.props}constructor(e,t,n){var r;this.collection=e,this.state=t,this.allowsCellSelection=null!==(r=null==n?void 0:n.allowsCellSelection)&&void 0!==r&&r,this._isSelectAll=null,this.layoutDelegate=(null==n?void 0:n.layoutDelegate)||null}}class is{build(e,t){return this.context=t,il(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:n}=e;if(h.isValidElement(t)&&t.type===h.Fragment)yield*this.iterateCollection({children:t.props.children,items:n});else if("function"==typeof t){if(!n)throw Error("props.children was a function but props.items is missing");let e=0;for(let r of n)yield*this.getFullNode({value:r,index:e},{renderer:t}),e++}else{let e=[];h.Children.forEach(t,t=>{t&&e.push(t)});let n=0;for(let t of e)for(let e of this.getFullNode({element:t,index:n},{}))n++,yield e}}getKey(e,t,n,r){if(null!=e.key)return e.key;if("cell"===t.type&&null!=t.key)return`${r}${t.key}`;let i=t.value;if(null!=i){var a;let e=null!==(a=i.key)&&void 0!==a?a:i.id;if(null==e)throw Error("No key found for item");return e}return r?`${r}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,n,r){var i,a,o,s,l,u,c,d;if(h.isValidElement(e.element)&&e.element.type===h.Fragment){let a=[];h.Children.forEach(e.element.props.children,e=>{a.push(e)});let o=null!==(i=e.index)&&void 0!==i?i:0;for(let e of a)yield*this.getFullNode({element:e,index:o++},t,n,r);return}let f=e.element;if(!f&&e.value&&t&&t.renderer){let n=this.cache.get(e.value);if(n&&(!n.shouldInvalidate||!n.shouldInvalidate(this.context))){n.index=e.index,n.parentKey=r?r.key:null,yield n;return}f=t.renderer(e.value)}if(h.isValidElement(f)){let i=f.type;if("function"!=typeof i&&"function"!=typeof i.getCollectionNode){let e=f.type;throw Error(`Unknown element <${e}> in collection.`)}let c=i.getCollectionNode(f.props,this.context),d=null!==(a=e.index)&&void 0!==a?a:0,h=c.next();for(;!h.done&&h.value;){let i=h.value;e.index=d;let a=null!==(o=i.key)&&void 0!==o?o:null;null==a&&(a=i.element?null:this.getKey(f,e,t,n));let p=[...this.getFullNode({...i,key:a,index:d,wrapper:function(e,t){return e&&t?n=>e(t(n)):e||t||void 0}(e.wrapper,i.wrapper)},this.getChildState(t,i),n?`${n}${f.key}`:f.key,r)];for(let t of p){if(t.value=null!==(l=null!==(s=i.value)&&void 0!==s?s:e.value)&&void 0!==l?l:null,t.value&&this.cache.set(t.value,t),e.type&&t.type!==e.type)throw Error(`Unsupported type <${iu(t.type)}> in <${iu(null!==(u=null==r?void 0:r.type)&&void 0!==u?u:"unknown parent type")}>. Only <${iu(e.type)}> is supported.`);d++,yield t}h=c.next(p)}return}if(null==e.key||null==e.type)return;let p=this,g={type:e.type,props:e.props,key:e.key,parentKey:r?r.key:null,value:null!==(c=e.value)&&void 0!==c?c:null,level:r?r.level+1:0,index:e.index,rendered:e.rendered,textValue:null!==(d=e.textValue)&&void 0!==d?d:"","aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes||!1,childNodes:il(function*(){if(!e.hasChildNodes||!e.childNodes)return;let n=0;for(let r of e.childNodes())for(let e of(null!=r.key&&(r.key=`${g.key}${r.key}`),p.getFullNode({...r,index:n},p.getChildState(t,r),g.key,g)))n++,yield e})};yield g}constructor(){this.cache=new WeakMap}}function il(e){let t=[],n=null;return{*[Symbol.iterator](){for(let e of t)yield e;for(let r of(n||(n=e()),n))t.push(r),yield r}}}function iu(e){return e[0].toUpperCase()+e.slice(1)}var ic=n(88160);function id(e,t){let{Component:n,state:r,closeOnSelect:i,color:a,disableAnimation:o,hideSelectedIcon:s,hideEmptyContent:l,variant:u,onClose:c,onAction:d,topContent:f,bottomContent:p,itemClasses:g,getBaseProps:m,getListProps:b,getEmptyContentProps:y}=function(e){var t;let n=(0,ty.w)(),{as:r,ref:i,variant:a,color:o,children:s,disableAnimation:l=null!=(t=null==n?void 0:n.disableAnimation)&&t,onAction:u,closeOnSelect:c,itemClasses:d,className:f,state:p,topContent:g,bottomContent:m,hideEmptyContent:b=!1,hideSelectedIcon:y=!1,emptyContent:v="No items.",menuProps:x,onClose:w,classNames:k,...E}=e,I=r||"ul",S=(0,ic.gy)(i),T="string"==typeof I,C=function(e){let{onExpandedChange:t}=e,[n,r]=(0,it.z)(e.expandedKeys?new Set(e.expandedKeys):void 0,e.defaultExpandedKeys?new Set(e.defaultExpandedKeys):new Set,t),i=function(e){let{selectionMode:t="none",disallowEmptySelection:n=!1,allowDuplicateSelectionEvents:r,selectionBehavior:i="toggle",disabledBehavior:a="all"}=e,o=(0,h.useRef)(!1),[,s]=(0,h.useState)(!1),l=(0,h.useRef)(null),u=(0,h.useRef)(null),[,c]=(0,h.useState)(null),d=(0,h.useMemo)(()=>ir(e.selectedKeys),[e.selectedKeys]),f=(0,h.useMemo)(()=>ir(e.defaultSelectedKeys,new ie),[e.defaultSelectedKeys]),[p,g]=(0,it.z)(d,f,e.onSelectionChange),m=(0,h.useMemo)(()=>e.disabledKeys?new Set(e.disabledKeys):new Set,[e.disabledKeys]),[b,y]=(0,h.useState)(i);"replace"===i&&"toggle"===b&&"object"==typeof p&&0===p.size&&y("replace");let v=(0,h.useRef)(i);return(0,h.useEffect)(()=>{i!==v.current&&(y(i),v.current=i)},[i]),{selectionMode:t,disallowEmptySelection:n,selectionBehavior:b,setSelectionBehavior:y,get isFocused(){return o.current},setFocused(e){o.current=e,s(e)},get focusedKey(){return l.current},get childFocusStrategy(){return u.current},setFocusedKey(e,t="first"){l.current=e,u.current=t,c(e)},selectedKeys:p,setSelectedKeys(e){(r||!function(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}(e,p))&&g(e)},disabledKeys:m,disabledBehavior:a}}(e),a=(0,h.useMemo)(()=>e.disabledKeys?new Set(e.disabledKeys):new Set,[e.disabledKeys]),o=function(e,t,n){let r=(0,h.useMemo)(()=>new is,[]),{children:i,items:a,collection:o}=e;return(0,h.useMemo)(()=>o||t(r.build({children:i,items:a},null)),[r,i,a,o,null,t])}(e,(0,h.useCallback)(e=>new r9(e,{expandedKeys:n}),[n]),0);return(0,h.useEffect)(()=>{null==i.focusedKey||o.getItem(i.focusedKey)||i.setFocusedKey(null)},[o,i.focusedKey]),{collection:o,expandedKeys:n,disabledKeys:a,toggleKey:e=>{let t;r(((t=new Set(n)).has(e)?t.delete(e):t.add(e),t))},setExpandedKeys:r,selectionManager:new io(o,i)}}({...E,...x,children:s}),N=p||C,{menuProps:A}=function(e,t,n){let{shouldFocusWrap:r=!0,onKeyDown:i,onKeyUp:a,...o}=e;e["aria-label"]||e["aria-labelledby"]||console.warn("An aria-label or aria-labelledby prop is required for accessibility.");let s=(0,tE.z)(e,{labelable:!0}),{listProps:l}=function(e){let{selectionManager:t,collection:n,disabledKeys:r,ref:i,keyboardDelegate:a}=e,o=function(e){let{locale:t}=nX(),n=t+(e?Object.entries(e).sort((e,t)=>e[0]<t[0]?-1:1).join():"");if(nY.has(n))return nY.get(n);let r=new Intl.Collator(t,e);return nY.set(n,r),r}({usage:"search",sensitivity:"base"}),s=t.disabledBehavior,l=(0,h.useMemo)(()=>a||new nq({collection:n,disabledKeys:r,disabledBehavior:s,ref:i,collator:o}),[a,n,r,i,o,s]),{collectionProps:u}=function(e){var t,n,r;let i,a,o,{selectionManager:s,keyboardDelegate:l,ref:u,autoFocus:c=!1,shouldFocusWrap:d=!1,disallowEmptySelection:f=!1,disallowSelectAll:p=!1,selectOnFocus:g="replace"===s.selectionBehavior,disallowTypeAhead:m=!1,shouldUseVirtualFocus:b,allowsTabNavigation:y=!1,isVirtualized:v,scrollRef:x=u,linkBehavior:w="action"}=e,{direction:k}=nX(),E=nf(),I=(0,h.useRef)({top:0,left:0});t="scroll",i=nm(n=v?null:()=>{I.current={top:x.current.scrollTop,left:x.current.scrollLeft}}),a=null==n,(0,h.useEffect)(()=>{if(a||!x.current)return;let e=x.current;return e.addEventListener(t,i,void 0),()=>{e.removeEventListener(t,i,r)}},[x,t,r,a,i]);let S=(0,h.useRef)(c);(0,h.useEffect)(()=>{if(S.current){let e=null;"first"===c&&(e=l.getFirstKey()),"last"===c&&(e=l.getLastKey());let t=s.selectedKeys;if(t.size){for(let n of t)if(s.canSelectItem(n)){e=n;break}}s.setFocused(!0),s.setFocusedKey(e),null!=e||b||nu(u.current)}},[]);let T=(0,h.useRef)(s.focusedKey);(0,h.useEffect)(()=>{let e=nC;if(s.isFocused&&null!=s.focusedKey&&(null==x?void 0:x.current)){let t=x.current.querySelector(`[data-key="${CSS.escape(s.focusedKey.toString())}"]`);t&&("keyboard"===e||S.current)&&(v||ny(x.current,t),"virtual"!==e&&nx(t,{containingElement:u.current}))}s.isFocused&&null==s.focusedKey&&null!=T.current&&nu(u.current),T.current=s.focusedKey,S.current=!1},[v,x,s.focusedKey,s.isFocused,u]);let C={onKeyDown:e=>{var t,n,r,i,a,o,c,h,m,b;if(e.altKey&&"Tab"===e.key&&e.preventDefault(),!u.current.contains(e.target))return;let v=(t,n)=>{if(null!=t){if(s.isLink(t)&&"selection"===w&&g&&!tM(e)){(0,eJ.flushSync)(()=>{s.setFocusedKey(t,n)});let r=x.current.querySelector(`[data-key="${CSS.escape(t.toString())}"]`),i=s.getItemProps(t);E.open(r,e,i.href,i.routerOptions);return}s.setFocusedKey(t,n),s.isLink(t)&&"override"===w||(e.shiftKey&&"multiple"===s.selectionMode?s.extendSelection(t):g&&!tM(e)&&s.replaceSelection(t))}};switch(e.key){case"ArrowDown":if(l.getKeyBelow){e.preventDefault();let r=null!=s.focusedKey?l.getKeyBelow(s.focusedKey):null===(t=l.getFirstKey)||void 0===t?void 0:t.call(l);null==r&&d&&(r=null===(n=l.getFirstKey)||void 0===n?void 0:n.call(l,s.focusedKey)),v(r)}break;case"ArrowUp":if(l.getKeyAbove){e.preventDefault();let t=null!=s.focusedKey?l.getKeyAbove(s.focusedKey):null===(r=l.getLastKey)||void 0===r?void 0:r.call(l);null==t&&d&&(t=null===(i=l.getLastKey)||void 0===i?void 0:i.call(l,s.focusedKey)),v(t)}break;case"ArrowLeft":if(l.getKeyLeftOf){e.preventDefault();let t=l.getKeyLeftOf(s.focusedKey);null==t&&d&&(t="rtl"===k?null===(a=l.getFirstKey)||void 0===a?void 0:a.call(l,s.focusedKey):null===(o=l.getLastKey)||void 0===o?void 0:o.call(l,s.focusedKey)),v(t,"rtl"===k?"first":"last")}break;case"ArrowRight":if(l.getKeyRightOf){e.preventDefault();let t=l.getKeyRightOf(s.focusedKey);null==t&&d&&(t="rtl"===k?null===(c=l.getLastKey)||void 0===c?void 0:c.call(l,s.focusedKey):null===(h=l.getFirstKey)||void 0===h?void 0:h.call(l,s.focusedKey)),v(t,"rtl"===k?"last":"first")}break;case"Home":if(l.getFirstKey){e.preventDefault();let t=l.getFirstKey(s.focusedKey,tL(e));s.setFocusedKey(t),tL(e)&&e.shiftKey&&"multiple"===s.selectionMode?s.extendSelection(t):g&&s.replaceSelection(t)}break;case"End":if(l.getLastKey){e.preventDefault();let t=l.getLastKey(s.focusedKey,tL(e));s.setFocusedKey(t),tL(e)&&e.shiftKey&&"multiple"===s.selectionMode?s.extendSelection(t):g&&s.replaceSelection(t)}break;case"PageDown":l.getKeyPageBelow&&(e.preventDefault(),v(l.getKeyPageBelow(s.focusedKey)));break;case"PageUp":l.getKeyPageAbove&&(e.preventDefault(),v(l.getKeyPageAbove(s.focusedKey)));break;case"a":tL(e)&&"multiple"===s.selectionMode&&!0!==p&&(e.preventDefault(),s.selectAll());break;case"Escape":f||0===s.selectedKeys.size||(e.stopPropagation(),e.preventDefault(),s.clearSelection());break;case"Tab":if(!y){if(e.shiftKey)u.current.focus();else{let e,t;let n,r,i=(m=u.current,e=(b={tabbable:!0}).tabbable?tW:tV,t=tB(m).createTreeWalker(m,NodeFilter.SHOW_ELEMENT,{acceptNode(t){var n;return(null==b?void 0:null===(n=b.from)||void 0===n?void 0:n.contains(t))?NodeFilter.FILTER_REJECT:t.matches(e)&&function e(t,n){return"#comment"!==t.nodeName&&function(e){let t=tU(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:n,visibility:r}=e.style,i="none"!==n&&"hidden"!==r&&"collapse"!==r;if(i){let{getComputedStyle:t}=e.ownerDocument.defaultView,{display:n,visibility:r}=t(e);i="none"!==n&&"hidden"!==r&&"collapse"!==r}return i}(t)&&!t.hasAttribute("hidden")&&!t.hasAttribute("data-react-aria-prevent-focus")&&("DETAILS"!==t.nodeName||!n||"SUMMARY"===n.nodeName||t.hasAttribute("open"))&&(!t.parentElement||e(t.parentElement,t))}(t)&&(!(null==b?void 0:b.accept)||b.accept(t))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}}),(null==b?void 0:b.from)&&(t.currentNode=b.from),t);do(r=i.lastChild())&&(n=r);while(r);n&&!n.contains(document.activeElement)&&nc(n)}}}},onFocus:e=>{if(s.isFocused){e.currentTarget.contains(e.target)||s.setFocused(!1);return}if(e.currentTarget.contains(e.target)){if(s.setFocused(!0),null==s.focusedKey){var t,n;let r=e=>{null!=e&&(s.setFocusedKey(e),g&&s.replaceSelection(e))},i=e.relatedTarget;i&&e.currentTarget.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_FOLLOWING?r(null!==(t=s.lastSelectedKey)&&void 0!==t?t:l.getLastKey()):r(null!==(n=s.firstSelectedKey)&&void 0!==n?n:l.getFirstKey())}else v||(x.current.scrollTop=I.current.top,x.current.scrollLeft=I.current.left);if(!v&&null!=s.focusedKey){let e=x.current.querySelector(`[data-key="${CSS.escape(s.focusedKey.toString())}"]`);e&&(e.contains(document.activeElement)||nc(e),"keyboard"===nC&&nx(e,{containingElement:u.current}))}}},onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||s.setFocused(!1)},onMouseDown(e){x.current===e.target&&e.preventDefault()}},{typeSelectProps:N}=function(e){let{keyboardDelegate:t,selectionManager:n,onTypeSelect:r}=e,i=(0,h.useRef)({search:"",timeout:null}).current;return{typeSelectProps:{onKeyDownCapture:t.getKeyForSearch?e=>{var a;let o=1!==(a=e.key).length&&/^[A-Z]/i.test(a)?"":a;if(!o||e.ctrlKey||e.metaKey||!e.currentTarget.contains(e.target))return;" "!==o||!(i.search.trim().length>0)||(e.preventDefault(),"continuePropagation"in e||e.stopPropagation()),i.search+=o;let s=t.getKeyForSearch(i.search,n.focusedKey);null==s&&(s=t.getKeyForSearch(i.search)),null!=s&&(n.setFocusedKey(s),r&&r(s)),clearTimeout(i.timeout),i.timeout=setTimeout(()=>{i.search=""},1e3)}:null}}}({keyboardDelegate:l,selectionManager:s});return m||(C=nE(N,C)),b||(o=null==s.focusedKey?0:-1),{collectionProps:{...C,tabIndex:o}}}({...e,ref:i,selectionManager:t,keyboardDelegate:l});return{listProps:u}}({...o,ref:n,selectionManager:t.selectionManager,collection:t.collection,disabledKeys:t.disabledKeys,shouldFocusWrap:r,linkBehavior:"override"});return nQ.set(t,{onClose:e.onClose,onAction:e.onAction}),{menuProps:(0,tI.d)(s,{onKeyDown:i,onKeyUp:a},{role:"menu",...l,onKeyDown:e=>{"Escape"!==e.key&&l.onKeyDown&&l.onKeyDown(e)}})}}({...E,...x},N,S),R=(0,h.useMemo)(()=>tg({className:f}),[f]),D=(0,tw.W)(null==k?void 0:k.base,f);return{Component:I,state:N,variant:a,color:o,disableAnimation:l,onAction:u,onClose:w,topContent:g,bottomContent:m,closeOnSelect:c,className:f,itemClasses:d,getBaseProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:S,"data-slot":"base",className:R.base({class:D}),...(0,r3.z)(E,{enabled:T}),...e}},getListProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"data-slot":"list",className:R.list({class:null==k?void 0:k.list}),...A,...e}},hideEmptyContent:b,hideSelectedIcon:y,getEmptyContentProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{children:v,className:R.emptyContent({class:null==k?void 0:k.emptyContent}),...e}}}}({...e,ref:t}),v=(0,e0.jsxs)(n,{...b(),children:[!r.collection.size&&!l&&(0,e0.jsx)("li",{children:(0,e0.jsx)("div",{...y()})}),[...r.collection].map(e=>{let t={closeOnSelect:i,color:a,disableAnimation:o,item:e,state:r,variant:u,onClose:c,onAction:d,hideSelectedIcon:s,...e.props};if("section"===e.type)return(0,e0.jsx)(r7,{...t,itemClasses:g},e.key);let n=(0,e0.jsx)(r4,{...t,classNames:g},e.key);return e.wrapper&&(n=e.wrapper(n)),n})]});return(0,e0.jsxs)("div",{...m(),children:[f,v,p]})}var ih=(0,f.Gp)(id);function ip(e,t){let{getMenuProps:n}=(0,c.t)();return(0,e0.jsx)(e1,{children:(0,e0.jsx)(e6,{contain:!0,restoreFocus:!0,children:(0,e0.jsx)(ih,{...n(e,t)})})})}id.displayName="NextUI.Menu";var ig=(0,f.Gp)(ip);ip.displayName="NextUI.DropdownMenu"},26645:function(e,t,n){"use strict";n.d(t,{K:function(){return r},t:function(){return i}});var[r,i]=(0,n(40280).k)({name:"DropdownContext",errorMessage:"useDropdownContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Dropdown />`"})},11693:function(e,t,n){"use strict";n.d(t,{J:function(){return p}});var r=n(2265),i=n(2646),a=n(72243),o=(0,n(26543).tv)({slots:{wrapper:"relative shadow-black/5",zoomedWrapper:"relative overflow-hidden rounded-inherit",img:"relative z-10 opacity-0 shadow-black/5 data-[loaded=true]:opacity-100",blurredImg:["absolute","z-0","inset-0","w-full","h-full","object-cover","filter","blur-lg","scale-105","saturate-150","opacity-30","translate-y-1"]},variants:{radius:{none:{},sm:{},md:{},lg:{},full:{}},shadow:{none:{wrapper:"shadow-none",img:"shadow-none"},sm:{wrapper:"shadow-small",img:"shadow-small"},md:{wrapper:"shadow-medium",img:"shadow-medium"},lg:{wrapper:"shadow-large",img:"shadow-large"}},isZoomed:{true:{img:["object-cover","transform","hover:scale-125"]}},showSkeleton:{true:{wrapper:["group","relative","overflow-hidden","bg-content3 dark:bg-content2"],img:"opacity-0"}},disableAnimation:{true:{img:"transition-none"},false:{img:"transition-transform-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{radius:"lg",shadow:"none",isZoomed:!1,isBlurred:!1,showSkeleton:!1},compoundVariants:[{showSkeleton:!0,disableAnimation:!1,class:{wrapper:["before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2"]}}],compoundSlots:[{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"none",class:"rounded-none"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"full",class:"rounded-full"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"sm",class:"rounded-small"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"md",class:"rounded-md"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"lg",class:"rounded-large"}]}),s=n(88160),l=n(68658),u=n(46763),c=n(97765),d=n(41681),h=n(57437),f=(0,a.Gp)((e,t)=>{let{Component:n,domRef:f,slots:p,classNames:g,isBlurred:m,isZoomed:b,fallbackSrc:y,removeWrapper:v,disableSkeleton:x,getImgProps:w,getWrapperProps:k,getBlurredImgProps:E}=function(e){var t,n;let h=(0,i.w)(),[f,p]=(0,a.oe)(e,o.variantKeys),{ref:g,as:m,src:b,className:y,classNames:v,loading:x,isBlurred:w,fallbackSrc:k,isLoading:E,disableSkeleton:I=!!k,removeWrapper:S=!1,onError:T,onLoad:C,srcSet:N,sizes:A,crossOrigin:R,...D}=f,$=function(e={}){let{loading:t,src:n,srcSet:i,onLoad:a,onError:o,crossOrigin:s,sizes:l,ignoreFallback:u}=e,[c,h]=(0,r.useState)("pending");(0,r.useEffect)(()=>{h(n?"loading":"pending")},[n]);let f=(0,r.useRef)(),p=(0,r.useCallback)(()=>{if(!n)return;g();let e=new Image;e.src=n,s&&(e.crossOrigin=s),i&&(e.srcset=i),l&&(e.sizes=l),t&&(e.loading=t),e.onload=e=>{g(),h("loaded"),null==a||a(e)},e.onerror=e=>{g(),h("failed"),null==o||o(e)},f.current=e},[n,s,i,l,a,o,t]),g=()=>{f.current&&(f.current.onload=null,f.current.onerror=null,f.current=null)};return(0,d.G)(()=>{if(!u)return"loading"===c&&p(),()=>{g()}},[c,p,u]),u?"loaded":c}({src:b,loading:x,onError:T,onLoad:C,ignoreFallback:!1,srcSet:N,sizes:A,crossOrigin:R}),_=null!=(n=null!=(t=e.disableAnimation)?t:null==h?void 0:h.disableAnimation)&&n,F="loaded"===$&&!E,O="loading"===$||E,P=e.isZoomed,M=(0,s.gy)(g),{w:L,h:B}=(0,r.useMemo)(()=>({w:f.width?"number"==typeof f.width?"".concat(f.width,"px"):f.width:"fit-content",h:f.height?"number"==typeof f.height?"".concat(f.height,"px"):f.height:"auto"}),[null==f?void 0:f.width,null==f?void 0:f.height]),U=(!b||!F)&&!!k,z=O&&!I,V=(0,r.useMemo)(()=>o({...p,disableAnimation:_,showSkeleton:z}),[(0,l.Xx)(p),_,z]),W=(0,u.W)(y,null==v?void 0:v.img),j=(0,r.useCallback)(()=>{let e=U?{backgroundImage:"url(".concat(k,")")}:{};return{className:V.wrapper({class:null==v?void 0:v.wrapper}),style:{...e,maxWidth:L}}},[V,U,k,null==v?void 0:v.wrapper]),H=(0,r.useCallback)(()=>({src:b,"aria-hidden":(0,c.PB)(!0),className:V.blurredImg({class:null==v?void 0:v.blurredImg})}),[V,b,null==v?void 0:v.blurredImg]);return{Component:m||"img",domRef:M,slots:V,classNames:v,isBlurred:w,disableSkeleton:I,fallbackSrc:k,removeWrapper:S,isZoomed:P,isLoading:O,getImgProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.W)(W,null==e?void 0:e.className);return{src:b,ref:M,"data-loaded":(0,c.PB)(F),className:V.img({class:t}),loading:x,srcSet:N,sizes:A,crossOrigin:R,...D,style:{...(null==D?void 0:D.height)&&{height:B},...e.style,...D.style}}},getWrapperProps:j,getBlurredImgProps:H}}({...e,ref:t}),I=(0,h.jsx)(n,{ref:f,...w()});if(v)return I;let S=(0,h.jsx)("div",{className:p.zoomedWrapper({class:null==g?void 0:g.zoomedWrapper}),children:I});return m?(0,h.jsxs)("div",{...k(),children:[b?S:I,(0,r.cloneElement)(I,E())]}):b||!x||y?(0,h.jsxs)("div",{...k(),children:[" ",b?S:I]}):I});f.displayName="NextUI.Image";var p=f},52390:function(e,t,n){"use strict";n.d(t,{W:function(){return a}});var r=n(2265);function i(e){return null}i.getCollectionNode=function*(e,t){let{childItems:n,title:i,children:a}=e,o=e.title||e.children,s=e.textValue||("string"==typeof o?o:"")||e["aria-label"]||"";s||(null==t?void 0:t.suppressTextValueWarning)||console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:e,rendered:o,textValue:s,"aria-label":e["aria-label"],hasChildNodes:null!=e.hasChildItems?e.hasChildItems:!!(e.childItems||e.title&&r.Children.count(e.children)>0),*childNodes(){if(n)for(let e of n)yield{type:"item",value:e};else if(i){let e=[];r.Children.forEach(a,t=>{e.push({type:"item",element:t})}),yield*e}}}};var a=i},51885:function(e,t,n){"use strict";n.d(t,{H:function(){return r},l:function(){return i}});var[r,i]=(0,n(40280).k)({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"})},27246:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var r=new Set(["id","type","style","title","role","tabIndex","htmlFor","width","height","abbr","accept","acceptCharset","accessKey","action","allowFullScreen","allowTransparency","alt","async","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","challenge","charset","checked","cite","class","className","cols","colSpan","command","content","contentEditable","contextMenu","controls","coords","crossOrigin","data","dateTime","default","defer","dir","disabled","download","draggable","dropzone","encType","enterKeyHint","for","form","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","headers","hidden","high","href","hrefLang","httpEquiv","icon","inputMode","isMap","itemId","itemProp","itemRef","itemScope","itemType","kind","label","lang","list","loop","manifest","max","maxLength","media","mediaGroup","method","min","minLength","multiple","muted","name","noValidate","open","optimum","pattern","ping","placeholder","poster","preload","radioGroup","referrerPolicy","readOnly","rel","required","rows","rowSpan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","slot","sortable","span","spellCheck","src","srcDoc","srcSet","start","step","target","translate","typeMustMatch","useMap","value","wmode","wrap"]),i=new Set(["onCopy","onCut","onPaste","onLoad","onError","onWheel","onScroll","onCompositionEnd","onCompositionStart","onCompositionUpdate","onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onSubmit","onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPointerDown","onPointerEnter","onPointerLeave","onPointerUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionEnd"]),a=/^(data-.*)$/,o=/^(aria-.*)$/,s=/^(on[A-Z].*)$/;function l(e,t={}){let{labelable:n=!0,enabled:l=!0,propNames:u,omitPropNames:c,omitEventNames:d,omitDataProps:h,omitEventProps:f}=t,p={};if(!l)return e;for(let t in e)!((null==c?void 0:c.has(t))||(null==d?void 0:d.has(t))&&s.test(t)||s.test(t)&&!i.has(t)||h&&a.test(t)||f&&s.test(t))&&(Object.prototype.hasOwnProperty.call(e,t)&&(r.has(t)||n&&o.test(t)||(null==u?void 0:u.has(t))||a.test(t))||s.test(t))&&(p[t]=e[t]);return p}},40280:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(2265);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{strict:t=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:i}=e,a=r.createContext(void 0);return a.displayName=i,[a.Provider,function e(){var i;let o=r.useContext(a);if(!o&&t){let t=Error(n);throw t.name="ContextError",null==(i=Error.captureStackTrace)||i.call(Error,t,e),t}return o},a]}},88160:function(e,t,n){"use strict";n.d(t,{gy:function(){return i}});var r=n(2265);function i(e){let t=(0,r.useRef)(null);return(0,r.useImperativeHandle)(e,()=>t.current),t}"undefined"!=typeof window&&window.document&&window.document.createElement},62577:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var r=n(68658),i=n(2265);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,i.useState)([]);return{ripples:t,onClick:(0,i.useCallback)(e=>{let t=e.currentTarget,i=Math.max(t.clientWidth,t.clientHeight),a=t.getBoundingClientRect();n(t=>[...t,{key:(0,r.QI)(t.length.toString()),size:i,x:e.clientX-a.left-i/2,y:e.clientY-a.top-i/2}])},[]),onClear:(0,i.useCallback)(e=>{n(t=>t.filter(t=>t.key!==e))},[]),...e}}},31594:function(e,t,n){"use strict";n.d(t,{L:function(){return u}});var r=n(50278),i=n(88689),a=n(48614),o=n(67259),s=n(57437),l=e=>{let{ripples:t=[],motionProps:n,color:l="currentColor",style:u,onClear:c}=e;return(0,s.jsx)(s.Fragment,{children:t.map(e=>{let t=Math.min(Math.max(.01*e.size,.2),e.size>100?.75:.5);return(0,s.jsx)(r.X,{features:i.H,children:(0,s.jsx)(a.M,{mode:"popLayout",children:(0,s.jsx)(o.m.span,{animate:{transform:"scale(2)",opacity:0},className:"nextui-ripple",exit:{opacity:0},initial:{transform:"scale(0)",opacity:.35},style:{position:"absolute",backgroundColor:l,borderRadius:"100%",transformOrigin:"center",pointerEvents:"none",overflow:"hidden",inset:0,zIndex:0,top:e.y,left:e.x,width:"".concat(e.size,"px"),height:"".concat(e.size,"px"),...u},transition:{duration:t},onAnimationComplete:()=>{c(e.key)},...n})})},e.key)})})};l.displayName="NextUI.Ripple";var u=l},46763:function(e,t,n){"use strict";function r(...e){for(var t,n,i=0,a="";i<e.length;)(t=e[i++])&&(n=function e(t){var n,r,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t))for(n=0;n<t.length;n++)t[n]&&(r=e(t[n]))&&(i&&(i+=" "),i+=r);else for(n in t)t[n]&&(i&&(i+=" "),i+=n)}return i}(t))&&(a&&(a+=" "),a+=n);return a}n.d(t,{W:function(){return r}})},97765:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,{PB:function(){return i},mf:function(){return r}});var i=e=>e?"true":void 0},68658:function(e,t,n){"use strict";function r(e){return`${e}-${Math.floor(1e6*Math.random())}`}function i(e){for(let t in e)t.startsWith("on")&&delete e[t];return e}function a(e){if(!e||"object"!=typeof e)return"";try{return JSON.stringify(e)}catch(e){return""}}n.d(t,{Os:function(){return i},QI:function(){return r},Xx:function(){return a}})},72243:function(e,t,n){"use strict";n.d(t,{Gp:function(){return i},oe:function(){return a}});var r=n(2265);function i(e){return(0,r.forwardRef)(e)}var a=(e,t,n=!0)=>{if(!t)return[e,{}];let r=t.reduce((t,n)=>n in e?{...t,[n]:e[n]}:t,{});return n?[Object.keys(e).filter(e=>!t.includes(e)).reduce((t,n)=>({...t,[n]:e[n]}),{}),r]:[e,r]}},2646:function(e,t,n){"use strict";n.d(t,{w:function(){return i}});var[r,i]=(0,n(40280).k)({name:"ProviderContext",strict:!1})},41351:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});var r={solid:{default:"bg-default text-default-foreground",primary:"bg-primary text-primary-foreground",secondary:"bg-secondary text-secondary-foreground",success:"bg-success text-success-foreground",warning:"bg-warning text-warning-foreground",danger:"bg-danger text-danger-foreground",foreground:"bg-foreground text-background"},shadow:{default:"shadow-lg shadow-default/50 bg-default text-default-foreground",primary:"shadow-lg shadow-primary/40 bg-primary text-primary-foreground",secondary:"shadow-lg shadow-secondary/40 bg-secondary text-secondary-foreground",success:"shadow-lg shadow-success/40 bg-success text-success-foreground",warning:"shadow-lg shadow-warning/40 bg-warning text-warning-foreground",danger:"shadow-lg shadow-danger/40 bg-danger text-danger-foreground",foreground:"shadow-lg shadow-foreground/40 bg-foreground text-background"},bordered:{default:"bg-transparent border-default text-foreground",primary:"bg-transparent border-primary text-primary",secondary:"bg-transparent border-secondary text-secondary",success:"bg-transparent border-success text-success",warning:"bg-transparent border-warning text-warning",danger:"bg-transparent border-danger text-danger",foreground:"bg-transparent border-foreground text-foreground"},flat:{default:"bg-default/40 text-default-700",primary:"bg-primary/20 text-primary-700",secondary:"bg-secondary/20 text-secondary-700",success:"bg-success/20 text-success-800 dark:text-success",warning:"bg-warning/20 text-warning-800 dark:text-warning",danger:"bg-danger/20 text-danger-800 dark:text-danger-500",foreground:"bg-foreground/10 text-foreground"},faded:{default:"border-default bg-default-100 text-default-foreground",primary:"border-default bg-default-100 text-primary",secondary:"border-default bg-default-100 text-secondary",success:"border-default bg-default-100 text-success",warning:"border-default bg-default-100 text-warning",danger:"border-default bg-default-100 text-danger",foreground:"border-default bg-default-100 text-foreground"},light:{default:"bg-transparent text-default-foreground",primary:"bg-transparent text-primary",secondary:"bg-transparent text-secondary",success:"bg-transparent text-success",warning:"bg-transparent text-warning",danger:"bg-transparent text-danger",foreground:"bg-transparent text-foreground"},ghost:{default:"border-default text-default-foreground",primary:"border-primary text-primary",secondary:"border-secondary text-secondary",success:"border-success text-success",warning:"border-warning text-warning",danger:"border-danger text-danger",foreground:"border-foreground text-foreground hover:!bg-foreground"}}},26543:function(e,t,n){"use strict";n.d(t,{tv:function(){return en}});var r=["small","medium","large"],i={theme:{opacity:["disabled"],spacing:["divider"],borderWidth:r,borderRadius:r},classGroups:{shadow:[{shadow:r}],"font-size":[{text:["tiny",...r]}],"bg-image":["bg-stripe-gradient"]}},a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,o=e=>!e||"object"!=typeof e||0===Object.keys(e).length,s=(e,t)=>JSON.stringify(e)===JSON.stringify(t);function l(e){let t=[];return function e(t,n){t.forEach(function(t){Array.isArray(t)?e(t,n):n.push(t)})}(e,t),t}var u=(...e)=>l(e).filter(Boolean),c=(e,t)=>{let n={},r=Object.keys(e),i=Object.keys(t);for(let a of r)if(i.includes(a)){let r=e[a],i=t[a];"object"==typeof r&&"object"==typeof i?n[a]=c(r,i):Array.isArray(r)||Array.isArray(i)?n[a]=u(i,r):n[a]=i+" "+r}else n[a]=e[a];for(let e of i)r.includes(e)||(n[e]=t[e]);return n},d=e=>e&&"string"==typeof e?e.replace(/\s+/g," ").trim():e,h=/^\[(.+)\]$/;function f(e,t){var n=e;return t.split("-").forEach(function(e){n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n}var p=/\s+/;function g(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=function e(t){if("string"==typeof t)return t;for(var n,r="",i=0;i<t.length;i++)t[i]&&(n=e(t[i]))&&(r&&(r+=" "),r+=n);return r}(e))&&(r&&(r+=" "),r+=t);return r}function m(){for(var e,t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=function(r){var a=i[0];return t=(e=function(e){var t,n,r,i,a,o,s,l,u,c,d;return{cache:function(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,r=new Map;function i(i,a){n.set(i,a),++t>e&&(t=0,r=n,n=new Map)}return{get:function(e){var t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(i(e,t),t):void 0},set:function(e,t){n.has(e)?n.set(e,t):i(e,t)}}}(e.cacheSize),splitModifiers:(n=1===(t=e.separator||":").length,r=t[0],i=t.length,function(e){for(var a,o=[],s=0,l=0,u=0;u<e.length;u++){var c=e[u];if(0===s){if(c===r&&(n||e.slice(u,u+i)===t)){o.push(e.slice(l,u)),l=u+i;continue}if("/"===c){a=u;continue}}"["===c?s++:"]"===c&&s--}var d=0===o.length?e:e.substring(l),h=d.startsWith("!"),f=h?d.substring(1):d;return{modifiers:o,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:a&&a>l?a-l:void 0}}),...(l=e.theme,u=e.prefix,c={nextPart:new Map,validators:[]},(d=Object.entries(e.classGroups),u?d.map(function(e){return[e[0],e[1].map(function(e){return"string"==typeof e?u+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(function(e){return[u+e[0],e[1]]})):e})]}):d).forEach(function(e){var t=e[0];(function e(t,n,r,i){t.forEach(function(t){if("string"==typeof t){(""===t?n:f(n,t)).classGroupId=r;return}if("function"==typeof t){if(t.isThemeGetter){e(t(i),n,r,i);return}n.validators.push({validator:t,classGroupId:r});return}Object.entries(t).forEach(function(t){var a=t[0];e(t[1],f(n,a),r,i)})})})(e[1],c,t,l)}),a=e.conflictingClassGroups,s=void 0===(o=e.conflictingClassGroupModifiers)?{}:o,{getClassGroupId:function(e){var t=e.split("-");return""===t[0]&&1!==t.length&&t.shift(),function e(t,n){if(0===t.length)return n.classGroupId;var r=t[0],i=n.nextPart.get(r),a=i?e(t.slice(1),i):void 0;if(a)return a;if(0!==n.validators.length){var o=t.join("-");return n.validators.find(function(e){return(0,e.validator)(o)})?.classGroupId}}(t,c)||function(e){if(h.test(e)){var t=h.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}(e)},getConflictingClassGroupIds:function(e,t){var n=a[e]||[];return t&&s[e]?[].concat(n,s[e]):n}})}}(i.slice(1).reduce(function(e,t){return t(e)},a()))).cache.get,n=e.cache.set,o=s,s(r)};function s(r){var i,a,o,s,l,u=t(r);if(u)return u;var c=(a=(i=e).splitModifiers,o=i.getClassGroupId,s=i.getConflictingClassGroupIds,l=new Set,r.trim().split(p).map(function(e){var t=a(e),n=t.modifiers,r=t.hasImportantModifier,i=t.baseClassName,s=t.maybePostfixModifierPosition,l=o(s?i.substring(0,s):i),u=!!s;if(!l){if(!s||!(l=o(i)))return{isTailwindClass:!1,originalClassName:e};u=!1}var c=(function(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(e){"["===e[0]?(t.push.apply(t,n.sort().concat([e])),n=[]):n.push(e)}),t.push.apply(t,n.sort()),t})(n).join(":");return{isTailwindClass:!0,modifierId:r?c+"!":c,classGroupId:l,originalClassName:e,hasPostfixModifier:u}}).reverse().filter(function(e){if(!e.isTailwindClass)return!0;var t=e.modifierId,n=e.classGroupId,r=e.hasPostfixModifier,i=t+n;return!l.has(i)&&(l.add(i),s(n,r).forEach(function(e){return l.add(t+e)}),!0)}).reverse().map(function(e){return e.originalClassName}).join(" "));return n(r,c),c}return function(){return o(g.apply(null,arguments))}}function b(e){var t=function(t){return t[e]||[]};return t.isThemeGetter=!0,t}var y=/^\[(?:([a-z-]+):)?(.+)\]$/i,v=/^\d+\/\d+$/,x=new Set(["px","full","screen"]),w=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,k=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,E=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function I(e){return R(e)||x.has(e)||v.test(e)||S(e)}function S(e){return M(e,"length",L)}function T(e){return M(e,"size",B)}function C(e){return M(e,"position",B)}function N(e){return M(e,"url",U)}function A(e){return M(e,"number",R)}function R(e){return!Number.isNaN(Number(e))}function D(e){return e.endsWith("%")&&R(e.slice(0,-1))}function $(e){return z(e)||M(e,"number",z)}function _(e){return y.test(e)}function F(){return!0}function O(e){return w.test(e)}function P(e){return M(e,"",V)}function M(e,t,n){var r=y.exec(e);return!!r&&(r[1]?r[1]===t:n(r[2]))}function L(e){return k.test(e)}function B(){return!1}function U(e){return e.startsWith("url(")}function z(e){return Number.isInteger(Number(e))}function V(e){return E.test(e)}function W(){var e=b("colors"),t=b("spacing"),n=b("blur"),r=b("brightness"),i=b("borderColor"),a=b("borderRadius"),o=b("borderSpacing"),s=b("borderWidth"),l=b("contrast"),u=b("grayscale"),c=b("hueRotate"),d=b("invert"),h=b("gap"),f=b("gradientColorStops"),p=b("gradientColorStopPositions"),g=b("inset"),m=b("margin"),y=b("opacity"),v=b("padding"),x=b("saturate"),w=b("scale"),k=b("sepia"),E=b("skew"),M=b("space"),L=b("translate"),B=function(){return["auto","contain","none"]},U=function(){return["auto","hidden","clip","visible","scroll"]},z=function(){return["auto",_,t]},V=function(){return[_,t]},W=function(){return["",I]},j=function(){return["auto",R,_]},H=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},K=function(){return["solid","dashed","dotted","double","none"]},G=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},X=function(){return["start","end","center","between","around","evenly","stretch"]},q=function(){return["","0",_]},Y=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},Q=function(){return[R,A]},J=function(){return[R,_]};return{cacheSize:500,theme:{colors:[F],spacing:[I],blur:["none","",O,_],brightness:Q(),borderColor:[e],borderRadius:["none","","full",O,_],borderSpacing:V(),borderWidth:W(),contrast:Q(),grayscale:q(),hueRotate:J(),invert:q(),gap:V(),gradientColorStops:[e],gradientColorStopPositions:[D,S],inset:z(),margin:z(),opacity:Q(),padding:V(),saturate:Q(),scale:Q(),sepia:q(),skew:J(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",_]}],container:["container"],columns:[{columns:[O]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(H(),[_])}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$]}],basis:[{basis:z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",$]}],"grid-cols":[{"grid-cols":[F]}],"col-start-end":[{col:["auto",{span:["full",$]},_]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[F]}],"row-start-end":[{row:["auto",{span:[$]},_]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(X())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(X(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(X(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",_,t]}],"min-w":[{"min-w":["min","max","fit",_,I]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[O]},O,_]}],h:[{h:[_,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",_,I]}],"max-h":[{"max-h":[_,t,"min","max","fit"]}],"font-size":[{text:["base",O,S]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",A]}],"font-family":[{font:[F]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_]}],"line-clamp":[{"line-clamp":["none",R,A]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",_,I]}],"list-image":[{"list-image":["none",_]}],"list-style-type":[{list:["none","disc","decimal",_]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(K(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",I]}],"underline-offset":[{"underline-offset":["auto",_,I]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(H(),[C])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",T]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},N]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[].concat(K(),["hidden"])}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:K()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(K())}],"outline-offset":[{"outline-offset":[_,I]}],"outline-w":[{outline:[I]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[I]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",O,P]}],"shadow-color":[{shadow:[F]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":G()}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",O,_]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[x]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",_]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",_]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[$,_]}],"translate-x":[{"translate-x":[L]}],"translate-y":[{"translate-y":[L]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[I,A]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var j=m(W),H=Object.prototype.hasOwnProperty,K=new Set(["string","number","boolean"]),G={twMerge:!0,twMergeConfig:{},responsiveVariants:!1},X=e=>e||void 0,q=(...e)=>X(l(e).filter(Boolean).join(" ")),Y=null,Q={},J=!1,Z=(...e)=>t=>t.twMerge?((!Y||J)&&(J=!1,Y=o(Q)?j:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"==typeof e?m.apply(void 0,[W,e].concat(n)):m.apply(void 0,[function(){return function(e,t){for(var n in t)(function e(t,n,r){if(!H.call(t,n)||K.has(typeof r)||null===r){t[n]=r;return}if(Array.isArray(r)&&Array.isArray(t[n])){t[n]=t[n].concat(r);return}if("object"==typeof r&&"object"==typeof t[n]){if(null===t[n]){t[n]=r;return}for(var i in r)e(t[n],i,r[i])}})(e,n,t[n]);return e}(W(),e)}].concat(n))}(Q)),X(Y(q(e)))):q(e),ee=(e,t)=>{for(let n in t)e.hasOwnProperty(n)?e[n]=q(e[n],t[n]):e[n]=t[n];return e},et=(e,t)=>{let{extend:n=null,slots:r={},variants:i={},compoundVariants:l=[],compoundSlots:h=[],defaultVariants:f={}}=e,p={...G,...t},g=null!=n&&n.base?q(n.base,null==e?void 0:e.base):null==e?void 0:e.base,m=null!=n&&n.variants&&!o(n.variants)?c(i,n.variants):i,b=null!=n&&n.defaultVariants&&!o(n.defaultVariants)?{...n.defaultVariants,...f}:f;o(p.twMergeConfig)||s(p.twMergeConfig,Q)||(J=!0,Q=p.twMergeConfig);let y=o(null==n?void 0:n.slots),v=o(r)?{}:{base:q(null==e?void 0:e.base,y&&(null==n?void 0:n.base)),...r},x=y?v:ee({...null==n?void 0:n.slots},o(v)?{base:null==e?void 0:e.base}:v),w=e=>{if(o(m)&&o(r)&&y)return Z(g,null==e?void 0:e.class,null==e?void 0:e.className)(p);if(l&&!Array.isArray(l))throw TypeError(`The "compoundVariants" prop must be an array. Received: ${typeof l}`);if(h&&!Array.isArray(h))throw TypeError(`The "compoundSlots" prop must be an array. Received: ${typeof h}`);let t=(e,t,n=[],r)=>{let i=n;if("string"==typeof t)i=i.concat(d(t).split(" ").map(t=>`${e}:${t}`));else if(Array.isArray(t))i=i.concat(t.reduce((t,n)=>t.concat(`${e}:${n}`),[]));else if("object"==typeof t&&"string"==typeof r){for(let n in t)if(t.hasOwnProperty(n)&&n===r){let a=t[n];if(a&&"string"==typeof a){let t=d(a);i[r]?i[r]=i[r].concat(t.split(" ").map(t=>`${e}:${t}`)):i[r]=t.split(" ").map(t=>`${e}:${t}`)}else Array.isArray(a)&&a.length>0&&(i[r]=a.reduce((t,n)=>t.concat(`${e}:${n}`),[]))}}return i},i=(n,r=m,i=null,s=null)=>{var l;let u=r[n];if(!u||o(u))return null;let c=null!=(l=null==s?void 0:s[n])?l:null==e?void 0:e[n];if(null===c)return null;let d=a(c),h=Array.isArray(p.responsiveVariants)&&p.responsiveVariants.length>0||!0===p.responsiveVariants,f=null==b?void 0:b[n],g=[];if("object"==typeof d&&h)for(let[e,n]of Object.entries(d)){let r=u[n];if("initial"===e){f=n;continue}Array.isArray(p.responsiveVariants)&&!p.responsiveVariants.includes(e)||(g=t(e,r,g,i))}let y=u[d]||u[a(f)];return"object"==typeof g&&"string"==typeof i&&g[i]?ee(g,y):g.length>0?(g.push(y),g):y},s=(e,t)=>{if(!m||"object"!=typeof m)return null;let n=[];for(let r in m){let a=i(r,m,e,t),o="base"===e&&"string"==typeof a?a:a&&a[e];o&&(n[n.length]=o)}return n},c={};for(let t in e)void 0!==e[t]&&(c[t]=e[t]);let f=(t,n)=>{var r;let i="object"==typeof(null==e?void 0:e[t])?{[t]:null==(r=e[t])?void 0:r.initial}:{};return{...b,...c,...i,...n}},v=(e=[],t)=>{let n=[];for(let{class:r,className:i,...a}of e){let e=!0;for(let[n,r]of Object.entries(a)){let i=f(n,t);if(Array.isArray(r)){if(!r.includes(i[n])){e=!1;break}}else if(i[n]!==r){e=!1;break}}e&&(r&&n.push(r),i&&n.push(i))}return n},w=e=>{let t=v(l,e);return u(v(null==n?void 0:n.compoundVariants,e),t)},k=e=>{let t=w(e);if(!Array.isArray(t))return t;let n={};for(let e of t)if("string"==typeof e&&(n.base=Z(n.base,e)(p)),"object"==typeof e)for(let[t,r]of Object.entries(e))n[t]=Z(n[t],r)(p);return n},E=e=>{if(h.length<1)return null;let t={};for(let{slots:n=[],class:r,className:i,...a}of h){if(!o(a)){let t=!0;for(let n of Object.keys(a)){let r=f(n,e)[n];if(void 0===r||(Array.isArray(a[n])?!a[n].includes(r):a[n]!==r)){t=!1;break}}if(!t)continue}for(let e of n)t[e]=t[e]||[],t[e].push([r,i])}return t};if(!o(r)||!y){let e={};if("object"==typeof x&&!o(x))for(let t of Object.keys(x))e[t]=e=>{var n,r;return Z(x[t],s(t,e),(null!=(n=k(e))?n:[])[t],(null!=(r=E(e))?r:[])[t],null==e?void 0:e.class,null==e?void 0:e.className)(p)};return e}return Z(g,m?Object.keys(m).map(e=>i(e,m)):null,w(),null==e?void 0:e.class,null==e?void 0:e.className)(p)};return w.variantKeys=(()=>{if(!(!m||"object"!=typeof m))return Object.keys(m)})(),w.extend=n,w.base=g,w.slots=x,w.variants=m,w.defaultVariants=b,w.compoundSlots=h,w.compoundVariants=l,w},en=(e,t)=>{var n,r,a;return et(e,{...t,twMerge:null==(n=null==t?void 0:t.twMerge)||n,twMergeConfig:{...null==t?void 0:t.twMergeConfig,theme:{...null==(r=null==t?void 0:t.twMergeConfig)?void 0:r.theme,...i.theme},classGroups:{...null==(a=null==t?void 0:t.twMergeConfig)?void 0:a.classGroups,...i.classGroups}}})}},18373:function(e,t,n){"use strict";n.d(t,{Dh:function(){return r},Zs:function(){return i}});var r=["outline-none","data-[focus-visible=true]:z-10","data-[focus-visible=true]:outline-2","data-[focus-visible=true]:outline-focus","data-[focus-visible=true]:outline-offset-2"],i={default:["[&+.border-medium.border-default]:ms-[calc(theme(borderWidth.medium)*-1)]"],primary:["[&+.border-medium.border-primary]:ms-[calc(theme(borderWidth.medium)*-1)]"],secondary:["[&+.border-medium.border-secondary]:ms-[calc(theme(borderWidth.medium)*-1)]"],success:["[&+.border-medium.border-success]:ms-[calc(theme(borderWidth.medium)*-1)]"],warning:["[&+.border-medium.border-warning]:ms-[calc(theme(borderWidth.medium)*-1)]"],danger:["[&+.border-medium.border-danger]:ms-[calc(theme(borderWidth.medium)*-1)]"]}},5393:function(e,t,n){"use strict";n.d(t,{j:function(){return g}});var r=n(5376),i=n(94508),a=n(51375),o=n(67200),s=n(2265);"undefined"!=typeof window&&window.document&&window.document.createElement;let l=new Map;var u=n(61994);function c(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let r=e[n];for(let e in r){let n=t[e],i=r[e];"function"==typeof n&&"function"==typeof i&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&90>=e.charCodeAt(2)?t[e]=function(...e){return(...t)=>{for(let n of e)"function"==typeof n&&n(...t)}}(n,i):("className"===e||"UNSAFE_className"===e)&&"string"==typeof n&&"string"==typeof i?t[e]=(0,u.Z)(n,i):"id"===e&&n&&i?t.id=function(e,t){if(e===t)return e;let n=l.get(e);if(n)return n.forEach(e=>e(t)),t;let r=l.get(t);return r?(r.forEach(t=>t(e)),e):t}(n,i):t[e]=void 0!==i?i:n}}return t}var d=n(22164);function h(e){if(!e)return;let t=!0;return n=>{e({...n,preventDefault(){n.preventDefault()},isDefaultPrevented:()=>n.isDefaultPrevented(),stopPropagation(){console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.")},continuePropagation(){t=!1}}),t&&n.stopPropagation()}}let f=s.createContext(null);var p=n(8015);function g(e,t){let n,{elementType:l="button",isDisabled:u,onPress:g,onPressStart:m,onPressEnd:b,onPressChange:y,preventFocusOnPress:v,allowFocusWhenDisabled:x,onClick:w,href:k,target:E,rel:I,type:S="button",allowTextSelectionOnPress:T}=e;n="button"===l?{type:S,disabled:u}:{role:"button",tabIndex:u?void 0:0,href:"a"===l&&u?void 0:k,target:"a"===l?E:void 0,type:"input"===l?S:void 0,disabled:"input"===l?u:void 0,"aria-disabled":u&&"input"!==l?u:void 0,rel:"a"===l?I:void 0};let{pressProps:C,isPressed:N}=(0,p.r)({onPressStart:m,onPressEnd:b,onPressChange:y,onPress:g,isDisabled:u,preventFocusOnPress:v,allowTextSelectionOnPress:T,ref:t}),{focusableProps:A}=function(e,t){let{focusProps:n}=(0,d.K)(e),{keyboardProps:r}={keyboardProps:e.isDisabled?{}:{onKeyDown:h(e.onKeyDown),onKeyUp:h(e.onKeyUp)}},i=c(n,r),l=function(e){let t=(0,s.useContext)(f)||{};(0,o.b)(()=>{if(t&&t.ref&&e)return t.ref.current=e.current,()=>{t.ref&&(t.ref.current=null)}});let{ref:n,...r}=t;return r}(t),u=e.isDisabled?{}:l,p=(0,s.useRef)(e.autoFocus);return(0,s.useEffect)(()=>{p.current&&t.current&&(0,a.e)(t.current),p.current=!1},[t]),{focusableProps:c({...i,tabIndex:e.excludeFromTabOrder&&!e.isDisabled?-1:void 0},u)}}(e,t);x&&(A.tabIndex=u?-1:A.tabIndex);let R=(0,r.d)(A,C,(0,i.z)(e,{labelable:!0}));return{isPressed:N,buttonProps:(0,r.d)(n,R,{"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],"aria-pressed":e["aria-pressed"],onClick:e=>{null==w||w(e)}})}}},41681:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var r=n(2265),i=(null==globalThis?void 0:globalThis.document)?r.useLayoutEffect:r.useEffect},51375:function(e,t,n){"use strict";n.d(t,{e:function(){return c}});var r=n(92326);let i=new Map,a=new Set;function o(){if("undefined"==typeof window)return;function e(e){return"propertyName"in e}let t=n=>{if(!e(n)||!n.target)return;let r=i.get(n.target);if(r&&(r.delete(n.propertyName),0===r.size&&(n.target.removeEventListener("transitioncancel",t),i.delete(n.target)),0===i.size)){for(let e of a)e();a.clear()}};document.body.addEventListener("transitionrun",n=>{if(!e(n)||!n.target)return;let r=i.get(n.target);r||(r=new Set,i.set(n.target,r),n.target.addEventListener("transitioncancel",t,{once:!0})),r.add(n.propertyName)}),document.body.addEventListener("transitionend",t)}function s(e){if(function(){if(null==l){l=!1;try{document.createElement("div").focus({get preventScroll(){return l=!0,!0}})}catch{}}return l}())e.focus({preventScroll:!0});else{let t=function(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}(e);e.focus(),function(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}(t)}}"undefined"!=typeof document&&("loading"!==document.readyState?o():document.addEventListener("DOMContentLoaded",o));let l=null;var u=n(59429);function c(e){let t=(0,r.r)(e);if("virtual"===(0,u.Jz)()){var n;let r=t.activeElement;n=()=>{t.activeElement===r&&e.isConnected&&s(e)},requestAnimationFrame(()=>{0===i.size?n():a.add(n)})}else s(e)}},43096:function(e,t,n){"use strict";n.d(t,{F:function(){return s}});var r=n(59429),i=n(22164),a=n(82129),o=n(2265);function s(e={}){let{autoFocus:t=!1,isTextInput:n,within:s}=e,l=(0,o.useRef)({isFocused:!1,isFocusVisible:t||(0,r.E)()}),[u,c]=(0,o.useState)(!1),[d,h]=(0,o.useState)(()=>l.current.isFocused&&l.current.isFocusVisible),f=(0,o.useCallback)(()=>h(l.current.isFocused&&l.current.isFocusVisible),[]),p=(0,o.useCallback)(e=>{l.current.isFocused=e,c(e),f()},[f]);(0,r.mG)(e=>{l.current.isFocusVisible=e,f()},[],{isTextInput:n});let{focusProps:g}=(0,i.K)({isDisabled:s,onFocusChange:p}),{focusWithinProps:m}=function(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=e,s=(0,o.useRef)({isFocusWithin:!1}),l=(0,o.useCallback)(e=>{s.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(s.current.isFocusWithin=!1,n&&n(e),i&&i(!1))},[n,i,s]),u=(0,a.d)(l),c=(0,o.useCallback)(e=>{s.current.isFocusWithin||document.activeElement!==e.target||(r&&r(e),i&&i(!0),s.current.isFocusWithin=!0,u(e))},[r,i,u]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:c,onBlur:l}}}({isDisabled:!s,onFocusWithinChange:p});return{isFocused:u,isFocusVisible:d,focusProps:s?m:g}}},22164:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var r=n(82129),i=n(2265),a=n(92326);function o(e){let{isDisabled:t,onFocus:n,onBlur:o,onFocusChange:s}=e,l=(0,i.useCallback)(e=>{if(e.target===e.currentTarget)return o&&o(e),s&&s(!1),!0},[o,s]),u=(0,r.d)(l),c=(0,i.useCallback)(e=>{let t=(0,a.r)(e.target);e.target===e.currentTarget&&t.activeElement===e.target&&(n&&n(e),s&&s(!0),u(e))},[s,n,u]);return{focusProps:{onFocus:!t&&(n||s||o)?c:void 0,onBlur:!t&&(o||s)?l:void 0}}}},59429:function(e,t,n){"use strict";function r(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent))}function i(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function a(e){let t=null;return()=>(null==t&&(t=e()),t)}n.d(t,{Jz:function(){return A},E:function(){return N},mG:function(){return D}});let o=a(function(){return i(/^Mac/i)}),s=a(function(){return i(/^iPhone/i)}),l=a(function(){return i(/^iPad/i)||o()&&navigator.maxTouchPoints>1}),u=a(function(){return s()||l()});a(function(){return o()||u()}),a(function(){return r(/AppleWebKit/i)&&!c()});let c=a(function(){return r(/Chrome/i)}),d=a(function(){return r(/Android/i)});a(function(){return r(/Firefox/i)});var h=n(92326),f=n(2265);let p=null,g=new Set,m=new Map,b=!1,y=!1,v={Tab:!0,Escape:!0};function x(e,t){for(let n of g)n(e,t)}function w(e){b=!0,e.metaKey||!o()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key||(p="keyboard",x("keyboard",e))}function k(e){p="pointer",("mousedown"===e.type||"pointerdown"===e.type)&&(b=!0,x("pointer",e))}function E(e){(0===e.mozInputSource&&e.isTrusted||(d()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType))&&(b=!0,p="virtual")}function I(e){e.target!==window&&e.target!==document&&(b||y||(p="virtual",x("virtual",e)),b=!1,y=!1)}function S(){b=!1,y=!0}function T(e){if("undefined"==typeof window||m.get((0,h.k)(e)))return;let t=(0,h.k)(e),n=(0,h.r)(e),r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){b=!0,r.apply(this,arguments)},n.addEventListener("keydown",w,!0),n.addEventListener("keyup",w,!0),n.addEventListener("click",E,!0),t.addEventListener("focus",I,!0),t.addEventListener("blur",S,!1),"undefined"!=typeof PointerEvent?(n.addEventListener("pointerdown",k,!0),n.addEventListener("pointermove",k,!0),n.addEventListener("pointerup",k,!0)):(n.addEventListener("mousedown",k,!0),n.addEventListener("mousemove",k,!0),n.addEventListener("mouseup",k,!0)),t.addEventListener("beforeunload",()=>{C(e)},{once:!0}),m.set(t,{focus:r})}let C=(e,t)=>{let n=(0,h.k)(e),r=(0,h.r)(e);t&&r.removeEventListener("DOMContentLoaded",t),m.has(n)&&(n.HTMLElement.prototype.focus=m.get(n).focus,r.removeEventListener("keydown",w,!0),r.removeEventListener("keyup",w,!0),r.removeEventListener("click",E,!0),n.removeEventListener("focus",I,!0),n.removeEventListener("blur",S,!1),"undefined"!=typeof PointerEvent?(r.removeEventListener("pointerdown",k,!0),r.removeEventListener("pointermove",k,!0),r.removeEventListener("pointerup",k,!0)):(r.removeEventListener("mousedown",k,!0),r.removeEventListener("mousemove",k,!0),r.removeEventListener("mouseup",k,!0)),m.delete(n))};function N(){return"pointer"!==p}function A(){return p}"undefined"!=typeof document&&function(e){let t;let n=(0,h.r)(void 0);"loading"!==n.readyState?T(void 0):(t=()=>{T(void 0)},n.addEventListener("DOMContentLoaded",t)),()=>C(e,t)}();let R=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function D(e,t,n){T(),(0,f.useEffect)(()=>{let t=(t,r)=>{(function(e,t,n){var r;let i="undefined"!=typeof window?(0,h.k)(null==n?void 0:n.target).HTMLInputElement:HTMLInputElement,a="undefined"!=typeof window?(0,h.k)(null==n?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,o="undefined"!=typeof window?(0,h.k)(null==n?void 0:n.target).HTMLElement:HTMLElement,s="undefined"!=typeof window?(0,h.k)(null==n?void 0:n.target).KeyboardEvent:KeyboardEvent;return!((e=e||(null==n?void 0:n.target)instanceof i&&!R.has(null==n?void 0:null===(r=n.target)||void 0===r?void 0:r.type)||(null==n?void 0:n.target)instanceof a||(null==n?void 0:n.target)instanceof o&&(null==n?void 0:n.target.isContentEditable))&&"keyboard"===t&&n instanceof s&&!v[n.key])})(!!(null==n?void 0:n.isTextInput),t,r)&&e(N())};return g.add(t),()=>{g.delete(t)}},t)}},82129:function(e,t,n){"use strict";n.d(t,{d:function(){return o}});var r=n(2265),i=n(67200);class a{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=e}}function o(e){let t=(0,r.useRef)({isFocused:!1,observer:null});(0,i.b)(()=>{let e=t.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}},[]);let n=function(e){let t=(0,r.useRef)(null);return(0,i.b)(()=>{t.current=e},[e]),(0,r.useCallback)((...e)=>{let n=t.current;return null==n?void 0:n(...e)},[])}(t=>{null==e||e(t)});return(0,r.useCallback)(e=>{if(e.target instanceof HTMLButtonElement||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=e.target;r.addEventListener("focusout",e=>{t.current.isFocused=!1,r.disabled&&n(new a("blur",e)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)},{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&r.disabled){var e;null===(e=t.current.observer)||void 0===e||e.disconnect();let n=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:n})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:n}))}}),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[n])}},92326:function(e,t,n){"use strict";n.d(t,{k:function(){return i},r:function(){return r}});let r=e=>{var t;return null!==(t=null==e?void 0:e.ownerDocument)&&void 0!==t?t:document},i=e=>e&&"window"in e&&e.window===e?e:r(e).defaultView||window},67200:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(2265);let i="undefined"!=typeof document?r.useLayoutEffect:()=>{}},25311:function(e,t,n){"use strict";n.d(t,{j:function(){return f}});let r=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),i=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);var a=n(2265),o=n(87365);let s=Symbol.for("react-aria.i18n.locale");function l(){let e="undefined"!=typeof window&&window[s]||"undefined"!=typeof navigator&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:!function(e){if(Intl.Locale){let t=new Intl.Locale(e).maximize(),n="function"==typeof t.getTextInfo?t.getTextInfo():t.textInfo;if(n)return"rtl"===n.direction;if(t.script)return r.has(t.script)}let t=e.split("-")[0];return i.has(t)}(e)?"ltr":"rtl"}}let u=l(),c=new Set;function d(){for(let e of(u=l(),c))e(u)}let h=a.createContext(null);function f(){let e=function(){let e=(0,o.Av)(),[t,n]=(0,a.useState)(u);return((0,a.useEffect)(()=>(0===c.size&&window.addEventListener("languagechange",d),c.add(n),()=>{c.delete(n),0===c.size&&window.removeEventListener("languagechange",d)}),[]),e)?{locale:"en-US",direction:"ltr"}:t}();return(0,a.useContext)(h)||e}},73106:function(e,t,n){"use strict";let r;n.d(t,{q:function(){return f}});var i=n(25311);let a=Symbol.for("react-aria.i18n.locale"),o=Symbol.for("react-aria.i18n.strings");class s{getStringForLocale(e,t){let n=this.getStringsForLocale(t)[e];if(!n)throw Error(`Could not find intl message ${e} in ${t} locale`);return n}getStringsForLocale(e){let t=this.strings[e];return t||(t=function(e,t,n="en-US"){if(t[e])return t[e];let r=Intl.Locale?new Intl.Locale(e).language:e.split("-")[0];if(t[r])return t[r];for(let e in t)if(e.startsWith(r+"-"))return t[e];return t[n]}(e,this.strings,this.defaultLocale),this.strings[e]=t),t}static getGlobalDictionaryForPackage(e){if("undefined"==typeof window)return null;let t=window[a];if(void 0===r){let e=window[o];if(!e)return null;for(let n in r={},e)r[n]=new s({[t]:e[n]},t)}let n=null==r?void 0:r[e];if(!n)throw Error(`Strings for package "${e}" were not included by LocalizedStringProvider. Please add it to the list passed to createLocalizedStringDictionary.`);return n}constructor(e,t="en-US"){this.strings=Object.fromEntries(Object.entries(e).filter(([,e])=>e)),this.defaultLocale=t}}let l=new Map,u=new Map;class c{format(e,t){let n=this.strings.getStringForLocale(e,this.locale);return"function"==typeof n?n(t,this):n}plural(e,t,n="cardinal"){let r=t["="+e];if(r)return"function"==typeof r?r():r;let i=this.locale+":"+n,a=l.get(i);return a||(a=new Intl.PluralRules(this.locale,{type:n}),l.set(i,a)),"function"==typeof(r=t[a.select(e)]||t.other)?r():r}number(e){let t=u.get(this.locale);return t||(t=new Intl.NumberFormat(this.locale),u.set(this.locale,t)),t.format(e)}select(e,t){let n=e[t]||e.other;return"function"==typeof n?n():n}constructor(e,t){this.locale=e,this.strings=t}}var d=n(2265);let h=new WeakMap;function f(e,t){let n,{locale:r}=(0,i.j)(),a=t&&s.getGlobalDictionaryForPackage(t)||((n=h.get(e))||(n=new s(e),h.set(e,n)),n);return(0,d.useMemo)(()=>new c(r,a),[r,a])}},11323:function(e,t,n){"use strict";n.d(t,{X:function(){return u}});var r=n(2265);let i=!1,a=0;function o(){i=!0,setTimeout(()=>{i=!1},50)}function s(e){"touch"===e.pointerType&&o()}function l(){if("undefined"!=typeof document)return"undefined"!=typeof PointerEvent?document.addEventListener("pointerup",s):document.addEventListener("touchend",o),a++,()=>{--a>0||("undefined"!=typeof PointerEvent?document.removeEventListener("pointerup",s):document.removeEventListener("touchend",o))}}function u(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:a,isDisabled:o}=e,[s,u]=(0,r.useState)(!1),c=(0,r.useRef)({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;(0,r.useEffect)(l,[]);let{hoverProps:d,triggerHoverEnd:h}=(0,r.useMemo)(()=>{let e=(e,r)=>{if(c.pointerType=r,o||"touch"===r||c.isHovered||!e.currentTarget.contains(e.target))return;c.isHovered=!0;let i=e.currentTarget;c.target=i,t&&t({type:"hoverstart",target:i,pointerType:r}),n&&n(!0),u(!0)},r=(e,t)=>{if(c.pointerType="",c.target=null,"touch"===t||!c.isHovered)return;c.isHovered=!1;let r=e.currentTarget;a&&a({type:"hoverend",target:r,pointerType:t}),n&&n(!1),u(!1)},s={};return"undefined"!=typeof PointerEvent?(s.onPointerEnter=t=>{i&&"mouse"===t.pointerType||e(t,t.pointerType)},s.onPointerLeave=e=>{!o&&e.currentTarget.contains(e.target)&&r(e,e.pointerType)}):(s.onTouchStart=()=>{c.ignoreEmulatedMouseEvents=!0},s.onMouseEnter=t=>{c.ignoreEmulatedMouseEvents||i||e(t,"mouse"),c.ignoreEmulatedMouseEvents=!1},s.onMouseLeave=e=>{!o&&e.currentTarget.contains(e.target)&&r(e,"mouse")}),{hoverProps:s,triggerHoverEnd:r}},[t,n,a,o,c]);return(0,r.useEffect)(()=>{o&&h({currentTarget:c.target},c.pointerType)},[o]),{hoverProps:d,isHovered:s}}},8015:function(e,t,n){"use strict";n.d(t,{r:function(){return D}});var r=n(77427),i=n(11834);let a=new Map,o=new Set;function s(){if("undefined"==typeof window)return;function e(e){return"propertyName"in e}let t=n=>{if(!e(n)||!n.target)return;let r=a.get(n.target);if(r&&(r.delete(n.propertyName),0===r.size&&(n.target.removeEventListener("transitioncancel",t),a.delete(n.target)),0===a.size)){for(let e of o)e();o.clear()}};document.body.addEventListener("transitionrun",n=>{if(!e(n)||!n.target)return;let r=a.get(n.target);r||(r=new Set,a.set(n.target,r),n.target.addEventListener("transitioncancel",t,{once:!0})),r.add(n.propertyName)}),document.body.addEventListener("transitionend",t)}"undefined"!=typeof document&&("loading"!==document.readyState?s():document.addEventListener("DOMContentLoaded",s));let l="default",u="",c=new WeakMap;function d(e){if((0,r.gn)()){if("default"===l){let t=(0,i.r)(e);u=t.documentElement.style.webkitUserSelect,t.documentElement.style.webkitUserSelect="none"}l="disabled"}else(e instanceof HTMLElement||e instanceof SVGElement)&&(c.set(e,e.style.userSelect),e.style.userSelect="none")}function h(e){if((0,r.gn)())"disabled"===l&&(l="restoring",setTimeout(()=>{var t;t=()=>{if("restoring"===l){let t=(0,i.r)(e);"none"===t.documentElement.style.webkitUserSelect&&(t.documentElement.style.webkitUserSelect=u||""),u="",l="default"}},requestAnimationFrame(()=>{0===a.size?t():o.add(t)})},300));else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&c.has(e)){let t=c.get(e);"none"===e.style.userSelect&&(e.style.userSelect=t),""===e.getAttribute("style")&&e.removeAttribute("style"),c.delete(e)}}var f=n(2265);let p=f.createContext({register:()=>{}});p.displayName="PressResponderContext";var g=n(95691),m=n(25134),b=n(11455);function y(...e){return(...t)=>{for(let n of e)"function"==typeof n&&n(...t)}}"undefined"!=typeof window&&window.document&&window.document.createElement;let v=new Map;var x=n(61994);function w(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let r=e[n];for(let e in r){let n=t[e],i=r[e];"function"==typeof n&&"function"==typeof i&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&90>=e.charCodeAt(2)?t[e]=y(n,i):("className"===e||"UNSAFE_className"===e)&&"string"==typeof n&&"string"==typeof i?t[e]=(0,x.Z)(n,i):"id"===e&&n&&i?t.id=function(e,t){if(e===t)return e;let n=v.get(e);if(n)return n.forEach(e=>e(t)),t;let r=v.get(t);return r?(r.forEach(t=>t(e)),e):t}(n,i):t[e]=void 0!==i?i:n}}return t}var k=n(40780),E=n(77274);function I(e){if(function(){if(null==S){S=!1;try{document.createElement("div").focus({get preventScroll(){return S=!0,!0}})}catch{}}return S}())e.focus({preventScroll:!0});else{let t=function(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}(e);e.focus(),function(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}(t)}}let S=null;function T(e,t,n=!0){var i,a;let{metaKey:o,ctrlKey:s,altKey:l,shiftKey:u}=t;(0,r.vU)()&&(null===(a=window.event)||void 0===a?void 0:null===(i=a.type)||void 0===i?void 0:i.startsWith("key"))&&"_blank"===e.target&&((0,r.V5)()?o=!0:s=!0);let c=(0,r.Pf)()&&(0,r.V5)()&&!(0,r.zc)()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:o,ctrlKey:s,altKey:l,shiftKey:u}):new MouseEvent("click",{metaKey:o,ctrlKey:s,altKey:l,shiftKey:u,bubbles:!0,cancelable:!0});T.isOpening=n,I(e),e.dispatchEvent(c),T.isOpening=!1}T.isOpening=!1;var C=n(51440),N=new WeakMap;class A{continuePropagation(){(0,b._)(this,N,!1)}get shouldStopPropagation(){return(0,g._)(this,N)}constructor(e,t,n){(0,m._)(this,N,{writable:!0,value:void 0}),(0,b._)(this,N,!0),this.type=e,this.pointerType=t,this.target=n.currentTarget,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.ctrlKey=n.ctrlKey,this.altKey=n.altKey}}let R=Symbol("linkClicked");function D(e){let t,n,a,o,{onPress:s,onPressChange:l,onPressStart:u,onPressEnd:c,onPressUp:g,isDisabled:m,isPressed:b,preventFocusOnPress:v,shouldCancelOnPointerExit:x,allowTextSelectionOnPress:S,ref:N,...D}=function(e){var t;let n=(0,f.useContext)(p);if(n){let{register:t,...r}=n;e=w(r,e),t()}return t=e.ref,(0,k.b)(()=>{if(n&&n.ref&&t)return n.ref.current=t.current,()=>{n.ref&&(n.ref.current=null)}}),e}(e),[B,U]=(0,f.useState)(!1),z=(0,f.useRef)({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:V,removeAllGlobalListeners:W}=(t=(0,f.useRef)(new Map),n=(0,f.useCallback)((e,n,r,i)=>{let a=(null==i?void 0:i.once)?(...e)=>{t.current.delete(r),r(...e)}:r;t.current.set(r,{type:n,eventTarget:e,fn:a,options:i}),e.addEventListener(n,r,i)},[]),a=(0,f.useCallback)((e,n,r,i)=>{var a;let o=(null===(a=t.current.get(r))||void 0===a?void 0:a.fn)||r;e.removeEventListener(n,o,i),t.current.delete(r)},[]),o=(0,f.useCallback)(()=>{t.current.forEach((e,t)=>{a(e.eventTarget,e.type,t,e.options)})},[a]),(0,f.useEffect)(()=>o,[o]),{addGlobalListener:n,removeGlobalListener:a,removeAllGlobalListeners:o}),j=(0,E.i)((e,t)=>{let n=z.current;if(m||n.didFirePressStart)return!1;let r=!0;if(n.isTriggeringEvent=!0,u){let n=new A("pressstart",t,e);u(n),r=n.shouldStopPropagation}return l&&l(!0),n.isTriggeringEvent=!1,n.didFirePressStart=!0,U(!0),r}),H=(0,E.i)((e,t,n=!0)=>{let r=z.current;if(!r.didFirePressStart)return!1;r.ignoreClickAfterPress=!0,r.didFirePressStart=!1,r.isTriggeringEvent=!0;let i=!0;if(c){let n=new A("pressend",t,e);c(n),i=n.shouldStopPropagation}if(l&&l(!1),U(!1),s&&n&&!m){let n=new A("press",t,e);s(n),i&&(i=n.shouldStopPropagation)}return r.isTriggeringEvent=!1,i}),K=(0,E.i)((e,t)=>{let n=z.current;if(m)return!1;if(g){n.isTriggeringEvent=!0;let r=new A("pressup",t,e);return g(r),n.isTriggeringEvent=!1,r.shouldStopPropagation}return!0}),G=(0,E.i)(e=>{let t=z.current;t.isPressed&&t.target&&(t.isOverTarget&&null!=t.pointerType&&H(O(t.target,e),t.pointerType,!1),t.isPressed=!1,t.isOverTarget=!1,t.activePointerId=null,t.pointerType=null,W(),S||h(t.target))}),X=(0,E.i)(e=>{x&&G(e)}),q=(0,f.useMemo)(()=>{let e=z.current,t={onKeyDown(t){if(_(t.nativeEvent,t.currentTarget)&&t.currentTarget.contains(t.target)){var a;L(t.target,t.key)&&t.preventDefault();let o=!0;if(!e.isPressed&&!t.repeat){e.target=t.currentTarget,e.isPressed=!0,o=j(t,"keyboard");let r=t.currentTarget;V((0,i.r)(t.currentTarget),"keyup",y(t=>{_(t,r)&&!t.repeat&&r.contains(t.target)&&e.target&&K(O(e.target,t),"keyboard")},n),!0)}o&&t.stopPropagation(),t.metaKey&&(0,r.V5)()&&(null===(a=e.metaKeyEvents)||void 0===a||a.set(t.key,t.nativeEvent))}else"Meta"===t.key&&(e.metaKeyEvents=new Map)},onClick(t){if((!t||t.currentTarget.contains(t.target))&&t&&0===t.button&&!e.isTriggeringEvent&&!T.isOpening){let n=!0;if(m&&t.preventDefault(),!e.ignoreClickAfterPress&&!e.ignoreEmulatedMouseEvents&&!e.isPressed&&("virtual"===e.pointerType||(0,C.Z)(t.nativeEvent))){m||v||I(t.currentTarget);let e=j(t,"virtual"),r=K(t,"virtual"),i=H(t,"virtual");n=e&&r&&i}e.ignoreEmulatedMouseEvents=!1,e.ignoreClickAfterPress=!1,n&&t.stopPropagation()}}},n=t=>{var n,r,i;if(e.isPressed&&e.target&&_(t,e.target)){L(t.target,t.key)&&t.preventDefault();let n=t.target;H(O(e.target,t),"keyboard",e.target.contains(n)),W(),"Enter"!==t.key&&$(e.target)&&e.target.contains(n)&&!t[R]&&(t[R]=!0,T(e.target,t,!1)),e.isPressed=!1,null===(r=e.metaKeyEvents)||void 0===r||r.delete(t.key)}else if("Meta"===t.key&&(null===(n=e.metaKeyEvents)||void 0===n?void 0:n.size)){let t=e.metaKeyEvents;for(let n of(e.metaKeyEvents=void 0,t.values()))null===(i=e.target)||void 0===i||i.dispatchEvent(new KeyboardEvent("keyup",n))}};if("undefined"!=typeof PointerEvent){t.onPointerDown=t=>{if(0!==t.button||!t.currentTarget.contains(t.target))return;if((0,C.c)(t.nativeEvent)){e.pointerType="virtual";return}M(t.currentTarget)&&t.preventDefault(),e.pointerType=t.pointerType;let o=!0;e.isPressed||(e.isPressed=!0,e.isOverTarget=!0,e.activePointerId=t.pointerId,e.target=t.currentTarget,m||v||I(t.currentTarget),S||d(e.target),o=j(t,e.pointerType),V((0,i.r)(t.currentTarget),"pointermove",n,!1),V((0,i.r)(t.currentTarget),"pointerup",r,!1),V((0,i.r)(t.currentTarget),"pointercancel",a,!1)),o&&t.stopPropagation()},t.onMouseDown=e=>{e.currentTarget.contains(e.target)&&0===e.button&&(M(e.currentTarget)&&e.preventDefault(),e.stopPropagation())},t.onPointerUp=t=>{t.currentTarget.contains(t.target)&&"virtual"!==e.pointerType&&0===t.button&&P(t,t.currentTarget)&&K(t,e.pointerType||t.pointerType)};let n=t=>{t.pointerId===e.activePointerId&&(e.target&&P(t,e.target)?e.isOverTarget||null==e.pointerType||(e.isOverTarget=!0,j(O(e.target,t),e.pointerType)):e.target&&e.isOverTarget&&null!=e.pointerType&&(e.isOverTarget=!1,H(O(e.target,t),e.pointerType,!1),X(t)))},r=t=>{t.pointerId===e.activePointerId&&e.isPressed&&0===t.button&&e.target&&(P(t,e.target)&&null!=e.pointerType?H(O(e.target,t),e.pointerType):e.isOverTarget&&null!=e.pointerType&&H(O(e.target,t),e.pointerType,!1),e.isPressed=!1,e.isOverTarget=!1,e.activePointerId=null,e.pointerType=null,W(),S||h(e.target))},a=e=>{G(e)};t.onDragStart=e=>{e.currentTarget.contains(e.target)&&G(e)}}else{t.onMouseDown=t=>{if(0===t.button&&t.currentTarget.contains(t.target)){if(M(t.currentTarget)&&t.preventDefault(),e.ignoreEmulatedMouseEvents){t.stopPropagation();return}e.isPressed=!0,e.isOverTarget=!0,e.target=t.currentTarget,e.pointerType=(0,C.Z)(t.nativeEvent)?"virtual":"mouse",m||v||I(t.currentTarget),j(t,e.pointerType)&&t.stopPropagation(),V((0,i.r)(t.currentTarget),"mouseup",n,!1)}},t.onMouseEnter=t=>{if(!t.currentTarget.contains(t.target))return;let n=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&null!=e.pointerType&&(e.isOverTarget=!0,n=j(t,e.pointerType)),n&&t.stopPropagation()},t.onMouseLeave=t=>{if(!t.currentTarget.contains(t.target))return;let n=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&null!=e.pointerType&&(e.isOverTarget=!1,n=H(t,e.pointerType,!1),X(t)),n&&t.stopPropagation()},t.onMouseUp=t=>{t.currentTarget.contains(t.target)&&!e.ignoreEmulatedMouseEvents&&0===t.button&&K(t,e.pointerType||"mouse")};let n=t=>{if(0===t.button){if(e.isPressed=!1,W(),e.ignoreEmulatedMouseEvents){e.ignoreEmulatedMouseEvents=!1;return}e.target&&P(t,e.target)&&null!=e.pointerType?H(O(e.target,t),e.pointerType):e.target&&e.isOverTarget&&null!=e.pointerType&&H(O(e.target,t),e.pointerType,!1),e.isOverTarget=!1}};t.onTouchStart=t=>{if(!t.currentTarget.contains(t.target))return;let n=function(e){let{targetTouches:t}=e;return t.length>0?t[0]:null}(t.nativeEvent);n&&(e.activePointerId=n.identifier,e.ignoreEmulatedMouseEvents=!0,e.isOverTarget=!0,e.isPressed=!0,e.target=t.currentTarget,e.pointerType="touch",m||v||I(t.currentTarget),S||d(e.target),j(t,e.pointerType)&&t.stopPropagation(),V((0,i.k)(t.currentTarget),"scroll",r,!0))},t.onTouchMove=t=>{if(!t.currentTarget.contains(t.target))return;if(!e.isPressed){t.stopPropagation();return}let n=F(t.nativeEvent,e.activePointerId),r=!0;n&&P(n,t.currentTarget)?e.isOverTarget||null==e.pointerType||(e.isOverTarget=!0,r=j(t,e.pointerType)):e.isOverTarget&&null!=e.pointerType&&(e.isOverTarget=!1,r=H(t,e.pointerType,!1),X(t)),r&&t.stopPropagation()},t.onTouchEnd=t=>{if(!t.currentTarget.contains(t.target))return;if(!e.isPressed){t.stopPropagation();return}let n=F(t.nativeEvent,e.activePointerId),r=!0;n&&P(n,t.currentTarget)&&null!=e.pointerType?(K(t,e.pointerType),r=H(t,e.pointerType)):e.isOverTarget&&null!=e.pointerType&&(r=H(t,e.pointerType,!1)),r&&t.stopPropagation(),e.isPressed=!1,e.activePointerId=null,e.isOverTarget=!1,e.ignoreEmulatedMouseEvents=!0,e.target&&!S&&h(e.target),W()},t.onTouchCancel=t=>{t.currentTarget.contains(t.target)&&(t.stopPropagation(),e.isPressed&&G(t))};let r=t=>{e.isPressed&&t.target.contains(e.target)&&G({currentTarget:e.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};t.onDragStart=e=>{e.currentTarget.contains(e.target)&&G(e)}}return t},[V,m,v,W,S,G,X,H,j,K]);return(0,f.useEffect)(()=>()=>{var e;S||h(null!==(e=z.current.target)&&void 0!==e?e:void 0)},[S]),{isPressed:b||B,pressProps:w(D,q)}}function $(e){return"A"===e.tagName&&e.hasAttribute("href")}function _(e,t){let{key:n,code:r}=e,a=t.getAttribute("role");return("Enter"===n||" "===n||"Spacebar"===n||"Space"===r)&&!(t instanceof(0,i.k)(t).HTMLInputElement&&!U(t,n)||t instanceof(0,i.k)(t).HTMLTextAreaElement||t.isContentEditable)&&!(("link"===a||!a&&$(t))&&"Enter"!==n)}function F(e,t){let n=e.changedTouches;for(let e=0;e<n.length;e++){let r=n[e];if(r.identifier===t)return r}return null}function O(e,t){return{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey}}function P(e,t){let n,r,i=t.getBoundingClientRect(),a=(n=0,r=0,void 0!==e.width?n=e.width/2:void 0!==e.radiusX&&(n=e.radiusX),void 0!==e.height?r=e.height/2:void 0!==e.radiusY&&(r=e.radiusY),{top:e.clientY-r,right:e.clientX+n,bottom:e.clientY+r,left:e.clientX-n});return!(i.left>a.right)&&!(a.left>i.right)&&!(i.top>a.bottom)&&!(a.top>i.bottom)}function M(e){return!(e instanceof HTMLElement)||!e.hasAttribute("draggable")}function L(e,t){return e instanceof HTMLInputElement?!U(e,t):e instanceof HTMLButtonElement?"submit"!==e.type&&"reset"!==e.type:!$(e)}let B=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function U(e,t){return"checkbox"===e.type||"radio"===e.type?" "===t:B.has(e.type)}},11834:function(e,t,n){"use strict";n.d(t,{k:function(){return i},r:function(){return r}});let r=e=>{var t;return null!==(t=null==e?void 0:e.ownerDocument)&&void 0!==t?t:document},i=e=>e&&"window"in e&&e.window===e?e:r(e).defaultView||window},51440:function(e,t,n){"use strict";n.d(t,{Z:function(){return i},c:function(){return a}});var r=n(77427);function i(e){return 0===e.mozInputSource&&!!e.isTrusted||((0,r.Dt)()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}function a(e){return!(0,r.Dt)()&&0===e.width&&0===e.height||1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType}},77427:function(e,t,n){"use strict";function r(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent))}function i(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function a(e){let t=null;return()=>(null==t&&(t=e()),t)}n.d(t,{Dt:function(){return h},Pf:function(){return c},V5:function(){return o},gn:function(){return u},vU:function(){return f},zc:function(){return l}});let o=a(function(){return i(/^Mac/i)}),s=a(function(){return i(/^iPhone/i)}),l=a(function(){return i(/^iPad/i)||o()&&navigator.maxTouchPoints>1}),u=a(function(){return s()||l()});a(function(){return o()||u()});let c=a(function(){return r(/AppleWebKit/i)&&!d()}),d=a(function(){return r(/Chrome/i)}),h=a(function(){return r(/Android/i)}),f=a(function(){return r(/Firefox/i)})},77274:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var r=n(40780),i=n(2265);function a(e){let t=(0,i.useRef)(null);return(0,r.b)(()=>{t.current=e},[e]),(0,i.useCallback)((...e)=>{let n=t.current;return null==n?void 0:n(...e)},[])}},40780:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(2265);let i="undefined"!=typeof document?r.useLayoutEffect:()=>{}},6981:function(e,t,n){"use strict";n.d(t,{Me:function(){return l},ur:function(){return u}});var r=n(26929),i=n(2265),a=n(87365);let o=!!("undefined"!=typeof window&&window.document&&window.document.createElement),s=new Map;function l(e){let[t,n]=(0,i.useState)(e),l=(0,i.useRef)(null),u=(0,a.gP)(t),c=(0,i.useCallback)(e=>{l.current=e},[]);return o&&(s.has(u)&&!s.get(u).includes(c)?s.set(u,[...s.get(u),c]):s.set(u,[c])),(0,r.b)(()=>()=>{s.delete(u)},[u]),(0,i.useEffect)(()=>{let e=l.current;e&&(l.current=null,n(e))}),u}function u(e,t){if(e===t)return e;let n=s.get(e);if(n)return n.forEach(e=>e(t)),t;let r=s.get(t);return r?(r.forEach(t=>t(e)),e):t}},26929:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(2265);let i="undefined"!=typeof document?r.useLayoutEffect:()=>{}},10679:function(e,t,n){"use strict";n.d(t,{L:function(){return s}});var r=n(2265),i=n(66933),a=n(54690);class o{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=e}}function s(e){let t,n,{isDisabled:s,onBlurWithin:l,onFocusWithin:u,onFocusWithinChange:c}=e,d=(0,r.useRef)({isFocusWithin:!1}),h=(0,r.useCallback)(e=>{d.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(d.current.isFocusWithin=!1,l&&l(e),c&&c(!1))},[l,c,d]),f=(t=(0,r.useRef)({isFocused:!1,observer:null}),(0,i.b)(()=>{let e=t.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}},[]),n=(0,a.i)(e=>{null==h||h(e)}),(0,r.useCallback)(e=>{if(e.target instanceof HTMLButtonElement||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=e.target;r.addEventListener("focusout",e=>{t.current.isFocused=!1,r.disabled&&n(new o("blur",e)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)},{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&r.disabled){var e;null===(e=t.current.observer)||void 0===e||e.disconnect();let n=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:n})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:n}))}}),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[n])),p=(0,r.useCallback)(e=>{d.current.isFocusWithin||document.activeElement!==e.target||(u&&u(e),c&&c(!0),d.current.isFocusWithin=!0,f(e))},[u,c,f]);return s?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:p,onBlur:h}}}},54690:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var r=n(66933),i=n(2265);function a(e){let t=(0,i.useRef)(null);return(0,r.b)(()=>{t.current=e},[e]),(0,i.useCallback)((...e)=>{let n=t.current;return null==n?void 0:n(...e)},[])}},8153:function(e,t,n){"use strict";n.d(t,{Me:function(){return l},ur:function(){return u}});var r=n(66933),i=n(2265),a=n(87365);let o=!!("undefined"!=typeof window&&window.document&&window.document.createElement),s=new Map;function l(e){let[t,n]=(0,i.useState)(e),l=(0,i.useRef)(null),u=(0,a.gP)(t),c=(0,i.useCallback)(e=>{l.current=e},[]);return o&&(s.has(u)&&!s.get(u).includes(c)?s.set(u,[...s.get(u),c]):s.set(u,[c])),(0,r.b)(()=>()=>{s.delete(u)},[u]),(0,i.useEffect)(()=>{let e=l.current;e&&(l.current=null,n(e))}),u}function u(e,t){if(e===t)return e;let n=s.get(e);if(n)return n.forEach(e=>e(t)),t;let r=s.get(t);return r?(r.forEach(t=>t(e)),e):t}},66933:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(2265);let i="undefined"!=typeof document?r.useLayoutEffect:()=>{}},87365:function(e,t,n){"use strict";n.d(t,{Av:function(){return f},gP:function(){return u}});var r=n(2265);let i={prefix:String(Math.round(1e10*Math.random())),current:0},a=r.createContext(i),o=r.createContext(!1),s=!!("undefined"!=typeof window&&window.document&&window.document.createElement),l=new WeakMap,u="function"==typeof r.useId?function(e){let t=r.useId(),[n]=(0,r.useState)(f()),a=n?"react-aria":`react-aria${i.prefix}`;return e||`${a}-${t}`}:function(e){let t=(0,r.useContext)(a);t!==i||s||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=function(e=!1){let t=(0,r.useContext)(a),n=(0,r.useRef)(null);if(null===n.current&&!e){var i,o;let e=null===(o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===o?void 0:null===(i=o.ReactCurrentOwner)||void 0===i?void 0:i.current;if(e){let n=l.get(e);null==n?l.set(e,{id:t.current,state:e.memoizedState}):e.memoizedState!==n.state&&(t.current=n.id,l.delete(e))}n.current=++t.current}return n.current}(!!e),o=`react-aria${t.prefix}`;return e||`${o}-${n}`};function c(){return!1}function d(){return!0}function h(e){return()=>{}}function f(){return"function"==typeof r.useSyncExternalStore?r.useSyncExternalStore(h,c,d):(0,r.useContext)(o)}},62319:function(e,t,n){"use strict";function r(...e){return(...t)=>{for(let n of e)"function"==typeof n&&n(...t)}}n.d(t,{t:function(){return r}})},94508:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});let r=new Set(["id"]),i=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),a=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),o=/^(data-.*)$/;function s(e,t={}){let{labelable:n,isLink:s,propNames:l}=t,u={};for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r.has(t)||n&&i.has(t)||s&&a.has(t)||(null==l?void 0:l.has(t))||o.test(t))&&(u[t]=e[t]);return u}},5376:function(e,t,n){"use strict";n.d(t,{d:function(){return o}});var r=n(62319),i=n(27326),a=n(61994);function o(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let o=e[n];for(let e in o){let n=t[e],s=o[e];"function"==typeof n&&"function"==typeof s&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&90>=e.charCodeAt(2)?t[e]=(0,r.t)(n,s):("className"===e||"UNSAFE_className"===e)&&"string"==typeof n&&"string"==typeof s?t[e]=(0,a.Z)(n,s):"id"===e&&n&&s?t.id=(0,i.ur)(n,s):t[e]=void 0!==s?s:n}}return t}},27326:function(e,t,n){"use strict";n.d(t,{ur:function(){return u},mp:function(){return c}});var r=n(2265);let i="undefined"!=typeof document?r.useLayoutEffect:()=>{};function a(e){let t=(0,r.useRef)(null);return i(()=>{t.current=e},[e]),(0,r.useCallback)((...e)=>{let n=t.current;return null==n?void 0:n(...e)},[])}var o=n(87365);let s=!!("undefined"!=typeof window&&window.document&&window.document.createElement),l=new Map;function u(e,t){if(e===t)return e;let n=l.get(e);if(n)return n(t),t;let r=l.get(t);return r?(r(e),e):t}function c(e=[]){let t=function(e){let[t,n]=(0,r.useState)(void 0),a=(0,r.useRef)(null),u=(0,o.gP)(t),c=(0,r.useCallback)(e=>{a.current=e},[]);return s&&l.set(u,c),i(()=>()=>{l.delete(u)},[u]),(0,r.useEffect)(()=>{let e=a.current;e&&(a.current=null,n(e))}),u}(),[n,u]=function(e){let[t,n]=(0,r.useState)(e),o=(0,r.useRef)(null),s=a(()=>{if(!o.current)return;let e=o.current.next();if(e.done){o.current=null;return}t===e.value?s():n(e.value)});i(()=>{o.current&&s()});let l=a(e=>{o.current=e(t),s()});return[t,l]}(t),c=(0,r.useCallback)(()=>{u(function*(){yield t,yield document.getElementById(t)?t:void 0})},[t,u]);return i(c,[t,c,...e]),n}},45614:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(2265);function i(e,t,n){let[i,a]=(0,r.useState)(e||t),o=(0,r.useRef)(void 0!==e),s=void 0!==e;(0,r.useEffect)(()=>{let e=o.current;e!==s&&console.warn(`WARN: A component changed from ${e?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}.`),o.current=s},[s]);let l=s?e:i,u=(0,r.useCallback)((e,...t)=>{let r=(e,...t)=>{n&&!Object.is(l,e)&&n(e,...t),s||(l=e)};"function"==typeof e?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),a((n,...i)=>{let a=e(s?l:n,...i);return(r(a,...t),s)?n:a})):(s||a(e),r(e,...t))},[s,l,n]);return[l,u]}},83464:function(e,t,n){"use strict";let r,i,a;n.d(t,{Z:function(){return tp}});var o,s,l,u,c,d={};function h(e,t){return function(){return e.apply(t,arguments)}}n.r(d),n.d(d,{hasBrowserEnv:function(){return eb},hasStandardBrowserEnv:function(){return ev},hasStandardBrowserWebWorkerEnv:function(){return ex},navigator:function(){return ey},origin:function(){return ew}});var f=n(40257);let{toString:p}=Object.prototype,{getPrototypeOf:g}=Object,m=(r=Object.create(null),e=>{let t=p.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())}),b=e=>(e=e.toLowerCase(),t=>m(t)===e),y=e=>t=>typeof t===e,{isArray:v}=Array,x=y("undefined"),w=b("ArrayBuffer"),k=y("string"),E=y("function"),I=y("number"),S=e=>null!==e&&"object"==typeof e,T=e=>{if("object"!==m(e))return!1;let t=g(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},C=b("Date"),N=b("File"),A=b("Blob"),R=b("FileList"),D=b("URLSearchParams"),[$,_,F,O]=["ReadableStream","Request","Response","Headers"].map(b);function P(e,t,{allOwnKeys:n=!1}={}){let r,i;if(null!=e){if("object"!=typeof e&&(e=[e]),v(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{let i;let a=n?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;for(r=0;r<o;r++)i=a[r],t.call(null,e[i],i,e)}}}function M(e,t){let n;t=t.toLowerCase();let r=Object.keys(e),i=r.length;for(;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}let L="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,B=e=>!x(e)&&e!==L,U=(i="undefined"!=typeof Uint8Array&&g(Uint8Array),e=>i&&e instanceof i),z=b("HTMLFormElement"),V=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),W=b("RegExp"),j=(e,t)=>{let n=Object.getOwnPropertyDescriptors(e),r={};P(n,(n,i)=>{let a;!1!==(a=t(n,i,e))&&(r[i]=a||n)}),Object.defineProperties(e,r)},H="abcdefghijklmnopqrstuvwxyz",K="0123456789",G={DIGIT:K,ALPHA:H,ALPHA_DIGIT:H+H.toUpperCase()+K},X=b("AsyncFunction"),q=(o="function"==typeof setImmediate,s=E(L.postMessage),o?setImmediate:s?(l=`axios@${Math.random()}`,u=[],L.addEventListener("message",({source:e,data:t})=>{e===L&&t===l&&u.length&&u.shift()()},!1),e=>{u.push(e),L.postMessage(l,"*")}):e=>setTimeout(e)),Y="undefined"!=typeof queueMicrotask?queueMicrotask.bind(L):void 0!==f&&f.nextTick||q;var Q={isArray:v,isArrayBuffer:w,isBuffer:function(e){return null!==e&&!x(e)&&null!==e.constructor&&!x(e.constructor)&&E(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||E(e.append)&&("formdata"===(t=m(e))||"object"===t&&E(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&w(e.buffer)},isString:k,isNumber:I,isBoolean:e=>!0===e||!1===e,isObject:S,isPlainObject:T,isReadableStream:$,isRequest:_,isResponse:F,isHeaders:O,isUndefined:x,isDate:C,isFile:N,isBlob:A,isRegExp:W,isFunction:E,isStream:e=>S(e)&&E(e.pipe),isURLSearchParams:D,isTypedArray:U,isFileList:R,forEach:P,merge:function e(){let{caseless:t}=B(this)&&this||{},n={},r=(r,i)=>{let a=t&&M(n,i)||i;T(n[a])&&T(r)?n[a]=e(n[a],r):T(r)?n[a]=e({},r):v(r)?n[a]=r.slice():n[a]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&P(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(P(t,(t,r)=>{n&&E(t)?e[r]=h(t,n):e[r]=t},{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,a,o;let s={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],(!r||r(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=!1!==n&&g(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:m,kindOfTest:b,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;let r=e.indexOf(t,n);return -1!==r&&r===n},toArray:e=>{if(!e)return null;if(v(e))return e;let t=e.length;if(!I(t))return null;let n=Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{let n;let r=(e&&e[Symbol.iterator]).call(e);for(;(n=r.next())&&!n.done;){let r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let n;let r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:z,hasOwnProperty:V,hasOwnProp:V,reduceDescriptors:j,freezeMethods:e=>{j(e,(t,n)=>{if(E(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;if(E(e[n])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet:(e,t)=>{let n={};return(e=>{e.forEach(e=>{n[e]=!0})})(v(e)?e:String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:M,global:L,isContextDefined:B,ALPHABET:G,generateString:(e=16,t=G.ALPHA_DIGIT)=>{let n="",{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&E(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{let t=Array(10),n=(e,r)=>{if(S(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;let i=v(e)?[]:{};return P(e,(e,t)=>{let a=n(e,r+1);x(a)||(i[t]=a)}),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:X,isThenable:e=>e&&(S(e)||E(e))&&E(e.then)&&E(e.catch),setImmediate:q,asap:Y};function J(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Q.inherits(J,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});let Z=J.prototype,ee={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ee[e]={value:e}}),Object.defineProperties(J,ee),Object.defineProperty(Z,"isAxiosError",{value:!0}),J.from=(e,t,n,r,i,a)=>{let o=Object.create(Z);return Q.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),J.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var et=n(96434).Buffer;function en(e){return Q.isPlainObject(e)||Q.isArray(e)}function er(e){return Q.endsWith(e,"[]")?e.slice(0,-2):e}function ei(e,t,n){return e?e.concat(t).map(function(e,t){return e=er(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}let ea=Q.toFlatObject(Q,{},null,function(e){return/^is[A-Z]/.test(e)});var eo=function(e,t,n){if(!Q.isObject(e))throw TypeError("target must be an object");t=t||new FormData;let r=(n=Q.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Q.isUndefined(t[e])})).metaTokens,i=n.visitor||u,a=n.dots,o=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Q.isSpecCompliantForm(t);if(!Q.isFunction(i))throw TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Q.isDate(e))return e.toISOString();if(!s&&Q.isBlob(e))throw new J("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(e)||Q.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):et.from(e):e}function u(e,n,i){let s=e;if(e&&!i&&"object"==typeof e){if(Q.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else{var u;if(Q.isArray(e)&&(u=e,Q.isArray(u)&&!u.some(en))||(Q.isFileList(e)||Q.endsWith(n,"[]"))&&(s=Q.toArray(e)))return n=er(n),s.forEach(function(e,r){Q.isUndefined(e)||null===e||t.append(!0===o?ei([n],r,a):null===o?n:n+"[]",l(e))}),!1}}return!!en(e)||(t.append(ei(i,n,a),l(e)),!1)}let c=[],d=Object.assign(ea,{defaultVisitor:u,convertValue:l,isVisitable:en});if(!Q.isObject(e))throw TypeError("data must be an object");return!function e(n,r){if(!Q.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),Q.forEach(n,function(n,a){!0===(!(Q.isUndefined(n)||null===n)&&i.call(t,n,Q.isString(a)?a.trim():a,r,d))&&e(n,r?r.concat(a):[a])}),c.pop()}}(e),t};function es(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function el(e,t){this._pairs=[],e&&eo(e,this,t)}let eu=el.prototype;function ec(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ed(e,t,n){let r;if(!t)return e;let i=n&&n.encode||ec,a=n&&n.serialize;if(r=a?a(t,n):Q.isURLSearchParams(t)?t.toString():new el(t,n).toString(i)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}eu.append=function(e,t){this._pairs.push([e,t])},eu.toString=function(e){let t=e?function(t){return e.call(this,t,es)}:es;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class eh{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Q.forEach(this.handlers,function(t){null!==t&&e(t)})}}var ef={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ep="undefined"!=typeof URLSearchParams?URLSearchParams:el,eg="undefined"!=typeof FormData?FormData:null,em="undefined"!=typeof Blob?Blob:null;let eb="undefined"!=typeof window&&"undefined"!=typeof document,ey="object"==typeof navigator&&navigator||void 0,ev=eb&&(!ey||0>["ReactNative","NativeScript","NS"].indexOf(ey.product)),ex="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,ew=eb&&window.location.href||"http://localhost";var ek={...d,isBrowser:!0,classes:{URLSearchParams:ep,FormData:eg,Blob:em},protocols:["http","https","file","blob","url","data"]},eE=function(e){if(Q.isFormData(e)&&Q.isFunction(e.entries)){let t={};return Q.forEachEntry(e,(e,n)=>{!function e(t,n,r,i){let a=t[i++];if("__proto__"===a)return!0;let o=Number.isFinite(+a),s=i>=t.length;return(a=!a&&Q.isArray(r)?r.length:a,s)?Q.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n:(r[a]&&Q.isObject(r[a])||(r[a]=[]),e(t,n,r[a],i)&&Q.isArray(r[a])&&(r[a]=function(e){let t,n;let r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a]))),!o}(Q.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0]),n,t,0)}),t}return null};let eI={transitional:ef,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let n;let r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=Q.isObject(e);if(a&&Q.isHTMLForm(e)&&(e=new FormData(e)),Q.isFormData(e))return i?JSON.stringify(eE(e)):e;if(Q.isArrayBuffer(e)||Q.isBuffer(e)||Q.isStream(e)||Q.isFile(e)||Q.isBlob(e)||Q.isReadableStream(e))return e;if(Q.isArrayBufferView(e))return e.buffer;if(Q.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1){var o,s;return(o=e,s=this.formSerializer,eo(o,new ek.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return ek.isNode&&Q.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},s))).toString()}if((n=Q.isFileList(e))||r.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return eo(n?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(Q.isString(e))try{return(0,JSON.parse)(e),Q.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){let t=this.transitional||eI.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Q.isResponse(e)||Q.isReadableStream(e))return e;if(e&&Q.isString(e)&&(n&&!this.responseType||r)){let n=t&&t.silentJSONParsing;try{return JSON.parse(e)}catch(e){if(!n&&r){if("SyntaxError"===e.name)throw J.from(e,J.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ek.classes.FormData,Blob:ek.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],e=>{eI.headers[e]={}});let eS=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var eT=e=>{let t,n,r;let i={};return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&eS[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)}),i};let eC=Symbol("internals");function eN(e){return e&&String(e).trim().toLowerCase()}function eA(e){return!1===e||null==e?e:Q.isArray(e)?e.map(eA):String(e)}let eR=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function eD(e,t,n,r,i){if(Q.isFunction(r))return r.call(this,t,n);if(i&&(t=n),Q.isString(t)){if(Q.isString(r))return -1!==t.indexOf(r);if(Q.isRegExp(r))return r.test(t)}}class e${constructor(e){e&&this.set(e)}set(e,t,n){let r=this;function i(e,t,n){let i=eN(t);if(!i)throw Error("header name must be a non-empty string");let a=Q.findKey(r,i);a&&void 0!==r[a]&&!0!==n&&(void 0!==n||!1===r[a])||(r[a||t]=eA(e))}let a=(e,t)=>Q.forEach(e,(e,n)=>i(e,n,t));if(Q.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Q.isString(e)&&(e=e.trim())&&!eR(e))a(eT(e),t);else if(Q.isHeaders(e))for(let[t,r]of e.entries())i(r,t,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=eN(e)){let n=Q.findKey(this,e);if(n){let e=this[n];if(!t)return e;if(!0===t)return function(e){let t;let n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=r.exec(e);)n[t[1]]=t[2];return n}(e);if(Q.isFunction(t))return t.call(this,e,n);if(Q.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=eN(e)){let n=Q.findKey(this,e);return!!(n&&void 0!==this[n]&&(!t||eD(this,this[n],n,t)))}return!1}delete(e,t){let n=this,r=!1;function i(e){if(e=eN(e)){let i=Q.findKey(n,e);i&&(!t||eD(n,n[i],i,t))&&(delete n[i],r=!0)}}return Q.isArray(e)?e.forEach(i):i(e),r}clear(e){let t=Object.keys(this),n=t.length,r=!1;for(;n--;){let i=t[n];(!e||eD(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){let t=this,n={};return Q.forEach(this,(r,i)=>{let a=Q.findKey(n,i);if(a){t[a]=eA(r),delete t[i];return}let o=e?i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n):String(i).trim();o!==i&&delete t[i],t[o]=eA(r),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return Q.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Q.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){let t=(this[eC]=this[eC]={accessors:{}}).accessors,n=this.prototype;function r(e){let r=eN(e);t[r]||(!function(e,t){let n=Q.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})})}(n,e),t[r]=!0)}return Q.isArray(e)?e.forEach(r):r(e),this}}function e_(e,t){let n=this||eI,r=t||n,i=e$.from(r.headers),a=r.data;return Q.forEach(e,function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function eF(e){return!!(e&&e.__CANCEL__)}function eO(e,t,n){J.call(this,null==e?"canceled":e,J.ERR_CANCELED,t,n),this.name="CanceledError"}function eP(e,t,n){let r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new J("Request failed with status code "+n.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}e$.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Q.reduceDescriptors(e$.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),Q.freezeMethods(e$),Q.inherits(eO,J,{__CANCEL__:!0});var eM=function(e,t){let n;let r=Array(e=e||10),i=Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(s){let l=Date.now(),u=i[o];n||(n=l),r[a]=s,i[a]=l;let c=o,d=0;for(;c!==a;)d+=r[c++],c%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),l-n<t)return;let h=u&&l-u;return h?Math.round(1e3*d/h):void 0}},eL=function(e,t){let n,r,i=0,a=1e3/t,o=(t,a=Date.now())=>{i=a,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{let t=Date.now(),s=t-i;s>=a?o(e,t):(n=e,r||(r=setTimeout(()=>{r=null,o(n)},a-s)))},()=>n&&o(n)]};let eB=(e,t,n=3)=>{let r=0,i=eM(50,250);return eL(n=>{let a=n.loaded,o=n.lengthComputable?n.total:void 0,s=a-r,l=i(s);r=a,e({loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:l||void 0,estimated:l&&o&&a<=o?(o-a)/l:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})},n)},eU=(e,t)=>{let n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},ez=e=>(...t)=>Q.asap(()=>e(...t));var eV=ek.hasStandardBrowserEnv?function(){let e;let t=ek.navigator&&/(msie|trident)/i.test(ek.navigator.userAgent),n=document.createElement("a");function r(e){let r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){let n=Q.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},eW=ek.hasStandardBrowserEnv?{write(e,t,n,r,i,a){let o=[e+"="+encodeURIComponent(t)];Q.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Q.isString(r)&&o.push("path="+r),Q.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read(e){let t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function ej(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e:t}let eH=e=>e instanceof e$?{...e}:e;function eK(e,t){t=t||{};let n={};function r(e,t,n){return Q.isPlainObject(e)&&Q.isPlainObject(t)?Q.merge.call({caseless:n},e,t):Q.isPlainObject(t)?Q.merge({},t):Q.isArray(t)?t.slice():t}function i(e,t,n){return Q.isUndefined(t)?Q.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!Q.isUndefined(t))return r(void 0,t)}function o(e,t){return Q.isUndefined(t)?Q.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}let l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(e,t)=>i(eH(e),eH(t),!0)};return Q.forEach(Object.keys(Object.assign({},e,t)),function(r){let a=l[r]||i,o=a(e[r],t[r],r);Q.isUndefined(o)&&a!==s||(n[r]=o)}),n}var eG=e=>{let t;let n=eK({},e),{data:r,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:o,headers:s,auth:l}=n;if(n.headers=s=e$.from(s),n.url=ed(ej(n.baseURL,n.url),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Q.isFormData(r)){if(ek.hasStandardBrowserEnv||ek.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(t=s.getContentType())){let[e,...n]=t?t.split(";").map(e=>e.trim()).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...n].join("; "))}}if(ek.hasStandardBrowserEnv&&(i&&Q.isFunction(i)&&(i=i(n)),i||!1!==i&&eV(n.url))){let e=a&&o&&eW.read(o);e&&s.set(a,e)}return n},eX="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){let r,i,a,o,s;let l=eG(e),u=l.data,c=e$.from(l.headers).normalize(),{responseType:d,onUploadProgress:h,onDownloadProgress:f}=l;function p(){o&&o(),s&&s(),l.cancelToken&&l.cancelToken.unsubscribe(r),l.signal&&l.signal.removeEventListener("abort",r)}let g=new XMLHttpRequest;function m(){if(!g)return;let r=e$.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());eP(function(e){t(e),p()},function(e){n(e),p()},{data:d&&"text"!==d&&"json"!==d?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:e,request:g}),g=null}g.open(l.method.toUpperCase(),l.url,!0),g.timeout=l.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(n(new J("Request aborted",J.ECONNABORTED,e,g)),g=null)},g.onerror=function(){n(new J("Network Error",J.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let t=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded",r=l.transitional||ef;l.timeoutErrorMessage&&(t=l.timeoutErrorMessage),n(new J(t,r.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,e,g)),g=null},void 0===u&&c.setContentType(null),"setRequestHeader"in g&&Q.forEach(c.toJSON(),function(e,t){g.setRequestHeader(t,e)}),Q.isUndefined(l.withCredentials)||(g.withCredentials=!!l.withCredentials),d&&"json"!==d&&(g.responseType=l.responseType),f&&([a,s]=eB(f,!0),g.addEventListener("progress",a)),h&&g.upload&&([i,o]=eB(h),g.upload.addEventListener("progress",i),g.upload.addEventListener("loadend",o)),(l.cancelToken||l.signal)&&(r=t=>{g&&(n(!t||t.type?new eO(null,e,g):t),g.abort(),g=null)},l.cancelToken&&l.cancelToken.subscribe(r),l.signal&&(l.signal.aborted?r():l.signal.addEventListener("abort",r)));let b=function(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(l.url);if(b&&-1===ek.protocols.indexOf(b)){n(new J("Unsupported protocol "+b+":",J.ERR_BAD_REQUEST,e));return}g.send(u||null)})},eq=(e,t)=>{let{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController,i=function(e){if(!n){n=!0,o();let t=e instanceof Error?e:this.reason;r.abort(t instanceof J?t:new eO(t instanceof Error?t.message:t))}},a=t&&setTimeout(()=>{a=null,i(new J(`timeout ${t} of ms exceeded`,J.ETIMEDOUT))},t),o=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));let{signal:s}=r;return s.unsubscribe=()=>Q.asap(o),s}};let eY=function*(e,t){let n,r=e.byteLength;if(!t||r<t){yield e;return}let i=0;for(;i<r;)n=i+t,yield e.slice(i,n),i=n},eQ=async function*(e,t){for await(let n of eJ(e))yield*eY(n,t)},eJ=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}let t=e.getReader();try{for(;;){let{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},eZ=(e,t,n,r)=>{let i;let a=eQ(e,t),o=0,s=e=>{!i&&(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{let{done:t,value:r}=await a.next();if(t){s(),e.close();return}let i=r.byteLength;if(n){let e=o+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(e){throw s(e),e}},cancel:e=>(s(e),a.return())},{highWaterMark:2})},e0="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,e1=e0&&"function"==typeof ReadableStream,e2=e0&&("function"==typeof TextEncoder?(a=new TextEncoder,e=>a.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer())),e3=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},e4=e1&&e3(()=>{let e=!1,t=new Request(ek.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),e5=e1&&e3(()=>Q.isReadableStream(new Response("").body)),e8={stream:e5&&(e=>e.body)};e0&&(c=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{e8[e]||(e8[e]=Q.isFunction(c[e])?t=>t[e]():(t,n)=>{throw new J(`Response type '${e}' is not supported`,J.ERR_NOT_SUPPORT,n)})}));let e6=async e=>{if(null==e)return 0;if(Q.isBlob(e))return e.size;if(Q.isSpecCompliantForm(e)){let t=new Request(ek.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Q.isArrayBufferView(e)||Q.isArrayBuffer(e)?e.byteLength:(Q.isURLSearchParams(e)&&(e+=""),Q.isString(e))?(await e2(e)).byteLength:void 0},e7=async(e,t)=>{let n=Q.toFiniteNumber(e.getContentLength());return null==n?e6(t):n},e9={http:null,xhr:eX,fetch:e0&&(async e=>{let t,n,{url:r,method:i,data:a,signal:o,cancelToken:s,timeout:l,onDownloadProgress:u,onUploadProgress:c,responseType:d,headers:h,withCredentials:f="same-origin",fetchOptions:p}=eG(e);d=d?(d+"").toLowerCase():"text";let g=eq([o,s&&s.toAbortSignal()],l),m=g&&g.unsubscribe&&(()=>{g.unsubscribe()});try{if(c&&e4&&"get"!==i&&"head"!==i&&0!==(n=await e7(h,a))){let e,t=new Request(r,{method:"POST",body:a,duplex:"half"});if(Q.isFormData(a)&&(e=t.headers.get("content-type"))&&h.setContentType(e),t.body){let[e,r]=eU(n,eB(ez(c)));a=eZ(t.body,65536,e,r)}}Q.isString(f)||(f=f?"include":"omit");let o="credentials"in Request.prototype;t=new Request(r,{...p,signal:g,method:i.toUpperCase(),headers:h.normalize().toJSON(),body:a,duplex:"half",credentials:o?f:void 0});let s=await fetch(t),l=e5&&("stream"===d||"response"===d);if(e5&&(u||l&&m)){let e={};["status","statusText","headers"].forEach(t=>{e[t]=s[t]});let t=Q.toFiniteNumber(s.headers.get("content-length")),[n,r]=u&&eU(t,eB(ez(u),!0))||[];s=new Response(eZ(s.body,65536,n,()=>{r&&r(),m&&m()}),e)}d=d||"text";let b=await e8[Q.findKey(e8,d)||"text"](s,e);return!l&&m&&m(),await new Promise((n,r)=>{eP(n,r,{data:b,headers:e$.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:t})})}catch(n){if(m&&m(),n&&"TypeError"===n.name&&/fetch/i.test(n.message))throw Object.assign(new J("Network Error",J.ERR_NETWORK,e,t),{cause:n.cause||n});throw J.from(n,n&&n.code,e,t)}})};Q.forEach(e9,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});let te=e=>`- ${e}`,tt=e=>Q.isFunction(e)||null===e||!1===e;var tn=e=>{let t,n;let{length:r}=e=Q.isArray(e)?e:[e],i={};for(let a=0;a<r;a++){let r;if(n=t=e[a],!tt(t)&&void 0===(n=e9[(r=String(t)).toLowerCase()]))throw new J(`Unknown adapter '${r}'`);if(n)break;i[r||"#"+a]=n}if(!n){let e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new J("There is no suitable adapter to dispatch the request "+(r?e.length>1?"since :\n"+e.map(te).join("\n"):" "+te(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function tr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new eO(null,e)}function ti(e){return tr(e),e.headers=e$.from(e.headers),e.data=e_.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),tn(e.adapter||eI.adapter)(e).then(function(t){return tr(e),t.data=e_.call(e,e.transformResponse,t),t.headers=e$.from(t.headers),t},function(t){return!eF(t)&&(tr(e),t&&t.response&&(t.response.data=e_.call(e,e.transformResponse,t.response),t.response.headers=e$.from(t.response.headers))),Promise.reject(t)})}let ta="1.7.7",to={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{to[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});let ts={};to.transitional=function(e,t,n){function r(e,t){return"[Axios v"+ta+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,a)=>{if(!1===e)throw new J(r(i," has been removed"+(t?" in "+t:"")),J.ERR_DEPRECATED);return t&&!ts[i]&&(ts[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var tl={assertOptions:function(e,t,n){if("object"!=typeof e)throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);let r=Object.keys(e),i=r.length;for(;i-- >0;){let a=r[i],o=t[a];if(o){let t=e[a],n=void 0===t||o(t,a,e);if(!0!==n)throw new J("option "+a+" must be "+n,J.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new J("Unknown option "+a,J.ERR_BAD_OPTION)}},validators:to};let tu=tl.validators;class tc{constructor(e){this.defaults=e,this.interceptors={request:new eh,response:new eh}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=Error();let n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){let n,r;"string"==typeof e?(t=t||{}).url=e:t=e||{};let{transitional:i,paramsSerializer:a,headers:o}=t=eK(this.defaults,t);void 0!==i&&tl.assertOptions(i,{silentJSONParsing:tu.transitional(tu.boolean),forcedJSONParsing:tu.transitional(tu.boolean),clarifyTimeoutError:tu.transitional(tu.boolean)},!1),null!=a&&(Q.isFunction(a)?t.paramsSerializer={serialize:a}:tl.assertOptions(a,{encode:tu.function,serialize:tu.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=o&&Q.merge(o.common,o[t.method]);o&&Q.forEach(["delete","get","head","post","put","patch","common"],e=>{delete o[e]}),t.headers=e$.concat(s,o);let l=[],u=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(u=u&&e.synchronous,l.unshift(e.fulfilled,e.rejected))});let c=[];this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let d=0;if(!u){let e=[ti.bind(this),void 0];for(e.unshift.apply(e,l),e.push.apply(e,c),r=e.length,n=Promise.resolve(t);d<r;)n=n.then(e[d++],e[d++]);return n}r=l.length;let h=t;for(d=0;d<r;){let e=l[d++],t=l[d++];try{h=e(h)}catch(e){t.call(this,e);break}}try{n=ti.call(this,h)}catch(e){return Promise.reject(e)}for(d=0,r=c.length;d<r;)n=n.then(c[d++],c[d++]);return n}getUri(e){return ed(ej((e=eK(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Q.forEach(["delete","get","head","options"],function(e){tc.prototype[e]=function(t,n){return this.request(eK(n||{},{method:e,url:t,data:(n||{}).data}))}}),Q.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,i){return this.request(eK(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}tc.prototype[e]=t(),tc.prototype[e+"Form"]=t(!0)});class td{constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});let n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;let r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,i){n.reason||(n.reason=new eO(e,r,i),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new td(function(t){e=t}),cancel:e}}}let th={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(th).forEach(([e,t])=>{th[t]=e});let tf=function e(t){let n=new tc(t),r=h(tc.prototype.request,n);return Q.extend(r,tc.prototype,n,{allOwnKeys:!0}),Q.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(eK(t,n))},r}(eI);tf.Axios=tc,tf.CanceledError=eO,tf.CancelToken=td,tf.isCancel=eF,tf.VERSION=ta,tf.toFormData=eo,tf.AxiosError=J,tf.Cancel=tf.CanceledError,tf.all=function(e){return Promise.all(e)},tf.spread=function(e){return function(t){return e.apply(null,t)}},tf.isAxiosError=function(e){return Q.isObject(e)&&!0===e.isAxiosError},tf.mergeConfig=eK,tf.AxiosHeaders=e$,tf.formToJSON=e=>eE(Q.isHTMLForm(e)?new FormData(e):e),tf.getAdapter=tn,tf.HttpStatusCode=th,tf.default=tf;var tp=tf},61994:function(e,t,n){"use strict";t.Z=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=function e(t){var n,r,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(n=0;n<a;n++)t[n]&&(r=e(t[n]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r)}return i}(e))&&(r&&(r+=" "),r+=t);return r}},61750:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});let r="data-"+(0,n(17444).D)("framerAppearId")},20569:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}n.d(t,{H:function(){return r}})},44944:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});let r=e=>Array.isArray(e)},48614:function(e,t,n){"use strict";n.d(t,{M:function(){return b}});var r=n(57437),i=n(2265),a=n(64252),o=n(53576),s=n(45750);class l extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function u(e){let{children:t,isPresent:n}=e,a=(0,i.useId)(),o=(0,i.useRef)(null),u=(0,i.useRef)({width:0,height:0,top:0,left:0}),{nonce:c}=(0,i.useContext)(s._);return(0,i.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:i}=u.current;if(n||!o.current||!e||!t)return;o.current.dataset.motionPopId=a;let s=document.createElement("style");return c&&(s.nonce=c),document.head.appendChild(s),s.sheet&&s.sheet.insertRule('\n          [data-motion-pop-id="'.concat(a,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(r,"px !important;\n            left: ").concat(i,"px !important;\n          }\n        ")),()=>{document.head.removeChild(s)}},[n]),(0,r.jsx)(l,{isPresent:n,childRef:o,sizeRef:u,children:i.cloneElement(t,{ref:o})})}let c=e=>{let{children:t,initial:n,isPresent:s,onExitComplete:l,custom:c,presenceAffectsLayout:h,mode:f}=e,p=(0,o.h)(d),g=(0,i.useId)(),m=(0,i.useCallback)(e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;l&&l()},[p,l]),b=(0,i.useMemo)(()=>({id:g,initial:n,isPresent:s,custom:c,onExitComplete:m,register:e=>(p.set(e,!1),()=>p.delete(e))}),h?[Math.random(),m]:[s,m]);return(0,i.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[s]),i.useEffect(()=>{s||p.size||!l||l()},[s]),"popLayout"===f&&(t=(0,r.jsx)(u,{isPresent:s,children:t})),(0,r.jsx)(a.O.Provider,{value:b,children:t})};function d(){return new Map}var h=n(58881),f=n(13223);let p=e=>e.key||"";function g(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}var m=n(11534);let b=e=>{let{children:t,exitBeforeEnter:n,custom:a,initial:s=!0,onExitComplete:l,presenceAffectsLayout:u=!0,mode:d="sync"}=e;(0,f.k)(!n,"Replace exitBeforeEnter with mode='wait'");let b=(0,i.useMemo)(()=>g(t),[t]),y=b.map(p),v=(0,i.useRef)(!0),x=(0,i.useRef)(b),w=(0,o.h)(()=>new Map),[k,E]=(0,i.useState)(b),[I,S]=(0,i.useState)(b);(0,m.L)(()=>{v.current=!1,x.current=b;for(let e=0;e<I.length;e++){let t=p(I[e]);y.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[I,y.length,y.join("-")]);let T=[];if(b!==k){let e=[...b];for(let t=0;t<I.length;t++){let n=I[t],r=p(n);y.includes(r)||(e.splice(t,0,n),T.push(n))}"wait"===d&&T.length&&(e=T),S(g(e)),E(b);return}let{forceRender:C}=(0,i.useContext)(h.p);return(0,r.jsx)(r.Fragment,{children:I.map(e=>{let t=p(e),n=b===I||y.includes(t);return(0,r.jsx)(c,{isPresent:n,initial:(!v.current||!!s)&&void 0,custom:n?void 0:a,presenceAffectsLayout:u,mode:d,onExitComplete:n?void 0:()=>{if(!w.has(t))return;w.set(t,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(null==C||C(),S(x.current),l&&l())},children:e},t)})})}},50278:function(e,t,n){"use strict";n.d(t,{X:function(){return s}});var r=n(57437),i=n(2265),a=n(47337),o=n(24470);function s(e){let{children:t,features:n,strict:s=!1}=e,[,u]=(0,i.useState)(!l(n)),c=(0,i.useRef)(void 0);if(!l(n)){let{renderer:e,...t}=n;c.current=e,(0,o.K)(t)}return(0,i.useEffect)(()=>{l(n)&&n().then(e=>{let{renderer:t,...n}=e;(0,o.K)(n),c.current=t,u(!0)})},[]),(0,r.jsx)(a.u.Provider,{value:{renderer:c.current,strict:s},children:t})}function l(e){return"function"==typeof e}},58881:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});let r=(0,n(2265).createContext)({})},47337:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});let r=(0,n(2265).createContext)({strict:!1})},45750:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});let r=(0,n(2265).createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"})},64252:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});let r=(0,n(2265).createContext)(null)},85005:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(24118);let i=["read","resolveKeyframes","update","preRender","render","postRender"];function a(e,t){let n=!1,a=!0,o={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,l=i.reduce((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,r=!1,i=!1,a=new WeakSet,o={delta:0,timestamp:0,isProcessing:!1};function s(t){a.has(t)&&(l.schedule(t),e()),t(o)}let l={schedule:(e,i=!1,o=!1)=>{let s=o&&r?t:n;return i&&a.add(e),s.has(e)||s.add(e),e},cancel:e=>{n.delete(e),a.delete(e)},process:e=>{if(o=e,r){i=!0;return}r=!0,[t,n]=[n,t],n.clear(),t.forEach(s),r=!1,i&&(i=!1,l.process(e))}};return l}(s),e),{}),{read:u,resolveKeyframes:c,update:d,preRender:h,render:f,postRender:p}=l,g=()=>{let i=r.c.useManualTiming?o.timestamp:performance.now();n=!1,o.delta=a?1e3/60:Math.max(Math.min(i-o.timestamp,40),1),o.timestamp=i,o.isProcessing=!0,u.process(o),c.process(o),d.process(o),h.process(o),f.process(o),p.process(o),o.isProcessing=!1,n&&t&&(a=!1,e(g))},m=()=>{n=!0,a=!0,o.isProcessing||e(g)};return{schedule:i.reduce((e,t)=>{let r=l[t];return e[t]=(e,t=!1,i=!1)=>(n||m(),r.schedule(e,t,i)),e},{}),cancel:e=>{for(let t=0;t<i.length;t++)l[i[t]].cancel(e)},state:o,steps:l}}},45414:function(e,t,n){"use strict";n.d(t,{Pn:function(){return a},Wi:function(){return i},w0:function(){return o}});var r=n(44439);let{schedule:i,cancel:a,state:o,steps:s}=(0,n(85005).Z)("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:r.Z,!0)},35938:function(e,t,n){"use strict";n.d(t,{featureDefinitions:function(){return i}});let r={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},i={};for(let e in r)i[e]={isEnabled:t=>r[e].some(e=>!!t[e])}},24470:function(e,t,n){"use strict";n.d(t,{K:function(){return i}});var r=n(35938);function i(e){for(let t in e)r.featureDefinitions[t]={...r.featureDefinitions[t],...e[t]}}},82786:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});let r={};var i=n(8834);function a(e,{layout:t,layoutId:n}){return i.G.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!r[e]||"opacity"===e)}},67259:function(e,t,n){"use strict";n.d(t,{m:function(){return K}});var r,i=n(57437),a=n(2265),o=n(45750);let s=(0,a.createContext)({});var l=n(64252),u=n(11534),c=n(47337),d=n(61750);let{schedule:h,cancel:f}=(0,n(85005).Z)(queueMicrotask,!1);function p(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}let g=(0,a.createContext)({});var m=n(74115),b=n(17743);function y(e){return Array.isArray(e)?e.join(" "):e}var v=n(24470),x=n(44563),w=n(58881);let k=Symbol.for("motionComponentSymbol");var E=n(35938),I=n(64044),S=n(33390),T=n(67098),C=n(20569),N=n(31297),A=n(53576),R=n(4581),D=n(23999);let $=e=>(t,n)=>{let r=(0,a.useContext)(s),i=(0,a.useContext)(l.O),o=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,a){let o={latestValues:function(e,t,n,r){let i={},a=r(e,{});for(let e in a)i[e]=function(e){let t=(0,D.i)(e)?e.get():e;return(0,R.p)(t)?t.toValue():t}(a[e]);let{initial:o,animate:s}=e,l=(0,b.G)(e),u=(0,b.M)(e);t&&u&&!l&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===s&&(s=t.animate));let c=!!n&&!1===n.initial,d=(c=c||!1===o)?s:o;if(d&&"boolean"!=typeof d&&!(0,C.H)(d)){let t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){let r=(0,N.o)(e,t[n]);if(r){let{transitionEnd:e,transition:t,...n}=r;for(let e in n){let t=n[e];if(Array.isArray(t)){let e=c?t.length-1:0;t=t[e]}null!==t&&(i[e]=t)}for(let t in e)i[t]=e[t]}}}return i}(r,i,a,e),renderState:t()};return n&&(o.mount=e=>n(r,e,o)),o})(e,t,r,i);return n?o():(0,A.h)(o)},_=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),F=()=>({..._(),attrs:{}});var O=n(67402),P=n(37380),M=n(45414);let L={useVisualState:$({scrapeMotionValuesFromProps:T.U,createRenderState:F,onMount:(e,t,{renderState:n,latestValues:r})=>{M.Wi.read(()=>{try{n.dimensions="function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){n.dimensions={x:0,y:0,width:0,height:0}}}),M.Wi.render(()=>{(0,O.i)(n,r,(0,P.a)(t.tagName),e.transformTemplate),(0,S.K)(t,n)})}})},B={useVisualState:$({scrapeMotionValuesFromProps:n(67971).U,createRenderState:_})};var U=n(82786),z=n(4469);function V(e,t,n){for(let r in t)(0,D.i)(t[r])||(0,U.j)(r,n)||(e[r]=t[r])}let W=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function j(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||W.has(e)}let H=e=>!j(e);try{(r=require("@emotion/is-prop-valid").default)&&(H=e=>e.startsWith("on")?!j(e):r(e))}catch(e){}let K=function(e){if("undefined"==typeof Proxy)return e;let t=new Map;return new Proxy((...t)=>e(...t),{get:(n,r)=>"create"===r?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}(function(e,{forwardMotionProps:t}={forwardMotionProps:!1}){return function(e){let{preloadedFeatures:t,createVisualElement:n,useRender:r,useVisualState:f,Component:I}=e;t&&(0,v.K)(t);let S=(0,a.forwardRef)(function(e,t){var v;let k;let S={...(0,a.useContext)(o._),...e,layoutId:function(e){let{layoutId:t}=e,n=(0,a.useContext)(w.p).id;return n&&void 0!==t?n+"-"+t:t}(e)},{isStatic:T}=S,C=function(e){let{initial:t,animate:n}=function(e,t){if((0,b.G)(e)){let{initial:t,animate:n}=e;return{initial:!1===t||(0,m.$)(t)?t:void 0,animate:(0,m.$)(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,a.useContext)(s));return(0,a.useMemo)(()=>({initial:t,animate:n}),[y(t),y(n)])}(e),N=f(e,T);if(!T&&x.j){(0,a.useContext)(c.u).strict;let e=function(e){let{drag:t,layout:n}=E.featureDefinitions;if(!t&&!n)return{};let r={...t,...n};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(S);k=e.MeasureLayout,C.visualElement=function(e,t,n,r,i){var f,m;let{visualElement:b}=(0,a.useContext)(s),y=(0,a.useContext)(c.u),v=(0,a.useContext)(l.O),x=(0,a.useContext)(o._).reducedMotion,w=(0,a.useRef)();r=r||y.renderer,!w.current&&r&&(w.current=r(e,{visualState:t,parent:b,props:n,presenceContext:v,blockInitialAnimation:!!v&&!1===v.initial,reducedMotionConfig:x}));let k=w.current,E=(0,a.useContext)(g);k&&!k.projection&&i&&("html"===k.type||"svg"===k.type)&&function(e,t,n,r){let{layoutId:i,layout:a,drag:o,dragConstraints:s,layoutScroll:l,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||s&&p(s),visualElement:e,animationType:"string"==typeof a?a:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}(w.current,n,i,E);let I=(0,a.useRef)(!1);(0,a.useInsertionEffect)(()=>{k&&I.current&&k.update(n,v)});let S=n[d.M],T=(0,a.useRef)(!!S&&!(null===(f=window.MotionHandoffIsComplete)||void 0===f?void 0:f.call(window,S))&&(null===(m=window.MotionHasOptimisedAnimation)||void 0===m?void 0:m.call(window,S)));return(0,u.L)(()=>{k&&(I.current=!0,window.MotionIsMounted=!0,k.updateFeatures(),h.render(k.render),T.current&&k.animationState&&k.animationState.animateChanges())}),(0,a.useEffect)(()=>{k&&(!T.current&&k.animationState&&k.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,S)}),T.current=!1))}),k}(I,N,S,n,e.ProjectionNode)}return(0,i.jsxs)(s.Provider,{value:C,children:[k&&C.visualElement?(0,i.jsx)(k,{visualElement:C.visualElement,...S}):null,r(I,e,(v=C.visualElement,(0,a.useCallback)(e=>{e&&N.mount&&N.mount(e),v&&(e?v.mount(e):v.unmount()),t&&("function"==typeof t?t(e):p(t)&&(t.current=e))},[v])),N,T,C.visualElement)]})});return S[k]=I,S}({...(0,I.q)(e)?L:B,preloadedFeatures:void 0,useRender:function(e=!1){return(t,n,r,{latestValues:i},o)=>{let s=((0,I.q)(t)?function(e,t,n,r){let i=(0,a.useMemo)(()=>{let n=F();return(0,O.i)(n,t,(0,P.a)(r),e.transformTemplate),{...n.attrs,style:{...n.style}}},[t]);if(e.style){let t={};V(t,e.style,e),i.style={...t,...i.style}}return i}:function(e,t){let n={},r=function(e,t){let n=e.style||{},r={};return V(r,n,e),Object.assign(r,function({transformTemplate:e},t){return(0,a.useMemo)(()=>{let n=_();return(0,z.r)(n,t,e),Object.assign({},n.vars,n.style)},[t])}(e,t)),r}(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n})(n,i,o,t),l=function(e,t,n){let r={};for(let i in e)("values"!==i||"object"!=typeof e.values)&&(H(i)||!0===n&&j(i)||!t&&!j(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(n,"string"==typeof t,e),u=t!==a.Fragment?{...l,...s,ref:r}:{},{children:c}=n,d=(0,a.useMemo)(()=>(0,D.i)(c)?c.get():c,[c]);return(0,a.createElement)(t,{...u,children:d})}}(t),createVisualElement:void 0,Component:e})})},88689:function(e,t,n){"use strict";let r;n.d(t,{H:function(){return nR}});var i=n(20569),a=n(44944);function o(e,t){if(!Array.isArray(t))return!1;let n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var s=n(74115),l=n(31297);function u(e,t,n){let r=e.getProps();return(0,l.o)(r,t,void 0!==n?n:r.custom,e)}var c=n(72589),d=n(8834);let h=e=>1e3*e,f=e=>e/1e3,p={type:"spring",stiffness:500,damping:25,restSpeed:10},g=e=>({type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}),m={type:"keyframes",duration:.8},b={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},y=(e,{keyframes:t})=>t.length>2?m:d.G.has(e)?e.startsWith("scale")?g(t[1]):p:b;function v(e,t){return e?e[t]||e.default||e:void 0}var x=n(24118);let w={current:!1},k=e=>null!==e;function E(e,{repeat:t,repeatType:n="loop"},r){let i=e.filter(k),a=t&&"loop"!==n&&t%2==1?0:i.length-1;return a&&void 0!==r?r:i[a]}var I=n(45414),S=n(44439);let T=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function C(e,t,n,r){if(e===t&&n===r)return S.Z;let i=t=>(function(e,t,n,r,i){let a,o;let s=0;do(a=T(o=t+(n-t)/2,r,i)-e)>0?n=o:t=o;while(Math.abs(a)>1e-7&&++s<12);return o})(t,0,1,e,n);return e=>0===e||1===e?e:T(i(e),t,r)}let N=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,A=e=>t=>1-e(1-t),R=C(.33,1.53,.69,.99),D=A(R),$=N(D),_=e=>(e*=2)<1?.5*D(e):.5*(2-Math.pow(2,-10*(e-1))),F=e=>1-Math.sin(Math.acos(e)),O=A(F),P=N(F),M=e=>/^0[^.\s]+$/u.test(e);var L=n(13223);let B=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);var U=n(37249);let z=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;var V=n(74305),W=n(27492);let j=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),H=e=>e===V.Rx||e===W.px,K=(e,t)=>parseFloat(e.split(", ")[t]),G=(e,t)=>(n,{transform:r})=>{if("none"===r||!r)return 0;let i=r.match(/^matrix3d\((.+)\)$/u);if(i)return K(i[1],t);{let t=r.match(/^matrix\((.+)\)$/u);return t?K(t[1],e):0}},X=new Set(["x","y","z"]),q=d._.filter(e=>!X.has(e)),Y={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:G(4,13),y:G(5,14)};Y.translateX=Y.x,Y.translateY=Y.y;let Q=e=>t=>t.test(e),J=[V.Rx,W.px,W.aQ,W.RW,W.vw,W.vh,{test:e=>"auto"===e,parse:e=>e}],Z=e=>J.find(Q(e)),ee=new Set,et=!1,en=!1;function er(){if(en){let e=Array.from(ee).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{let t=function(e){let t=[];return q.forEach(n=>{let r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=n.get(e);t&&t.forEach(([t,n])=>{var r;null===(r=e.getValue(t))||void 0===r||r.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}en=!1,et=!1,ee.forEach(e=>e.complete()),ee.clear()}function ei(){ee.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(en=!0)})}class ea{constructor(e,t,n,r,i,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ee.add(this),et||(et=!0,I.Wi.read(ei),I.Wi.resolveKeyframes(er))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;for(let i=0;i<e.length;i++)if(null===e[i]){if(0===i){let i=null==r?void 0:r.get(),a=e[e.length-1];if(void 0!==i)e[0]=i;else if(n&&t){let r=n.readValue(t,a);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=a),r&&void 0===i&&r.set(e[0])}else e[i]=e[i-1]}}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ee.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ee.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}var eo=n(59111);let es=e=>Math.round(1e5*e)/1e5,el=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,eu=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ec=(e,t)=>n=>!!("string"==typeof n&&eu.test(n)&&n.startsWith(e)||t&&null!=n&&Object.prototype.hasOwnProperty.call(n,t)),ed=(e,t,n)=>r=>{if("string"!=typeof r)return r;let[i,a,o,s]=r.match(el);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(o),alpha:void 0!==s?parseFloat(s):1}},eh=e=>(0,eo.u)(0,255,e),ef={...V.Rx,transform:e=>Math.round(eh(e))},ep={test:ec("rgb","red"),parse:ed("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+ef.transform(e)+", "+ef.transform(t)+", "+ef.transform(n)+", "+es(V.Fq.transform(r))+")"},eg={test:ec("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:ep.transform},em={test:ec("hsl","hue"),parse:ed("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+W.aQ.transform(es(t))+", "+W.aQ.transform(es(n))+", "+es(V.Fq.transform(r))+")"},eb={test:e=>ep.test(e)||eg.test(e)||em.test(e),parse:e=>ep.test(e)?ep.parse(e):em.test(e)?em.parse(e):eg.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?ep.transform(e):em.transform(e)},ey=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,ev="number",ex="color",ew=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ek(e){let t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[],a=0,o=t.replace(ew,e=>(eb.test(e)?(r.color.push(a),i.push(ex),n.push(eb.parse(e))):e.startsWith("var(")?(r.var.push(a),i.push("var"),n.push(e)):(r.number.push(a),i.push(ev),n.push(parseFloat(e))),++a,"${}")).split("${}");return{values:n,split:o,indexes:r,types:i}}function eE(e){return ek(e).values}function eI(e){let{split:t,types:n}=ek(e),r=t.length;return e=>{let i="";for(let a=0;a<r;a++)if(i+=t[a],void 0!==e[a]){let t=n[a];t===ev?i+=es(e[a]):t===ex?i+=eb.transform(e[a]):i+=e[a]}return i}}let eS=e=>"number"==typeof e?0:e,eT={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null===(t=e.match(el))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(ey))||void 0===n?void 0:n.length)||0)>0},parse:eE,createTransformer:eI,getAnimatableNone:function(e){let t=eE(e);return eI(e)(t.map(eS))}},eC=new Set(["brightness","contrast","saturate","opacity"]);function eN(e){let[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[r]=n.match(el)||[];if(!r)return e;let i=n.replace(r,""),a=eC.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+i+")"}let eA=/\b([a-z-]*)\(.*?\)/gu,eR={...eT,getAnimatableNone:e=>{let t=e.match(eA);return t?t.map(eN).join(" "):e}},eD={...n(66204).j,color:eb,backgroundColor:eb,outlineColor:eb,fill:eb,stroke:eb,borderColor:eb,borderTopColor:eb,borderRightColor:eb,borderBottomColor:eb,borderLeftColor:eb,filter:eR,WebkitFilter:eR},e$=e=>eD[e];function e_(e,t){let n=e$(e);return n!==eR&&(n=eT),n.getAnimatableNone?n.getAnimatableNone(t):void 0}let eF=new Set(["auto","none","0"]);class eO extends ea{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let n=0;n<e.length;n++){let r=e[n];if("string"==typeof r&&(r=r.trim(),(0,U.t)(r))){let i=function e(t,n,r=1){(0,L.k)(r<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`);let[i,a]=function(e){let t=z.exec(e);if(!t)return[,];let[,n,r,i]=t;return[`--${null!=n?n:r}`,i]}(t);if(!i)return;let o=window.getComputedStyle(n).getPropertyValue(i);if(o){let e=o.trim();return B(e)?parseFloat(e):e}return(0,U.t)(a)?e(a,n,r+1):a}(r,t.current);void 0!==i&&(e[n]=i),n===e.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!j.has(n)||2!==e.length)return;let[r,i]=e,a=Z(r),o=Z(i);if(a!==o){if(H(a)&&H(o))for(let t=0;t<e.length;t++){let n=e[t];"string"==typeof n&&(e[t]=parseFloat(n))}else this.needsMeasurement=!0}}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,n=[];for(let t=0;t<e.length;t++){var r;("number"==typeof(r=e[t])?0===r:null===r||"none"===r||"0"===r||M(r))&&n.push(t)}n.length&&function(e,t,n){let r,i=0;for(;i<e.length&&!r;){let t=e[i];"string"==typeof t&&!eF.has(t)&&ek(t).values.length&&(r=e[i]),i++}if(r&&n)for(let i of t)e[i]=e_(n,r)}(e,n,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Y[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;let{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;let i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);let a=r.length-1,o=r[a];r[a]=Y[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==o&&void 0===this.finalKeyframe&&(this.finalKeyframe=o),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach(([e,n])=>{t.getValue(e).set(n)}),this.resolveNoneKeyframes()}}function eP(e){return"function"==typeof e}function eM(){r=void 0}let eL={now:()=>(void 0===r&&eL.set(I.w0.isProcessing||x.c.useManualTiming?I.w0.timestamp:performance.now()),r),set:e=>{r=e,queueMicrotask(eM)}},eB=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(eT.test(e)||"0"===e)&&!e.startsWith("url("));class eU{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=eL.now(),this.options={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:i,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(ei(),er()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=eL.now(),this.hasAttemptedResolve=!0;let{name:n,type:r,velocity:i,delay:a,onComplete:o,onUpdate:s,isGenerator:l}=this.options;if(!l&&!function(e,t,n,r){let i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;let a=e[e.length-1],o=eB(i,t),s=eB(a,t);return(0,L.K)(o===s,`You are trying to animate ${t} from "${i}" to "${a}". ${i} is not an animatable value - to enable this animation set ${i} to a value animatable to ${a} via the \`style\` property.`),!!o&&!!s&&(function(e){let t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||eP(n))&&r)}(e,n,r,i)){if(w.current||!a){null==s||s(E(e,this.options,t)),null==o||o(),this.resolveFinishedPromise();return}this.options.duration=0}let u=this.initPlayback(e,t);!1!==u&&(this._resolved={keyframes:e,finalKeyframe:t,...u},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function ez(e,t,n){var r,i;let a=Math.max(t-5,0);return r=n-e(a),(i=t-a)?1e3/i*r:0}function eV(e,t){return e*Math.sqrt(1-t*t)}let eW=["duration","bounce"],ej=["stiffness","damping","mass"];function eH(e,t){return t.some(t=>void 0!==e[t])}function eK({keyframes:e,restDelta:t,restSpeed:n,...r}){let i;let a=e[0],o=e[e.length-1],s={done:!1,value:a},{stiffness:l,damping:u,mass:c,duration:d,velocity:p,isResolvedFromDuration:g}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!eH(e,ej)&&eH(e,eW)){let n=function({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,a;(0,L.K)(e<=h(10),"Spring duration must be 10 seconds or less");let o=1-t;o=(0,eo.u)(.05,1,o),e=(0,eo.u)(.01,10,f(e)),o<1?(i=t=>{let r=t*o,i=r*e;return .001-(r-n)/eV(t,o)*Math.exp(-i)},a=t=>{let r=t*o*e,a=Math.pow(o,2)*Math.pow(t,2)*e,s=Math.exp(-r),l=eV(Math.pow(t,2),o);return(r*n+n-a)*s*(-i(t)+.001>0?-1:1)/l}):(i=t=>-.001+Math.exp(-t*e)*((t-n)*e+1),a=t=>e*e*(n-t)*Math.exp(-t*e));let s=function(e,t,n){let r=n;for(let n=1;n<12;n++)r-=e(r)/t(r);return r}(i,a,5/e);if(e=h(e),isNaN(s))return{stiffness:100,damping:10,duration:e};{let t=Math.pow(s,2)*r;return{stiffness:t,damping:2*o*Math.sqrt(r*t),duration:e}}}(e);(t={...t,...n,mass:1}).isResolvedFromDuration=!0}return t}({...r,velocity:-f(r.velocity||0)}),m=p||0,b=u/(2*Math.sqrt(l*c)),y=o-a,v=f(Math.sqrt(l/c)),x=5>Math.abs(y);if(n||(n=x?.01:2),t||(t=x?.005:.5),b<1){let e=eV(v,b);i=t=>o-Math.exp(-b*v*t)*((m+b*v*y)/e*Math.sin(e*t)+y*Math.cos(e*t))}else if(1===b)i=e=>o-Math.exp(-v*e)*(y+(m+v*y)*e);else{let e=v*Math.sqrt(b*b-1);i=t=>{let n=Math.exp(-b*v*t),r=Math.min(e*t,300);return o-n*((m+b*v*y)*Math.sinh(r)+e*y*Math.cosh(r))/e}}return{calculatedDuration:g&&d||null,next:e=>{let r=i(e);if(g)s.done=e>=d;else{let a=0;b<1&&(a=0===e?h(m):ez(i,e,r));let l=Math.abs(a)<=n,u=Math.abs(o-r)<=t;s.done=l&&u}return s.value=s.done?o:r,s}}}function eG({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:s,max:l,restDelta:u=.5,restSpeed:c}){let d,h;let f=e[0],p={done:!1,value:f},g=e=>void 0!==s&&e<s||void 0!==l&&e>l,m=e=>void 0===s?l:void 0===l?s:Math.abs(s-e)<Math.abs(l-e)?s:l,b=n*t,y=f+b,v=void 0===o?y:o(y);v!==y&&(b=v-f);let x=e=>-b*Math.exp(-e/r),w=e=>v+x(e),k=e=>{let t=x(e),n=w(e);p.done=Math.abs(t)<=u,p.value=p.done?v:n},E=e=>{g(p.value)&&(d=e,h=eK({keyframes:[p.value,m(p.value)],velocity:ez(w,e,p.value),damping:i,stiffness:a,restDelta:u,restSpeed:c}))};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return(h||void 0!==d||(t=!0,k(e),E(e)),void 0!==d&&e>=d)?h.next(e-d):(t||k(e),p)}}}let eX=C(.42,0,1,1),eq=C(0,0,.58,1),eY=C(.42,0,.58,1),eQ=e=>Array.isArray(e)&&"number"!=typeof e[0],eJ=e=>Array.isArray(e)&&"number"==typeof e[0],eZ={linear:S.Z,easeIn:eX,easeInOut:eY,easeOut:eq,circIn:F,circInOut:P,circOut:O,backIn:D,backInOut:$,backOut:R,anticipate:_},e0=e=>{if(eJ(e)){(0,L.k)(4===e.length,"Cubic bezier arrays must contain four numerical values.");let[t,n,r,i]=e;return C(t,n,r,i)}return"string"==typeof e?((0,L.k)(void 0!==eZ[e],`Invalid easing type '${e}'`),eZ[e]):e},e1=(e,t)=>n=>t(e(n)),e2=(...e)=>e.reduce(e1),e3=(e,t,n)=>{let r=t-e;return 0===r?1:(n-e)/r},e4=(e,t,n)=>e+(t-e)*n;function e5(e,t,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function e8(e,t){return n=>n>0?t:e}let e6=(e,t,n)=>{let r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},e7=[eg,ep,em],e9=e=>e7.find(t=>t.test(e));function te(e){let t=e9(e);if((0,L.K)(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`),!t)return!1;let n=t.parse(e);return t===em&&(n=function({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let i=0,a=0,o=0;if(t/=100){let r=n<.5?n*(1+t):n+t-n*t,s=2*n-r;i=e5(s,r,e+1/3),a=e5(s,r,e),o=e5(s,r,e-1/3)}else i=a=o=n;return{red:Math.round(255*i),green:Math.round(255*a),blue:Math.round(255*o),alpha:r}}(n)),n}let tt=(e,t)=>{let n=te(e),r=te(t);if(!n||!r)return e8(e,t);let i={...n};return e=>(i.red=e6(n.red,r.red,e),i.green=e6(n.green,r.green,e),i.blue=e6(n.blue,r.blue,e),i.alpha=e4(n.alpha,r.alpha,e),ep.transform(i))},tn=new Set(["none","hidden"]);function tr(e,t){return n=>e4(e,t,n)}function ti(e){return"number"==typeof e?tr:"string"==typeof e?(0,U.t)(e)?e8:eb.test(e)?tt:ts:Array.isArray(e)?ta:"object"==typeof e?eb.test(e)?tt:to:e8}function ta(e,t){let n=[...e],r=n.length,i=e.map((e,n)=>ti(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function to(e,t){let n={...e,...t},r={};for(let i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=ti(e[i])(e[i],t[i]));return e=>{for(let t in r)n[t]=r[t](e);return n}}let ts=(e,t)=>{let n=eT.createTransformer(t),r=ek(e),i=ek(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?tn.has(e)&&!i.values.length||tn.has(t)&&!r.values.length?tn.has(e)?n=>n<=0?e:t:n=>n>=1?t:e:e2(ta(function(e,t){var n;let r=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){let o=t.types[a],s=e.indexes[o][i[o]],l=null!==(n=e.values[s])&&void 0!==n?n:0;r[a]=l,i[o]++}return r}(r,i),i.values),n):((0,L.K)(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),e8(e,t))};function tl(e,t,n){return"number"==typeof e&&"number"==typeof t&&"number"==typeof n?e4(e,t,n):ti(e)(e,t)}function tu({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){let i=eQ(r)?r.map(e0):e0(r),a={done:!1,value:t[0]},o=function(e,t,{clamp:n=!0,ease:r,mixer:i}={}){let a=e.length;if((0,L.k)(a===t.length,"Both input and output ranges must be the same length"),1===a)return()=>t[0];if(2===a&&e[0]===e[1])return()=>t[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());let o=function(e,t,n){let r=[],i=n||tl,a=e.length-1;for(let n=0;n<a;n++){let a=i(e[n],e[n+1]);t&&(a=e2(Array.isArray(t)?t[n]||S.Z:t,a)),r.push(a)}return r}(t,r,i),s=o.length,l=t=>{let n=0;if(s>1)for(;n<e.length-2&&!(t<e[n+1]);n++);let r=e3(e[n],e[n+1],t);return o[n](r)};return n?t=>l((0,eo.u)(e[0],e[a-1],t)):l}((n&&n.length===t.length?n:function(e){let t=[0];return function(e,t){let n=e[e.length-1];for(let r=1;r<=t;r++){let i=e3(0,t,r);e.push(e4(n,1,i))}}(t,e.length-1),t}(t)).map(t=>t*e),t,{ease:Array.isArray(i)?i:t.map(()=>i||eY).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(a.value=o(t),a.done=t>=e,a)}}let tc=e=>{let t=({timestamp:t})=>e(t);return{start:()=>I.Wi.update(t,!0),stop:()=>(0,I.Pn)(t),now:()=>I.w0.isProcessing?I.w0.timestamp:eL.now()}},td={decay:eG,inertia:eG,tween:tu,keyframes:tu,spring:eK},th=e=>e/100;class tf extends eU{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();let{onStop:e}=this.options;e&&e()};let{name:t,motionValue:n,element:r,keyframes:i}=this.options,a=(null==r?void 0:r.KeyframeResolver)||ea;this.resolver=new a(i,(e,t)=>this.onKeyframesResolved(e,t),t,n,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){let t,n;let{type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o,velocity:s=0}=this.options,l=eP(r)?r:td[r]||tu;l!==tu&&"number"!=typeof e[0]&&(t=e2(th,tl(e[0],e[1])),e=[0,100]);let u=l({...this.options,keyframes:e});"mirror"===o&&(n=l({...this.options,keyframes:[...e].reverse(),velocity:-s})),null===u.calculatedDuration&&(u.calculatedDuration=function(e){let t=0,n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}(u));let{calculatedDuration:c}=u,d=c+a;return{generator:u,mirroredGenerator:n,mapPercentToKeyframes:t,calculatedDuration:c,resolvedDuration:d,totalDuration:d*(i+1)-a}}onPostResolved(){let{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e,t=!1){let{resolved:n}=this;if(!n){let{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}let{finalKeyframe:r,generator:i,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:s,calculatedDuration:l,totalDuration:u,resolvedDuration:c}=n;if(null===this.startTime)return i.next(0);let{delay:d,repeat:h,repeatType:f,repeatDelay:p,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;let m=this.currentTime-d*(this.speed>=0?1:-1),b=this.speed>=0?m<0:m>u;this.currentTime=Math.max(m,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=u);let y=this.currentTime,v=i;if(h){let e=Math.min(this.currentTime,u)/c,t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,(t=Math.min(t,h+1))%2&&("reverse"===f?(n=1-n,p&&(n-=p/c)):"mirror"===f&&(v=a)),y=(0,eo.u)(0,1,n)*c}let x=b?{done:!1,value:s[0]}:v.next(y);o&&(x.value=o(x.value));let{done:w}=x;b||null===l||(w=this.speed>=0?this.currentTime>=u:this.currentTime<=0);let k=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return k&&void 0!==r&&(x.value=E(s,this.options,r)),g&&g(x.value),k&&this.finish(),x}get duration(){let{resolved:e}=this;return e?f(e.calculatedDuration):0}get time(){return f(this.currentTime)}set time(e){e=h(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=f(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;let{driver:e=tc,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),t&&t();let r=this.driver.now();null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=r):this.startTime=null!=n?n:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";let{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}let tp=new Set(["opacity","clipPath","filter","transform"]),tg=(e,t)=>{let n="",r=Math.max(Math.round(t/10),2);for(let t=0;t<r;t++)n+=e(e3(0,r-1,t))+", ";return`linear(${n.substring(0,n.length-2)})`};function tm(e){let t;return()=>(void 0===t&&(t=e()),t)}let tb={linearEasing:void 0},ty=function(e,t){let n=tm(e);return()=>{var e;return null!==(e=tb[t])&&void 0!==e?e:n()}}(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),tv=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,tx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tv([0,.65,.55,1]),circOut:tv([.55,0,1,.45]),backIn:tv([.31,.01,.66,-.59]),backOut:tv([.33,1.53,.69,.99])};function tw(e,t){e.timeline=t,e.onfinish=null}let tk=tm(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),tE={anticipate:_,backInOut:$,circInOut:P};class tI extends eU{constructor(e){super(e);let{name:t,motionValue:n,element:r,keyframes:i}=this.options;this.resolver=new eO(i,(e,t)=>this.onKeyframesResolved(e,t),t,n,r),this.resolver.scheduleResolve()}initPlayback(e,t){var n,r;let{duration:i=300,times:a,ease:o,type:s,motionValue:l,name:u,startTime:c}=this.options;if(!(null===(n=l.owner)||void 0===n?void 0:n.current))return!1;if("string"==typeof o&&ty()&&o in tE&&(o=tE[o]),eP((r=this.options).type)||"spring"===r.type||!function e(t){return!!("function"==typeof t&&ty()||!t||"string"==typeof t&&(t in tx||ty())||eJ(t)||Array.isArray(t)&&t.every(e))}(r.ease)){let{onComplete:t,onUpdate:n,motionValue:r,element:l,...u}=this.options,c=function(e,t){let n=new tf({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0}),r={done:!1,value:e[0]},i=[],a=0;for(;!r.done&&a<2e4;)i.push((r=n.sample(a)).value),a+=10;return{times:void 0,keyframes:i,duration:a-10,ease:"linear"}}(e,u);1===(e=c.keyframes).length&&(e[1]=e[0]),i=c.duration,a=c.times,o=c.ease,s="keyframes"}let d=function(e,t,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:s="easeInOut",times:l}={}){let u={[t]:n};l&&(u.offset=l);let c=function e(t,n){if(t)return"function"==typeof t&&ty()?tg(t,n):eJ(t)?tv(t):Array.isArray(t)?t.map(t=>e(t,n)||tx.easeOut):tx[t]}(s,i);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:a+1,direction:"reverse"===o?"alternate":"normal"})}(l.owner.current,u,e,{...this.options,duration:i,times:a,ease:o});return d.startTime=null!=c?c:this.calcStartTime(),this.pendingTimeline?(tw(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{let{onComplete:n}=this.options;l.set(E(e,this.options,t)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:i,times:a,type:s,ease:o,keyframes:e}}get duration(){let{resolved:e}=this;if(!e)return 0;let{duration:t}=e;return f(t)}get time(){let{resolved:e}=this;if(!e)return 0;let{animation:t}=e;return f(t.currentTime||0)}set time(e){let{resolved:t}=this;if(!t)return;let{animation:n}=t;n.currentTime=h(e)}get speed(){let{resolved:e}=this;if(!e)return 1;let{animation:t}=e;return t.playbackRate}set speed(e){let{resolved:t}=this;if(!t)return;let{animation:n}=t;n.playbackRate=e}get state(){let{resolved:e}=this;if(!e)return"idle";let{animation:t}=e;return t.playState}get startTime(){let{resolved:e}=this;if(!e)return null;let{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){let{resolved:t}=this;if(!t)return S.Z;let{animation:n}=t;tw(n,e)}else this.pendingTimeline=e;return S.Z}play(){if(this.isStopped)return;let{resolved:e}=this;if(!e)return;let{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){let{resolved:e}=this;if(!e)return;let{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();let{resolved:e}=this;if(!e)return;let{animation:t,keyframes:n,duration:r,type:i,ease:a,times:o}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){let{motionValue:e,onUpdate:t,onComplete:s,element:l,...u}=this.options,c=new tf({...u,keyframes:n,duration:r,type:i,ease:a,times:o,isGenerator:!0}),d=h(this.time);e.setWithVelocity(c.sample(d-10).value,c.sample(d).value,10)}let{onStop:s}=this.options;s&&s(),this.cancel()}complete(){let{resolved:e}=this;e&&e.animation.finish()}cancel(){let{resolved:e}=this;e&&e.animation.cancel()}static supports(e){let{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:a,type:o}=e;return tk()&&n&&tp.has(n)&&t&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate&&!r&&"mirror"!==i&&0!==a&&"inertia"!==o}}let tS=tm(()=>void 0!==window.ScrollTimeline);class tT{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,t){return Promise.all(this.animations).then(e).catch(t)}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){let n=this.animations.map(n=>tS()&&n.attachTimeline?n.attachTimeline(e):t(n));return()=>{n.forEach((e,t)=>{e&&e(),this.animations[t].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}let tC=(e,t,n,r={},i,a)=>o=>{let s=v(r,e)||{},l=s.delay||r.delay||0,{elapsed:u=0}=r;u-=h(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...s,delay:-u,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{o(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:a?void 0:i};!function({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:s,from:l,elapsed:u,...c}){return!!Object.keys(c).length}(s)&&(c={...c,...y(e,c)}),c.duration&&(c.duration=h(c.duration)),c.repeatDelay&&(c.repeatDelay=h(c.repeatDelay)),void 0!==c.from&&(c.keyframes[0]=c.from);let d=!1;if(!1!==c.type&&(0!==c.duration||c.repeatDelay)||(c.duration=0,0!==c.delay||(d=!0)),(w.current||x.c.skipAnimations)&&(d=!0,c.duration=0,c.delay=0),d&&!a&&void 0!==t.get()){let e=E(c.keyframes,s);if(void 0!==e)return I.Wi.update(()=>{c.onUpdate(e),c.onComplete()}),new tT([])}return!a&&tI.supports(c)?new tI(c):new tf(c)};var tN=n(4581);class tA{constructor(){this.subscriptions=[]}add(e){var t;return -1===(t=this.subscriptions).indexOf(e)&&t.push(e),()=>(function(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)})(this.subscriptions,e)}notify(e,t,n){let r=this.subscriptions.length;if(r){if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){let r=this.subscriptions[i];r&&r(e,t,n)}}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}let tR=e=>!isNaN(parseFloat(e)),tD={current:void 0};class t${constructor(e,t={}){this.version="11.11.17",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,t=!0)=>{let n=eL.now();this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=eL.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=tR(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new tA);let n=this.events[e].add(t);return"change"===e?()=>{n(),I.Wi.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return tD.current&&tD.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let t=eL.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;let n=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),n?1e3/n*e:0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function t_(e,t){return new t$(e,t)}var tF=n(61750),tO=n(23999);function tP(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:o=e.getDefaultTransition(),transitionEnd:s,...l}=t;r&&(o=r);let c=[],h=i&&e.animationState&&e.animationState.getState()[i];for(let t in l){let r=e.getValue(t,null!==(a=e.latestValues[t])&&void 0!==a?a:null),i=l[t];if(void 0===i||h&&function({protectedKeys:e,needsAnimating:t},n){let r=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,r}(h,t))continue;let s={delay:n,...v(o||{},t)},u=!1;if(window.MotionHandoffAnimation){let n=e.props[tF.M];if(n){let e=window.MotionHandoffAnimation(n,t,I.Wi);null!==e&&(s.startTime=e,u=!0)}}!function(e,t){let n=e.getValue("willChange");(0,tO.i)(n)&&n.add&&n.add(t)}(e,t),r.start(tC(t,r,i,e.shouldReduceMotion&&d.G.has(t)?{type:!1}:s,e,u));let f=r.animation;f&&c.push(f)}return s&&Promise.all(c).then(()=>{I.Wi.update(()=>{s&&function(e,t){let{transitionEnd:n={},transition:r={},...i}=u(e,t)||{};for(let t in i={...i,...n}){let n=(0,tN.Y)(i[t]);e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,t_(n))}}(e,s)})}),c}function tM(e,t,n={}){var r;let i=u(e,t,"exit"===n.type?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0),{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);let o=i?()=>Promise.all(tP(e,i,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(r=0)=>{let{delayChildren:i=0,staggerChildren:o,staggerDirection:s}=a;return function(e,t,n=0,r=0,i=1,a){let o=[],s=(e.variantChildren.size-1)*r,l=1===i?(e=0)=>e*r:(e=0)=>s-e*r;return Array.from(e.variantChildren).sort(tL).forEach((e,r)=>{e.notify("AnimationStart",t),o.push(tM(e,t,{...a,delay:n+l(r)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(o)}(e,t,i+r,o,s,n)}:()=>Promise.resolve(),{when:l}=a;if(!l)return Promise.all([o(),s(n.delay)]);{let[e,t]="beforeChildren"===l?[o,s]:[s,o];return e().then(()=>t())}}function tL(e,t){return e.sortNodePosition(t)}let tB=c.V.length,tU=[...c.e].reverse(),tz=c.e.length;function tV(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tW(){return{animate:tV(!0),whileInView:tV(),whileHover:tV(),whileTap:tV(),whileDrag:tV(),whileFocus:tV(),exit:tV()}}class tj{constructor(e){this.isMounted=!1,this.node=e}update(){}}class tH extends tj{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:n})=>(function(e,t,n={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t))r=Promise.all(t.map(t=>tM(e,t,n)));else if("string"==typeof t)r=tM(e,t,n);else{let i="function"==typeof t?u(e,t,n.custom):t;r=Promise.all(tP(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})})(e,t,n))),n=tW(),r=!0,l=t=>(n,r)=>{var i;let a=u(e,r,"exit"===t?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0);if(a){let{transition:e,transitionEnd:t,...r}=a;n={...n,...r,...t}}return n};function d(u){let{props:d}=e,h=function e(t){if(!t)return;if(!t.isControllingVariants){let n=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(n.initial=t.props.initial),n}let n={};for(let e=0;e<tB;e++){let r=c.V[e],i=t.props[r];((0,s.$)(i)||!1===i)&&(n[r]=i)}return n}(e.parent)||{},f=[],p=new Set,g={},m=1/0;for(let t=0;t<tz;t++){var b;let c=tU[t],y=n[c],v=void 0!==d[c]?d[c]:h[c],x=(0,s.$)(v),w=c===u?y.isActive:null;!1===w&&(m=t);let k=v===h[c]&&v!==d[c]&&x;if(k&&r&&e.manuallyAnimateOnMount&&(k=!1),y.protectedKeys={...g},!y.isActive&&null===w||!v&&!y.prevProp||(0,i.H)(v)||"boolean"==typeof v)continue;let E=(b=y.prevProp,"string"==typeof v?v!==b:!!Array.isArray(v)&&!o(v,b)),I=E||c===u&&y.isActive&&!k&&x||t>m&&x,S=!1,T=Array.isArray(v)?v:[v],C=T.reduce(l(c),{});!1===w&&(C={});let{prevResolvedValues:N={}}=y,A={...N,...C},R=t=>{I=!0,p.has(t)&&(S=!0,p.delete(t)),y.needsAnimating[t]=!0;let n=e.getValue(t);n&&(n.liveStyle=!1)};for(let e in A){let t=C[e],n=N[e];if(!g.hasOwnProperty(e))((0,a.C)(t)&&(0,a.C)(n)?o(t,n):t===n)?void 0!==t&&p.has(e)?R(e):y.protectedKeys[e]=!0:null!=t?R(e):p.add(e)}y.prevProp=v,y.prevResolvedValues=C,y.isActive&&(g={...g,...C}),r&&e.blockInitialAnimation&&(I=!1);let D=!(k&&E)||S;I&&D&&f.push(...T.map(e=>({animation:e,options:{type:c}})))}if(p.size){let t={};p.forEach(n=>{let r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=null!=r?r:null}),f.push({animation:t})}let y=!!f.length;return r&&(!1===d.initial||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(f):Promise.resolve()}return{animateChanges:d,setActive:function(t,r){var i;if(n[t].isActive===r)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;let a=d(t);for(let e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=tW(),r=!0}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();(0,i.H)(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}let tK=0;class tG extends tj{constructor(){super(...arguments),this.id=tK++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;let r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){let{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}function tX(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}let tq=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function tY(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}let tQ=e=>t=>tq(t)&&e(t,tY(t));function tJ(e){let t=null;return()=>null===t&&(t=e,()=>{t=null})}let tZ=tJ("dragHorizontal"),t0=tJ("dragVertical");function t1(){let e=function(e){let t=!1;if("y"===e)t=t0();else if("x"===e)t=tZ();else{let e=tZ(),n=t0();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}(!0);return!e||(e(),!1)}function t2(e,t){var n,r,i;let a=t?"pointerenter":"pointerleave",o=t?"onHoverStart":"onHoverEnd";return n=e.current,r=(n,r)=>{if("touch"===n.pointerType||t1())return;let i=e.getProps();e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",t);let a=i[o];a&&I.Wi.postRender(()=>a(n,r))},i={passive:!e.getProps()[o]},tX(n,a,tQ(r),i)}class t3 extends tj{mount(){this.unmount=e2(t2(this.node,!0),t2(this.node,!1))}unmount(){}}class t4 extends tj{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=e2(tX(this.node.current,"focus",()=>this.onFocus()),tX(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}let t5=(e,t)=>!!t&&(e===t||t5(e,t.parentElement));function t8(e,t){if(!t)return;let n=new PointerEvent("pointer"+e);t(n,tY(n))}class t6 extends tj{constructor(){super(...arguments),this.removeStartListeners=S.Z,this.removeEndListeners=S.Z,this.removeAccessibleListeners=S.Z,this.startPointerPress=(e,t)=>{var n,r,i,a,o,s,l,u;if(this.isPressing)return;this.removeEndListeners();let c=this.node.getProps(),d=(n=window,r="pointerup",i=(e,t)=>{if(!this.checkPressEnd())return;let{onTap:n,onTapCancel:r,globalTapTarget:i}=this.node.getProps(),a=i||t5(this.node.current,e.target)?n:r;a&&I.Wi.update(()=>a(e,t))},a={passive:!(c.onTap||c.onPointerUp)},tX(n,r,tQ(i),a)),h=(o=window,s="pointercancel",l=(e,t)=>this.cancelPress(e,t),u={passive:!(c.onTapCancel||c.onPointerCancel)},tX(o,s,tQ(l),u));this.removeEndListeners=e2(d,h),this.startPress(e,t)},this.startAccessiblePress=()=>{let e=tX(this.node.current,"keydown",e=>{"Enter"!==e.key||this.isPressing||(this.removeEndListeners(),this.removeEndListeners=tX(this.node.current,"keyup",e=>{"Enter"===e.key&&this.checkPressEnd()&&t8("up",(e,t)=>{let{onTap:n}=this.node.getProps();n&&I.Wi.postRender(()=>n(e,t))})}),t8("down",(e,t)=>{this.startPress(e,t)}))}),t=tX(this.node.current,"blur",()=>{this.isPressing&&t8("cancel",(e,t)=>this.cancelPress(e,t))});this.removeAccessibleListeners=e2(e,t)}}startPress(e,t){this.isPressing=!0;let{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&I.Wi.postRender(()=>n(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!t1()}cancelPress(e,t){if(!this.checkPressEnd())return;let{onTapCancel:n}=this.node.getProps();n&&I.Wi.postRender(()=>n(e,t))}mount(){var e,t,n,r;let i=this.node.getProps(),a=(e=i.globalTapTarget?window:this.node.current,t="pointerdown",n=this.startPointerPress,r={passive:!(i.onTapStart||i.onPointerStart)},tX(e,t,tQ(n),r)),o=tX(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=e2(a,o)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}let t7=new WeakMap,t9=new WeakMap,ne=e=>{let t=t7.get(e.target);t&&t(e)},nt=e=>{e.forEach(ne)},nn={some:0,all:1};class nr extends tj{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:nn[r]};return function(e,t,n){let r=function({root:e,...t}){let n=e||document;t9.has(n)||t9.set(n,{});let r=t9.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(nt,{root:e,...t})),r[i]}(t);return t7.set(e,n),r.observe(e),()=>{t7.delete(e),r.unobserve(e)}}(this.node.current,a,e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,i&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),a=t?n:r;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}var ni=n(2265),na=n(4469),no=n(67971),ns=n(1125),nl=n(44563);let nu={current:null},nc={current:!1};var nd=n(17743),nh=n(35938);let nf=new WeakMap,np=[...J,eb,eT],ng=e=>np.find(Q(e)),nm=()=>({min:0,max:0}),nb=()=>({x:nm(),y:nm()}),ny=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class nv{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ea,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=eL.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,I.Wi.render(this.render,!1,!0))};let{latestValues:s,renderState:l}=a;this.latestValues=s,this.baseTarget={...s},this.initialValues=t.initial?{...s}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=(0,nd.G)(t),this.isVariantNode=(0,nd.M)(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);let{willChange:u,...c}=this.scrapeMotionValuesFromProps(t,{},this);for(let e in c){let t=c[e];void 0!==s[e]&&(0,tO.i)(t)&&t.set(s[e],!1)}}mount(e){this.current=e,nf.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),nc.current||function(){if(nc.current=!0,nl.j){if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>nu.current=e.matches;e.addListener(t),t()}else nu.current=!1}}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||nu.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in nf.delete(this.current),this.projection&&this.projection.unmount(),(0,I.Pn)(this.notifyUpdate),(0,I.Pn)(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){let n;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let r=d.G.has(e),i=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&I.Wi.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),a(),n&&n(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in nh.featureDefinitions){let t=nh.featureDefinitions[e];if(!t)continue;let{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nb()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<ny.length;t++){let n=ny[t];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);let r=e["on"+n];r&&(this.propEventSubscriptions[n]=this.on(n,r))}this.prevMotionValues=function(e,t,n){for(let r in t){let i=t[r],a=n[r];if((0,tO.i)(i))e.addValue(r,i);else if((0,tO.i)(a))e.addValue(r,t_(i,{owner:e}));else if(a!==i){if(e.hasValue(r)){let t=e.getValue(r);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{let t=e.getStaticValue(r);e.addValue(r,t_(void 0!==t?t:i,{owner:e}))}}}for(let r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=t_(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return null!=r&&("string"==typeof r&&(B(r)||M(r))?r=parseFloat(r):!ng(r)&&eT.test(t)&&(r=e_(e,t)),this.setBaseTarget(e,(0,tO.i)(r)?r.get():r)),(0,tO.i)(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;let n;let{initial:r}=this.props;if("string"==typeof r||"object"==typeof r){let i=(0,l.o)(this.props,r,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);i&&(n=i[e])}if(r&&void 0!==n)return n;let i=this.getBaseTargetFromProps(this.props,e);return void 0===i||(0,tO.i)(i)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new tA),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class nx extends nv{constructor(){super(...arguments),this.KeyframeResolver=eO}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}}class nw extends nx{constructor(){super(...arguments),this.type="html",this.renderInstance=ns.N}readValueFromInstance(e,t){if(d.G.has(t)){let e=e$(t);return e&&e.default||0}{let n=window.getComputedStyle(e),r=((0,U.f)(t)?n.getPropertyValue(t):n[t])||0;return"string"==typeof r?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return function({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}(function(e,t){if(!t)return e;let n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}build(e,t,n){(0,na.r)(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return(0,no.U)(e,t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;(0,tO.i)(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}var nk=n(67098),nE=n(67402),nI=n(17444),nS=n(16582),nT=n(33390),nC=n(37380);class nN extends nx{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=nb}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(d.G.has(t)){let e=e$(t);return e&&e.default||0}return t=nS.s.has(t)?t:(0,nI.D)(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return(0,nk.U)(e,t,n)}build(e,t,n){(0,nE.i)(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,r){(0,nT.K)(e,t,n,r)}mount(e){this.isSVGTag=(0,nC.a)(e.tagName),super.mount(e)}}var nA=n(64044);let nR={renderer:(e,t)=>(0,nA.q)(e)?new nN(t):new nw(t,{allowProjection:e!==ni.Fragment}),animation:{Feature:tH},exit:{Feature:tG},inView:{Feature:nr},tap:{Feature:t6},focus:{Feature:t4},hover:{Feature:t3}}},17444:function(e,t,n){"use strict";n.d(t,{D:function(){return r}});let r=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase()},37249:function(e,t,n){"use strict";n.d(t,{f:function(){return i},t:function(){return o}});let r=e=>t=>"string"==typeof t&&t.startsWith(e),i=r("--"),a=r("var(--"),o=e=>!!a(e)&&s.test(e.split("/*")[0].trim()),s=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu},64044:function(e,t,n){"use strict";n.d(t,{q:function(){return i}});let r=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function i(e){if("string"!=typeof e||e.includes("-"));else if(r.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}},66204:function(e,t,n){"use strict";n.d(t,{j:function(){return l}});var r=n(74305),i=n(27492);let a={borderWidth:i.px,borderTopWidth:i.px,borderRightWidth:i.px,borderBottomWidth:i.px,borderLeftWidth:i.px,borderRadius:i.px,radius:i.px,borderTopLeftRadius:i.px,borderTopRightRadius:i.px,borderBottomRightRadius:i.px,borderBottomLeftRadius:i.px,width:i.px,maxWidth:i.px,height:i.px,maxHeight:i.px,top:i.px,right:i.px,bottom:i.px,left:i.px,padding:i.px,paddingTop:i.px,paddingRight:i.px,paddingBottom:i.px,paddingLeft:i.px,margin:i.px,marginTop:i.px,marginRight:i.px,marginBottom:i.px,marginLeft:i.px,backgroundPositionX:i.px,backgroundPositionY:i.px},o={rotate:i.RW,rotateX:i.RW,rotateY:i.RW,rotateZ:i.RW,scale:r.bA,scaleX:r.bA,scaleY:r.bA,scaleZ:r.bA,skew:i.RW,skewX:i.RW,skewY:i.RW,distance:i.px,translateX:i.px,translateY:i.px,translateZ:i.px,x:i.px,y:i.px,z:i.px,perspective:i.px,transformPerspective:i.px,opacity:r.Fq,originX:i.$C,originY:i.$C,originZ:i.px},s={...r.Rx,transform:Math.round},l={...a,...o,zIndex:s,size:i.px,fillOpacity:r.Fq,strokeOpacity:r.Fq,numOctaves:s}},4469:function(e,t,n){"use strict";n.d(t,{r:function(){return u}});var r=n(8834);let i=(e,t)=>t&&"number"==typeof e?t.transform(e):e;var a=n(66204);let o={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},s=r._.length;var l=n(37249);function u(e,t,n){let{style:u,vars:c,transformOrigin:d}=e,h=!1,f=!1;for(let e in t){let n=t[e];if(r.G.has(e)){h=!0;continue}if((0,l.f)(e)){c[e]=n;continue}{let t=i(n,a.j[e]);e.startsWith("origin")?(f=!0,d[e]=t):u[e]=t}}if(!t.transform&&(h||n?u.transform=function(e,t,n){let l="",u=!0;for(let c=0;c<s;c++){let s=r._[c],d=e[s];if(void 0===d)continue;let h=!0;if(!(h="number"==typeof d?d===(s.startsWith("scale")?1:0):0===parseFloat(d))||n){let e=i(d,a.j[s]);if(!h){u=!1;let t=o[s]||s;l+=`${t}(${e}) `}n&&(t[s]=e)}}return l=l.trim(),n?l=n(t,u?"":l):u&&(l="none"),l}(t,e.transform,n):u.transform&&(u.transform="none")),f){let{originX:e="50%",originY:t="50%",originZ:n=0}=d;u.transformOrigin=`${e} ${t} ${n}`}}},1125:function(e,t,n){"use strict";function r(e,{style:t,vars:n},r,i){for(let a in Object.assign(e.style,t,i&&i.getProjectionStyles(r)),n)e.style.setProperty(a,n[a])}n.d(t,{N:function(){return r}})},67971:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var r=n(82786),i=n(23999);function a(e,t,n){var a;let{style:o}=e,s={};for(let l in o)((0,i.i)(o[l])||t.style&&(0,i.i)(t.style[l])||(0,r.j)(l,e)||(null===(a=null==n?void 0:n.getValue(l))||void 0===a?void 0:a.liveStyle)!==void 0)&&(s[l]=o[l]);return s}},8834:function(e,t,n){"use strict";n.d(t,{G:function(){return i},_:function(){return r}});let r=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],i=new Set(r)},67402:function(e,t,n){"use strict";n.d(t,{i:function(){return l}});var r=n(4469),i=n(27492);function a(e,t,n){return"string"==typeof e?e:i.px.transform(t+n*e)}let o={offset:"stroke-dashoffset",array:"stroke-dasharray"},s={offset:"strokeDashoffset",array:"strokeDasharray"};function l(e,{attrX:t,attrY:n,attrScale:l,originX:u,originY:c,pathLength:d,pathSpacing:h=1,pathOffset:f=0,...p},g,m){if((0,r.r)(e,p,m),g){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:b,style:y,dimensions:v}=e;b.transform&&(v&&(y.transform=b.transform),delete b.transform),v&&(void 0!==u||void 0!==c||y.transform)&&(y.transformOrigin=function(e,t,n){let r=a(t,e.x,e.width),i=a(n,e.y,e.height);return`${r} ${i}`}(v,void 0!==u?u:.5,void 0!==c?c:.5)),void 0!==t&&(b.x=t),void 0!==n&&(b.y=n),void 0!==l&&(b.scale=l),void 0!==d&&function(e,t,n=1,r=0,a=!0){e.pathLength=1;let l=a?o:s;e[l.offset]=i.px.transform(-r);let u=i.px.transform(t),c=i.px.transform(n);e[l.array]=`${u} ${c}`}(b,d,h,f,!1)}},16582:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});let r=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"])},37380:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});let r=e=>"string"==typeof e&&"svg"===e.toLowerCase()},33390:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var r=n(17444),i=n(1125),a=n(16582);function o(e,t,n,o){for(let n in(0,i.N)(e,t,void 0,o),t.attrs)e.setAttribute(a.s.has(n)?n:(0,r.D)(n),t.attrs[n])}},67098:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(23999),i=n(67971),a=n(8834);function o(e,t,n){let o=(0,i.U)(e,t,n);for(let n in e)((0,r.i)(e[n])||(0,r.i)(t[n]))&&(o[-1!==a._.indexOf(n)?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n]=e[n]);return o}},17743:function(e,t,n){"use strict";n.d(t,{G:function(){return o},M:function(){return s}});var r=n(20569),i=n(74115),a=n(72589);function o(e){return(0,r.H)(e.animate)||a.V.some(t=>(0,i.$)(e[t]))}function s(e){return!!(o(e)||e.variants)}},74115:function(e,t,n){"use strict";function r(e){return"string"==typeof e||Array.isArray(e)}n.d(t,{$:function(){return r}})},31297:function(e,t,n){"use strict";function r(e){let t=[{},{}];return null==e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function i(e,t,n,i){if("function"==typeof t){let[a,o]=r(i);t=t(void 0!==n?n:e.custom,a,o)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[a,o]=r(i);t=t(void 0!==n?n:e.custom,a,o)}return t}n.d(t,{o:function(){return i}})},72589:function(e,t,n){"use strict";n.d(t,{V:function(){return i},e:function(){return r}});let r=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],i=["initial",...r]},24118:function(e,t,n){"use strict";n.d(t,{c:function(){return r}});let r={skipAnimations:!1,useManualTiming:!1}},59111:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});let r=(e,t,n)=>n>t?t:n<e?e:n},13223:function(e,t,n){"use strict";n.d(t,{K:function(){return i},k:function(){return a}});var r=n(44439);let i=r.Z,a=r.Z},44563:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});let r="undefined"!=typeof window},44439:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=e=>e},4581:function(e,t,n){"use strict";n.d(t,{Y:function(){return a},p:function(){return i}});var r=n(44944);let i=e=>!!(e&&"object"==typeof e&&e.mix&&e.toValue),a=e=>(0,r.C)(e)?e[e.length-1]||0:e},53576:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(2265);function i(e){let t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}},11534:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});var r=n(2265);let i=n(44563).j?r.useLayoutEffect:r.useEffect},74305:function(e,t,n){"use strict";n.d(t,{Fq:function(){return a},Rx:function(){return i},bA:function(){return o}});var r=n(59111);let i={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},a={...i,transform:e=>(0,r.u)(0,1,e)},o={...i,default:1}},27492:function(e,t,n){"use strict";n.d(t,{$C:function(){return u},RW:function(){return i},aQ:function(){return a},px:function(){return o},vh:function(){return s},vw:function(){return l}});let r=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),i=r("deg"),a=r("%"),o=r("px"),s=r("vh"),l=r("vw"),u={...a,parse:e=>a.parse(e)/100,transform:e=>a.transform(100*e)}},23999:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});let r=e=>!!(e&&e.getVelocity)},42625:function(e,t,n){"use strict";function r(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}n.d(t,{J:function(){return r}})},95691:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var r=n(42625);function i(e,t){var n=(0,r.J)(e,t,"get");return n.get?n.get.call(e):n.value}},25134:function(e,t,n){"use strict";function r(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}n.d(t,{_:function(){return r}})},11455:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var r=n(42625);function i(e,t,n){var i=(0,r.J)(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,i,n),n}}}]);